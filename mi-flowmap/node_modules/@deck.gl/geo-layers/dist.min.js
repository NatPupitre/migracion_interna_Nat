"use strict";var deck=(()=>{var XI=Object.create;var So=Object.defineProperty;var KI=Object.getOwnPropertyDescriptor;var YI=Object.getOwnPropertyNames;var QI=Object.getPrototypeOf,$I=Object.prototype.hasOwnProperty;var z0=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Z=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),$t=(e,r)=>{for(var t in r)So(e,t,{get:r[t],enumerable:!0})},Eo=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of YI(r))!$I.call(e,a)&&a!==t&&So(e,a,{get:()=>r[a],enumerable:!(n=KI(r,a))||n.enumerable});return e},un=(e,r,t)=>(Eo(e,r,"default"),t&&Eo(t,r,"default")),m=(e,r,t)=>(t=e!=null?XI(QI(e)):{},Eo(r||!e||!e.__esModule?So(t,"default",{value:e,enumerable:!0}):t,e)),ZI=e=>Eo(So({},"__esModule",{value:!0}),e);var Zt=Z((A7,W0)=>{W0.exports=globalThis.deck});var X0=Z((T7,J0)=>{function eR(e){if(Array.isArray(e))return e}J0.exports=eR});var Y0=Z((M7,K0)=>{function tR(e,r){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]"){var t=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(t.push(o.value),!(r&&t.length===r));n=!0);}catch(u){a=!0,i=u}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return t}}K0.exports=tR});var $0=Z((E7,Q0)=>{function rR(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}Q0.exports=rR});var ve=Z((S7,Z0)=>{var nR=X0(),aR=Y0(),iR=$0();function sR(e,r){return nR(e)||aR(e,r)||iR()}Z0.exports=sR});var Y=Z((w7,ty)=>{function ey(e,r,t,n,a,i,s){try{var o=e[i](s),u=o.value}catch(f){t(f);return}o.done?r(u):Promise.resolve(u).then(n,a)}function oR(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function s(u){ey(i,n,a,s,o,"next",u)}function o(u){ey(i,n,a,s,o,"throw",u)}s(void 0)})}}ty.exports=oR});var z=Z((C7,ry)=>{function uR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}ry.exports=uR});var q=Z((O7,ay)=>{function ny(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fR(e,r,t){return r&&ny(e.prototype,r),t&&ny(e,t),e}ay.exports=fR});var vt=Z((B7,iy)=>{function lR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}iy.exports=lR});var Ql=Z((P7,Yl)=>{function Kl(e,r){return Yl.exports=Kl=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},Kl(e,r)}Yl.exports=Kl});var Ce=Z((I7,sy)=>{var cR=Ql();function hR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&cR(e,r)}sy.exports=hR});var De=Z((R7,Co)=>{function wo(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Co.exports=wo=function(t){return typeof t}:Co.exports=wo=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wo(e)}Co.exports=wo});var Oe=Z((L7,oy)=>{var dR=De(),pR=vt();function mR(e,r){return r&&(dR(r)==="object"||typeof r=="function")?r:pR(e)}oy.exports=mR});var Me=Z((F7,Zl)=>{function $l(e){return Zl.exports=$l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$l(e)}Zl.exports=$l});var J=Z((k7,uy)=>{function vR(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}uy.exports=vR});var ly=Z((D7,ec)=>{var fy=function(e){"use strict";var r=Object.prototype,t=r.hasOwnProperty,n,a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function u(B,P,R,V){var G=P&&P.prototype instanceof v?P:v,W=Object.create(G.prototype),$=new F(V||[]);return W._invoke=w(B,R,$),W}e.wrap=u;function f(B,P,R){try{return{type:"normal",arg:B.call(P,R)}}catch(V){return{type:"throw",arg:V}}}var l="suspendedStart",c="suspendedYield",h="executing",d="completed",p={};function v(){}function g(){}function y(){}var _={};_[i]=function(){return this};var T=Object.getPrototypeOf,x=T&&T(T(D([])));x&&x!==r&&t.call(x,i)&&(_=x);var E=y.prototype=v.prototype=Object.create(_);g.prototype=E.constructor=y,y.constructor=g,y[o]=g.displayName="GeneratorFunction";function C(B){["next","throw","return"].forEach(function(P){B[P]=function(R){return this._invoke(P,R)}})}e.isGeneratorFunction=function(B){var P=typeof B=="function"&&B.constructor;return P?P===g||(P.displayName||P.name)==="GeneratorFunction":!1},e.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,y):(B.__proto__=y,o in B||(B[o]="GeneratorFunction")),B.prototype=Object.create(E),B},e.awrap=function(B){return{__await:B}};function L(B){function P(G,W,$,oe){var He=f(B[G],B,W);if(He.type==="throw")oe(He.arg);else{var Re=He.arg,mt=Re.value;return mt&&typeof mt=="object"&&t.call(mt,"__await")?Promise.resolve(mt.__await).then(function(Ke){P("next",Ke,$,oe)},function(Ke){P("throw",Ke,$,oe)}):Promise.resolve(mt).then(function(Ke){Re.value=Ke,$(Re)},function(Ke){return P("throw",Ke,$,oe)})}}var R;function V(G,W){function $(){return new Promise(function(oe,He){P(G,W,oe,He)})}return R=R?R.then($,$):$()}this._invoke=V}C(L.prototype),L.prototype[s]=function(){return this},e.AsyncIterator=L,e.async=function(B,P,R,V){var G=new L(u(B,P,R,V));return e.isGeneratorFunction(P)?G:G.next().then(function(W){return W.done?W.value:G.next()})};function w(B,P,R){var V=l;return function(W,$){if(V===h)throw new Error("Generator is already running");if(V===d){if(W==="throw")throw $;return N()}for(R.method=W,R.arg=$;;){var oe=R.delegate;if(oe){var He=S(oe,R);if(He){if(He===p)continue;return He}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(V===l)throw V=d,R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);V=h;var Re=f(B,P,R);if(Re.type==="normal"){if(V=R.done?d:c,Re.arg===p)continue;return{value:Re.arg,done:R.done}}else Re.type==="throw"&&(V=d,R.method="throw",R.arg=Re.arg)}}}function S(B,P){var R=B.iterator[P.method];if(R===n){if(P.delegate=null,P.method==="throw"){if(B.iterator.return&&(P.method="return",P.arg=n,S(B,P),P.method==="throw"))return p;P.method="throw",P.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var V=f(R,B.iterator,P.arg);if(V.type==="throw")return P.method="throw",P.arg=V.arg,P.delegate=null,p;var G=V.arg;if(!G)return P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,p;if(G.done)P[B.resultName]=G.value,P.next=B.nextLoc,P.method!=="return"&&(P.method="next",P.arg=n);else return G;return P.delegate=null,p}C(E),E[o]="Generator",E[i]=function(){return this},E.toString=function(){return"[object Generator]"};function A(B){var P={tryLoc:B[0]};1 in B&&(P.catchLoc=B[1]),2 in B&&(P.finallyLoc=B[2],P.afterLoc=B[3]),this.tryEntries.push(P)}function I(B){var P=B.completion||{};P.type="normal",delete P.arg,B.completion=P}function F(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(A,this),this.reset(!0)}e.keys=function(B){var P=[];for(var R in B)P.push(R);return P.reverse(),function V(){for(;P.length;){var G=P.pop();if(G in B)return V.value=G,V.done=!1,V}return V.done=!0,V}};function D(B){if(B){var P=B[i];if(P)return P.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var R=-1,V=function G(){for(;++R<B.length;)if(t.call(B,R))return G.value=B[R],G.done=!1,G;return G.value=n,G.done=!0,G};return V.next=V}}return{next:N}}e.values=D;function N(){return{value:n,done:!0}}return F.prototype={constructor:F,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(I),!B)for(var P in this)P.charAt(0)==="t"&&t.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=n)},stop:function(){this.done=!0;var B=this.tryEntries[0],P=B.completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var P=this;function R(He,Re){return W.type="throw",W.arg=B,P.next=He,Re&&(P.method="next",P.arg=n),!!Re}for(var V=this.tryEntries.length-1;V>=0;--V){var G=this.tryEntries[V],W=G.completion;if(G.tryLoc==="root")return R("end");if(G.tryLoc<=this.prev){var $=t.call(G,"catchLoc"),oe=t.call(G,"finallyLoc");if($&&oe){if(this.prev<G.catchLoc)return R(G.catchLoc,!0);if(this.prev<G.finallyLoc)return R(G.finallyLoc)}else if($){if(this.prev<G.catchLoc)return R(G.catchLoc,!0)}else if(oe){if(this.prev<G.finallyLoc)return R(G.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(B,P){for(var R=this.tryEntries.length-1;R>=0;--R){var V=this.tryEntries[R];if(V.tryLoc<=this.prev&&t.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var G=V;break}}G&&(B==="break"||B==="continue")&&G.tryLoc<=P&&P<=G.finallyLoc&&(G=null);var W=G?G.completion:{};return W.type=B,W.arg=P,G?(this.method="next",this.next=G.finallyLoc,p):this.complete(W)},complete:function(B,P){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&P&&(this.next=P),p},finish:function(B){for(var P=this.tryEntries.length-1;P>=0;--P){var R=this.tryEntries[P];if(R.finallyLoc===B)return this.complete(R.completion,R.afterLoc),I(R),p}},catch:function(B){for(var P=this.tryEntries.length-1;P>=0;--P){var R=this.tryEntries[P];if(R.tryLoc===B){var V=R.completion;if(V.type==="throw"){var G=V.arg;I(R)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(B,P,R){return this.delegate={iterator:D(B),resultName:P,nextLoc:R},this.method==="next"&&(this.arg=n),p}},e}(typeof ec=="object"?ec.exports:{});try{regeneratorRuntime=fy}catch{Function("r","regeneratorRuntime = r")(fy)}});var K=Z((N7,cy)=>{cy.exports=ly()});var er=Z((G7,hy)=>{hy.exports=globalThis.deck});var tc=Z(Pr=>{"use strict";var dy=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",gR=dy+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",py="["+dy+"]["+gR+"]*",yR=new RegExp("^"+py+"$"),bR=function(r,t){for(var n=[],a=t.exec(r);a;){var i=[];i.startIndex=t.lastIndex-a[0].length;for(var s=a.length,o=0;o<s;o++)i.push(a[o]);n.push(i),a=t.exec(r)}return n},_R=function(r){var t=yR.exec(r);return!(t===null||typeof t>"u")};Pr.isExist=function(e){return typeof e<"u"};Pr.isEmptyObject=function(e){return Object.keys(e).length===0};Pr.merge=function(e,r,t){if(r)for(var n=Object.keys(r),a=n.length,i=0;i<a;i++)t==="strict"?e[n[i]]=[r[n[i]]]:e[n[i]]=r[n[i]]};Pr.getValue=function(e){return Pr.isExist(e)?e:""};Pr.isName=_R;Pr.getAllMatches=bR;Pr.nameRegexp=py});var nc=Z(by=>{"use strict";var rc=tc(),AR={allowBooleanAttributes:!1,unpairedTags:[]};by.validate=function(e,r){r=Object.assign({},AR,r);var t=[],n=!1,a=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(var i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=vy(e,i),i.err)return i}else if(e[i]==="<"){var s=i;if(i++,e[i]==="!"){i=gy(e,i);continue}else{var o=!1;e[i]==="/"&&(o=!0,i++);for(var u="";i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)u+=e[i];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),i--),!OR(u)){var f=void 0;return u.trim().length===0?f="Invalid space after '<'.":f="Tag '"+u+"' is an invalid name.",Je("InvalidTag",f,St(e,i))}var l=MR(e,i);if(l===!1)return Je("InvalidAttr","Attributes for '"+u+"' have open quote.",St(e,i));var c=l.value;if(i=l.index,c[c.length-1]==="/"){var h=i-c.length;c=c.substring(0,c.length-1);var d=yy(c,r);if(d===!0)n=!0;else return Je(d.err.code,d.err.msg,St(e,h+d.err.line))}else if(o)if(l.tagClosed){if(c.trim().length>0)return Je("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",St(e,s));var p=t.pop();if(u!==p.tagName){var v=St(e,p.tagStartPos);return Je("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+v.line+", col "+v.col+") instead of closing tag '"+u+"'.",St(e,s))}t.length==0&&(a=!0)}else return Je("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",St(e,i));else{var g=yy(c,r);if(g!==!0)return Je(g.err.code,g.err.msg,St(e,i-c.length+g.err.line));if(a===!0)return Je("InvalidXml","Multiple possible root nodes found.",St(e,i));r.unpairedTags.indexOf(u)!==-1||t.push({tagName:u,tagStartPos:s}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=gy(e,i);continue}else if(e[i+1]==="?"){if(i=vy(e,++i),i.err)return i}else break;else if(e[i]==="&"){var y=wR(e,i);if(y==-1)return Je("InvalidChar","char '&' is not expected.",St(e,i));i=y}else if(a===!0&&!my(e[i]))return Je("InvalidXml","Extra text at the end",St(e,i));e[i]==="<"&&i--}}else{if(my(e[i]))continue;return Je("InvalidChar","char '"+e[i]+"' is not expected.",St(e,i))}if(n){if(t.length==1)return Je("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",St(e,t[0].tagStartPos));if(t.length>0)return Je("InvalidXml","Invalid '"+JSON.stringify(t.map(function(_){return _.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Je("InvalidXml","Start tag expected.",1);return!0};function my(e){return e===" "||e==="	"||e===`
`||e==="\r"}function vy(e,r){for(var t=r;r<e.length;r++)if(e[r]=="?"||e[r]==" "){var n=e.substr(t,r-t);if(r>5&&n==="xml")return Je("InvalidXml","XML declaration allowed only at the start of the document.",St(e,r));if(e[r]=="?"&&e[r+1]==">"){r++;break}else continue}return r}function gy(e,r){if(e.length>r+5&&e[r+1]==="-"&&e[r+2]==="-"){for(r+=3;r<e.length;r++)if(e[r]==="-"&&e[r+1]==="-"&&e[r+2]===">"){r+=2;break}}else if(e.length>r+8&&e[r+1]==="D"&&e[r+2]==="O"&&e[r+3]==="C"&&e[r+4]==="T"&&e[r+5]==="Y"&&e[r+6]==="P"&&e[r+7]==="E"){var t=1;for(r+=8;r<e.length;r++)if(e[r]==="<")t++;else if(e[r]===">"&&(t--,t===0))break}else if(e.length>r+9&&e[r+1]==="["&&e[r+2]==="C"&&e[r+3]==="D"&&e[r+4]==="A"&&e[r+5]==="T"&&e[r+6]==="A"&&e[r+7]==="["){for(r+=8;r<e.length;r++)if(e[r]==="]"&&e[r+1]==="]"&&e[r+2]===">"){r+=2;break}}return r}var xR='"',TR="'";function MR(e,r){for(var t="",n="",a=!1;r<e.length;r++){if(e[r]===xR||e[r]===TR)n===""?n=e[r]:n!==e[r]||(n="");else if(e[r]===">"&&n===""){a=!0;break}t+=e[r]}return n!==""?!1:{value:t,index:r,tagClosed:a}}var ER=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function yy(e,r){for(var t=rc.getAllMatches(e,ER),n={},a=0;a<t.length;a++){if(t[a][1].length===0)return Je("InvalidAttr","Attribute '"+t[a][2]+"' has no space in starting.",Ni(t[a]));if(t[a][3]!==void 0&&t[a][4]===void 0)return Je("InvalidAttr","Attribute '"+t[a][2]+"' is without value.",Ni(t[a]));if(t[a][3]===void 0&&!r.allowBooleanAttributes)return Je("InvalidAttr","boolean attribute '"+t[a][2]+"' is not allowed.",Ni(t[a]));var i=t[a][2];if(!CR(i))return Je("InvalidAttr","Attribute '"+i+"' is an invalid name.",Ni(t[a]));if(!n.hasOwnProperty(i))n[i]=1;else return Je("InvalidAttr","Attribute '"+i+"' is repeated.",Ni(t[a]))}return!0}function SR(e,r){var t=/\d/;for(e[r]==="x"&&(r++,t=/[\da-fA-F]/);r<e.length;r++){if(e[r]===";")return r;if(!e[r].match(t))break}return-1}function wR(e,r){if(r++,e[r]===";")return-1;if(e[r]==="#")return r++,SR(e,r);for(var t=0;r<e.length;r++,t++)if(!(e[r].match(/\w/)&&t<20)){if(e[r]===";")break;return-1}return r}function Je(e,r,t){return{err:{code:e,msg:r,line:t.line||t,col:t.col}}}function CR(e){return rc.isName(e)}function OR(e){return rc.isName(e)}function St(e,r){var t=e.substring(0,r).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function Ni(e){return e.startIndex+e[1].length}});var Ay=Z(ac=>{var _y={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,t){return t},attributeValueProcessor:function(r,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},BR=function(r){return Object.assign({},_y,r)};ac.buildOptions=BR;ac.defaultOptions=_y});var Ey=Z((z7,My)=>{"use strict";var Gi=m(J()),xy=m(z()),Ty=m(q()),PR=function(){function e(r){(0,xy.default)(this,e),this.tagname=r,this.child=[],this[":@"]={}}return(0,Ty.default)(e,[{key:"add",value:function(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push((0,Gi.default)({},t,n))}},{key:"addChild",value:function(t){if(t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0){var n;this.child.push((n={},(0,Gi.default)(n,t.tagname,t.child),(0,Gi.default)(n,":@",t[":@"]),n))}else this.child.push((0,Gi.default)({},t.tagname,t.child))}}]),e}();My.exports=PR});var wy=Z((W7,Sy)=>{function IR(e,r){var t={};if(e[r+3]==="O"&&e[r+4]==="C"&&e[r+5]==="T"&&e[r+6]==="Y"&&e[r+7]==="P"&&e[r+8]==="E"){r=r+9;for(var n=1,a=!1,i=!1,s=!1,o="";r<e.length;r++)if(e[r]==="<"&&!s){if(a&&e[r+1]==="!"&&e[r+2]==="E"&&e[r+3]==="N"&&e[r+4]==="T"&&e[r+5]==="I"&&e[r+6]==="T"&&e[r+7]==="Y")r+=7,i=!0;else if(a&&e[r+1]==="!"&&e[r+2]==="E"&&e[r+3]==="L"&&e[r+4]==="E"&&e[r+5]==="M"&&e[r+6]==="E"&&e[r+7]==="N"&&e[r+8]==="T")r+=8;else if(a&&e[r+1]==="!"&&e[r+2]==="A"&&e[r+3]==="T"&&e[r+4]==="T"&&e[r+5]==="L"&&e[r+6]==="I"&&e[r+7]==="S"&&e[r+8]==="T")r+=8;else if(a&&e[r+1]==="!"&&e[r+2]==="N"&&e[r+3]==="O"&&e[r+4]==="T"&&e[r+5]==="A"&&e[r+6]==="T"&&e[r+7]==="I"&&e[r+8]==="O"&&e[r+9]==="N")r+=9;else if(e[r+1]==="!"&&e[r+2]==="-"&&e[r+3]==="-")s=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(e[r]===">"){if(s?e[r-1]==="-"&&e[r-2]==="-"&&(s=!1,n--):(i&&(LR(o,t),i=!1),n--),n===0)break}else e[r]==="["?a=!0:o+=e[r];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:r}}var RR=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function LR(e,r){var t=RR.exec(e);t&&(r[t[1]]={regx:RegExp("&".concat(t[1],";"),"g"),val:t[3]})}Sy.exports=IR});var Oy=Z((q7,Cy)=>{var FR=/^[-+]?0x[a-fA-F0-9]+$/,kR=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var DR={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function NR(e,r={}){if(r=Object.assign({},DR,r),!e||typeof e!="string")return e;let t=e.trim();if(r.skipLike!==void 0&&r.skipLike.test(t))return e;if(r.hex&&FR.test(t))return Number.parseInt(t,16);{let n=kR.exec(t);if(n){let a=n[1],i=n[2],s=GR(n[3]),o=n[4]||n[6];if(!r.leadingZeros&&i.length>0&&a&&t[2]!==".")return e;if(!r.leadingZeros&&i.length>0&&!a&&t[1]!==".")return e;{let u=Number(t),f=""+u;return f.search(/[eE]/)!==-1||o?r.eNotation?u:e:t.indexOf(".")!==-1?f==="0"&&s===""||f===s||a&&f==="-"+s?u:e:i?s===f||a+s===f?u:e:t===f||t===a+f?u:e}}else return e}}function GR(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Cy.exports=NR});var Iy=Z((X7,Py)=>{"use strict";var ic=m(J()),ji=m(De()),By=m(z()),uc=tc(),Ui=Ey(),UR=wy(),jR=Oy(),J7="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,uc.nameRegexp),HR=function e(r){(0,By.default)(this,e),this.options=r,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=VR,this.parseXml=XR,this.parseTextData=zR,this.resolveNameSpace=WR,this.buildAttributesMap=JR,this.isItStopNode=QR,this.replaceEntitiesValue=KR,this.readStopNodeData=ZR,this.saveTextToParentTag=YR};function VR(e){for(var r=Object.keys(e),t=0;t<r.length;t++){var n=r[t];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function zR(e,r,t,n,a,i,s){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));var o=this.options.tagValueProcessor(r,e,t,a,i);if(o==null)return e;if((0,ji.default)(o)!==(0,ji.default)(e)||o!==e)return o;if(this.options.trimValues)return oc(e,this.options.parseTagValue,this.options.numberParseOptions);var u=e.trim();return u===e?oc(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function WR(e){if(this.options.removeNSPrefix){var r=e.split(":"),t=e.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(e=t+r[1])}return e}var qR=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function JR(e,r){if(!this.options.ignoreAttributes&&typeof e=="string"){for(var t=uc.getAllMatches(e,qR),n=t.length,a={},i=0;i<n;i++){var s=this.resolveNameSpace(t[i][1]),o=t[i][4],u=this.options.attributeNamePrefix+s;if(s.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);var f=this.options.attributeValueProcessor(s,o,r);f==null?a[u]=o:(0,ji.default)(f)!==(0,ji.default)(o)||f!==o?a[u]=f:a[u]=oc(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[u]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){var l={};return l[this.options.attributesGroupName]=a,l}return a}}var XR=function(r){r=r.replace(/\r\n?/g,`
`);for(var t=new Ui("!xml"),n=t,a="",i="",s=0;s<r.length;s++){var o=r[s];if(o==="<")if(r[s+1]==="/"){var u=Un(r,">",s,"Closing Tag is not closed."),f=r.substring(s+2,u).trim();if(this.options.removeNSPrefix){var l=f.indexOf(":");l!==-1&&(f=f.substr(l+1))}this.options.transformTagName&&(f=this.options.transformTagName(f)),n&&(a=this.saveTextToParentTag(a,n,i)),i=i.substr(0,i.lastIndexOf(".")),n=this.tagsNodeStack.pop(),a="",s=u}else if(r[s+1]==="?"){var c=sc(r,s,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(a=this.saveTextToParentTag(a,n,i),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){var h=new Ui(c.tagName);h.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(h[":@"]=this.buildAttributesMap(c.tagExp,i)),n.addChild(h)}s=c.closeIndex+1}else if(r.substr(s+1,3)==="!--"){var d=Un(r,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){var p=r.substring(s+4,d-2);a=this.saveTextToParentTag(a,n,i),n.add(this.options.commentPropName,[(0,ic.default)({},this.options.textNodeName,p)])}s=d}else if(r.substr(s+1,2)==="!D"){var v=UR(r,s);this.docTypeEntities=v.entities,s=v.i}else if(r.substr(s+1,2)==="!["){var g=Un(r,"]]>",s,"CDATA is not closed.")-2,y=r.substring(s+9,g);if(a=this.saveTextToParentTag(a,n,i),this.options.cdataPropName)n.add(this.options.cdataPropName,[(0,ic.default)({},this.options.textNodeName,y)]);else{var _=this.parseTextData(y,n.tagname,i,!0,!1,!0);_==null&&(_=""),n.add(this.options.textNodeName,_)}s=g+2}else{var T=sc(r,s,this.options.removeNSPrefix),x=T.tagName,E=T.tagExp,C=T.attrExpPresent,L=T.closeIndex;this.options.transformTagName&&(x=this.options.transformTagName(x)),n&&a&&n.tagname!=="!xml"&&(a=this.saveTextToParentTag(a,n,i,!1)),x!==t.tagname&&(i+=i?"."+x:x);var w=n;if(w&&this.options.unpairedTags.indexOf(w.tagname)!==-1&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,i,x)){var S="";if(E.length>0&&E.lastIndexOf("/")===E.length-1)s=T.closeIndex;else if(this.options.unpairedTags.indexOf(x)!==-1)s=T.closeIndex;else{var A=this.readStopNodeData(r,x,L+1);if(!A)throw new Error("Unexpected end of ".concat(x));s=A.i,S=A.tagContent}var I=new Ui(x);x!==E&&C&&(I[":@"]=this.buildAttributesMap(E,i)),S&&(S=this.parseTextData(S,x,i,!0,C,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),I.add(this.options.textNodeName,S),n.addChild(I)}else{if(E.length>0&&E.lastIndexOf("/")===E.length-1){x[x.length-1]==="/"?(x=x.substr(0,x.length-1),E=x):E=E.substr(0,E.length-1),this.options.transformTagName&&(x=this.options.transformTagName(x));var F=new Ui(x);x!==E&&C&&(F[":@"]=this.buildAttributesMap(E,i)),i=i.substr(0,i.lastIndexOf(".")),n.addChild(F)}else{var D=new Ui(x);this.tagsNodeStack.push(n),x!==E&&C&&(D[":@"]=this.buildAttributesMap(E,i)),n.addChild(D),n=D}a="",s=L}}else a+=r[s]}return t.child},KR=function(r){if(this.options.processEntities){for(var t in this.docTypeEntities){var n=this.docTypeEntities[t];r=r.replace(n.regx,n.val)}for(var a in this.lastEntities){var i=this.lastEntities[a];r=r.replace(i.regex,i.val)}if(this.options.htmlEntities)for(var s in this.htmlEntities){var o=this.htmlEntities[s];r=r.replace(o.regex,o.val)}r=r.replace(this.ampEntity.regex,this.ampEntity.val)}return r};function YR(e,r,t,n){return e&&(n===void 0&&(n=Object.keys(r.child).length===0),e=this.parseTextData(e,r.tagname,t,!1,r[":@"]?Object.keys(r[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&r.add(this.options.textNodeName,e),e=""),e}function QR(e,r,t){var n="*."+t;for(var a in e){var i=e[a];if(n===i||r===i)return!0}return!1}function $R(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",n,a="",i=r;i<e.length;i++){var s=e[i];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===t[0])if(t[1]){if(e[i+1]===t[1])return{data:a,index:i}}else return{data:a,index:i};else s==="	"&&(s=" ");a+=s}}function Un(e,r,t,n){var a=e.indexOf(r,t);if(a===-1)throw new Error(n);return a+r.length-1}function sc(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:">",a=$R(e,r+1,n);if(a){var i=a.data,s=a.index,o=i.search(/\s/),u=i,f=!0;if(o!==-1&&(u=i.substr(0,o).replace(/\s\s*$/,""),i=i.substr(o+1)),t){var l=u.indexOf(":");l!==-1&&(u=u.substr(l+1),f=u!==a.data.substr(l+1))}return{tagName:u,tagExp:i,closeIndex:s,attrExpPresent:f}}}function ZR(e,r,t){for(var n=t,a=1;t<e.length;t++)if(e[t]==="<")if(e[t+1]==="/"){var i=Un(e,">",t,"".concat(r," is not closed")),s=e.substring(t+2,i).trim();if(s===r&&(a--,a===0))return{tagContent:e.substring(n,t),i};t=i}else if(e[t+1]==="?"){var o=Un(e,"?>",t+1,"StopNode is not closed.");t=o}else if(e.substr(t+1,3)==="!--"){var u=Un(e,"-->",t+3,"StopNode is not closed.");t=u}else if(e.substr(t+1,2)==="!["){var f=Un(e,"]]>",t,"StopNode is not closed.")-2;t=f}else{var l=sc(e,t,">");if(l){var c=l&&l.tagName;c===r&&l.tagExp[l.tagExp.length-1]!=="/"&&a++,t=l.closeIndex}}}function oc(e,r,t){if(r&&typeof e=="string"){var n=e.trim();return n==="true"?!0:n==="false"?!1:jR(e,t)}else return uc.isExist(e)?e:""}Py.exports=HR});var Fy=Z(Ly=>{"use strict";function eL(e,r){return Ry(e,r)}function Ry(e,r,t){for(var n,a={},i=0;i<e.length;i++){var s=e[i],o=tL(s),u="";if(t===void 0?u=o:u=t+"."+o,o===r.textNodeName)n===void 0?n=s[o]:n+=""+s[o];else{if(o===void 0)continue;if(s[o]){var f=Ry(s[o],r,u),l=nL(f,r);s[":@"]?rL(f,s[":@"],u,r):Object.keys(f).length===1&&f[r.textNodeName]!==void 0&&!r.alwaysCreateTextNode?f=f[r.textNodeName]:Object.keys(f).length===0&&(r.alwaysCreateTextNode?f[r.textNodeName]="":f=""),a[o]!==void 0&&a.hasOwnProperty(o)?(Array.isArray(a[o])||(a[o]=[a[o]]),a[o].push(f)):r.isArray(o,u,l)?a[o]=[f]:a[o]=f}}}return typeof n=="string"?n.length>0&&(a[r.textNodeName]=n):n!==void 0&&(a[r.textNodeName]=n),a}function tL(e){for(var r=Object.keys(e),t=0;t<r.length;t++){var n=r[t];if(n!==":@")return n}}function rL(e,r,t,n){if(r)for(var a=Object.keys(r),i=a.length,s=0;s<i;s++){var o=a[s];n.isArray(o,t+"."+o,!0,!0)?e[o]=[r[o]]:e[o]=r[o]}}function nL(e,r){var t=Object.keys(e).length;return!!(t===0||t===1&&e[r.textNodeName])}Ly.prettify=eL});var Gy=Z((Y7,Ny)=>{var ky=m(z()),Dy=m(q()),aL=Ay(),iL=aL.buildOptions,sL=Iy(),oL=Fy(),uL=oL.prettify,fL=nc(),lL=function(){function e(r){(0,ky.default)(this,e),this.externalEntities={},this.options=iL(r)}return(0,Dy.default)(e,[{key:"parse",value:function(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});var a=fL.validate(t,n);if(a!==!0)throw Error("".concat(a.err.msg,":").concat(a.err.line,":").concat(a.err.col))}var i=new sL(this.options);i.addExternalEntities(this.externalEntities);var s=i.parseXml(t);return this.options.preserveOrder||s===void 0?s:uL(s,this.options)}},{key:"addEntity",value:function(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}}]),e}();Ny.exports=lL});var zy=Z((Q7,Vy)=>{var cL=`
`;function hL(e,r){var t="";return r.format&&r.indentBy.length>0&&(t=cL),jy(e,r,"",t)}function jy(e,r,t,n){for(var a="",i=!1,s=0;s<e.length;s++){var o=e[s],u=dL(o),f="";if(t.length===0?f=u:f="".concat(t,".").concat(u),u===r.textNodeName){var l=o[u];pL(f,r)||(l=r.tagValueProcessor(u,l),l=Hy(l,r)),i&&(a+=n),a+=l,i=!1;continue}else if(u===r.cdataPropName){i&&(a+=n),a+="<![CDATA[".concat(o[u][0][r.textNodeName],"]]>"),i=!1;continue}else if(u===r.commentPropName){a+=n+"<!--".concat(o[u][0][r.textNodeName],"-->"),i=!0;continue}else if(u[0]==="?"){var c=Uy(o[":@"],r),h=u==="?xml"?"":n,d=o[u][0][r.textNodeName];d=d.length!==0?" "+d:"",a+=h+"<".concat(u).concat(d).concat(c,"?>"),i=!0;continue}var p=n;p!==""&&(p+=r.indentBy);var v=Uy(o[":@"],r),g=n+"<".concat(u).concat(v),y=jy(o[u],r,f,p);r.unpairedTags.indexOf(u)!==-1?r.suppressUnpairedNode?a+=g+">":a+=g+"/>":(!y||y.length===0)&&r.suppressEmptyNode?a+=g+"/>":y&&y.endsWith(">")?a+=g+">".concat(y).concat(n,"</").concat(u,">"):(a+=g+">",y&&n!==""&&(y.includes("/>")||y.includes("</"))?a+=n+r.indentBy+y+n:a+=y,a+="</".concat(u,">")),i=!0}return a}function dL(e){for(var r=Object.keys(e),t=0;t<r.length;t++){var n=r[t];if(n!==":@")return n}}function Uy(e,r){var t="";if(e&&!r.ignoreAttributes)for(var n in e){var a=r.attributeValueProcessor(n,e[n]);a=Hy(a,r),a===!0&&r.suppressBooleanAttributes?t+=" ".concat(n.substr(r.attributeNamePrefix.length)):t+=" ".concat(n.substr(r.attributeNamePrefix.length),'="').concat(a,'"')}return t}function pL(e,r){e=e.substr(0,e.length-r.textNodeName.length-1);var t=e.substr(e.lastIndexOf(".")+1);for(var n in r.stopNodes)if(r.stopNodes[n]===e||r.stopNodes[n]==="*."+t)return!0;return!1}function Hy(e,r){if(e&&e.length>0&&r.processEntities)for(var t=0;t<r.entities.length;t++){var n=r.entities[t];e=e.replace(n.regex,n.val)}return e}Vy.exports=hL});var Jy=Z(($7,qy)=>{"use strict";var fc=m(De()),Wy=m(J()),mL=zy(),vL={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(r,t){return t},attributeValueProcessor:function(r,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function fn(e){this.options=Object.assign({},vL,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=bL),this.processTextOrObjNode=gL,this.options.format?(this.indentate=yL,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}fn.prototype.build=function(e){return this.options.preserveOrder?mL(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e=(0,Wy.default)({},this.options.arrayNodeName,e)),this.j2x(e,0).val)};fn.prototype.j2x=function(e,r){var t="",n="";for(var a in e)if(!(typeof e[a]>"u"))if(e[a]===null)a[0]==="?"?n+=this.indentate(r)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+a+"/"+this.tagEndChar;else if(e[a]instanceof Date)n+=this.buildTextValNode(e[a],a,"",r);else if((0,fc.default)(e[a])!=="object"){var i=this.isAttribute(a);if(i)t+=this.buildAttrPairStr(i,""+e[a]);else if(a===this.options.textNodeName){var s=this.options.tagValueProcessor(a,""+e[a]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(e[a],a,"",r)}else if(Array.isArray(e[a]))for(var o=e[a].length,u=0;u<o;u++){var f=e[a][u];typeof f>"u"||(f===null?a[0]==="?"?n+=this.indentate(r)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+a+"/"+this.tagEndChar:(0,fc.default)(f)==="object"?n+=this.processTextOrObjNode(f,a,r):n+=this.buildTextValNode(f,a,"",r))}else if(this.options.attributesGroupName&&a===this.options.attributesGroupName)for(var l=Object.keys(e[a]),c=l.length,h=0;h<c;h++)t+=this.buildAttrPairStr(l[h],""+e[a][l[h]]);else n+=this.processTextOrObjNode(e[a],a,r);return{attrStr:t,val:n}};fn.prototype.buildAttrPairStr=function(e,r){return r=this.options.attributeValueProcessor(e,""+r),r=this.replaceEntitiesValue(r),this.options.suppressBooleanAttributes&&r==="true"?" "+e:" "+e+'="'+r+'"'};function gL(e,r,t){var n=this.j2x(e,t+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],r,n.attrStr,t):this.buildObjectNode(n.val,r,n.attrStr,t)}fn.prototype.buildObjectNode=function(e,r,t,n){if(e==="")return r[0]==="?"?this.indentate(n)+"<"+r+t+"?"+this.tagEndChar:this.indentate(n)+"<"+r+t+this.closeTag(r)+this.tagEndChar;var a="</"+r+this.tagEndChar,i="";return r[0]==="?"&&(i="?",a=""),t&&e.indexOf("<")===-1?this.indentate(n)+"<"+r+t+i+">"+e+a:this.options.commentPropName!==!1&&r===this.options.commentPropName&&i.length===0?this.indentate(n)+"<!--".concat(e,"-->")+this.newLine:this.indentate(n)+"<"+r+t+i+this.tagEndChar+e+this.indentate(n)+a};fn.prototype.closeTag=function(e){var r="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(r="/"):this.options.suppressEmptyNode?r="/":r="></".concat(e),r};fn.prototype.buildTextValNode=function(e,r,t,n){if(this.options.cdataPropName!==!1&&r===this.options.cdataPropName)return this.indentate(n)+"<![CDATA[".concat(e,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&r===this.options.commentPropName)return this.indentate(n)+"<!--".concat(e,"-->")+this.newLine;if(r[0]==="?")return this.indentate(n)+"<"+r+t+"?"+this.tagEndChar;var a=this.options.tagValueProcessor(r,e);return a=this.replaceEntitiesValue(a),a===""?this.indentate(n)+"<"+r+t+this.closeTag(r)+this.tagEndChar:this.indentate(n)+"<"+r+t+">"+a+"</"+r+this.tagEndChar};fn.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(var r=0;r<this.options.entities.length;r++){var t=this.options.entities[r];e=e.replace(t.regex,t.val)}return e};function yL(e){return this.options.indentBy.repeat(e)}function bL(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}qy.exports=fn});var Ky=Z((Z7,Xy)=>{"use strict";var _L=nc(),AL=Gy(),xL=Jy();Xy.exports={XMLParser:AL,XMLValidator:_L,XMLBuilder:xL}});var Mc=Z((JW,H1)=>{function WL(e){var r;if(typeof Symbol<"u"&&(Symbol.asyncIterator&&(r=e[Symbol.asyncIterator],r!=null)||Symbol.iterator&&(r=e[Symbol.iterator],r!=null)))return r.call(e);throw new TypeError("Object is not async iterable")}H1.exports=WL});var V1=Z(()=>{});var Gc=Z((yq,X1)=>{function $L(e){this.wrapped=e}X1.exports=$L});var Uc=Z((bq,K1)=>{var ZL=Gc();function eF(e){return new ZL(e)}K1.exports=eF});var Q1=Z((_q,Y1)=>{var tF=Gc();function Ki(e){var r,t;function n(s,o){return new Promise(function(u,f){var l={key:s,arg:o,resolve:u,reject:f,next:null};t?t=t.next=l:(r=t=l,a(s,o))})}function a(s,o){try{var u=e[s](o),f=u.value,l=f instanceof tF;Promise.resolve(l?f.wrapped:f).then(function(c){if(l){a(s==="return"?"return":"next",c);return}i(u.done?"return":"normal",c)},function(c){a("throw",c)})}catch(c){i("throw",c)}}function i(s,o){switch(s){case"return":r.resolve({value:o,done:!0});break;case"throw":r.reject(o);break;default:r.resolve({value:o,done:!1});break}r=r.next,r?a(r.key,r.arg):t=null}this._invoke=n,typeof e.return!="function"&&(this.return=void 0)}typeof Symbol=="function"&&Symbol.asyncIterator&&(Ki.prototype[Symbol.asyncIterator]=function(){return this});Ki.prototype.next=function(e){return this._invoke("next",e)};Ki.prototype.throw=function(e){return this._invoke("throw",e)};Ki.prototype.return=function(e){return this._invoke("return",e)};Y1.exports=Ki});var jc=Z((Aq,$1)=>{var rF=Q1();function nF(e){return function(){return new rF(e.apply(this,arguments))}}$1.exports=nF});var cb=Z(()=>{});var Kb=Z((uX,Xb)=>{function qF(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}Xb.exports=qF});var Qb=Z((fX,Yb)=>{function JF(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}Yb.exports=JF});var Zb=Z((lX,$b)=>{function XF(){throw new TypeError("Invalid attempt to spread non-iterable instance")}$b.exports=XF});var wt=Z((cX,e_)=>{var KF=Kb(),YF=Qb(),QF=Zb();function $F(e){return KF(e)||YF(e)||QF()}e_.exports=$F});var qh=Z((WA,ys)=>{(function(e,r){typeof define=="function"&&define.amd?define([],r):typeof z0=="function"&&typeof ys=="object"&&ys&&ys.exports?ys.exports=r():(e.dcodeIO=e.dcodeIO||{}).Long=r()})(WA,function(){"use strict";function e(S,A,I){this.low=S|0,this.high=A|0,this.unsigned=!!I}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function r(S){return(S&&S.__isLong__)===!0}e.isLong=r;var t={},n={};function a(S,A){var I,F,D;return A?(S>>>=0,(D=0<=S&&S<256)&&(F=n[S],F)?F:(I=s(S,(S|0)<0?-1:0,!0),D&&(n[S]=I),I)):(S|=0,(D=-128<=S&&S<128)&&(F=t[S],F)?F:(I=s(S,S<0?-1:0,!1),D&&(t[S]=I),I))}e.fromInt=a;function i(S,A){if(isNaN(S)||!isFinite(S))return A?y:g;if(A){if(S<0)return y;if(S>=d)return C}else{if(S<=-p)return L;if(S+1>=p)return E}return S<0?i(-S,A).neg():s(S%h|0,S/h|0,A)}e.fromNumber=i;function s(S,A,I){return new e(S,A,I)}e.fromBits=s;var o=Math.pow;function u(S,A,I){if(S.length===0)throw Error("empty string");if(S==="NaN"||S==="Infinity"||S==="+Infinity"||S==="-Infinity")return g;if(typeof A=="number"?(I=A,A=!1):A=!!A,I=I||10,I<2||36<I)throw RangeError("radix");var F;if((F=S.indexOf("-"))>0)throw Error("interior hyphen");if(F===0)return u(S.substring(1),A,I).neg();for(var D=i(o(I,8)),N=g,B=0;B<S.length;B+=8){var P=Math.min(8,S.length-B),R=parseInt(S.substring(B,B+P),I);if(P<8){var V=i(o(I,P));N=N.mul(V).add(i(R))}else N=N.mul(D),N=N.add(i(R))}return N.unsigned=A,N}e.fromString=u;function f(S){return S instanceof e?S:typeof S=="number"?i(S):typeof S=="string"?u(S):s(S.low,S.high,S.unsigned)}e.fromValue=f;var l=1<<16,c=1<<24,h=l*l,d=h*h,p=d/2,v=a(c),g=a(0);e.ZERO=g;var y=a(0,!0);e.UZERO=y;var _=a(1);e.ONE=_;var T=a(1,!0);e.UONE=T;var x=a(-1);e.NEG_ONE=x;var E=s(-1,2147483647,!1);e.MAX_VALUE=E;var C=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=C;var L=s(0,-2147483648,!1);e.MIN_VALUE=L;var w=e.prototype;return w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},w.toString=function(A){if(A=A||10,A<2||36<A)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(L)){var I=i(A),F=this.div(I),D=F.mul(I).sub(this);return F.toString(A)+D.toInt().toString(A)}else return"-"+this.neg().toString(A);for(var N=i(o(A,6),this.unsigned),B=this,P="";;){var R=B.div(N),V=B.sub(R.mul(N)).toInt()>>>0,G=V.toString(A);if(B=R,B.isZero())return G+P;for(;G.length<6;)G="0"+G;P=""+G+P}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(L)?64:this.neg().getNumBitsAbs();for(var A=this.high!=0?this.high:this.low,I=31;I>0&&!(A&1<<I);I--);return this.high!=0?I+33:I+1},w.isZero=function(){return this.high===0&&this.low===0},w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||this.high>=0},w.isOdd=function(){return(this.low&1)===1},w.isEven=function(){return(this.low&1)===0},w.equals=function(A){return r(A)||(A=f(A)),this.unsigned!==A.unsigned&&this.high>>>31===1&&A.high>>>31===1?!1:this.high===A.high&&this.low===A.low},w.eq=w.equals,w.notEquals=function(A){return!this.eq(A)},w.neq=w.notEquals,w.lessThan=function(A){return this.comp(A)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(A){return this.comp(A)<=0},w.lte=w.lessThanOrEqual,w.greaterThan=function(A){return this.comp(A)>0},w.gt=w.greaterThan,w.greaterThanOrEqual=function(A){return this.comp(A)>=0},w.gte=w.greaterThanOrEqual,w.compare=function(A){if(r(A)||(A=f(A)),this.eq(A))return 0;var I=this.isNegative(),F=A.isNegative();return I&&!F?-1:!I&&F?1:this.unsigned?A.high>>>0>this.high>>>0||A.high===this.high&&A.low>>>0>this.low>>>0?-1:1:this.sub(A).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(L)?L:this.not().add(_)},w.neg=w.negate,w.add=function(A){r(A)||(A=f(A));var I=this.high>>>16,F=this.high&65535,D=this.low>>>16,N=this.low&65535,B=A.high>>>16,P=A.high&65535,R=A.low>>>16,V=A.low&65535,G=0,W=0,$=0,oe=0;return oe+=N+V,$+=oe>>>16,oe&=65535,$+=D+R,W+=$>>>16,$&=65535,W+=F+P,G+=W>>>16,W&=65535,G+=I+B,G&=65535,s($<<16|oe,G<<16|W,this.unsigned)},w.subtract=function(A){return r(A)||(A=f(A)),this.add(A.neg())},w.sub=w.subtract,w.multiply=function(A){if(this.isZero()||(r(A)||(A=f(A)),A.isZero()))return g;if(this.eq(L))return A.isOdd()?L:g;if(A.eq(L))return this.isOdd()?L:g;if(this.isNegative())return A.isNegative()?this.neg().mul(A.neg()):this.neg().mul(A).neg();if(A.isNegative())return this.mul(A.neg()).neg();if(this.lt(v)&&A.lt(v))return i(this.toNumber()*A.toNumber(),this.unsigned);var I=this.high>>>16,F=this.high&65535,D=this.low>>>16,N=this.low&65535,B=A.high>>>16,P=A.high&65535,R=A.low>>>16,V=A.low&65535,G=0,W=0,$=0,oe=0;return oe+=N*V,$+=oe>>>16,oe&=65535,$+=D*V,W+=$>>>16,$&=65535,$+=N*R,W+=$>>>16,$&=65535,W+=F*V,G+=W>>>16,W&=65535,W+=D*R,G+=W>>>16,W&=65535,W+=N*P,G+=W>>>16,W&=65535,G+=I*V+F*R+D*P+N*B,G&=65535,s($<<16|oe,G<<16|W,this.unsigned)},w.mul=w.multiply,w.divide=function(A){if(r(A)||(A=f(A)),A.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?y:g;var I,F,D;if(this.unsigned){if(A.unsigned||(A=A.toUnsigned()),A.gt(this))return y;if(A.gt(this.shru(1)))return T;D=y}else{if(this.eq(L)){if(A.eq(_)||A.eq(x))return L;if(A.eq(L))return _;var N=this.shr(1);return I=N.div(A).shl(1),I.eq(g)?A.isNegative()?_:x:(F=this.sub(A.mul(I)),D=I.add(F.div(A)),D)}else if(A.eq(L))return this.unsigned?y:g;if(this.isNegative())return A.isNegative()?this.neg().div(A.neg()):this.neg().div(A).neg();if(A.isNegative())return this.div(A.neg()).neg();D=g}for(F=this;F.gte(A);){I=Math.max(1,Math.floor(F.toNumber()/A.toNumber()));for(var B=Math.ceil(Math.log(I)/Math.LN2),P=B<=48?1:o(2,B-48),R=i(I),V=R.mul(A);V.isNegative()||V.gt(F);)I-=P,R=i(I,this.unsigned),V=R.mul(A);R.isZero()&&(R=_),D=D.add(R),F=F.sub(V)}return D},w.div=w.divide,w.modulo=function(A){return r(A)||(A=f(A)),this.sub(this.div(A).mul(A))},w.mod=w.modulo,w.not=function(){return s(~this.low,~this.high,this.unsigned)},w.and=function(A){return r(A)||(A=f(A)),s(this.low&A.low,this.high&A.high,this.unsigned)},w.or=function(A){return r(A)||(A=f(A)),s(this.low|A.low,this.high|A.high,this.unsigned)},w.xor=function(A){return r(A)||(A=f(A)),s(this.low^A.low,this.high^A.high,this.unsigned)},w.shiftLeft=function(A){return r(A)&&(A=A.toInt()),(A&=63)===0?this:A<32?s(this.low<<A,this.high<<A|this.low>>>32-A,this.unsigned):s(0,this.low<<A-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(A){return r(A)&&(A=A.toInt()),(A&=63)===0?this:A<32?s(this.low>>>A|this.high<<32-A,this.high>>A,this.unsigned):s(this.high>>A-32,this.high>=0?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(A){if(r(A)&&(A=A.toInt()),A&=63,A===0)return this;var I=this.high;if(A<32){var F=this.low;return s(F>>>A|I<<32-A,I>>>A,this.unsigned)}else return A===32?s(I,0,this.unsigned):s(I>>>A-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},w.toBytes=function(S){return S?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var S=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24&255,S&255,S>>>8&255,S>>>16&255,S>>>24&255]},w.toBytesBE=function(){var S=this.high,A=this.low;return[S>>>24&255,S>>>16&255,S>>>8&255,S&255,A>>>24&255,A>>>16&255,A>>>8&255,A&255]},e})});var uM=Z((lse,oM)=>{var TN=Me();function MN(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=TN(e),e!==null););return e}oM.exports=MN});var fi=Z((cse,qu)=>{var EN=uM();function Wu(e,r,t){return typeof Reflect<"u"&&Reflect.get?qu.exports=Wu=Reflect.get:qu.exports=Wu=function(a,i,s){var o=EN(a,i);if(o){var u=Object.getOwnPropertyDescriptor(o,i);return u.get?u.get.call(s):u.value}},Wu(e,r,t||e)}qu.exports=Wu});var np=Z((dse,vM)=>{vM.exports=globalThis.h3||{}});var up=Z((bse,FM)=>{FM.exports=globalThis.luma});var Zu=Z((_se,kM)=>{kM.exports=globalThis.deck});var M2=Z((Tue,mf)=>{var FG=Ql();function kG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function pf(e,r,t){return kG()?mf.exports=pf=Reflect.construct:mf.exports=pf=function(a,i,s){var o=[null];o.push.apply(o,i);var u=Function.bind.apply(a,o),f=new u;return s&&FG(f,s.prototype),f},pf.apply(null,arguments)}mf.exports=pf});var cP=Z((q0e,lP)=>{lP.exports=globalThis.deck});var LP=Z(w0=>{w0.read=function(e,r,t,n,a){var i,s,o=a*8-n-1,u=(1<<o)-1,f=u>>1,l=-7,c=t?a-1:0,h=t?-1:1,d=e[r+c];for(c+=h,i=d&(1<<-l)-1,d>>=-l,l+=o;l>0;i=i*256+e[r+c],c+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=s*256+e[r+c],c+=h,l-=8);if(i===0)i=1-f;else{if(i===u)return s?NaN:(d?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-f}return(d?-1:1)*s*Math.pow(2,i-n)};w0.write=function(e,r,t,n,a,i){var s,o,u,f=i*8-a-1,l=(1<<f)-1,c=l>>1,h=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,v=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(o=isNaN(r)?1:0,s=l):(s=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+c>=1?r+=h/u:r+=h*Math.pow(2,1-c),r*u>=2&&(s++,u/=2),s+c>=l?(o=0,s=l):s+c>=1?(o=(r*u-1)*Math.pow(2,a),s=s+c):(o=r*Math.pow(2,c-1)*Math.pow(2,a),s=0));a>=8;e[t+d]=o&255,d+=p,o/=256,a-=8);for(s=s<<a|o,f+=a;f>0;e[t+d]=s&255,d+=p,s/=256,f-=8);e[t+d-p]|=v*128}});var UP=Z((Rye,GP)=>{"use strict";GP.exports=_e;var Ul=LP();function _e(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}_e.Varint=0;_e.Fixed64=1;_e.Bytes=2;_e.Fixed32=5;var C0=(1<<16)*(1<<16),FP=1/C0,dz=12,NP=typeof TextDecoder>"u"?null:new TextDecoder("utf8");_e.prototype={destroy:function(){this.buf=null},readFields:function(e,r,t){for(t=t||this.length;this.pos<t;){var n=this.readVarint(),a=n>>3,i=this.pos;this.type=n&7,e(a,r,this),this.pos===i&&this.skip(n)}return r},readMessage:function(e,r){return this.readFields(e,r,this.readVarint()+this.pos)},readFixed32:function(){var e=jl(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=DP(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=jl(this.buf,this.pos)+jl(this.buf,this.pos+4)*C0;return this.pos+=8,e},readSFixed64:function(){var e=jl(this.buf,this.pos)+DP(this.buf,this.pos+4)*C0;return this.pos+=8,e},readFloat:function(){var e=Ul.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ul.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var r=this.buf,t,n;return n=r[this.pos++],t=n&127,n<128||(n=r[this.pos++],t|=(n&127)<<7,n<128)||(n=r[this.pos++],t|=(n&127)<<14,n<128)||(n=r[this.pos++],t|=(n&127)<<21,n<128)?t:(n=r[this.pos],t|=(n&15)<<28,pz(t,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=dz&&NP?Cz(this.buf,r,e):wz(this.buf,r,e)},readBytes:function(){var e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r},readPackedVarint:function(e,r){if(this.type!==_e.Bytes)return e.push(this.readVarint(r));var t=sn(this);for(e=e||[];this.pos<t;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==_e.Bytes)return e.push(this.readSVarint());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==_e.Bytes)return e.push(this.readBoolean());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==_e.Bytes)return e.push(this.readFloat());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==_e.Bytes)return e.push(this.readDouble());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==_e.Bytes)return e.push(this.readFixed32());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==_e.Bytes)return e.push(this.readSFixed32());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==_e.Bytes)return e.push(this.readFixed64());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==_e.Bytes)return e.push(this.readSFixed64());var r=sn(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=e&7;if(r===_e.Varint)for(;this.buf[this.pos++]>127;);else if(r===_e.Bytes)this.pos=this.readVarint()+this.pos;else if(r===_e.Fixed32)this.pos+=4;else if(r===_e.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+r)},writeTag:function(e,r){this.writeVarint(e<<3|r)},realloc:function(e){for(var r=this.length||16;r<this.pos+e;)r*=2;if(r!==this.length){var t=new Uint8Array(r);t.set(this.buf),this.buf=t,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Di(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Di(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Di(this.buf,e&-1,this.pos),Di(this.buf,Math.floor(e*FP),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Di(this.buf,e&-1,this.pos),Di(this.buf,Math.floor(e*FP),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){mz(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var r=this.pos;this.pos=Oz(this.buf,e,this.pos);var t=this.pos-r;t>=128&&kP(r,t,this),this.pos=r-1,this.writeVarint(t),this.pos+=t},writeFloat:function(e){this.realloc(4),Ul.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ul.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var r=e.length;this.writeVarint(r),this.realloc(r);for(var t=0;t<r;t++)this.buf[this.pos++]=e[t]},writeRawMessage:function(e,r){this.pos++;var t=this.pos;e(r,this);var n=this.pos-t;n>=128&&kP(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,r,t){this.writeTag(e,_e.Bytes),this.writeRawMessage(r,t)},writePackedVarint:function(e,r){r.length&&this.writeMessage(e,yz,r)},writePackedSVarint:function(e,r){r.length&&this.writeMessage(e,bz,r)},writePackedBoolean:function(e,r){r.length&&this.writeMessage(e,xz,r)},writePackedFloat:function(e,r){r.length&&this.writeMessage(e,_z,r)},writePackedDouble:function(e,r){r.length&&this.writeMessage(e,Az,r)},writePackedFixed32:function(e,r){r.length&&this.writeMessage(e,Tz,r)},writePackedSFixed32:function(e,r){r.length&&this.writeMessage(e,Mz,r)},writePackedFixed64:function(e,r){r.length&&this.writeMessage(e,Ez,r)},writePackedSFixed64:function(e,r){r.length&&this.writeMessage(e,Sz,r)},writeBytesField:function(e,r){this.writeTag(e,_e.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,_e.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,_e.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,_e.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,_e.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,_e.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,_e.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,_e.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,_e.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,_e.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,r){this.writeVarintField(e,Boolean(r))}};function pz(e,r,t){var n=t.buf,a,i;if(i=n[t.pos++],a=(i&112)>>4,i<128||(i=n[t.pos++],a|=(i&127)<<3,i<128)||(i=n[t.pos++],a|=(i&127)<<10,i<128)||(i=n[t.pos++],a|=(i&127)<<17,i<128)||(i=n[t.pos++],a|=(i&127)<<24,i<128)||(i=n[t.pos++],a|=(i&1)<<31,i<128))return ki(e,a,r);throw new Error("Expected varint not more than 10 bytes")}function sn(e){return e.type===_e.Bytes?e.readVarint()+e.pos:e.pos+1}function ki(e,r,t){return t?r*4294967296+(e>>>0):(r>>>0)*4294967296+(e>>>0)}function mz(e,r){var t,n;if(e>=0?(t=e%4294967296|0,n=e/4294967296|0):(t=~(-e%4294967296),n=~(-e/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),vz(t,n,r),gz(n,r)}function vz(e,r,t){t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos++]=e&127|128,e>>>=7,t.buf[t.pos]=e&127}function gz(e,r){var t=(e&7)<<4;r.buf[r.pos++]|=t|((e>>>=3)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127|((e>>>=7)?128:0),e&&(r.buf[r.pos++]=e&127)))))}function kP(e,r,t){var n=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(Math.LN2*7));t.realloc(n);for(var a=t.pos-1;a>=e;a--)t.buf[a+n]=t.buf[a]}function yz(e,r){for(var t=0;t<e.length;t++)r.writeVarint(e[t])}function bz(e,r){for(var t=0;t<e.length;t++)r.writeSVarint(e[t])}function _z(e,r){for(var t=0;t<e.length;t++)r.writeFloat(e[t])}function Az(e,r){for(var t=0;t<e.length;t++)r.writeDouble(e[t])}function xz(e,r){for(var t=0;t<e.length;t++)r.writeBoolean(e[t])}function Tz(e,r){for(var t=0;t<e.length;t++)r.writeFixed32(e[t])}function Mz(e,r){for(var t=0;t<e.length;t++)r.writeSFixed32(e[t])}function Ez(e,r){for(var t=0;t<e.length;t++)r.writeFixed64(e[t])}function Sz(e,r){for(var t=0;t<e.length;t++)r.writeSFixed64(e[t])}function jl(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+e[r+3]*16777216}function Di(e,r,t){e[t]=r,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24}function DP(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+(e[r+3]<<24)}function wz(e,r,t){for(var n="",a=r;a<t;){var i=e[a],s=null,o=i>239?4:i>223?3:i>191?2:1;if(a+o>t)break;var u,f,l;o===1?i<128&&(s=i):o===2?(u=e[a+1],(u&192)===128&&(s=(i&31)<<6|u&63,s<=127&&(s=null))):o===3?(u=e[a+1],f=e[a+2],(u&192)===128&&(f&192)===128&&(s=(i&15)<<12|(u&63)<<6|f&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):o===4&&(u=e[a+1],f=e[a+2],l=e[a+3],(u&192)===128&&(f&192)===128&&(l&192)===128&&(s=(i&15)<<18|(u&63)<<12|(f&63)<<6|l&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,o=1):s>65535&&(s-=65536,n+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),n+=String.fromCharCode(s),a+=o}return n}function Cz(e,r,t){return NP.decode(e.subarray(r,t))}function Oz(e,r,t){for(var n=0,a,i;n<r.length;n++){if(a=r.charCodeAt(n),a>55295&&a<57344)if(i)if(a<56320){e[t++]=239,e[t++]=191,e[t++]=189,i=a;continue}else a=i-55296<<10|a-56320|65536,i=null;else{a>56319||n+1===r.length?(e[t++]=239,e[t++]=191,e[t++]=189):i=a;continue}else i&&(e[t++]=239,e[t++]=191,e[t++]=189,i=null);a<128?e[t++]=a:(a<2048?e[t++]=a>>6|192:(a<65536?e[t++]=a>>12|224:(e[t++]=a>>18|240,e[t++]=a>>12&63|128),e[t++]=a>>6&63|128),e[t++]=a&63|128)}return t}});var Mo={};$t(Mo,{GeohashLayer:()=>Xl,GreatCircleLayer:()=>eu,H3ClusterLayer:()=>$u,H3HexagonLayer:()=>fa,MVTLayer:()=>Jl,QuadkeyLayer:()=>Tu,S2Layer:()=>nu,TerrainLayer:()=>Rl,Tile3DLayer:()=>Ml,TileLayer:()=>Wr,TripsLayer:()=>Ku,_GeoCellLayer:()=>Jt,_Tile2DHeader:()=>Es,_Tileset2D:()=>Ps,_WMSLayer:()=>Zo,_getURLFromTemplate:()=>Tr});var pr={},q0=m(Zt());un(pr,m(Zt()));if(!q0.GeoJsonLayer)throw new Error("@deck.gl/layers is not found");un(Mo,pr);var Uh=m(ve()),$o=m(Y()),OA=m(z()),BA=m(q()),PA=m(vt()),IA=m(Ce()),RA=m(Oe()),jh=m(Me()),gs=m(J()),Zn=m(K()),ea=m(er()),LA=m(Zt());var o1=m(J()),u1=m(Y()),vc=m(K());var t1=m(ve());var Zy=m(Y()),cc=m(K());var Qy=m(J());function b(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var $y=m(Ky());function Yy(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function TL(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Yy(Object(t),!0).forEach(function(n){(0,Qy.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yy(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function lc(e,r){var t=new $y.XMLParser(TL({ignoreAttributes:!1,attributeNamePrefix:""},r?.xml)),n=t.parse(e);return n}var ML="3.3.1",jn={name:"XML",id:"xml",module:"xml",version:ML,worker:!1,extensions:["xml"],mimeTypes:["application/xml","text/xml"],testText:EL,options:{xml:{}},parse:function(){var e=(0,Zy.default)(cc.default.mark(function t(n,a){return cc.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",lc(new TextDecoder().decode(n),a));case 1:case"end":return s.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return lc(r,t)}};function EL(e){return e.startsWith("<?xml")}function r1(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=SL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function SL(e,r){if(e){if(typeof e=="string")return e1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e1(e,r)}}function e1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function hc(e,r){var t=jn.parseTextSync(e,r),n=t.WMT_MS_Capabilities||t.WMS_Capabilities||t;return wL(n)}function wL(e){var r,t,n,a={name:((r=e.Service)===null||r===void 0?void 0:r.Name)||"unnamed",title:(t=e.Service)===null||t===void 0?void 0:t.Title,keywords:[],requests:{},layer:n1((n=e.Capability)===null||n===void 0?void 0:n.Layer),raw:e},i=r1(((u=e.Service)===null||u===void 0||(f=u.KeywordList)===null||f===void 0?void 0:f.Keyword)||[]),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,u,f;a.keywords.push(o)}}catch(g){i.e(g)}finally{i.f()}for(var l=0,c=Object.entries(((v=e.Capability)===null||v===void 0?void 0:v.Request)||{});l<c.length;l++){var h=(0,t1.default)(c[l],2),d=h[0],p=h[1],v;a.requests[d]=CL(d,p)}return a}function CL(e,r){var t=r?.Format,n=Array.isArray(t)?t:[t];return{name:e,mimeTypes:n}}function n1(e){var r={name:e?.Name,title:e?.Title,srs:e?.SRS||[],layers:[]},t=OL(e?.Layer),n=r1(t),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,s;(s=r.layers)===null||s===void 0||s.push(n1(i))}}catch(o){n.e(o)}finally{n.f()}return r}function OL(e){return Array.isArray(e)?e:e?[e]:[]}function dc(e,r){var t,n=jn.parseTextSync(e,r),a=((t=n.FeatureInfoResponse)===null||t===void 0?void 0:t.FIELDS)||[],i=Array.isArray(a)?a:[a];return{features:i.map(function(s){return BL(s)})}}function BL(e){var r=e||{};return{attributes:r,type:"",bounds:{bottom:0,top:0,left:0,right:0}}}function pc(e,r){var t=jn.parseTextSync(e,r);return t}function a1(e,r){var t,n,a,i=(t=jn.parseTextSync)===null||t===void 0?void 0:t.call(jn,e,r),s=(i==null||(n=i.ServiceExceptionReport)===null||n===void 0?void 0:n.ServiceException)||(i==null||(a=i["ogc:ServiceExceptionReport"])===null||a===void 0?void 0:a["ogc:ServiceException"]),o=typeof s=="string"?s:s["#text"]||s.code||"Unknown error";return o}function i1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function s1(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?i1(Object(t),!0).forEach(function(n){(0,o1.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i1(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var PL="3.3.1",Ga={id:"wms-error",name:"WMS Error",module:"wms",version:PL,worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.se_xml","application/xml","text/xml"],testText:IL,options:{wms:{throwOnError:!1}},parse:function(){var e=(0,u1.default)(vc.default.mark(function t(n,a){return vc.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",mc(new TextDecoder().decode(n),a));case 1:case"end":return s.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseSync:function(r,t){return mc(new TextDecoder().decode(r),t)},parseTextSync:function(r,t){return mc(r,t)}};function IL(e){return e.startsWith("<?xml")}function mc(e,r){var t=s1(s1({},Ga.options.wms),r?.wms),n=a1(e,t),a=t.minimalErrors?n:"WMS Service error: ".concat(n);if(t.throwOnError)throw new Error(a);return a}var f1=m(Y()),gc=m(K());var RL="3.3.1",Hn={id:"wms-capabilities",name:"WMS Capabilities",module:"wms",version:RL,worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.wms_xml","application/xml","text/xml"],testText:LL,options:{wms:{}},parse:function(){var e=(0,f1.default)(gc.default.mark(function t(n,a){return gc.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",hc(new TextDecoder().decode(n),a));case 1:case"end":return s.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return hc(r,t)}};function LL(e){return e.startsWith("<?xml")}var l1=m(z()),Ir=function e(){(0,l1.default)(this,e)};var xb=m(J()),dh=m(ve()),ph=m(Y()),Tb=m(z()),Mb=m(q()),mh=m(vt()),Eb=m(Ce()),Sb=m(Oe()),vh=m(Me()),ns=m(K());var c1="3.3.1";var _b=m(Y()),uh=m(K());function ne(e,r){if(!e)throw new Error(r||"loader assertion failed.")}var d1=m(De()),mr={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},FL=mr.self||mr.window||mr.global||{},kL=mr.window||mr.self||mr.global||{},DL=mr.global||mr.self||mr.window||{},NL=mr.document||{};var tr=Boolean((typeof process>"u"?"undefined":(0,d1.default)(process))!=="object"||String(process)!=="[object process]"||process.browser);var h1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),GL=h1&&parseFloat(h1[1])||0;var p1="3.3.1";function st(e,r){if(!e)throw new Error(r||"loaders.gl assertion failed.")}var v1=m(De()),vr={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},gW=vr.self||vr.window||vr.global||{},yW=vr.window||vr.self||vr.global||{},g1=vr.global||vr.self||vr.window||{},bW=vr.document||{};var gt=(typeof process>"u"?"undefined":(0,v1.default)(process))!=="object"||String(process)!=="[object process]"||process.browser,Hi=typeof importScripts=="function",y1=typeof window<"u"&&typeof window.orientation<"u",m1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),_W=m1&&parseFloat(m1[1])||0;var b1=m(z()),_1=m(q());var A1=function(){function e(r,t){var n=this;(0,b1.default)(this,e),b(this,"name",void 0),b(this,"workerThread",void 0),b(this,"isRunning",!0),b(this,"result",void 0),b(this,"_resolve",function(){}),b(this,"_reject",function(){}),this.name=r,this.workerThread=t,this.result=new Promise(function(a,i){n._resolve=a,n._reject=i})}return(0,_1.default)(e,[{key:"postMessage",value:function(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}},{key:"done",value:function(t){st(this.isRunning),this.isRunning=!1,this._resolve(t)}},{key:"error",value:function(t){st(this.isRunning),this.isRunning=!1,this._reject(t)}}]),e}();var C1=m(z()),O1=m(q());var x1=m(z()),T1=m(q()),Oo=function(){function e(){(0,x1.default)(this,e)}return(0,T1.default)(e,[{key:"terminate",value:function(){}}]),e}();var yc=new Map;function M1(e){st(e.source&&!e.url||!e.source&&e.url);var r=yc.get(e.source||e.url);return r||(e.url&&(r=UL(e.url),yc.set(e.url,r)),e.source&&(r=E1(e.source),yc.set(e.source,r))),st(r),r}function UL(e){if(!e.startsWith("http"))return e;var r=jL(e);return E1(r)}function E1(e){var r=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(r)}function jL(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}var w1=m(De());function bc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2?arguments[2]:void 0,n=t||new Set;if(e){if(S1(e))n.add(e);else if(S1(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(r&&(0,w1.default)(e)==="object")for(var a in e)bc(e[a],r,n)}}return t===void 0?Array.from(n):[]}function S1(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}var _c=function(){},Vi=function(){function e(r){(0,C1.default)(this,e),b(this,"name",void 0),b(this,"source",void 0),b(this,"url",void 0),b(this,"terminated",!1),b(this,"worker",void 0),b(this,"onMessage",void 0),b(this,"onError",void 0),b(this,"_loadableURL","");var t=r.name,n=r.source,a=r.url;st(n||a),this.name=t,this.source=n,this.url=a,this.onMessage=_c,this.onError=function(i){return console.log(i)},this.worker=gt?this._createBrowserWorker():this._createNodeWorker()}return(0,O1.default)(e,[{key:"destroy",value:function(){this.onMessage=_c,this.onError=_c,this.worker.terminate(),this.terminated=!0}},{key:"isRunning",get:function(){return Boolean(this.onMessage)}},{key:"postMessage",value:function(t,n){n=n||bc(t),this.worker.postMessage(t,n)}},{key:"_getErrorFromErrorEvent",value:function(t){var n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(n+="".concat(t.message," in ")),t.lineno&&(n+=":".concat(t.lineno,":").concat(t.colno)),new Error(n)}},{key:"_createBrowserWorker",value:function(){var t=this;this._loadableURL=M1({source:this.source,url:this.url});var n=new Worker(this._loadableURL,{name:this.name});return n.onmessage=function(a){a.data?t.onMessage(a.data):t.onError(new Error("No data received"))},n.onerror=function(a){t.onError(t._getErrorFromErrorEvent(a)),t.terminated=!0},n.onmessageerror=function(a){return console.error(a)},n}},{key:"_createNodeWorker",value:function(){var t=this,n;if(this.url){var a=this.url.includes(":/")||this.url.startsWith("/"),i=a?this.url:"./".concat(this.url);n=new Oo(i,{eval:!1})}else if(this.source)n=new Oo(this.source,{eval:!0});else throw new Error("no worker");return n.on("message",function(s){t.onMessage(s)}),n.on("error",function(s){t.onError(s)}),n.on("exit",function(s){}),n}}],[{key:"isSupported",value:function(){return typeof Worker<"u"&&gt||typeof Oo<"u"&&!gt}}]),e}();var G1=m(J()),U1=m(z()),j1=m(q());var Ac=m(Y()),I1=m(J()),R1=m(z()),L1=m(q()),zi=m(K());function B1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function P1(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?B1(Object(t),!0).forEach(function(n){(0,I1.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B1(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var F1=function(){function e(r){(0,R1.default)(this,e),b(this,"name","unnamed"),b(this,"source",void 0),b(this,"url",void 0),b(this,"maxConcurrency",1),b(this,"maxMobileConcurrency",1),b(this,"onDebug",function(){}),b(this,"reuseWorkers",!0),b(this,"props",{}),b(this,"jobQueue",[]),b(this,"idleQueue",[]),b(this,"count",0),b(this,"isDestroyed",!1),this.source=r.source,this.url=r.url,this.setProps(r)}return(0,L1.default)(e,[{key:"destroy",value:function(){this.idleQueue.forEach(function(t){return t.destroy()}),this.isDestroyed=!0}},{key:"setProps",value:function(t){this.props=P1(P1({},this.props),t),t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}},{key:"startJob",value:function(){var r=(0,Ac.default)(zi.default.mark(function n(a){var i=this,s,o,u,f=arguments;return zi.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=f.length>1&&f[1]!==void 0?f[1]:function(h,d,p){return h.done(p)},o=f.length>2&&f[2]!==void 0?f[2]:function(h,d){return h.error(d)},u=new Promise(function(h){return i.jobQueue.push({name:a,onMessage:s,onError:o,onStart:h}),i}),this._startQueuedJob(),c.next=6,u;case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"_startQueuedJob",value:function(){var r=(0,Ac.default)(zi.default.mark(function n(){var a,i,s;return zi.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.jobQueue.length){u.next=2;break}return u.abrupt("return");case 2:if(a=this._getAvailableWorker(),a){u.next=5;break}return u.abrupt("return");case 5:if(i=this.jobQueue.shift(),!i){u.next=18;break}return this.onDebug({message:"Starting job",name:i.name,workerThread:a,backlog:this.jobQueue.length}),s=new A1(i.name,a),a.onMessage=function(f){return i.onMessage(s,f.type,f.payload)},a.onError=function(f){return i.onError(s,f)},i.onStart(s),u.prev=12,u.next=15,s.result;case 15:return u.prev=15,this.returnWorkerToQueue(a),u.finish(15);case 18:case"end":return u.stop()}},n,this,[[12,,15,18]])}));function t(){return r.apply(this,arguments)}return t}()},{key:"returnWorkerToQueue",value:function(t){var n=this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency();n?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;var t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Vi({name:t,source:this.source,url:this.url})}return null}},{key:"_getMaxConcurrency",value:function(){return y1?this.maxMobileConcurrency:this.maxConcurrency}}],[{key:"isSupported",value:function(){return Vi.isSupported()}}]),e}();function k1(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=HL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function HL(e,r){if(e){if(typeof e=="string")return D1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D1(e,r)}}function D1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function N1(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function xc(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?N1(Object(t),!0).forEach(function(n){(0,G1.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N1(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var VL={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:function(){}},Wi=function(){function e(r){(0,U1.default)(this,e),b(this,"props",void 0),b(this,"workerPools",new Map),this.props=xc({},VL),this.setProps(r),this.workerPools=new Map}return(0,j1.default)(e,[{key:"destroy",value:function(){var t=k1(this.workerPools.values()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.destroy()}}catch(i){t.e(i)}finally{t.f()}this.workerPools=new Map}},{key:"setProps",value:function(t){this.props=xc(xc({},this.props),t);var n=k1(this.workerPools.values()),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.setProps(this._getWorkerPoolProps())}}catch(s){n.e(s)}finally{n.f()}}},{key:"getWorkerPool",value:function(t){var n=t.name,a=t.source,i=t.url,s=this.workerPools.get(n);return s||(s=new F1({name:n,source:a,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}},{key:"_getWorkerPoolProps",value:function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}],[{key:"isSupported",value:function(){return Vi.isSupported()}},{key:"getWorkerFarm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e._workerFarm=e._workerFarm||new e({}),e._workerFarm.setProps(t),e._workerFarm}}]),e}();b(Wi,"_workerFarm",void 0);var zL="latest";function Tc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r[e.id]||{},n="".concat(e.id,"-worker.js"),a=t.workerUrl;if(!a&&e.id==="compression"&&(a=r.workerUrl),r._workerType==="test"&&(a="modules/".concat(e.module,"/dist/").concat(n)),!a){var i=e.version;i==="latest"&&(i=zL);var s=i?"@".concat(i):"";a="https://unpkg.com/@loaders.gl/".concat(e.module).concat(s,"/dist/").concat(n)}return st(a),a}function Ec(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p1;st(e,"no worker provided");var t=e.version;return!(!r||!t)}var Oc=m(Y()),qi=m(K());var Vn=m(V1());var qL="3.3.1",Sc={};function gr(e){return wc.apply(this,arguments)}function wc(){return wc=(0,Oc.default)(qi.default.mark(function e(r){var t,n,a=arguments;return qi.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.length>1&&a[1]!==void 0?a[1]:null,n=a.length>2&&a[2]!==void 0?a[2]:{},t&&(r=z1(r,t,n)),Sc[r]=Sc[r]||JL(r),s.next=6,Sc[r];case 6:return s.abrupt("return",s.sent);case 7:case"end":return s.stop()}},e)})),wc.apply(this,arguments)}function z1(e,r,t){if(e.startsWith("http"))return e;var n=t.modules||{};return n[e]?n[e]:gt?t.CDN?(st(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(r,"@").concat(qL,"/dist/libs/").concat(e)):Hi?"../src/libs/".concat(e):"modules/".concat(r,"/src/libs/").concat(e):"modules/".concat(r,"/dist/libs/").concat(e)}function JL(e){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,Oc.default)(qi.default.mark(function e(r){var t,n,a;return qi.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!r.endsWith("wasm")){s.next=7;break}return s.next=3,fetch(r);case 3:return t=s.sent,s.next=6,t.arrayBuffer();case 6:return s.abrupt("return",s.sent);case 7:if(gt){s.next=20;break}if(s.prev=8,s.t0=Vn&&Vn.requireFromFile,!s.t0){s.next=14;break}return s.next=13,Vn.requireFromFile(r);case 13:s.t0=s.sent;case 14:return s.abrupt("return",s.t0);case 17:return s.prev=17,s.t1=s.catch(8),s.abrupt("return",null);case 20:if(!Hi){s.next=22;break}return s.abrupt("return",importScripts(r));case 22:return s.next=24,fetch(r);case 24:return n=s.sent,s.next=27,n.text();case 27:return a=s.sent,s.abrupt("return",XL(a,r));case 29:case"end":return s.stop()}},e,null,[[8,17]])})),Cc.apply(this,arguments)}function XL(e,r){if(!gt)return Vn.requireFromString&&Vn.requireFromString(e,r);if(Hi)return eval.call(g1,e),null;var t=document.createElement("script");t.id=r;try{t.appendChild(document.createTextNode(e))}catch{t.text=e}return document.body.appendChild(t),null}var Ic=m(Y()),Ji=m(K());function Rc(e,r){return!Wi.isSupported()||!gt&&!(r!=null&&r._nodeWorkers)?!1:e.worker&&r?.worker}function Lc(e,r,t,n,a){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,Ic.default)(Ji.default.mark(function e(r,t,n,a,i){var s,o,u,f,l,c;return Ji.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=r.id,o=Tc(r,n),u=Wi.getWorkerFarm(n),f=u.getWorkerPool({name:s,url:o}),n=JSON.parse(JSON.stringify(n)),a=JSON.parse(JSON.stringify(a||{})),d.next=8,f.startJob("process-on-worker",KL.bind(null,i));case 8:return l=d.sent,l.postMessage("process",{input:t,options:n,context:a}),d.next=12,l.result;case 12:return c=d.sent,d.next=15,c.result;case 15:return d.abrupt("return",d.sent);case 16:case"end":return d.stop()}},e)})),Bc.apply(this,arguments)}function KL(e,r,t,n){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,Ic.default)(Ji.default.mark(function e(r,t,n,a){var i,s,o,u,f;return Ji.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:c.t0=n,c.next=c.t0==="done"?3:c.t0==="error"?5:c.t0==="process"?7:20;break;case 3:return t.done(a),c.abrupt("break",21);case 5:return t.error(new Error(a.error)),c.abrupt("break",21);case 7:return i=a.id,s=a.input,o=a.options,c.prev=8,c.next=11,r(s,o);case 11:u=c.sent,t.postMessage("done",{id:i,result:u}),c.next=19;break;case 15:c.prev=15,c.t1=c.catch(8),f=c.t1 instanceof Error?c.t1.message:"unknown error",t.postMessage("error",{id:i,error:f});case 19:return c.abrupt("break",21);case 20:console.warn("parse-with-worker unknown message ".concat(n));case 21:case"end":return c.stop()}},e,null,[[8,15]])})),Pc.apply(this,arguments)}function q1(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;if(typeof e=="string")return e.slice(0,r);if(ArrayBuffer.isView(e))return W1(e.buffer,e.byteOffset,r);if(e instanceof ArrayBuffer){var t=0;return W1(e,t,r)}return""}function W1(e,r,t){if(e.byteLength<=r+t)return"";for(var n=new DataView(e),a="",i=0;i<t;i++)a+=String.fromCharCode(n.getUint8(r+i));return a}function Fc(e){try{return JSON.parse(e)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(q1(e),'"'))}}function YL(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=QL(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function QL(e,r){if(e){if(typeof e=="string")return J1(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J1(e,r)}}function J1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function kc(e,r,t){if(t=t||e.byteLength,e.byteLength<t||r.byteLength<t)return!1;for(var n=new Uint8Array(e),a=new Uint8Array(r),i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}function Dc(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=r.map(function(l){return l instanceof ArrayBuffer?new Uint8Array(l):l}),a=n.reduce(function(l,c){return l+c.byteLength},0),i=new Uint8Array(a),s=0,o=YL(n),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;i.set(f,s),s+=f.byteLength}}catch(l){o.e(l)}finally{o.f()}return i.buffer}function Xi(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=r,a=n&&n.length>1&&n[0].constructor||null;if(!a)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');for(var i=n.reduce(function(c,h){return c+h.length},0),s=new a(i),o=0,u=0,f=n;u<f.length;u++){var l=f[u];s.set(l,o),o+=l.length}return s}function zn(e,r,t){var n=t!==void 0?new Uint8Array(e).subarray(r,r+t):new Uint8Array(e).subarray(r),a=new Uint8Array(n);return a.buffer}function ln(e,r){return ne(e>=0),ne(r>0),e+(r-1)&~(r-1)}function Nc(e,r,t){var n;if(e instanceof ArrayBuffer)n=new Uint8Array(e);else{var a=e.byteOffset,i=e.byteLength;n=new Uint8Array(e.buffer||e.arrayBuffer,a,i)}return r.set(n,t),t+ln(n.byteLength,4)}var Z1=m(Y()),eb=m(Mc()),Hc=m(K());function zc(e){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,Z1.default)(Hc.default.mark(function e(r){var t,n,a,i,s,o,u;return Hc.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=[],n=!1,a=!1,l.prev=3,s=(0,eb.default)(r);case 5:return l.next=7,s.next();case 7:if(!(n=!(o=l.sent).done)){l.next=13;break}u=o.value,t.push(u);case 10:n=!1,l.next=5;break;case 13:l.next=19;break;case 15:l.prev=15,l.t0=l.catch(3),a=!0,i=l.t0;case 19:if(l.prev=19,l.prev=20,!(n&&s.return!=null)){l.next=24;break}return l.next=24,s.return();case 24:if(l.prev=24,!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(19);case 29:return l.abrupt("return",Dc.apply(void 0,t));case 30:case"end":return l.stop()}},e,null,[[3,15,19,29],[20,,24,28]])})),Vc.apply(this,arguments)}var ob=m(J()),ub=m(z()),fb=m(q());var nb=m(z()),ab=m(q());var tb=m(z()),rb=m(q());function Yi(){var e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){var r=process.hrtime();e=r[0]*1e3+r[1]/1e6}else e=Date.now();return e}var Bo=function(){function e(r,t){(0,tb.default)(this,e),b(this,"name",void 0),b(this,"type",void 0),b(this,"sampleSize",1),b(this,"time",void 0),b(this,"count",void 0),b(this,"samples",void 0),b(this,"lastTiming",void 0),b(this,"lastSampleTime",void 0),b(this,"lastSampleCount",void 0),b(this,"_count",0),b(this,"_time",0),b(this,"_samples",0),b(this,"_startTime",0),b(this,"_timerPending",!1),this.name=r,this.type=t,this.reset()}return(0,rb.default)(e,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Yi(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Yi()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}();var Wn=function(){function e(r){(0,nb.default)(this,e),b(this,"id",void 0),b(this,"stats",{}),this.id=r.id,this.stats={},this._initializeStats(r.stats),Object.seal(this)}return(0,ab.default)(e,[{key:"get",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:n})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var n in this.stats)t(this.stats[n])}},{key:"getTable",value:function(){var t={};return this.forEach(function(n){t[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),t}},{key:"_initializeStats",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(function(a){return t._getOrCreate(a)})}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var n=t.name,a=t.type;return this.stats[n]||(t instanceof Bo?this.stats[n]=t:this.stats[n]=new Bo(n,a)),this.stats[n]}}]),e}();function ib(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function sb(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ib(Object(t),!0).forEach(function(n){(0,ob.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ib(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aF="Queued Requests",iF="Active Requests",sF="Cancelled Requests",oF="Queued Requests Ever",uF="Active Requests Ever",fF={id:"request-scheduler",throttleRequests:!0,maxRequests:6},Qi=function(){function e(){(0,ub.default)(this,e);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(this,"props",void 0),b(this,"stats",void 0),b(this,"activeRequestCount",0),b(this,"requestQueue",[]),b(this,"requestMap",new Map),b(this,"deferredUpdate",null),this.props=sb(sb({},fF),r),this.stats=new Wn({id:this.props.id}),this.stats.get(aF),this.stats.get(iF),this.stats.get(sF),this.stats.get(oF),this.stats.get(uF)}return(0,fb.default)(e,[{key:"scheduleRequest",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(t))return this.requestMap.get(t);var a={handle:t,priority:0,getPriority:n},i=new Promise(function(s){return a.resolve=s,a});return this.requestQueue.push(a),this.requestMap.set(t,i),this._issueNewRequests(),i}},{key:"_issueRequest",value:function(t){var n=this,a=t.handle,i=t.resolve,s=!1,o=function(){s||(s=!0,n.requestMap.delete(a),n.activeRequestCount--,n._issueNewRequests())};return this.activeRequestCount++,i?i({done:o}):Promise.resolve({done:o})}},{key:"_issueNewRequests",value:function(){var t=this;this.deferredUpdate||(this.deferredUpdate=setTimeout(function(){return t._issueNewRequestsAsync()},0))}},{key:"_issueNewRequestsAsync",value:function(){this.deferredUpdate=null;var t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(var n=0;n<t;++n){var a=this.requestQueue.shift();a&&this._issueRequest(a)}}}},{key:"_updateAllRequests",value:function(){for(var t=this.requestQueue,n=0;n<t.length;++n){var a=t[n];this._updateRequest(a)||(t.splice(n,1),this.requestMap.delete(a.handle),n--)}t.sort(function(i,s){return i.priority-s.priority})}},{key:"_updateRequest",value:function(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}]),e}();var lF="",lb={};function Wc(e){for(var r in lb)if(e.startsWith(r)){var t=lb[r];e=e.replace(r,t)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(lF).concat(e)),e}var qc=m(De()),Jc=m(cb());function hb(e){return e&&(0,qc.default)(e)==="object"&&e.isBuffer}function Po(e){if(hb(e))return Jc.toArrayBuffer(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){var r=e,t=new TextEncoder().encode(r);return t.buffer}if(e&&(0,qc.default)(e)==="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}var cn={};$t(cn,{dirname:()=>hF,filename:()=>cF,join:()=>dF});function cF(e){var r=e&&e.lastIndexOf("/");return r>=0?e.substr(r+1):""}function hF(e){var r=e&&e.lastIndexOf("/");return r>=0?e.substr(0,r):""}function dF(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n="/";return r=r.map(function(a,i){return i&&(a=a.replace(new RegExp("^".concat(n)),"")),i!==r.length-1&&(a=a.replace(new RegExp("".concat(n,"$")),"")),a}),r.join(n)}var pF=globalThis._parseImageNode,Xc=typeof Image<"u",Kc=typeof ImageBitmap<"u",mF=Boolean(pF),Yc=tr?!0:mF;function db(e){switch(e){case"auto":return Kc||Xc||Yc;case"imagebitmap":return Kc;case"image":return Xc;case"data":return Yc;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function pb(){if(Kc)return"imagebitmap";if(Xc)return"image";if(Yc)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}var mb=m(De());function vF(e){var r=gF(e);if(!r)throw new Error("Not an image");return r}function vb(e){switch(vF(e)){case"data":return e;case"image":case"imagebitmap":var r=document.createElement("canvas"),t=r.getContext("2d");if(!t)throw new Error("getImageData");return r.width=e.width,r.height=e.height,t.drawImage(e,0,0),t.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function gF(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&(0,mb.default)(e)==="object"&&e.data&&e.width&&e.height?"data":null}var eh=m(Y()),$i=m(K());var yF=/^data:image\/svg\+xml/,bF=/\.svg((\?|#).*)?$/;function Io(e){return e&&(yF.test(e)||bF.test(e))}function gb(e,r){if(Io(r)){var t=new TextDecoder,n=t.decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(i){throw new Error(i.message)}var a="data:image/svg+xml;base64,".concat(btoa(n));return a}return Qc(e,r)}function Qc(e,r){if(Io(r))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}function Zi(e,r,t){return $c.apply(this,arguments)}function $c(){return $c=(0,eh.default)($i.default.mark(function e(r,t,n){var a,i,s;return $i.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=gb(r,n),i=self.URL||self.webkitURL,s=typeof a!="string"&&i.createObjectURL(a),u.prev=3,u.next=6,_F(s||a,t);case 6:return u.abrupt("return",u.sent);case 7:return u.prev=7,s&&i.revokeObjectURL(s),u.finish(7);case 10:case"end":return u.stop()}},e,null,[[3,,7,10]])})),$c.apply(this,arguments)}function _F(e,r){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,eh.default)($i.default.mark(function e(r,t){var n;return $i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=new Image,n.src=r,!(t.image&&t.image.decode&&n.decode)){i.next=6;break}return i.next=5,n.decode();case 5:return i.abrupt("return",n);case 6:return i.next=8,new Promise(function(s,o){try{n.onload=function(){return s(n)},n.onerror=function(u){return o(new Error("Could not load image ".concat(r,": ").concat(u)))}}catch(u){o(u)}});case 8:return i.abrupt("return",i.sent);case 9:case"end":return i.stop()}},e)})),Zc.apply(this,arguments)}var nh=m(Y()),es=m(K());var AF={},yb=!0;function ah(e,r,t){return th.apply(this,arguments)}function th(){return th=(0,nh.default)(es.default.mark(function e(r,t,n){var a,i,s;return es.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!Io(n)){u.next=7;break}return u.next=3,Zi(r,t,n);case 3:i=u.sent,a=i,u.next=8;break;case 7:a=Qc(r,n);case 8:return s=t&&t.imagebitmap,u.next=11,xF(a,s);case 11:return u.abrupt("return",u.sent);case 12:case"end":return u.stop()}},e)})),th.apply(this,arguments)}function xF(e){return rh.apply(this,arguments)}function rh(){return rh=(0,nh.default)(es.default.mark(function e(r){var t,n=arguments;return es.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=n.length>1&&n[1]!==void 0?n[1]:null,(TF(t)||!yb)&&(t=null),!t){i.next=13;break}return i.prev=3,i.next=6,createImageBitmap(r,t);case 6:return i.abrupt("return",i.sent);case 9:i.prev=9,i.t0=i.catch(3),console.warn(i.t0),yb=!1;case 13:return i.next=15,createImageBitmap(r);case 15:return i.abrupt("return",i.sent);case 16:case"end":return i.stop()}},e,null,[[3,9]])})),rh.apply(this,arguments)}function TF(e){for(var r in e||AF)return!1;return!0}var bb=m(Y()),ih=m(K());var yr=!1,ts=!0;function qn(e){var r=rs(e);return MF(r)||wF(r)||EF(r)||SF(r)}function MF(e){var r=rs(e),t=r.byteLength>=24&&r.getUint32(0,yr)===2303741511;return t?{mimeType:"image/png",width:r.getUint32(16,yr),height:r.getUint32(20,yr)}:null}function EF(e){var r=rs(e),t=r.byteLength>=10&&r.getUint32(0,yr)===1195984440;return t?{mimeType:"image/gif",width:r.getUint16(6,ts),height:r.getUint16(8,ts)}:null}function SF(e){var r=rs(e),t=r.byteLength>=14&&r.getUint16(0,yr)===16973&&r.getUint32(2,ts)===r.byteLength;return t?{mimeType:"image/bmp",width:r.getUint32(18,ts),height:r.getUint32(22,ts)}:null}function wF(e){var r=rs(e),t=r.byteLength>=3&&r.getUint16(0,yr)===65496&&r.getUint8(2)===255;if(!t)return null;for(var n=CF(),a=n.tableMarkers,i=n.sofMarkers,s=2;s+9<r.byteLength;){var o=r.getUint16(s,yr);if(i.has(o))return{mimeType:"image/jpeg",height:r.getUint16(s+5,yr),width:r.getUint16(s+7,yr)};if(!a.has(o))return null;s+=2,s+=r.getUint16(s,yr)}return null}function CF(){for(var e=new Set([65499,65476,65484,65501,65534]),r=65504;r<65520;++r)e.add(r);var t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}function rs(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}function oh(e,r){return sh.apply(this,arguments)}function sh(){return sh=(0,bb.default)(ih.default.mark(function e(r,t){var n,a,i;return ih.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=qn(r)||{},a=n.mimeType,i=globalThis._parseImageNode,ne(i),o.next=5,i(r,a);case 5:return o.abrupt("return",o.sent);case 6:case"end":return o.stop()}},e)})),sh.apply(this,arguments)}function lh(e,r,t){return fh.apply(this,arguments)}function fh(){return fh=(0,_b.default)(uh.default.mark(function e(r,t,n){var a,i,s,o,u,f;return uh.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=t||{},a=t.image||{},i=a.type||"auto",s=n||{},o=s.url,u=OF(i),c.t0=u,c.next=c.t0==="imagebitmap"?8:c.t0==="image"?12:c.t0==="data"?16:20;break;case 8:return c.next=10,ah(r,t,o);case 10:return f=c.sent,c.abrupt("break",21);case 12:return c.next=14,Zi(r,t,o);case 14:return f=c.sent,c.abrupt("break",21);case 16:return c.next=18,oh(r,t);case 18:return f=c.sent,c.abrupt("break",21);case 20:ne(!1);case 21:return i==="data"&&(f=vb(f)),c.abrupt("return",f);case 23:case"end":return c.stop()}},e)})),fh.apply(this,arguments)}function OF(e){switch(e){case"auto":case"data":return pb();default:return db(e),e}}var BF=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],PF=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],IF={image:{type:"auto",decode:!0}},Rr={id:"image",module:"images",name:"Images",version:c1,mimeTypes:PF,extensions:BF,parse:lh,tests:[function(e){return Boolean(qn(new DataView(e)))}],options:IF};var RF=["image/png","image/jpeg","image/gif"],ch={};function hh(e){return ch[e]===void 0&&(ch[e]=LF(e)),ch[e]}function LF(e){switch(e){case"image/webp":return FF();case"image/svg":return tr;default:if(!tr){var r=globalThis._parseImageNode;return Boolean(r)&&RF.includes(e)}return!0}}function FF(){if(!tr)return!1;try{var e=document.createElement("canvas");return e.toDataURL("image/webp").indexOf("data:image/webp")===0}catch{return!1}}function Ab(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ua(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ab(Object(t),!0).forEach(function(n){(0,xb.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ab(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function kF(e){var r=DF();return function(){var n=(0,vh.default)(e),a;if(r){var i=(0,vh.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Sb.default)(this,a)}}function DF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var as=function(e){(0,Eb.default)(t,e);var r=kF(t);function t(n){var a;return(0,Tb.default)(this,t),a=r.call(this),b((0,mh.default)(a),"props",void 0),b((0,mh.default)(a),"fetch",void 0),a.props=is(n),a.fetch=ja(n),a}return(0,Mb.default)(t,[{key:"getMetadata",value:function(){var n=(0,ph.default)(ns.default.mark(function i(){return ns.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("ImageSource.getMetadata not implemented");case 1:case"end":return o.stop()}},i)}));function a(){return n.apply(this,arguments)}return a}()},{key:"getImage",value:function(){var n=(0,ph.default)(ns.default.mark(function i(s){var o,u,f,l;return ns.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=this.getGranularParameters(s),u=this.getURLFromTemplate(o),h.next=4,this.fetch(u);case 4:return f=h.sent,h.next=7,f.arrayBuffer();case 7:return l=h.sent,h.next=10,Rr.parse(l);case 10:return h.abrupt("return",h.sent);case 11:case"end":return h.stop()}},i,this)}));function a(i){return n.apply(this,arguments)}return a}()},{key:"getGranularParameters",value:function(a){var i=(0,dh.default)(a.bbox,4),s=i[0],o=i[1],u=i[2],f=i[3];return Ua(Ua({},a),{},{east:s,north:o,south:f,west:u})}},{key:"getURLFromTemplate",value:function(a){for(var i=this.props.url,s=0,o=Object.entries(a);s<o.length;s++){var u=(0,dh.default)(o[s],2),f=u[0],l=u[1];i=i.replace("${".concat(f,"}"),String(l)),i=i.replace("{".concat(f,"}"),String(l))}return i}}]),t}(Ir);b(as,"type","template");b(as,"testURL",function(e){return e.toLowerCase().includes("{")});function ja(e){var r=e?.fetch;if(r&&typeof r=="function")return function(n,a){return r(n,a)};var t=e?.fetch;return t&&typeof t!="function"?function(n){return fetch(n,t)}:function(n){return fetch(n)}}function is(e){return Ua(Ua({},e),{},{loadOptions:Ua(Ua({},e.loadOptions),{},{fetch:ja(e.loadOptions)})})}var kb=m(ve()),Jn=m(Y()),Db=m(J()),Nb=m(z()),Gb=m(q()),ss=m(vt()),Ub=m(Ce()),jb=m(Oe()),Ah=m(Me()),Dt=m(K());var Ob=m(Y()),Bb=m(J()),gh=m(K());function wb(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Cb(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wb(Object(t),!0).forEach(function(n){(0,Bb.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var yh=Cb(Cb({},Hn),{},{id:"wms-feature-info",name:"WMS FeatureInfo",parse:function(){var e=(0,Ob.default)(gh.default.mark(function t(n,a){return gh.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",dc(new TextDecoder().decode(n),a));case 1:case"end":return s.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return dc(r,t)}});var Rb=m(Y()),Lb=m(J()),bh=m(K());function Pb(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ib(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Pb(Object(t),!0).forEach(function(n){(0,Lb.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var _h=Ib(Ib({},Hn),{},{id:"wms-layer-description",name:"WMS DescribeLayer",parse:function(){var e=(0,Rb.default)(bh.default.mark(function t(n,a){return bh.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",pc(new TextDecoder().decode(n),a));case 1:case"end":return s.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseTextSync:function(r,t){return pc(r,t)}});function Fb(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function lt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Fb(Object(t),!0).forEach(function(n){(0,Db.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function NF(e){var r=GF();return function(){var n=(0,Ah.default)(e),a;if(r){var i=(0,Ah.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,jb.default)(this,a)}}function GF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var os=function(e){(0,Ub.default)(t,e);var r=NF(t);function t(n){var a;(0,Nb.default)(this,t);var i;return a=r.call(this),b((0,ss.default)(a),"props",void 0),b((0,ss.default)(a),"fetch",void 0),b((0,ss.default)(a),"capabilities",null),b((0,ss.default)(a),"loaders",[Rr,Ga,Hn,yh,_h]),a.props=is(n),a.fetch=ja(a.props),a.props.loadOptions=lt(lt({},a.props.loadOptions),{},{wms:lt(lt({},(i=a.props.loadOptions)===null||i===void 0?void 0:i.wms),{},{throwOnError:!0})}),a}return(0,Gb.default)(t,[{key:"getMetadata",value:function(){return this.getCapabilities()}},{key:"getImage",value:function(a){return this.getMap(a)}},{key:"getCapabilities",value:function(){var n=(0,Jn.default)(Dt.default.mark(function i(s,o){var u,f,l,c;return Dt.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=this.getCapabilitiesURL(s,o),d.next=3,this.fetch(u);case 3:return f=d.sent,d.next=6,f.arrayBuffer();case 6:return l=d.sent,this._checkResponse(f,l),d.next=10,Hn.parse(l,this.props.loadOptions);case 10:return c=d.sent,this.capabilities=c,d.abrupt("return",c);case 13:case"end":return d.stop()}},i,this)}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"getMap",value:function(){var n=(0,Jn.default)(Dt.default.mark(function i(s,o){var u,f,l;return Dt.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.getMapURL(s,o),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.prev=8,h.next=11,Rr.parse(l,this.props.loadOptions);case 11:return h.abrupt("return",h.sent);case 14:throw h.prev=14,h.t0=h.catch(8),this._parseError(l);case 17:case"end":return h.stop()}},i,this,[[8,14]])}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"getFeatureInfo",value:function(){var n=(0,Jn.default)(Dt.default.mark(function i(s,o){var u,f,l;return Dt.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.getFeatureInfoURL(s,o),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.next=10,yh.parse(l,this.props.loadOptions);case 10:return h.abrupt("return",h.sent);case 11:case"end":return h.stop()}},i,this)}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"getFeatureInfoText",value:function(){var n=(0,Jn.default)(Dt.default.mark(function i(s,o){var u,f,l;return Dt.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=lt(lt({},s),{},{info_format:"text/plain"}),u=this.getFeatureInfoURL(s,o),h.next=4,this.fetch(u);case 4:return f=h.sent,h.next=7,f.arrayBuffer();case 7:return l=h.sent,this._checkResponse(f,l),h.abrupt("return",new TextDecoder().decode(l));case 10:case"end":return h.stop()}},i,this)}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"describeLayer",value:function(){var n=(0,Jn.default)(Dt.default.mark(function i(s,o){var u,f,l;return Dt.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.describeLayerURL(s,o),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.next=10,_h.parse(l,this.props.loadOptions);case 10:return h.abrupt("return",h.sent);case 11:case"end":return h.stop()}},i,this)}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"getLegendGraphic",value:function(){var n=(0,Jn.default)(Dt.default.mark(function i(s,o){var u,f,l;return Dt.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=this.getLegendGraphicURL(s,o),h.next=3,this.fetch(u);case 3:return f=h.sent,h.next=6,f.arrayBuffer();case 6:return l=h.sent,this._checkResponse(f,l),h.prev=8,h.next=11,Rr.parse(l,this.props.loadOptions);case 11:return h.abrupt("return",h.sent);case 14:throw h.prev=14,h.t0=h.catch(8),this._parseError(l);case 17:case"end":return h.stop()}},i,this,[[8,14]])}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"getCapabilitiesURL",value:function(a,i){var s=lt(lt({service:"WMS",version:"1.1.1",request:"GetCapabilities"},a),i);return this._getWMSUrl(s,i)}},{key:"getMapURL",value:function(a,i){var s=lt(lt({service:"WMS",version:"1.1.1",request:"GetMap",styles:void 0,srs:"EPSG:4326",format:"image/png"},a),i);return this._getWMSUrl(s,i)}},{key:"getFeatureInfoURL",value:function(a,i){var s=lt(lt({service:"WMS",version:"1.1.1",request:"GetFeatureInfo",srs:"EPSG:4326",format:"image/png",info_format:"text/plain",styles:void 0},a),i);return this._getWMSUrl(s,i)}},{key:"describeLayerURL",value:function(a,i){var s=lt(lt({service:"WMS",version:"1.1.1",request:"DescribeLayer"},a),i);return this._getWMSUrl(s,i)}},{key:"getLegendGraphicURL",value:function(a,i){var s=lt(lt({service:"WMS",version:"1.1.1",request:"GetLegendGraphic"},a),i);return this._getWMSUrl(s,i)}},{key:"_getWMSUrl",value:function(a,i){for(var s=this.props.url,o=!0,u=0,f=Object.entries(a);u<f.length;u++){var l=(0,kb.default)(f[u],2),c=l[0],h=l[1];s+=o?"?":"&",o=!1,Array.isArray(h)?s+="".concat(c.toUpperCase(),"=").concat(h.join(",")):s+="".concat(c.toUpperCase(),"=").concat(h?String(h):"")}return encodeURI(s)}},{key:"_checkResponse",value:function(a,i){var s=a.headers["content-type"];if(!a.ok||Ga.mimeTypes.includes(s)){var o=Ga.parseSync(i,this.props.loadOptions);throw new Error(o)}}},{key:"_parseError",value:function(a){var i=Ga.parseSync(a,this.props.loadOptions);return new Error(i)}}]),t}(Ir);b(os,"type","wms");b(os,"testURL",function(e){return e.toLowerCase().includes("wms")});var Hb=m(ve()),us=m(Y()),Vb=m(z()),zb=m(q()),xh=m(vt()),Wb=m(Ce()),qb=m(Oe()),Th=m(Me()),Lr=m(K());function UF(e){var r=jF();return function(){var n=(0,Th.default)(e),a;if(r){var i=(0,Th.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,qb.default)(this,a)}}function jF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ro=function(e){(0,Wb.default)(t,e);var r=UF(t);function t(n){var a;return(0,Vb.default)(this,t),a=r.call(this),b((0,xh.default)(a),"props",void 0),b((0,xh.default)(a),"fetch",void 0),a.props=is(n),a.fetch=ja(a.props),a}return(0,zb.default)(t,[{key:"getMetadata",value:function(){var n=(0,us.default)(Lr.default.mark(function i(){return Lr.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.info();case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},i,this)}));function a(){return n.apply(this,arguments)}return a}()},{key:"getImage",value:function(){var n=(0,us.default)(Lr.default.mark(function i(s){return Lr.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:throw new Error("not implemented");case 1:case"end":return u.stop()}},i)}));function a(i){return n.apply(this,arguments)}return a}()},{key:"info",value:function(){var n=(0,us.default)(Lr.default.mark(function i(){return Lr.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("not implemented");case 1:case"end":return o.stop()}},i)}));function a(){return n.apply(this,arguments)}return a}()},{key:"exportImage",value:function(a){throw new Error("not implemented")}},{key:"infoURL",value:function(a){return this.props.url}},{key:"exportImageURL",value:function(a){return this.props.url}},{key:"getUrl",value:function(a,i){for(var s="".concat(this.props.url),o=!0,u=0,f=Object.entries(a);u<f.length;u++){var l=(0,Hb.default)(f[u],2),c=l[0],h=l[1];s+=o?"?":"&",o=!1,Array.isArray(h)?s+="".concat(c.toUpperCase(),"=").concat(h.join(",")):s+="".concat(c.toUpperCase(),"=").concat(h?String(h):"")}return s}},{key:"checkResponse",value:function(){var n=(0,us.default)(Lr.default.mark(function i(s){return Lr.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s.ok){u.next=2;break}throw new Error("error");case 2:case"end":return u.stop()}},i)}));function a(i){return n.apply(this,arguments)}return a}()}]),t}(Ir);b(Ro,"type","arcgis-image-server");b(Ro,"testURL",function(e){return e.toLowerCase().includes("ImageServer")});function HF(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=VF(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function VF(e,r){if(e){if(typeof e=="string")return Jb(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Jb(e,r)}}function Jb(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var zF=[os,Ro,as];function Mh(e){var r=e.type,t=r===void 0?"auto":r,n=t==="auto"?WF(e.url):t;switch(n){case"template":return new as(e);case"wms":return new os(e);default:throw new Error("Not a valid image source type")}}function WF(e){var r=HF(zF),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.testURL&&n.testURL(e))return n.type}}catch(a){r.e(a)}finally{r.f()}return"wms"}function Eh(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t_(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sh(e,r,t){return r&&t_(e.prototype,r),t&&t_(e,t),e}function wh(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function r_(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var rr=1,nr=2,n_=4,fs=5,Xn=484813681109536e-20,k=Math.PI/2,a_=.16666666666666666,i_=.04722222222222222,s_=.022156084656084655,j=1e-10,Ye=.017453292519943295,ar=57.29577951308232,he=Math.PI/4,ls=Math.PI*2,Ne=3.14159265359;var yt={};yt.greenwich=0;yt.lisbon=-9.131906111111;yt.paris=2.337229166667;yt.bogota=-74.080916666667;yt.madrid=-3.687938888889;yt.rome=12.452333333333;yt.bern=7.439583333333;yt.jakarta=106.807719444444;yt.ferro=-17.666666666667;yt.brussels=4.367975;yt.stockholm=18.058277777778;yt.athens=23.7163375;yt.oslo=10.722916666667;var o_={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var u_=/[\s_\-\/\(\)]/g;function Nt(e,r){if(e[r])return e[r];for(var t=Object.keys(e),n=r.toLowerCase().replace(u_,""),a=-1,i,s;++a<t.length;)if(i=t[a],s=i.toLowerCase().replace(u_,""),s===n)return e[i]}function cs(e){var r={},t=e.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,u){var f=u.split("=");return f.push(!0),o[f[0].toLowerCase()]=f[1],o},{}),n,a,i,s={proj:"projName",datum:"datumCode",rf:function(o){r.rf=parseFloat(o)},lat_0:function(o){r.lat0=o*Ye},lat_1:function(o){r.lat1=o*Ye},lat_2:function(o){r.lat2=o*Ye},lat_ts:function(o){r.lat_ts=o*Ye},lon_0:function(o){r.long0=o*Ye},lon_1:function(o){r.long1=o*Ye},lon_2:function(o){r.long2=o*Ye},alpha:function(o){r.alpha=parseFloat(o)*Ye},lonc:function(o){r.longc=o*Ye},x_0:function(o){r.x0=parseFloat(o)},y_0:function(o){r.y0=parseFloat(o)},k_0:function(o){r.k0=parseFloat(o)},k:function(o){r.k0=parseFloat(o)},a:function(o){r.a=parseFloat(o)},b:function(o){r.b=parseFloat(o)},r_a:function(){r.R_A=!0},zone:function(o){r.zone=parseInt(o,10)},south:function(){r.utmSouth=!0},towgs84:function(o){r.datum_params=o.split(",").map(function(u){return parseFloat(u)})},to_meter:function(o){r.to_meter=parseFloat(o)},units:function(o){r.units=o;var u=Nt(o_,o);u&&(r.to_meter=u.to_meter)},from_greenwich:function(o){r.from_greenwich=o*Ye},pm:function(o){var u=Nt(yt,o);r.from_greenwich=(u||parseFloat(o))*Ye},nadgrids:function(o){o==="@null"?r.datumCode="none":r.nadgrids=o},axis:function(o){var u="ewnsud";o.length===3&&u.indexOf(o.substr(0,1))!==-1&&u.indexOf(o.substr(1,1))!==-1&&u.indexOf(o.substr(2,1))!==-1&&(r.axis=o)}};for(n in t)a=t[n],n in s?(i=s[n],typeof i=="function"?i(a):r[i]=a):r[n]=a;return typeof r.datumCode=="string"&&r.datumCode!=="WGS84"&&(r.datumCode=r.datumCode.toLowerCase()),r}var f_=rk,hs=1,l_=2,c_=3,Lo=4,h_=5,Ch=-1,ZF=/\s/,ek=/[A-Za-z]/,tk=/[A-Za-z84_]/,Fo=/[,\]]/,d_=/[\d\.E\-\+]/;function Fr(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=hs}Fr.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Lo)for(;ZF.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case hs:return this.neutral(e);case l_:return this.keyword(e);case Lo:return this.quoted(e);case h_:return this.afterquote(e);case c_:return this.number(e);case Ch:return}};Fr.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Lo;return}if(Fo.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Fr.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=hs;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=hs,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Ch);return}};Fr.prototype.number=function(e){if(d_.test(e)){this.word+=e;return}if(Fo.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Fr.prototype.quoted=function(e){if(e==='"'){this.state=h_;return}this.word+=e};Fr.prototype.keyword=function(e){if(tk.test(e)){this.word+=e;return}if(e==="["){var r=[];r.push(this.word),this.level++,this.root===null?this.root=r:this.currentObject.push(r),this.stack.push(this.currentObject),this.currentObject=r,this.state=hs;return}if(Fo.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Fr.prototype.neutral=function(e){if(ek.test(e)){this.word=e,this.state=l_;return}if(e==='"'){this.word="",this.state=Lo;return}if(d_.test(e)){this.word=e,this.state=c_;return}if(Fo.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Fr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Ch)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function rk(e){var r=new Fr(e);return r.output()}function p_(e,r,t){Array.isArray(r)&&(t.unshift(r),r=null);var n=r?{}:e,a=t.reduce(function(i,s){return Kn(s,i),i},n);r&&(e[r]=a)}function Kn(e,r){if(!Array.isArray(e)){r[e]=!0;return}var t=e.shift();if(t==="PARAMETER"&&(t=e.shift()),e.length===1){if(Array.isArray(e[0])){r[t]={},Kn(e[0],r[t]);return}r[t]=e[0];return}if(!e.length){r[t]=!0;return}if(t==="TOWGS84"){r[t]=e;return}if(t==="AXIS"){t in r||(r[t]=[]),r[t].push(e);return}Array.isArray(t)||(r[t]={});var n;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":r[t]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Kn(e[2],r[t]);return;case"SPHEROID":case"ELLIPSOID":r[t]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Kn(e[3],r[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],p_(r,t,e);return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return Kn(e,r[t]);return p_(r,t,e)}}var nk=.017453292519943295;function ak(e,r){var t=r[0],n=r[1];!(t in e)&&n in e&&(e[t]=e[n],r.length===3&&(e[t]=r[2](e[t])))}function kr(e){return e*nk}function ik(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var r="",t=0,n=e.AXIS.length;t<n;++t){var a=[e.AXIS[t][0].toLowerCase(),e.AXIS[t][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?r+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?r+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?r+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(e.axis=r)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var i=e.GEOGCS;e.type==="GEOGCS"&&(i=e),i&&(i.DATUM?e.datumCode=i.DATUM.name.toLowerCase():e.datumCode=i.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(e.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=i.DATUM.SPHEROID.a,e.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(e.datum_params=i.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function s(f){var l=e.to_meter||1;return f*l}var o=function(f){return ak(e,f)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",kr],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",kr],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",kr],["lat0","latitude_of_origin",kr],["lat0","standard_parallel_1",kr],["lat1","standard_parallel_1",kr],["lat2","standard_parallel_2",kr],["azimuth","Azimuth"],["alpha","azimuth",kr],["srsCode","name"]];u.forEach(o),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=kr(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function ko(e){var r=f_(e),t=r.shift(),n=r.shift();r.unshift(["name",n]),r.unshift(["type",t]);var a={};return Kn(r,a),ik(a),a}function Wt(e){var r=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?Wt[e]=cs(arguments[1]):Wt[e]=ko(arguments[1]):Wt[e]=t}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(n){Array.isArray(n)?Wt.apply(r,n):Wt(n)});if(typeof e=="string"){if(e in Wt)return Wt[e]}else"EPSG"in e?Wt["EPSG:"+e.EPSG]=e:"ESRI"in e?Wt["ESRI:"+e.ESRI]=e:"IAU2000"in e?Wt["IAU2000:"+e.IAU2000]=e:console.log(e);return}}r_(Wt);var Ha=Wt;function sk(e){return typeof e=="string"}function ok(e){return e in Ha}var uk=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function fk(e){return uk.some(function(r){return e.indexOf(r)>-1})}var lk=["3857","900913","3785","102113"];function ck(e){var r=Nt(e,"authority");if(r){var t=Nt(r,"epsg");return t&&lk.indexOf(t)>-1}}function hk(e){var r=Nt(e,"extension");if(r)return Nt(r,"proj4")}function dk(e){return e[0]==="+"}function pk(e){if(sk(e)){if(ok(e))return Ha[e];if(fk(e)){var r=ko(e);if(ck(r))return Ha["EPSG:3857"];var t=hk(r);return t?cs(t):r}if(dk(e))return cs(e)}else return e}var m_=pk;function Oh(e,r){e=e||{};var t,n;if(!r)return e;for(n in r)t=r[n],t!==void 0&&(e[n]=t);return e}function ct(e,r,t){var n=e*r;return t/Math.sqrt(1-n*n)}function br(e){return e<0?-1:1}function H(e){return Math.abs(e)<=Ne?e:e-br(e)*ls}function bt(e,r,t){var n=e*t,a=.5*e;return n=Math.pow((1-n)/(1+n),a),Math.tan(.5*(k-r))/n}function Dr(e,r){for(var t=.5*e,n,a,i=k-2*Math.atan(r),s=0;s<=15;s++)if(n=e*Math.sin(i),a=k-2*Math.atan(r*Math.pow((1-n)/(1+n),t))-i,i+=a,Math.abs(a)<=1e-10)return i;return-9999}function mk(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ct(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function vk(e){var r=e.x,t=e.y;if(t*ar>90&&t*ar<-90&&r*ar>180&&r*ar<-180)return null;var n,a;if(Math.abs(Math.abs(t)-k)<=j)return null;if(this.sphere)n=this.x0+this.a*this.k0*H(r-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(he+.5*t));else{var i=Math.sin(t),s=bt(this.e,t,i);n=this.x0+this.a*this.k0*H(r-this.long0),a=this.y0-this.a*this.k0*Math.log(s)}return e.x=n,e.y=a,e}function gk(e){var r=e.x-this.x0,t=e.y-this.y0,n,a;if(this.sphere)a=k-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var i=Math.exp(-t/(this.a*this.k0));if(a=Dr(this.e,i),a===-9999)return null}return n=H(this.long0+r/(this.a*this.k0)),e.x=n,e.y=a,e}var yk=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],v_={init:mk,forward:vk,inverse:gk,names:yk};function bk(){}function g_(e){return e}var _k=["longlat","identity"],y_={init:bk,forward:g_,inverse:g_,names:_k};var Ak=[v_,y_],Do={},No=[];function b_(e,r){var t=No.length;return e.names?(No[t]=e,e.names.forEach(function(n){Do[n.toLowerCase()]=t}),this):(console.log(r),!0)}function xk(e){if(!e)return!1;var r=e.toLowerCase();if(typeof Do[r]<"u"&&No[Do[r]])return No[Do[r]]}function Tk(){Ak.forEach(b_)}var __={start:Tk,add:b_,get:xk};var te={};te.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};te.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};te.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};te.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};te.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};te.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};te.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};te.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};te.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};te.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};te.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};te.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};te.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};te.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};te.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};te.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};te.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};te.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};te.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};te.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};te.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};te.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};te.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};te.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};te.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};te.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};te.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};te.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};te.hough={a:6378270,rf:297,ellipseName:"Hough"};te.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};te.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};te.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};te.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};te.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};te.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};te.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};te.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};te.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};te.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};te.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};te.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var A_=te.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};te.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function x_(e,r,t,n){var a=e*e,i=r*r,s=(a-i)/a,o=0;n?(e*=1-s*(a_+s*(i_+s*s_)),a=e*e,s=0):o=Math.sqrt(s);var u=(a-i)/i;return{es:s,e:o,ep2:u}}function T_(e,r,t,n,a){if(!e){var i=Nt(te,n);i||(i=A_),e=i.a,r=i.b,t=i.rf}return t&&!r&&(r=(1-1/t)*e),(t===0||Math.abs(e-r)<j)&&(a=!0,r=e),{a:e,b:r,rf:t,sphere:a}}var Qe={};Qe.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Qe.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Qe.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Qe.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Qe.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Qe.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Qe.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Qe.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};Qe.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Qe.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Qe.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Qe.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Qe.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Qe.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Qe.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Qe.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Qe.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Mk(e,r,t,n,a,i){var s={};return e===void 0||e==="none"?s.datum_type=fs:s.datum_type=n_,r&&(s.datum_params=r.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=rr),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=nr,s.datum_params[3]*=Xn,s.datum_params[4]*=Xn,s.datum_params[5]*=Xn,s.datum_params[6]=s.datum_params[6]/1e6+1)),s.a=t,s.b=n,s.es=a,s.ep2=i,s}var M_=Mk;function Va(e,r){if(!(this instanceof Va))return new Va(e);r=r||function(u){if(u)throw u};var t=m_(e);if(typeof t!="object"){r(e);return}var n=Va.projections.get(t.projName);if(!n){r(e);return}if(t.datumCode&&t.datumCode!=="none"){var a=Nt(Qe,t.datumCode);a&&(t.datum_params=a.towgs84?a.towgs84.split(","):null,t.ellps=a.ellipse,t.datumName=a.datumName?a.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84";var i=T_(t.a,t.b,t.rf,t.ellps,t.sphere),s=x_(i.a,i.b,i.rf,t.R_A),o=t.datum||M_(t.datumCode,t.datum_params,i.a,i.b,s.es,s.ep2);Oh(this,t),Oh(this,n),this.a=i.a,this.b=i.b,this.rf=i.rf,this.sphere=i.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=o,this.init(),r(null,this)}Va.projections=__;Va.projections.start();var hn=Va;function E_(e,r){return e.datum_type!==r.datum_type||e.a!==r.a||Math.abs(e.es-r.es)>5e-11?!1:e.datum_type===rr?e.datum_params[0]===r.datum_params[0]&&e.datum_params[1]===r.datum_params[1]&&e.datum_params[2]===r.datum_params[2]:e.datum_type===nr?e.datum_params[0]===r.datum_params[0]&&e.datum_params[1]===r.datum_params[1]&&e.datum_params[2]===r.datum_params[2]&&e.datum_params[3]===r.datum_params[3]&&e.datum_params[4]===r.datum_params[4]&&e.datum_params[5]===r.datum_params[5]&&e.datum_params[6]===r.datum_params[6]:!0}function Go(e,r,t){var n=e.x,a=e.y,i=e.z?e.z:0,s,o,u,f;if(a<-k&&a>-1.001*k)a=-k;else if(a>k&&a<1.001*k)a=k;else{if(a<-k)return{x:-1/0,y:-1/0,z:e.z};if(a>k)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),o=Math.sin(a),f=Math.cos(a),u=o*o,s=t/Math.sqrt(1-r*u),{x:(s+i)*f*Math.cos(n),y:(s+i)*f*Math.sin(n),z:(s*(1-r)+i)*o}}function Uo(e,r,t,n){var a=1e-12,i=a*a,s=30,o,u,f,l,c,h,d,p,v,g,y,_,T,x=e.x,E=e.y,C=e.z?e.z:0,L,w,S;if(o=Math.sqrt(x*x+E*E),u=Math.sqrt(x*x+E*E+C*C),o/t<a){if(L=0,u/t<a)return w=k,S=-n,{x:e.x,y:e.y,z:e.z}}else L=Math.atan2(E,x);f=C/u,l=o/u,c=1/Math.sqrt(1-r*(2-r)*l*l),p=l*(1-r)*c,v=f*c,T=0;do T++,d=t/Math.sqrt(1-r*v*v),S=o*p+C*v-d*(1-r*v*v),h=r*d/(d+S),c=1/Math.sqrt(1-h*(2-h)*l*l),g=l*(1-h)*c,y=f*c,_=y*p-g*v,p=g,v=y;while(_*_>i&&T<s);return w=Math.atan(y/Math.abs(g)),{x:L,y:w,z:S}}function S_(e,r,t){if(r===rr)return{x:e.x+t[0],y:e.y+t[1],z:e.z+t[2]};if(r===nr){var n=t[0],a=t[1],i=t[2],s=t[3],o=t[4],u=t[5],f=t[6];return{x:f*(e.x-u*e.y+o*e.z)+n,y:f*(u*e.x+e.y-s*e.z)+a,z:f*(-o*e.x+s*e.y+e.z)+i}}}function w_(e,r,t){if(r===rr)return{x:e.x-t[0],y:e.y-t[1],z:e.z-t[2]};if(r===nr){var n=t[0],a=t[1],i=t[2],s=t[3],o=t[4],u=t[5],f=t[6],l=(e.x-n)/f,c=(e.y-a)/f,h=(e.z-i)/f;return{x:l+u*c-o*h,y:-u*l+c+s*h,z:o*l-s*c+h}}}function jo(e){return e===rr||e===nr}function C_(e,r,t){return E_(e,r)||e.datum_type===fs||r.datum_type===fs||e.es===r.es&&e.a===r.a&&!jo(e.datum_type)&&!jo(r.datum_type)?t:(t=Go(t,e.es,e.a),jo(e.datum_type)&&(t=S_(t,e.datum_type,e.datum_params)),jo(r.datum_type)&&(t=w_(t,r.datum_type,r.datum_params)),Uo(t,r.es,r.a,r.b))}function Bh(e,r,t){var n=t.x,a=t.y,i=t.z||0,s,o,u,f={};for(u=0;u<3;u++)if(!(r&&u===2&&t.z===void 0))switch(u===0?(s=n,"ew".indexOf(e.axis[u])!==-1?o="x":o="y"):u===1?(s=a,"ns".indexOf(e.axis[u])!==-1?o="y":o="x"):(s=i,o="z"),e.axis[u]){case"e":case"w":case"n":case"s":f[o]=s;break;case"u":t[o]!==void 0&&(f.z=s);break;case"d":t[o]!==void 0&&(f.z=-s);break;default:return null}return f}function Ho(e){var r={x:e[0],y:e[1]};return e.length>2&&(r.z=e[2]),e.length>3&&(r.m=e[3]),r}function B_(e){O_(e.x),O_(e.y)}function O_(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function Ek(e,r){return(e.datum.datum_type===rr||e.datum.datum_type===nr)&&r.datumCode!=="WGS84"||(r.datum.datum_type===rr||r.datum.datum_type===nr)&&e.datumCode!=="WGS84"}function Yn(e,r,t){var n;if(Array.isArray(t)&&(t=Ho(t)),B_(t),e.datum&&r.datum&&Ek(e,r)&&(n=new hn("WGS84"),t=Yn(e,n,t),e=n),e.axis!=="enu"&&(t=Bh(e,!1,t)),e.projName==="longlat")t={x:t.x*Ye,y:t.y*Ye,z:t.z||0};else if(e.to_meter&&(t={x:t.x*e.to_meter,y:t.y*e.to_meter,z:t.z||0}),t=e.inverse(t),!t)return;return e.from_greenwich&&(t.x+=e.from_greenwich),t=C_(e.datum,r.datum,t),r.from_greenwich&&(t={x:t.x-r.from_greenwich,y:t.y,z:t.z||0}),r.projName==="longlat"?t={x:t.x*ar,y:t.y*ar,z:t.z||0}:(t=r.forward(t),r.to_meter&&(t={x:t.x/r.to_meter,y:t.y/r.to_meter,z:t.z||0})),r.axis!=="enu"?Bh(r,!0,t):t}var P_=hn("WGS84");function Ph(e,r,t){var n,a,i;return Array.isArray(t)?(n=Yn(e,r,t)||{x:NaN,y:NaN},t.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof r.name<"u"&&r.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(t.splice(3)):[n.x,n.y,t[2]].concat(t.splice(3)):[n.x,n.y].concat(t.splice(2)):[n.x,n.y]):(a=Yn(e,r,t),i=Object.keys(t),i.length===2||i.forEach(function(s){if(typeof e.name<"u"&&e.name==="geocent"||typeof r.name<"u"&&r.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;a[s]=t[s]}),a)}function I_(e){return e instanceof hn?e:e.oProj?e.oProj:hn(e)}function Sk(e,r,t){e=I_(e);var n=!1,a;return typeof r>"u"?(r=e,e=P_,n=!0):(typeof r.x<"u"||Array.isArray(r))&&(t=r,r=e,e=P_,n=!0),r=I_(r),t?Ph(e,r,t):(a={forward:function(i){return Ph(e,r,i)},inverse:function(i){return Ph(r,e,i)}},n&&(a.oProj=r),a)}var Gt=Sk;var R_=6,F_="AJSAJS",k_="AFAFAF",za=65,Ct=73,qt=79,ds=86,ps=90,D_={forward:Rh,inverse:wk,toPoint:Lh};function Rh(e,r){return r=r||5,Bk(Ck({lat:e[1],lon:e[0]}),r)}function wk(e){var r=Fh(G_(e.toUpperCase()));return r.lat&&r.lon?[r.lon,r.lat,r.lon,r.lat]:[r.left,r.bottom,r.right,r.top]}function Lh(e){var r=Fh(G_(e.toUpperCase()));return r.lat&&r.lon?[r.lon,r.lat]:[(r.left+r.right)/2,(r.top+r.bottom)/2]}function Ih(e){return e*(Math.PI/180)}function L_(e){return 180*(e/Math.PI)}function Ck(e){var r=e.lat,t=e.lon,n=6378137,a=.00669438,i=.9996,s,o,u,f,l,c,h,d=Ih(r),p=Ih(t),v,g;g=Math.floor((t+180)/6)+1,t===180&&(g=60),r>=56&&r<64&&t>=3&&t<12&&(g=32),r>=72&&r<84&&(t>=0&&t<9?g=31:t>=9&&t<21?g=33:t>=21&&t<33?g=35:t>=33&&t<42&&(g=37)),s=(g-1)*6-180+3,v=Ih(s),o=a/(1-a),u=n/Math.sqrt(1-a*Math.sin(d)*Math.sin(d)),f=Math.tan(d)*Math.tan(d),l=o*Math.cos(d)*Math.cos(d),c=Math.cos(d)*(p-v),h=n*((1-a/4-3*a*a/64-5*a*a*a/256)*d-(3*a/8+3*a*a/32+45*a*a*a/1024)*Math.sin(2*d)+(15*a*a/256+45*a*a*a/1024)*Math.sin(4*d)-35*a*a*a/3072*Math.sin(6*d));var y=i*u*(c+(1-f+l)*c*c*c/6+(5-18*f+f*f+72*l-58*o)*c*c*c*c*c/120)+5e5,_=i*(h+u*Math.tan(d)*(c*c/2+(5-f+9*l+4*l*l)*c*c*c*c/24+(61-58*f+f*f+600*l-330*o)*c*c*c*c*c*c/720));return r<0&&(_+=1e7),{northing:Math.round(_),easting:Math.round(y),zoneNumber:g,zoneLetter:Ok(r)}}function Fh(e){var r=e.northing,t=e.easting,n=e.zoneLetter,a=e.zoneNumber;if(a<0||a>60)return null;var i=.9996,s=6378137,o=.00669438,u,f=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),l,c,h,d,p,v,g,y,_,T=t-5e5,x=r;n<"N"&&(x-=1e7),g=(a-1)*6-180+3,u=o/(1-o),v=x/i,y=v/(s*(1-o/4-3*o*o/64-5*o*o*o/256)),_=y+(3*f/2-27*f*f*f/32)*Math.sin(2*y)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*y)+151*f*f*f/96*Math.sin(6*y),l=s/Math.sqrt(1-o*Math.sin(_)*Math.sin(_)),c=Math.tan(_)*Math.tan(_),h=u*Math.cos(_)*Math.cos(_),d=s*(1-o)/Math.pow(1-o*Math.sin(_)*Math.sin(_),1.5),p=T/(l*i);var E=_-l*Math.tan(_)/d*(p*p/2-(5+3*c+10*h-4*h*h-9*u)*p*p*p*p/24+(61+90*c+298*h+45*c*c-252*u-3*h*h)*p*p*p*p*p*p/720);E=L_(E);var C=(p-(1+2*c+h)*p*p*p/6+(5-2*h+28*c-3*h*h+8*u+24*c*c)*p*p*p*p*p/120)/Math.cos(_);C=g+L_(C);var L;if(e.accuracy){var w=Fh({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});L={top:w.lat,right:w.lon,bottom:E,left:C}}else L={lat:E,lon:C};return L}function Ok(e){var r="Z";return 84>=e&&e>=72?r="X":72>e&&e>=64?r="W":64>e&&e>=56?r="V":56>e&&e>=48?r="U":48>e&&e>=40?r="T":40>e&&e>=32?r="S":32>e&&e>=24?r="R":24>e&&e>=16?r="Q":16>e&&e>=8?r="P":8>e&&e>=0?r="N":0>e&&e>=-8?r="M":-8>e&&e>=-16?r="L":-16>e&&e>=-24?r="K":-24>e&&e>=-32?r="J":-32>e&&e>=-40?r="H":-40>e&&e>=-48?r="G":-48>e&&e>=-56?r="F":-56>e&&e>=-64?r="E":-64>e&&e>=-72?r="D":-72>e&&e>=-80&&(r="C"),r}function Bk(e,r){var t="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Pk(e.easting,e.northing,e.zoneNumber)+t.substr(t.length-5,r)+n.substr(n.length-5,r)}function Pk(e,r,t){var n=N_(t),a=Math.floor(e/1e5),i=Math.floor(r/1e5)%20;return Ik(a,i,n)}function N_(e){var r=e%R_;return r===0&&(r=R_),r}function Ik(e,r,t){var n=t-1,a=F_.charCodeAt(n),i=k_.charCodeAt(n),s=a+e-1,o=i+r,u=!1;s>ps&&(s=s-ps+za-1,u=!0),(s===Ct||a<Ct&&s>Ct||(s>Ct||a<Ct)&&u)&&s++,(s===qt||a<qt&&s>qt||(s>qt||a<qt)&&u)&&(s++,s===Ct&&s++),s>ps&&(s=s-ps+za-1),o>ds?(o=o-ds+za-1,u=!0):u=!1,(o===Ct||i<Ct&&o>Ct||(o>Ct||i<Ct)&&u)&&o++,(o===qt||i<qt&&o>qt||(o>qt||i<qt)&&u)&&(o++,o===Ct&&o++),o>ds&&(o=o-ds+za-1);var f=String.fromCharCode(s)+String.fromCharCode(o);return f}function G_(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var r=e.length,t=null,n="",a,i=0;!/[A-Z]/.test(a=e.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+e;n+=a,i++}var s=parseInt(n,10);if(i===0||i+3>r)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(i++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+e;t=e.substring(i,i+=2);for(var u=N_(s),f=Rk(t.charAt(0),u),l=Lk(t.charAt(1),u);l<Fk(o);)l+=2e6;var c=r-i;if(c%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var h=c/2,d=0,p=0,v,g,y,_,T;return h>0&&(v=1e5/Math.pow(10,h),g=e.substring(i,i+h),d=parseFloat(g)*v,y=e.substring(i+h),p=parseFloat(y)*v),_=d+f,T=p+l,{easting:_,northing:T,zoneLetter:o,zoneNumber:s,accuracy:v}}function Rk(e,r){for(var t=F_.charCodeAt(r-1),n=1e5,a=!1;t!==e.charCodeAt(0);){if(t++,t===Ct&&t++,t===qt&&t++,t>ps){if(a)throw"Bad character: "+e;t=za,a=!0}n+=1e5}return n}function Lk(e,r){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var t=k_.charCodeAt(r-1),n=0,a=!1;t!==e.charCodeAt(0);){if(t++,t===Ct&&t++,t===qt&&t++,t>ds){if(a)throw"Bad character: "+e;t=za,a=!0}n+=1e5}return n}function Fk(e){var r;switch(e){case"C":r=11e5;break;case"D":r=2e6;break;case"E":r=28e5;break;case"F":r=37e5;break;case"G":r=46e5;break;case"H":r=55e5;break;case"J":r=64e5;break;case"K":r=73e5;break;case"L":r=82e5;break;case"M":r=91e5;break;case"N":r=0;break;case"P":r=8e5;break;case"Q":r=17e5;break;case"R":r=26e5;break;case"S":r=35e5;break;case"T":r=44e5;break;case"U":r=53e5;break;case"V":r=62e5;break;case"W":r=7e6;break;case"X":r=79e5;break;default:r=-1}if(r>=0)return r;throw"Invalid zone letter: "+e}function Wa(e,r,t){if(!(this instanceof Wa))return new Wa(e,r,t);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof r>"u"){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=r,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Wa.fromMGRS=function(e){return new Wa(Lh(e))};Wa.prototype.toMGRS=function(e){return Rh([this.x,this.y],e)};var U_=Wa;var kk=1,Dk=.25,j_=.046875,H_=.01953125,V_=.01068115234375,Nk=.75,Gk=.46875,Uk=.013020833333333334,jk=.007120768229166667,Hk=.3645833333333333,Vk=.005696614583333333,zk=.3076171875;function Vo(e){var r=[];r[0]=kk-e*(Dk+e*(j_+e*(H_+e*V_))),r[1]=e*(Nk-e*(j_+e*(H_+e*V_)));var t=e*e;return r[2]=t*(Gk-e*(Uk+e*jk)),t*=e,r[3]=t*(Hk-e*Vk),r[4]=t*e*zk,r}function Qn(e,r,t,n){return t*=r,r*=r,n[0]*e-t*(n[1]+r*(n[2]+r*(n[3]+r*n[4])))}var Wk=20;function zo(e,r,t){for(var n=1/(1-r),a=e,i=Wk;i;--i){var s=Math.sin(a),o=1-r*s*s;if(o=(Qn(a,s,Math.cos(a),t)-e)*(o*Math.sqrt(o))*n,a-=o,Math.abs(o)<j)return a}return a}function qk(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Vo(this.es),this.ml0=Qn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Jk(e){var r=e.x,t=e.y,n=H(r-this.long0),a,i,s,o=Math.sin(t),u=Math.cos(t);if(this.es){var l=u*n,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),d=Math.pow(h,2),p=Math.abs(u)>j?Math.tan(t):0,v=Math.pow(p,2),g=Math.pow(v,2);a=1-this.es*Math.pow(o,2),l=l/Math.sqrt(a);var y=Qn(t,o,u,this.en);i=this.a*(this.k0*l*(1+c/6*(1-v+h+c/20*(5-18*v+g+14*h-58*v*h+c/42*(61+179*g-g*v-479*v)))))+this.x0,s=this.a*(this.k0*(y-this.ml0+o*n*l/2*(1+c/12*(5-v+9*h+4*d+c/30*(61+g-58*v+270*h-330*v*h+c/56*(1385+543*g-g*v-3111*v))))))+this.y0}else{var f=u*Math.sin(n);if(Math.abs(Math.abs(f)-1)<j)return 93;if(i=.5*this.a*this.k0*Math.log((1+f)/(1-f))+this.x0,s=u*Math.cos(n)/Math.sqrt(1-Math.pow(f,2)),f=Math.abs(s),f>=1){if(f-1>j)return 93;s=0}else s=Math.acos(s);t<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return e.x=i,e.y=s,e}function Xk(e){var r,t,n,a,i=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(this.es)if(r=this.ml0+s/this.k0,t=zo(r,this.es,this.en),Math.abs(t)<k){var c=Math.sin(t),h=Math.cos(t),d=Math.abs(h)>j?Math.tan(t):0,p=this.ep2*Math.pow(h,2),v=Math.pow(p,2),g=Math.pow(d,2),y=Math.pow(g,2);r=1-this.es*Math.pow(c,2);var _=i*Math.sqrt(r)/this.k0,T=Math.pow(_,2);r=r*d,n=t-r*T/(1-this.es)*.5*(1-T/12*(5+3*g-9*p*g+p-4*v-T/30*(61+90*g-252*p*g+45*y+46*p-T/56*(1385+3633*g+4095*y+1574*y*g)))),a=H(this.long0+_*(1-T/6*(1+2*g+p-T/20*(5+28*g+24*y+8*p*g+6*p-T/42*(61+662*g+1320*y+720*y*g))))/h)}else n=k*br(s),a=0;else{var o=Math.exp(i/this.k0),u=.5*(o-1/o),f=this.lat0+s/this.k0,l=Math.cos(f);r=Math.sqrt((1-Math.pow(l,2))/(1+Math.pow(u,2))),n=Math.asin(r),s<0&&(n=-n),u===0&&l===0?a=0:a=H(Math.atan2(u,l)+this.long0)}return e.x=a,e.y=n,e}var Kk=["Transverse_Mercator","Transverse Mercator","tmerc"],z_={init:qk,forward:Jk,inverse:Xk,names:Kk};function Wo(e){var r=Math.exp(e);return r=(r-1/r)/2,r}function ms(e,r){e=Math.abs(e),r=Math.abs(r);var t=Math.max(e,r),n=Math.min(e,r)/(t||1);return t*Math.sqrt(1+Math.pow(n,2))}function W_(e){var r=1+e,t=r-1;return t===0?e:e*Math.log(r)/t}function q_(e){var r=Math.abs(e);return r=W_(r*(1+r/(ms(1,r)+1))),e<0?-r:r}function qo(e,r){for(var t=2*Math.cos(2*r),n=e.length-1,a=e[n],i=0,s;--n>=0;)s=-i+t*a+e[n],i=a,a=s;return r+s*Math.sin(2*r)}function J_(e,r){for(var t=2*Math.cos(r),n=e.length-1,a=e[n],i=0,s;--n>=0;)s=-i+t*a+e[n],i=a,a=s;return Math.sin(r)*s}function X_(e){var r=Math.exp(e);return r=(r+1/r)/2,r}function kh(e,r,t){for(var n=Math.sin(r),a=Math.cos(r),i=Wo(t),s=X_(t),o=2*a*s,u=-2*n*i,f=e.length-1,l=e[f],c=0,h=0,d=0,p,v;--f>=0;)p=h,v=c,h=l,c=d,l=-p+o*h-u*c+e[f],d=-v+u*h+o*c;return o=n*s,u=a*i,[o*l-u*d,o*d+u*l]}function Yk(){if(this.es===void 0||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),r=e/(2-e),t=r;this.cgb[0]=r*(2+r*(-2/3+r*(-2+r*(116/45+r*(26/45+r*(-2854/675)))))),this.cbg[0]=r*(-2+r*(2/3+r*(4/3+r*(-82/45+r*(32/45+r*(4642/4725)))))),t=t*r,this.cgb[1]=t*(7/3+r*(-8/5+r*(-227/45+r*(2704/315+r*(2323/945))))),this.cbg[1]=t*(5/3+r*(-16/15+r*(-13/9+r*(904/315+r*(-1522/945))))),t=t*r,this.cgb[2]=t*(56/15+r*(-136/35+r*(-1262/105+r*(73814/2835)))),this.cbg[2]=t*(-26/15+r*(34/21+r*(8/5+r*(-12686/2835)))),t=t*r,this.cgb[3]=t*(4279/630+r*(-332/35+r*(-399572/14175))),this.cbg[3]=t*(1237/630+r*(-12/5+r*(-24832/14175))),t=t*r,this.cgb[4]=t*(4174/315+r*(-144838/6237)),this.cbg[4]=t*(-734/315+r*(109598/31185)),t=t*r,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(r,2),this.Qn=this.k0/(1+r)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=r*(-.5+r*(2/3+r*(-37/96+r*(1/360+r*(81/512+r*(-96199/604800)))))),this.gtu[0]=r*(.5+r*(-2/3+r*(5/16+r*(41/180+r*(-127/288+r*(7891/37800)))))),this.utg[1]=t*(-1/48+r*(-1/15+r*(437/1440+r*(-46/105+r*(1118711/3870720))))),this.gtu[1]=t*(13/48+r*(-3/5+r*(557/1440+r*(281/630+r*(-1983433/1935360))))),t=t*r,this.utg[2]=t*(-17/480+r*(37/840+r*(209/4480+r*(-5569/90720)))),this.gtu[2]=t*(61/240+r*(-103/140+r*(15061/26880+r*(167603/181440)))),t=t*r,this.utg[3]=t*(-4397/161280+r*(11/504+r*(830251/7257600))),this.gtu[3]=t*(49561/161280+r*(-179/168+r*(6601661/7257600))),t=t*r,this.utg[4]=t*(-4583/161280+r*(108847/3991680)),this.gtu[4]=t*(34729/80640+r*(-3418889/1995840)),t=t*r,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var n=qo(this.cbg,this.lat0);this.Zb=-this.Qn*(n+J_(this.gtu,2*n))}function Qk(e){var r=H(e.x-this.long0),t=e.y;t=qo(this.cbg,t);var n=Math.sin(t),a=Math.cos(t),i=Math.sin(r),s=Math.cos(r);t=Math.atan2(n,s*a),r=Math.atan2(i*a,ms(n,a*s)),r=q_(Math.tan(r));var o=kh(this.gtu,2*t,2*r);t=t+o[0],r=r+o[1];var u,f;return Math.abs(r)<=2.623395162778?(u=this.a*(this.Qn*r)+this.x0,f=this.a*(this.Qn*t+this.Zb)+this.y0):(u=1/0,f=1/0),e.x=u,e.y=f,e}function $k(e){var r=(e.x-this.x0)*(1/this.a),t=(e.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,r=r/this.Qn;var n,a;if(Math.abs(r)<=2.623395162778){var i=kh(this.utg,2*t,2*r);t=t+i[0],r=r+i[1],r=Math.atan(Wo(r));var s=Math.sin(t),o=Math.cos(t),u=Math.sin(r),f=Math.cos(r);t=Math.atan2(s*f,ms(u,f*o)),r=Math.atan2(u,f*o),n=H(r+this.long0),a=qo(this.cgb,t)}else n=1/0,a=1/0;return e.x=n,e.y=a,e}var Zk=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],qa={init:Yk,forward:Qk,inverse:$k,names:Zk};function K_(e,r){if(e===void 0){if(e=Math.floor((H(r)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var eD="etmerc";function tD(){var e=K_(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Ye,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,qa.init.apply(this),this.forward=qa.forward,this.inverse=qa.inverse}var rD=["Universal Transverse Mercator System","utm"],Y_={init:tD,names:rD,dependsOn:eD};function Jo(e,r){return Math.pow((1-e)/(1+e),r)}var nD=20;function aD(){var e=Math.sin(this.lat0),r=Math.cos(this.lat0);r*=r,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*r*r/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+he)/(Math.pow(Math.tan(.5*this.lat0+he),this.C)*Jo(this.e*e,this.ratexp))}function iD(e){var r=e.x,t=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+he),this.C)*Jo(this.e*Math.sin(t),this.ratexp))-k,e.x=this.C*r,e}function sD(e){for(var r=1e-14,t=e.x/this.C,n=e.y,a=Math.pow(Math.tan(.5*n+he)/this.K,1/this.C),i=nD;i>0&&(n=2*Math.atan(a*Jo(this.e*Math.sin(e.y),-.5*this.e))-k,!(Math.abs(n-e.y)<r));--i)e.y=n;return i?(e.x=t,e.y=n,e):null}var oD=["gauss"],Xo={init:aD,forward:iD,inverse:sD,names:oD};function uD(){Xo.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function fD(e){var r,t,n,a;return e.x=H(e.x-this.long0),Xo.forward.apply(this,[e]),r=Math.sin(e.y),t=Math.cos(e.y),n=Math.cos(e.x),a=this.k0*this.R2/(1+this.sinc0*r+this.cosc0*t*n),e.x=a*t*Math.sin(e.x),e.y=a*(this.cosc0*r-this.sinc0*t*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function lD(e){var r,t,n,a,i;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,i=Math.sqrt(e.x*e.x+e.y*e.y)){var s=2*Math.atan2(i,this.R2);r=Math.sin(s),t=Math.cos(s),a=Math.asin(t*this.sinc0+e.y*r*this.cosc0/i),n=Math.atan2(e.x*r,i*this.cosc0*t-e.y*this.sinc0*r)}else a=this.phic0,n=0;return e.x=n,e.y=a,Xo.inverse.apply(this,[e]),e.x=H(e.x+this.long0),e}var cD=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],Q_={init:uD,forward:fD,inverse:lD,names:cD};function hD(e,r,t){return r*=t,Math.tan(.5*(k+e))*Math.pow((1-r)/(1+r),.5*t)}function dD(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=j&&(this.k0=.5*(1+br(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=j&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=j&&(this.k0=.5*this.cons*ct(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/bt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ct(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-k,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function pD(e){var r=e.x,t=e.y,n=Math.sin(t),a=Math.cos(t),i,s,o,u,f,l,c=H(r-this.long0);return Math.abs(Math.abs(r-this.long0)-Math.PI)<=j&&Math.abs(t+this.lat0)<=j?(e.x=NaN,e.y=NaN,e):this.sphere?(i=2*this.k0/(1+this.sinlat0*n+this.coslat0*a*Math.cos(c)),e.x=this.a*i*a*Math.sin(c)+this.x0,e.y=this.a*i*(this.coslat0*n-this.sinlat0*a*Math.cos(c))+this.y0,e):(s=2*Math.atan(this.ssfn_(t,n,this.e))-k,u=Math.cos(s),o=Math.sin(s),Math.abs(this.coslat0)<=j?(f=bt(this.e,t*this.con,this.con*n),l=2*this.a*this.k0*f/this.cons,e.x=this.x0+l*Math.sin(r-this.long0),e.y=this.y0-this.con*l*Math.cos(r-this.long0),e):(Math.abs(this.sinlat0)<j?(i=2*this.a*this.k0/(1+u*Math.cos(c)),e.y=i*o):(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*u*Math.cos(c))),e.y=i*(this.cosX0*o-this.sinX0*u*Math.cos(c))+this.y0),e.x=i*u*Math.sin(c)+this.x0,e))}function mD(e){e.x-=this.x0,e.y-=this.y0;var r,t,n,a,i,s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(s/(2*this.a*this.k0));return r=this.long0,t=this.lat0,s<=j?(e.x=r,e.y=t,e):(t=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/s),Math.abs(this.coslat0)<j?this.lat0>0?r=H(this.long0+Math.atan2(e.x,-1*e.y)):r=H(this.long0+Math.atan2(e.x,e.y)):r=H(this.long0+Math.atan2(e.x*Math.sin(o),s*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=r,e.y=t,e)}else if(Math.abs(this.coslat0)<=j){if(s<=j)return t=this.lat0,r=this.long0,e.x=r,e.y=t,e;e.x*=this.con,e.y*=this.con,n=s*this.cons/(2*this.a*this.k0),t=this.con*Dr(this.e,n),r=this.con*H(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else a=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),r=this.long0,s<=j?i=this.X0:(i=Math.asin(Math.cos(a)*this.sinX0+e.y*Math.sin(a)*this.cosX0/s),r=H(this.long0+Math.atan2(e.x*Math.sin(a),s*this.cosX0*Math.cos(a)-e.y*this.sinX0*Math.sin(a)))),t=-1*Dr(this.e,Math.tan(.5*(k+i)));return e.x=r,e.y=t,e}var vD=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],$_={init:dD,forward:pD,inverse:mD,names:vD,ssfn_:hD};function gD(){var e=this.lat0;this.lambda0=this.long0;var r=Math.sin(e),t=this.a,n=this.rf,a=1/n,i=2*a-Math.pow(a,2),s=this.e=Math.sqrt(i);this.R=this.k0*t*Math.sqrt(1-i)/(1-i*Math.pow(r,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(r/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+e/2)),f=Math.log((1+s*r)/(1-s*r));this.K=o-this.alpha*u+this.alpha*s/2*f}function yD(e){var r=Math.log(Math.tan(Math.PI/4-e.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(r+t)+this.K,a=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(i))),o=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(i));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*s+this.x0,e}function bD(e){for(var r=e.x-this.x0,t=e.y-this.y0,n=r/this.R,a=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(a))),o=this.lambda0+s/this.alpha,u=0,f=i,l=-1e3,c=0;Math.abs(f-l)>1e-7;){if(++c>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(f))/2)),l=f,f=2*Math.atan(Math.exp(u))-Math.PI/2}return e.x=o,e.y=f,e}var _D=["somerc"],Z_={init:gD,forward:yD,inverse:bD,names:_D};function AD(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),r=Math.cos(this.lat0),t=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(r,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-t*t);var n=bt(this.e,this.lat0,e),a=this.bl/r*Math.sqrt((1-this.es)/(1-t*t));a*a<1&&(a=1);var i,s;if(!isNaN(this.longc))this.lat0>=0?i=a+Math.sqrt(a*a-1):i=a-Math.sqrt(a*a-1),this.el=i*Math.pow(n,this.bl),s=.5*(i-1/i),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;else{var o=bt(this.e,this.lat1,Math.sin(this.lat1)),u=bt(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(n,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(n,this.bl);var f=Math.pow(o,this.bl),l=Math.pow(u,this.bl);i=this.el/f,s=.5*(i-1/i);var c=(this.el*this.el-l*f)/(this.el*this.el+l*f),h=(l-f)/(l+f),d=H(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*d)/h)/this.bl,this.long0=H(this.long0);var p=H(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/s),this.alpha=Math.asin(a*Math.sin(this.gamma0))}this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))}function xD(e){var r=e.x,t=e.y,n=H(r-this.long0),a,i,s;if(Math.abs(Math.abs(t)-k)<=j)t>0?s=-1:s=1,i=this.al/this.bl*Math.log(Math.tan(he+s*this.gamma0*.5)),a=-1*s*k*this.al/this.bl;else{var o=bt(this.e,t,Math.sin(t)),u=this.el/Math.pow(o,this.bl),f=.5*(u-1/u),l=.5*(u+1/u),c=Math.sin(this.bl*n),h=(f*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/l;Math.abs(Math.abs(h)-1)<=j?i=Number.POSITIVE_INFINITY:i=.5*this.al*Math.log((1-h)/(1+h))/this.bl,Math.abs(Math.cos(this.bl*n))<=j?a=this.al*this.bl*n:a=this.al*Math.atan2(f*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*n))/this.bl}return this.no_rot?(e.x=this.x0+a,e.y=this.y0+i):(a-=this.uc,e.x=this.x0+i*Math.cos(this.alpha)+a*Math.sin(this.alpha),e.y=this.y0+a*Math.cos(this.alpha)-i*Math.sin(this.alpha)),e}function TD(e){var r,t;this.no_rot?(t=e.y-this.y0,r=e.x-this.x0):(t=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),r=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),r+=this.uc);var n=Math.exp(-1*this.bl*t/this.al),a=.5*(n-1/n),i=.5*(n+1/n),s=Math.sin(this.bl*r/this.al),o=(s*Math.cos(this.gamma0)+a*Math.sin(this.gamma0))/i,u=Math.pow(this.el/Math.sqrt((1+o)/(1-o)),1/this.bl);return Math.abs(o-1)<j?(e.x=this.long0,e.y=k):Math.abs(o+1)<j?(e.x=this.long0,e.y=-1*k):(e.y=Dr(this.e,u),e.x=H(this.long0-Math.atan2(a*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*r/this.al))/this.bl)),e}var MD=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],eA={init:AD,forward:xD,inverse:TD,names:MD};function ED(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<j)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var r=Math.sin(this.lat1),t=Math.cos(this.lat1),n=ct(this.e,r,t),a=bt(this.e,this.lat1,r),i=Math.sin(this.lat2),s=Math.cos(this.lat2),o=ct(this.e,i,s),u=bt(this.e,this.lat2,i),f=bt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>j?this.ns=Math.log(n/o)/Math.log(a/u):this.ns=r,isNaN(this.ns)&&(this.ns=r),this.f0=n/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function SD(e){var r=e.x,t=e.y;Math.abs(2*Math.abs(t)-Math.PI)<=j&&(t=br(t)*(k-2*j));var n=Math.abs(Math.abs(t)-k),a,i;if(n>j)a=bt(this.e,t,Math.sin(t)),i=this.a*this.f0*Math.pow(a,this.ns);else{if(n=t*this.ns,n<=0)return null;i=0}var s=this.ns*H(r-this.long0);return e.x=this.k0*(i*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(s))+this.y0,e}function wD(e){var r,t,n,a,i,s=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(r=Math.sqrt(s*s+o*o),t=1):(r=-Math.sqrt(s*s+o*o),t=-1);var u=0;if(r!==0&&(u=Math.atan2(t*s,t*o)),r!==0||this.ns>0){if(t=1/this.ns,n=Math.pow(r/(this.a*this.f0),t),a=Dr(this.e,n),a===-9999)return null}else a=-k;return i=H(u/this.ns+this.long0),e.x=i,e.y=a,e}var CD=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],tA={init:ED,forward:SD,inverse:wD,names:CD};function OD(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function BD(e){var r,t,n,a,i,s,o,u=e.x,f=e.y,l=H(u-this.long0);return r=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/r)-this.s45),n=-l*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(n)),i=Math.asin(Math.cos(t)*Math.sin(n)/Math.cos(a)),s=this.n*i,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),e.y=o*Math.cos(s)/1,e.x=o*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e}function PD(e){var r,t,n,a,i,s,o,u,f=e.x;e.x=e.y,e.y=f,this.czech||(e.y*=-1,e.x*=-1),s=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x),a=i/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),r=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),t=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(r)),e.x=this.long0-t/this.alfa,o=r,u=0;var l=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(r/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(u=1),o=e.y,l+=1;while(u===0&&l<15);return l>=15?null:e}var ID=["Krovak","krovak"],rA={init:OD,forward:BD,inverse:PD,names:ID};function $e(e,r,t,n,a){return e*a-r*Math.sin(2*a)+t*Math.sin(4*a)-n*Math.sin(6*a)}function Nr(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Gr(e){return .375*e*(1+.25*e*(1+.46875*e))}function Ur(e){return .05859375*e*e*(1+.75*e)}function jr(e){return e*e*e*(35/3072)}function Hr(e,r,t){var n=r*t;return e/Math.sqrt(1-n*n)}function ir(e){return Math.abs(e)<k?e:e-br(e)*Math.PI}function $n(e,r,t,n,a){var i,s;i=e/r;for(var o=0;o<15;o++)if(s=(e-(r*i-t*Math.sin(2*i)+n*Math.sin(4*i)-a*Math.sin(6*i)))/(r-2*t*Math.cos(2*i)+4*n*Math.cos(4*i)-6*a*Math.cos(6*i)),i+=s,Math.abs(s)<=1e-10)return i;return NaN}function RD(){this.sphere||(this.e0=Nr(this.es),this.e1=Gr(this.es),this.e2=Ur(this.es),this.e3=jr(this.es),this.ml0=this.a*$e(this.e0,this.e1,this.e2,this.e3,this.lat0))}function LD(e){var r,t,n=e.x,a=e.y;if(n=H(n-this.long0),this.sphere)r=this.a*Math.asin(Math.cos(a)*Math.sin(n)),t=this.a*(Math.atan2(Math.tan(a),Math.cos(n))-this.lat0);else{var i=Math.sin(a),s=Math.cos(a),o=Hr(this.a,this.e,i),u=Math.tan(a)*Math.tan(a),f=n*Math.cos(a),l=f*f,c=this.es*s*s/(1-this.es),h=this.a*$e(this.e0,this.e1,this.e2,this.e3,a);r=o*f*(1-l*u*(1/6-(8-u+8*c)*l/120)),t=h-this.ml0+o*i/s*l*(.5+(5-u+6*c)*l/24)}return e.x=r+this.x0,e.y=t+this.y0,e}function FD(e){e.x-=this.x0,e.y-=this.y0;var r=e.x/this.a,t=e.y/this.a,n,a;if(this.sphere){var i=t+this.lat0;n=Math.asin(Math.sin(i)*Math.cos(r)),a=Math.atan2(Math.tan(r),Math.cos(i))}else{var s=this.ml0/this.a+t,o=$n(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-k)<=j)return e.x=this.long0,e.y=k,t<0&&(e.y*=-1),e;var u=Hr(this.a,this.e,Math.sin(o)),f=u*u*u/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(o),2),c=r*this.a/u,h=c*c;n=o-u*Math.tan(o)/f*c*c*(.5-(1+3*l)*c*c/24),a=c*(1-h*(l/3+(1+3*l)*l*h/15))/Math.cos(o)}return e.x=H(a+this.long0),e.y=ir(n),e}var kD=["Cassini","Cassini_Soldner","cass"],nA={init:RD,forward:LD,inverse:FD,names:kD};function sr(e,r){var t;return e>1e-7?(t=e*r,(1-e*e)*(r/(1-t*t)-.5/e*Math.log((1-t)/(1+t)))):2*r}var DD=1,ND=2,GD=3,UD=4;function jD(){var e=Math.abs(this.lat0);if(Math.abs(e-k)<j?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<j?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var r;switch(this.qp=sr(this.e,1),this.mmf=.5/(1-this.es),this.apa=YD(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),r=Math.sin(this.lat0),this.sinb1=sr(this.e,r)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*r*r)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function HD(e){var r,t,n,a,i,s,o,u,f,l,c=e.x,h=e.y;if(c=H(c-this.long0),this.sphere){if(i=Math.sin(h),l=Math.cos(h),n=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+l*n:1+this.sinph0*i+this.cosph0*l*n,t<=j)return null;t=Math.sqrt(2/t),r=t*l*Math.sin(c),t*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*l*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<j)return null;t=he-h*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),r=t*Math.sin(c),t*=n}}else{switch(o=0,u=0,f=0,n=Math.cos(c),a=Math.sin(c),i=Math.sin(h),s=sr(this.e,i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=s/this.qp,u=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:f=1+this.sinb1*o+this.cosb1*u*n;break;case this.EQUIT:f=1+u*n;break;case this.N_POLE:f=k+h,s=this.qp-s;break;case this.S_POLE:f=h-k,s=this.qp+s;break}if(Math.abs(f)<j)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),this.mode===this.OBLIQ?t=this.ymf*f*(this.cosb1*o-this.sinb1*u*n):t=(f=Math.sqrt(2/(1+u*n)))*o*this.ymf,r=this.xmf*f*u*a;break;case this.N_POLE:case this.S_POLE:s>=0?(r=(f=Math.sqrt(s))*a,t=n*(this.mode===this.S_POLE?f:-f)):r=t=0;break}}return e.x=this.a*r+this.x0,e.y=this.a*t+this.y0,e}function VD(e){e.x-=this.x0,e.y-=this.y0;var r=e.x/this.a,t=e.y/this.a,n,a,i,s,o,u,f;if(this.sphere){var l=0,c,h=0;if(c=Math.sqrt(r*r+t*t),a=c*.5,a>1)return null;switch(a=2*Math.asin(a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(h=Math.sin(a),l=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(c)<=j?0:Math.asin(t*h/c),r*=h,t=l*c;break;case this.OBLIQ:a=Math.abs(c)<=j?this.lat0:Math.asin(l*this.sinph0+t*h*this.cosph0/c),r*=h*this.cosph0,t=(l-Math.sin(a)*this.sinph0)*c;break;case this.N_POLE:t=-t,a=k-a;break;case this.S_POLE:a-=k;break}n=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(r,t)}else{if(f=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r/=this.dd,t*=this.dd,u=Math.sqrt(r*r+t*t),u<j)return e.x=this.long0,e.y=this.lat0,e;s=2*Math.asin(.5*u/this.rq),i=Math.cos(s),r*=s=Math.sin(s),this.mode===this.OBLIQ?(f=i*this.sinb1+t*s*this.cosb1/u,o=this.qp*f,t=u*this.cosb1*i-t*this.sinb1*s):(f=t*s/u,o=this.qp*f,t=u*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=r*r+t*t,!o)return e.x=this.long0,e.y=this.lat0,e;f=1-o/this.qp,this.mode===this.S_POLE&&(f=-f)}n=Math.atan2(r,t),a=QD(Math.asin(f),this.apa)}return e.x=H(this.long0+n),e.y=a,e}var zD=.3333333333333333,WD=.17222222222222222,qD=.10257936507936508,JD=.06388888888888888,XD=.0664021164021164,KD=.016415012942191543;function YD(e){var r,t=[];return t[0]=e*zD,r=e*e,t[0]+=r*WD,t[1]=r*JD,r*=e,t[0]+=r*qD,t[1]+=r*XD,t[2]=r*KD,t}function QD(e,r){var t=e+e;return e+r[0]*Math.sin(t)+r[1]*Math.sin(t+t)+r[2]*Math.sin(t+t+t)}var $D=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],aA={init:jD,forward:HD,inverse:VD,names:$D,S_POLE:DD,N_POLE:ND,EQUIT:GD,OBLIQ:UD};function Ot(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function ZD(){Math.abs(this.lat1+this.lat2)<j||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ct(this.e3,this.sin_po,this.cos_po),this.qs1=sr(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ct(this.e3,this.sin_po,this.cos_po),this.qs2=sr(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=sr(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>j?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function e6(e){var r=e.x,t=e.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var n=sr(this.e3,this.sin_phi,this.cos_phi),a=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*H(r-this.long0),s=a*Math.sin(i)+this.x0,o=this.rh-a*Math.cos(i)+this.y0;return e.x=s,e.y=o,e}function t6(e){var r,t,n,a,i,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),a=0,r!==0&&(a=Math.atan2(n*e.x,n*e.y)),n=r*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(t=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,t)),i=H(a/this.ns0+this.long0),e.x=i,e.y=s,e}function r6(e,r){var t,n,a,i,s,o=Ot(.5*r);if(e<j)return o;for(var u=e*e,f=1;f<=25;f++)if(t=Math.sin(o),n=Math.cos(o),a=e*t,i=1-a*a,s=.5*i*i/n*(r/(1-u)-t/i+.5/e*Math.log((1-a)/(1+a))),o=o+s,Math.abs(s)<=1e-7)return o;return null}var n6=["Albers_Conic_Equal_Area","Albers","aea"],iA={init:ZD,forward:e6,inverse:t6,names:n6,phi1z:r6};function a6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function i6(e){var r,t,n,a,i,s,o,u,f=e.x,l=e.y;return n=H(f-this.long0),r=Math.sin(l),t=Math.cos(l),a=Math.cos(n),s=this.sin_p14*r+this.cos_p14*t*a,i=1,s>0||Math.abs(s)<=j?(o=this.x0+this.a*i*t*Math.sin(n)/s,u=this.y0+this.a*i*(this.cos_p14*r-this.sin_p14*t*a)/s):(o=this.x0+this.infinity_dist*t*Math.sin(n),u=this.y0+this.infinity_dist*(this.cos_p14*r-this.sin_p14*t*a)),e.x=o,e.y=u,e}function s6(e){var r,t,n,a,i,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(r=Math.sqrt(e.x*e.x+e.y*e.y))?(a=Math.atan2(r,this.rc),t=Math.sin(a),n=Math.cos(a),s=Ot(n*this.sin_p14+e.y*t*this.cos_p14/r),i=Math.atan2(e.x*t,r*this.cos_p14*n-e.y*this.sin_p14*t),i=H(this.long0+i)):(s=this.phic0,i=0),e.x=i,e.y=s,e}var o6=["gnom"],sA={init:a6,forward:i6,inverse:s6,names:o6};function oA(e,r){var t=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(r)-t)<1e-6)return r<0?-1*k:k;for(var n=Math.asin(.5*r),a,i,s,o,u=0;u<30;u++)if(i=Math.sin(n),s=Math.cos(n),o=e*i,a=Math.pow(1-o*o,2)/(2*s)*(r/(1-e*e)-i/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),n+=a,Math.abs(a)<=1e-10)return n;return NaN}function u6(){this.sphere||(this.k0=ct(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function f6(e){var r=e.x,t=e.y,n,a,i=H(r-this.long0);if(this.sphere)n=this.x0+this.a*i*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var s=sr(this.e,Math.sin(t));n=this.x0+this.a*this.k0*i,a=this.y0+this.a*s*.5/this.k0}return e.x=n,e.y=a,e}function l6(e){e.x-=this.x0,e.y-=this.y0;var r,t;return this.sphere?(r=H(this.long0+e.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(t=oA(this.e,2*e.y*this.k0/this.a),r=H(this.long0+e.x/(this.a*this.k0))),e.x=r,e.y=t,e}var c6=["cea"],uA={init:u6,forward:f6,inverse:l6,names:c6};function h6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function d6(e){var r=e.x,t=e.y,n=H(r-this.long0),a=ir(t-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*a,e}function p6(e){var r=e.x,t=e.y;return e.x=H(this.long0+(r-this.x0)/(this.a*this.rc)),e.y=ir(this.lat0+(t-this.y0)/this.a),e}var m6=["Equirectangular","Equidistant_Cylindrical","eqc"],fA={init:h6,forward:d6,inverse:p6,names:m6};var lA=20;function v6(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Nr(this.es),this.e1=Gr(this.es),this.e2=Ur(this.es),this.e3=jr(this.es),this.ml0=this.a*$e(this.e0,this.e1,this.e2,this.e3,this.lat0)}function g6(e){var r=e.x,t=e.y,n,a,i,s=H(r-this.long0);if(i=s*Math.sin(t),this.sphere)Math.abs(t)<=j?(n=this.a*s,a=-1*this.a*this.lat0):(n=this.a*Math.sin(i)/Math.tan(t),a=this.a*(ir(t-this.lat0)+(1-Math.cos(i))/Math.tan(t)));else if(Math.abs(t)<=j)n=this.a*s,a=-1*this.ml0;else{var o=Hr(this.a,this.e,Math.sin(t))/Math.tan(t);n=o*Math.sin(i),a=this.a*$e(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(i))}return e.x=n+this.x0,e.y=a+this.y0,e}function y6(e){var r,t,n,a,i,s,o,u,f;if(n=e.x-this.x0,a=e.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=j)r=H(n/this.a+this.long0),t=0;else{s=this.lat0+a/this.a,o=n*n/this.a/this.a+s*s,u=s;var l;for(i=lA;i;--i)if(l=Math.tan(u),f=-1*(s*(u*l+1)-u-.5*(u*u+o)*l)/((u-s)/l-1),u+=f,Math.abs(f)<=j){t=u;break}r=H(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(t))}else if(Math.abs(a+this.ml0)<=j)t=0,r=H(this.long0+n/this.a);else{s=(this.ml0+a)/this.a,o=n*n/this.a/this.a+s*s,u=s;var c,h,d,p,v;for(i=lA;i;--i)if(v=this.e*Math.sin(u),c=Math.sqrt(1-v*v)*Math.tan(u),h=this.a*$e(this.e0,this.e1,this.e2,this.e3,u),d=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),p=h/this.a,f=(s*(c*p+1)-p-.5*c*(p*p+o))/(this.es*Math.sin(2*u)*(p*p+o-2*s*p)/(4*c)+(s-p)*(c*d-2/Math.sin(2*u))-d),u-=f,Math.abs(f)<=j){t=u;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),r=H(this.long0+Math.asin(n*c/this.a)/Math.sin(t))}return e.x=r,e.y=t,e}var b6=["Polyconic","poly"],cA={init:v6,forward:g6,inverse:y6,names:b6};function _6(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function A6(e){var r,t=e.x,n=e.y,a=n-this.lat0,i=t-this.long0,s=a/Xn*1e-5,o=i,u=1,f=0;for(r=1;r<=10;r++)u=u*s,f=f+this.A[r]*u;var l=f,c=o,h=1,d=0,p,v,g=0,y=0;for(r=1;r<=6;r++)p=h*l-d*c,v=d*l+h*c,h=p,d=v,g=g+this.B_re[r]*h-this.B_im[r]*d,y=y+this.B_im[r]*h+this.B_re[r]*d;return e.x=y*this.a+this.x0,e.y=g*this.a+this.y0,e}function x6(e){var r,t=e.x,n=e.y,a=t-this.x0,i=n-this.y0,s=i/this.a,o=a/this.a,u=1,f=0,l,c,h=0,d=0;for(r=1;r<=6;r++)l=u*s-f*o,c=f*s+u*o,u=l,f=c,h=h+this.C_re[r]*u-this.C_im[r]*f,d=d+this.C_im[r]*u+this.C_re[r]*f;for(var p=0;p<this.iterations;p++){var v=h,g=d,y,_,T=s,x=o;for(r=2;r<=6;r++)y=v*h-g*d,_=g*h+v*d,v=y,g=_,T=T+(r-1)*(this.B_re[r]*v-this.B_im[r]*g),x=x+(r-1)*(this.B_im[r]*v+this.B_re[r]*g);v=1,g=0;var E=this.B_re[1],C=this.B_im[1];for(r=2;r<=6;r++)y=v*h-g*d,_=g*h+v*d,v=y,g=_,E=E+r*(this.B_re[r]*v-this.B_im[r]*g),C=C+r*(this.B_im[r]*v+this.B_re[r]*g);var L=E*E+C*C;h=(T*E+x*C)/L,d=(x*E-T*C)/L}var w=h,S=d,A=1,I=0;for(r=1;r<=9;r++)A=A*w,I=I+this.D[r]*A;var F=this.lat0+I*Xn*1e5,D=this.long0+S;return e.x=D,e.y=F,e}var T6=["New_Zealand_Map_Grid","nzmg"],hA={init:_6,forward:A6,inverse:x6,names:T6};function M6(){}function E6(e){var r=e.x,t=e.y,n=H(r-this.long0),a=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return e.x=a,e.y=i,e}function S6(e){e.x-=this.x0,e.y-=this.y0;var r=H(this.long0+e.x/this.a),t=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=r,e.y=t,e}var w6=["Miller_Cylindrical","mill"],dA={init:M6,forward:E6,inverse:S6,names:w6};var C6=20;function O6(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Vo(this.es)}function B6(e){var r,t,n=e.x,a=e.y;if(n=H(n-this.long0),this.sphere){if(!this.m)a=this.n!==1?Math.asin(this.n*Math.sin(a)):a;else for(var i=this.n*Math.sin(a),s=C6;s;--s){var o=(this.m*a+Math.sin(a)-i)/(this.m+Math.cos(a));if(a-=o,Math.abs(o)<j)break}r=this.a*this.C_x*n*(this.m+Math.cos(a)),t=this.a*this.C_y*a}else{var u=Math.sin(a),f=Math.cos(a);t=this.a*Qn(a,u,f,this.en),r=this.a*n*f/Math.sqrt(1-this.es*u*u)}return e.x=r,e.y=t,e}function P6(e){var r,t,n,a;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,r=e.y/this.a,this.sphere?(r/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(r))),this.m?r=Ot((this.m*r+Math.sin(r))/this.n):this.n!==1&&(r=Ot(Math.sin(r)/this.n)),n=H(n+this.long0),r=ir(r)):(r=zo(e.y/this.a,this.es,this.en),a=Math.abs(r),a<k?(a=Math.sin(r),t=this.long0+e.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(r)),n=H(t)):a-j<k&&(n=this.long0)),e.x=n,e.y=r,e}var I6=["Sinusoidal","sinu"],pA={init:O6,forward:B6,inverse:P6,names:I6};function R6(){}function L6(e){for(var r=e.x,t=e.y,n=H(r-this.long0),a=t,i=Math.PI*Math.sin(t);;){var s=-(a+Math.sin(a)-i)/(1+Math.cos(a));if(a+=s,Math.abs(s)<j)break}a/=2,Math.PI/2-Math.abs(t)<j&&(n=0);var o=.900316316158*this.a*n*Math.cos(a)+this.x0,u=1.4142135623731*this.a*Math.sin(a)+this.y0;return e.x=o,e.y=u,e}function F6(e){var r,t;e.x-=this.x0,e.y-=this.y0,t=e.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),r=Math.asin(t);var n=H(this.long0+e.x/(.900316316158*this.a*Math.cos(r)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),t=(2*r+Math.sin(2*r))/Math.PI,Math.abs(t)>1&&(t=1);var a=Math.asin(t);return e.x=n,e.y=a,e}var k6=["Mollweide","moll"],mA={init:R6,forward:L6,inverse:F6,names:k6};function D6(){Math.abs(this.lat1+this.lat2)<j||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Nr(this.es),this.e1=Gr(this.es),this.e2=Ur(this.es),this.e3=jr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ct(this.e,this.sinphi,this.cosphi),this.ml1=$e(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<j?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ct(this.e,this.sinphi,this.cosphi),this.ml2=$e(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=$e(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function N6(e){var r=e.x,t=e.y,n;if(this.sphere)n=this.a*(this.g-t);else{var a=$e(this.e0,this.e1,this.e2,this.e3,t);n=this.a*(this.g-a)}var i=this.ns*H(r-this.long0),s=this.x0+n*Math.sin(i),o=this.y0+this.rh-n*Math.cos(i);return e.x=s,e.y=o,e}function G6(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var r,t,n,a;this.ns>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1);var i=0;if(t!==0&&(i=Math.atan2(r*e.x,r*e.y)),this.sphere)return a=H(this.long0+i/this.ns),n=ir(this.g-t/this.a),e.x=a,e.y=n,e;var s=this.g-t/this.a;return n=$n(s,this.e0,this.e1,this.e2,this.e3),a=H(this.long0+i/this.ns),e.x=a,e.y=n,e}var U6=["Equidistant_Conic","eqdc"],vA={init:D6,forward:N6,inverse:G6,names:U6};function j6(){this.R=this.a}function H6(e){var r=e.x,t=e.y,n=H(r-this.long0),a,i;Math.abs(t)<=j&&(a=this.x0+this.R*n,i=this.y0);var s=Ot(2*Math.abs(t/Math.PI));(Math.abs(n)<=j||Math.abs(Math.abs(t)-k)<=j)&&(a=this.x0,t>=0?i=this.y0+Math.PI*this.R*Math.tan(.5*s):i=this.y0+Math.PI*this.R*-Math.tan(.5*s));var o=.5*Math.abs(Math.PI/n-n/Math.PI),u=o*o,f=Math.sin(s),l=Math.cos(s),c=l/(f+l-1),h=c*c,d=c*(2/f-1),p=d*d,v=Math.PI*this.R*(o*(c-p)+Math.sqrt(u*(c-p)*(c-p)-(p+u)*(h-p)))/(p+u);n<0&&(v=-v),a=this.x0+v;var g=u+c;return v=Math.PI*this.R*(d*g-o*Math.sqrt((p+u)*(u+1)-g*g))/(p+u),t>=0?i=this.y0+v:i=this.y0-v,e.x=a,e.y=i,e}function V6(e){var r,t,n,a,i,s,o,u,f,l,c,h,d;return e.x-=this.x0,e.y-=this.y0,c=Math.PI*this.R,n=e.x/c,a=e.y/c,i=n*n+a*a,s=-Math.abs(a)*(1+i),o=s-2*a*a+n*n,u=-2*s+1+2*a*a+i*i,d=a*a/u+(2*o*o*o/u/u/u-9*s*o/u/u)/27,f=(s-o*o/3/u)/u,l=2*Math.sqrt(-f/3),c=3*d/f/l,Math.abs(c)>1&&(c>=0?c=1:c=-1),h=Math.acos(c)/3,e.y>=0?t=(-l*Math.cos(h+Math.PI/3)-o/3/u)*Math.PI:t=-(-l*Math.cos(h+Math.PI/3)-o/3/u)*Math.PI,Math.abs(n)<j?r=this.long0:r=H(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-a*a)+i*i))/2/n),e.x=r,e.y=t,e}var z6=["Van_der_Grinten_I","VanDerGrinten","vandg"],gA={init:j6,forward:H6,inverse:V6,names:z6};function W6(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function q6(e){var r=e.x,t=e.y,n=Math.sin(e.y),a=Math.cos(e.y),i=H(r-this.long0),s,o,u,f,l,c,h,d,p,v,g,y,_,T,x,E,C,L,w,S,A,I,F;return this.sphere?Math.abs(this.sin_p12-1)<=j?(e.x=this.x0+this.a*(k-t)*Math.sin(i),e.y=this.y0-this.a*(k-t)*Math.cos(i),e):Math.abs(this.sin_p12+1)<=j?(e.x=this.x0+this.a*(k+t)*Math.sin(i),e.y=this.y0+this.a*(k+t)*Math.cos(i),e):(L=this.sin_p12*n+this.cos_p12*a*Math.cos(i),E=Math.acos(L),C=E?E/Math.sin(E):1,e.x=this.x0+this.a*C*a*Math.sin(i),e.y=this.y0+this.a*C*(this.cos_p12*n-this.sin_p12*a*Math.cos(i)),e):(s=Nr(this.es),o=Gr(this.es),u=Ur(this.es),f=jr(this.es),Math.abs(this.sin_p12-1)<=j?(l=this.a*$e(s,o,u,f,k),c=this.a*$e(s,o,u,f,t),e.x=this.x0+(l-c)*Math.sin(i),e.y=this.y0-(l-c)*Math.cos(i),e):Math.abs(this.sin_p12+1)<=j?(l=this.a*$e(s,o,u,f,k),c=this.a*$e(s,o,u,f,t),e.x=this.x0+(l+c)*Math.sin(i),e.y=this.y0+(l+c)*Math.cos(i),e):(h=n/a,d=Hr(this.a,this.e,this.sin_p12),p=Hr(this.a,this.e,n),v=Math.atan((1-this.es)*h+this.es*d*this.sin_p12/(p*a)),g=Math.atan2(Math.sin(i),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(i)),g===0?w=Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(g)-Math.PI)<=j?w=-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):w=Math.asin(Math.sin(i)*Math.cos(v)/Math.sin(g)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),_=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es),T=y*_,x=_*_,S=w*w,A=S*w,I=A*w,F=I*w,E=d*w*(1-S*x*(1-x)/6+A/8*T*(1-2*x)+I/120*(x*(4-7*x)-3*y*y*(1-7*x))-F/48*T),e.x=this.x0+E*Math.sin(g),e.y=this.y0+E*Math.cos(g),e))}function J6(e){e.x-=this.x0,e.y-=this.y0;var r,t,n,a,i,s,o,u,f,l,c,h,d,p,v,g,y,_,T,x,E,C,L,w;return this.sphere?(r=Math.sqrt(e.x*e.x+e.y*e.y),r>2*k*this.a?void 0:(t=r/this.a,n=Math.sin(t),a=Math.cos(t),i=this.long0,Math.abs(r)<=j?s=this.lat0:(s=Ot(a*this.sin_p12+e.y*n*this.cos_p12/r),o=Math.abs(this.lat0)-k,Math.abs(o)<=j?this.lat0>=0?i=H(this.long0+Math.atan2(e.x,-e.y)):i=H(this.long0-Math.atan2(-e.x,e.y)):i=H(this.long0+Math.atan2(e.x*n,r*this.cos_p12*a-e.y*this.sin_p12*n))),e.x=i,e.y=s,e)):(u=Nr(this.es),f=Gr(this.es),l=Ur(this.es),c=jr(this.es),Math.abs(this.sin_p12-1)<=j?(h=this.a*$e(u,f,l,c,k),r=Math.sqrt(e.x*e.x+e.y*e.y),d=h-r,s=$n(d/this.a,u,f,l,c),i=H(this.long0+Math.atan2(e.x,-1*e.y)),e.x=i,e.y=s,e):Math.abs(this.sin_p12+1)<=j?(h=this.a*$e(u,f,l,c,k),r=Math.sqrt(e.x*e.x+e.y*e.y),d=r-h,s=$n(d/this.a,u,f,l,c),i=H(this.long0+Math.atan2(e.x,e.y)),e.x=i,e.y=s,e):(r=Math.sqrt(e.x*e.x+e.y*e.y),g=Math.atan2(e.x,e.y),p=Hr(this.a,this.e,this.sin_p12),y=Math.cos(g),_=this.e*this.cos_p12*y,T=-_*_/(1-this.es),x=3*this.es*(1-T)*this.sin_p12*this.cos_p12*y/(1-this.es),E=r/p,C=E-T*(1+T)*Math.pow(E,3)/6-x*(1+3*T)*Math.pow(E,4)/24,L=1-T*C*C/2-E*C*C*C/6,v=Math.asin(this.sin_p12*Math.cos(C)+this.cos_p12*Math.sin(C)*y),i=H(this.long0+Math.asin(Math.sin(g)*Math.sin(C)/Math.cos(v))),w=Math.sin(v),s=Math.atan2((w-this.es*L*this.sin_p12)*Math.tan(v),w*(1-this.es)),e.x=i,e.y=s,e))}var X6=["Azimuthal_Equidistant","aeqd"],yA={init:W6,forward:q6,inverse:J6,names:X6};function K6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Y6(e){var r,t,n,a,i,s,o,u,f=e.x,l=e.y;return n=H(f-this.long0),r=Math.sin(l),t=Math.cos(l),a=Math.cos(n),s=this.sin_p14*r+this.cos_p14*t*a,i=1,(s>0||Math.abs(s)<=j)&&(o=this.a*i*t*Math.sin(n),u=this.y0+this.a*i*(this.cos_p14*r-this.sin_p14*t*a)),e.x=o,e.y=u,e}function Q6(e){var r,t,n,a,i,s,o;return e.x-=this.x0,e.y-=this.y0,r=Math.sqrt(e.x*e.x+e.y*e.y),t=Ot(r/this.a),n=Math.sin(t),a=Math.cos(t),s=this.long0,Math.abs(r)<=j?(o=this.lat0,e.x=s,e.y=o,e):(o=Ot(a*this.sin_p14+e.y*n*this.cos_p14/r),i=Math.abs(this.lat0)-k,Math.abs(i)<=j?(this.lat0>=0?s=H(this.long0+Math.atan2(e.x,-e.y)):s=H(this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=o,e):(s=H(this.long0+Math.atan2(e.x*n,r*this.cos_p14*a-e.y*this.sin_p14*n)),e.x=s,e.y=o,e))}var $6=["ortho"],bA={init:K6,forward:Y6,inverse:Q6,names:$6};var Ge={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ae={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Z6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=k-he/2?this.face=Ge.TOP:this.lat0<=-(k-he/2)?this.face=Ge.BOTTOM:Math.abs(this.long0)<=he?this.face=Ge.FRONT:Math.abs(this.long0)<=k+he?this.face=this.long0>0?Ge.RIGHT:Ge.LEFT:this.face=Ge.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function e8(e){var r={x:0,y:0},t,n,a,i,s,o,u={value:0};if(e.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):t=e.y,n=e.x,this.face===Ge.TOP)i=k-t,n>=he&&n<=k+he?(u.value=Ae.AREA_0,a=n-k):n>k+he||n<=-(k+he)?(u.value=Ae.AREA_1,a=n>0?n-Ne:n+Ne):n>-(k+he)&&n<=-he?(u.value=Ae.AREA_2,a=n+k):(u.value=Ae.AREA_3,a=n);else if(this.face===Ge.BOTTOM)i=k+t,n>=he&&n<=k+he?(u.value=Ae.AREA_0,a=-n+k):n<he&&n>=-he?(u.value=Ae.AREA_1,a=-n):n<-he&&n>=-(k+he)?(u.value=Ae.AREA_2,a=-n-k):(u.value=Ae.AREA_3,a=n>0?-n+Ne:-n-Ne);else{var f,l,c,h,d,p,v;this.face===Ge.RIGHT?n=Ja(n,+k):this.face===Ge.BACK?n=Ja(n,+Ne):this.face===Ge.LEFT&&(n=Ja(n,-k)),h=Math.sin(t),d=Math.cos(t),p=Math.sin(n),v=Math.cos(n),f=d*v,l=d*p,c=h,this.face===Ge.FRONT?(i=Math.acos(f),a=Ko(i,c,l,u)):this.face===Ge.RIGHT?(i=Math.acos(l),a=Ko(i,c,-f,u)):this.face===Ge.BACK?(i=Math.acos(-f),a=Ko(i,c,-l,u)):this.face===Ge.LEFT?(i=Math.acos(-l),a=Ko(i,c,f,u)):(i=a=0,u.value=Ae.AREA_0)}return o=Math.atan(12/Ne*(a+Math.acos(Math.sin(a)*Math.cos(he))-k)),s=Math.sqrt((1-Math.cos(i))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(a))))),u.value===Ae.AREA_1?o+=k:u.value===Ae.AREA_2?o+=Ne:u.value===Ae.AREA_3&&(o+=1.5*Ne),r.x=s*Math.cos(o),r.y=s*Math.sin(o),r.x=r.x*this.a+this.x0,r.y=r.y*this.a+this.y0,e.x=r.x,e.y=r.y,e}function t8(e){var r={lam:0,phi:0},t,n,a,i,s,o,u,f,l,c={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?c.value=Ae.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(c.value=Ae.AREA_1,t-=k):e.x<0&&-e.x>=Math.abs(e.y)?(c.value=Ae.AREA_2,t=t<0?t+Ne:t-Ne):(c.value=Ae.AREA_3,t+=k),l=Ne/12*Math.tan(t),s=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),o=Math.atan(s),a=Math.cos(t),i=Math.tan(n),u=1-a*a*i*i*(1-Math.cos(Math.atan(1/Math.cos(o)))),u<-1?u=-1:u>1&&(u=1),this.face===Ge.TOP)f=Math.acos(u),r.phi=k-f,c.value===Ae.AREA_0?r.lam=o+k:c.value===Ae.AREA_1?r.lam=o<0?o+Ne:o-Ne:c.value===Ae.AREA_2?r.lam=o-k:r.lam=o;else if(this.face===Ge.BOTTOM)f=Math.acos(u),r.phi=f-k,c.value===Ae.AREA_0?r.lam=-o+k:c.value===Ae.AREA_1?r.lam=-o:c.value===Ae.AREA_2?r.lam=-o-k:r.lam=o<0?-o-Ne:-o+Ne;else{var h,d,p;h=u,l=h*h,l>=1?p=0:p=Math.sqrt(1-l)*Math.sin(o),l+=p*p,l>=1?d=0:d=Math.sqrt(1-l),c.value===Ae.AREA_1?(l=d,d=-p,p=l):c.value===Ae.AREA_2?(d=-d,p=-p):c.value===Ae.AREA_3&&(l=d,d=p,p=-l),this.face===Ge.RIGHT?(l=h,h=-d,d=l):this.face===Ge.BACK?(h=-h,d=-d):this.face===Ge.LEFT&&(l=h,h=d,d=-l),r.phi=Math.acos(-p)-k,r.lam=Math.atan2(d,h),this.face===Ge.RIGHT?r.lam=Ja(r.lam,-k):this.face===Ge.BACK?r.lam=Ja(r.lam,-Ne):this.face===Ge.LEFT&&(r.lam=Ja(r.lam,+k))}if(this.es!==0){var v,g,y;v=r.phi<0?1:0,g=Math.tan(r.phi),y=this.b/Math.sqrt(g*g+this.one_minus_f_squared),r.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),v&&(r.phi=-r.phi)}return r.lam+=this.long0,e.x=r.lam,e.y=r.phi,e}function Ko(e,r,t,n){var a;return e<j?(n.value=Ae.AREA_0,a=0):(a=Math.atan2(r,t),Math.abs(a)<=he?n.value=Ae.AREA_0:a>he&&a<=k+he?(n.value=Ae.AREA_1,a-=k):a>k+he||a<=-(k+he)?(n.value=Ae.AREA_2,a=a>=0?a-Ne:a+Ne):(n.value=Ae.AREA_3,a+=k)),a}function Ja(e,r){var t=e+r;return t<-Ne?t+=ls:t>+Ne&&(t-=ls),t}var r8=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],_A={init:Z6,forward:e8,inverse:t8,names:r8};var Dh=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],vs=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],AA=.8487,xA=1.3523,TA=ar/5,n8=1/TA,Xa=18,Yo=function(e,r){return e[0]+r*(e[1]+r*(e[2]+r*e[3]))},a8=function(e,r){return e[1]+r*(2*e[2]+r*3*e[3])};function i8(e,r,t,n){for(var a=r;n;--n){var i=e(a);if(a-=i,Math.abs(i)<t)break}return a}function s8(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function o8(e){var r=H(e.x-this.long0),t=Math.abs(e.y),n=Math.floor(t*TA);n<0?n=0:n>=Xa&&(n=Xa-1),t=ar*(t-n8*n);var a={x:Yo(Dh[n],t)*r,y:Yo(vs[n],t)};return e.y<0&&(a.y=-a.y),a.x=a.x*this.a*AA+this.x0,a.y=a.y*this.a*xA+this.y0,a}function u8(e){var r={x:(e.x-this.x0)/(this.a*AA),y:Math.abs(e.y-this.y0)/(this.a*xA)};if(r.y>=1)r.x/=Dh[Xa][0],r.y=e.y<0?-k:k;else{var t=Math.floor(r.y*Xa);for(t<0?t=0:t>=Xa&&(t=Xa-1);;)if(vs[t][0]>r.y)--t;else if(vs[t+1][0]<=r.y)++t;else break;var n=vs[t],a=5*(r.y-n[0])/(vs[t+1][0]-n[0]);a=i8(function(i){return(Yo(n,i)-r.y)/a8(n,i)},a,j,100),r.x/=Yo(Dh[t],a),r.y=(5*t+a)*Ye,e.y<0&&(r.y=-r.y)}return r.x=H(r.x+this.long0),r}var f8=["Robinson","robin"],MA={init:s8,forward:o8,inverse:u8,names:f8};function l8(){this.name="geocent"}function c8(e){var r=Go(e,this.es,this.a);return r}function h8(e){var r=Uo(e,this.es,this.a,this.b);return r}var d8=["Geocentric","geocentric","geocent","Geocent"],EA={init:l8,forward:c8,inverse:h8,names:d8};function SA(e){e.Proj.projections.add(z_),e.Proj.projections.add(qa),e.Proj.projections.add(Y_),e.Proj.projections.add(Q_),e.Proj.projections.add($_),e.Proj.projections.add(Z_),e.Proj.projections.add(eA),e.Proj.projections.add(tA),e.Proj.projections.add(rA),e.Proj.projections.add(nA),e.Proj.projections.add(aA),e.Proj.projections.add(iA),e.Proj.projections.add(sA),e.Proj.projections.add(uA),e.Proj.projections.add(fA),e.Proj.projections.add(cA),e.Proj.projections.add(hA),e.Proj.projections.add(dA),e.Proj.projections.add(pA),e.Proj.projections.add(mA),e.Proj.projections.add(vA),e.Proj.projections.add(gA),e.Proj.projections.add(yA),e.Proj.projections.add(bA),e.Proj.projections.add(_A),e.Proj.projections.add(MA),e.Proj.projections.add(EA)}Gt.defaultDatum="WGS84";Gt.Proj=hn;Gt.WGS84=new Gt.Proj("WGS84");Gt.Point=U_;Gt.toPoint=Ho;Gt.defs=Ha;Gt.transform=Yn;Gt.mgrs=D_;Gt.version="__VERSION__";SA(Gt);var Nh=Gt;var Gh=function(){function e(r){var t=r.from,n=t===void 0?"WGS84":t,a=r.to,i=a===void 0?"WGS84":a;if(Eh(this,e),wh(this,"_projection",void 0),this._projection=Nh(n,i),!this._projection)throw new Error("Invalid projection");this.project=this.project.bind(this),this.unproject=this.unproject.bind(this)}return Sh(e,[{key:"project",value:function(t){return this._projection.forward(t)}},{key:"unproject",value:function(t){return this._projection.inverse(t)}}],[{key:"defineProjectionAliases",value:function(t){var n=[];for(var a in t)n.push([a,t[a]]);Nh.defs(n)}}]),e}();function wA(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Qo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wA(Object(t),!0).forEach(function(n){(0,gs.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wA(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function p8(e){var r=m8();return function(){var n=(0,jh.default)(e),a;if(r){var i=(0,jh.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,RA.default)(this,a)}}function m8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var v8={id:"imagery-layer",data:"",serviceType:"auto",srs:"auto",layers:{type:"array",compare:!0,value:[]},onMetadataLoad:{type:"function",value:function(){}},onMetadataLoadError:{type:"function",value:console.error},onImageLoadStart:{type:"function",value:function(){}},onImageLoad:{type:"function",value:function(){}},onImageLoadError:{type:"function",compare:!1,value:function(r,t){return console.error(t,r)}}},CA=new Gh({from:"EPSG:4326",to:"EPSG:3857"}),Zo=function(e){(0,IA.default)(t,e);var r=p8(t);function t(){var n;(0,OA.default)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r.call.apply(r,[this].concat(i)),(0,gs.default)((0,PA.default)(n),"state",void 0),n}return(0,BA.default)(t,[{key:"shouldUpdateState",value:function(){return!0}},{key:"initializeState",value:function(){this.state._nextRequestId=0,this.state.lastRequestId=-1}},{key:"updateState",value:function(a){var i=this,s=a.changeFlags,o=a.props,u=a.oldProps,f=this.context.viewport;s.dataChanged||o.serviceType!==u.serviceType?(this.state.imageSource=this._createImageSource(o),this._loadMetadata(),this.debounce(function(){return i.loadImage(f,"image source changed")},0)):(0,ea._deepEqual)(o.layers,u.layers,1)?s.viewportChanged&&this.debounce(function(){return i.loadImage(f,"viewport changed")}):this.debounce(function(){return i.loadImage(f,"layers changed")},0)}},{key:"finalizeState",value:function(){}},{key:"renderLayers",value:function(){var a=this.state,i=a.bounds,s=a.image,o=a.lastRequestParameters;return s&&new LA.BitmapLayer(Qo(Qo({},this.getSubLayerProps({id:"bitmap"})),{},{_imageCoordinateSystem:o.srs==="EPSG:4326"?ea.COORDINATE_SYSTEM.LNGLAT:ea.COORDINATE_SYSTEM.CARTESIAN,bounds:i,image:s}))}},{key:"getFeatureInfoText",value:function(){var n=(0,$o.default)(Zn.default.mark(function i(s,o){var u,f,l,c;return Zn.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(u=this.state.lastRequestParameters,!u){d.next=6;break}return d.next=4,(f=(l=this.state.imageSource).getFeatureInfoText)===null||f===void 0?void 0:f.call(l,Qo(Qo({},u),{},{query_layers:u.layers,x:s,y:o,info_format:"application/vnd.ogc.gml"}));case 4:return c=d.sent,d.abrupt("return",c);case 6:return d.abrupt("return","");case 7:case"end":return d.stop()}},i,this)}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"_createImageSource",value:function(a){if(a.data instanceof Ir)return a.data;if(typeof a.data=="string")return Mh({url:a.data,loadOptions:a.loadOptions,type:a.serviceType});throw new Error("invalid image source in props.data")}},{key:"_loadMetadata",value:function(){var n=(0,$o.default)(Zn.default.mark(function i(){var s,o,u,f;return Zn.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=this.state.imageSource,c.prev=1,c.next=4,s.getMetadata();case 4:o=c.sent,this.state.imageSource===s&&((u=this.getCurrentLayer())===null||u===void 0||u.props.onMetadataLoad(o)),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),(f=this.getCurrentLayer())===null||f===void 0||f.props.onMetadataLoadError(c.t0);case 11:case"end":return c.stop()}},i,this,[[1,8]])}));function a(){return n.apply(this,arguments)}return a}()},{key:"loadImage",value:function(){var n=(0,$o.default)(Zn.default.mark(function i(s,o){var u,f,l,c,h,d,p,v,g,y,_,T,x,E,C,L,w,S,A,I;return Zn.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(u=this.props,f=u.layers,l=u.serviceType,!(l==="wms"&&f.length===0)){D.next=3;break}return D.abrupt("return");case 3:return c=s.getBounds(),h=s.width,d=s.height,p=this.getRequestId(),v=this.props.srs,v==="auto"&&(v=s.resolution?"EPSG:4326":"EPSG:3857"),g={width:h,height:d,bbox:c,layers:f,srs:v},v==="EPSG:3857"&&(y=CA.project([c[0],c[1]]),_=(0,Uh.default)(y,2),T=_[0],x=_[1],E=CA.project([c[2],c[3]]),C=(0,Uh.default)(E,2),L=C[0],w=C[1],g.bbox=[T,x,L,w]),D.prev=10,this.props.onImageLoadStart(p),D.next=14,this.state.imageSource.getImage(g);case 14:S=D.sent,this.state.lastRequestId<p&&((A=this.getCurrentLayer())===null||A===void 0||A.props.onImageLoad(p),this.setState({image:S,bounds:c,lastRequestParameters:g,lastRequestId:p})),D.next=22;break;case 18:D.prev=18,D.t0=D.catch(10),this.raiseError(D.t0,"Load image"),(I=this.getCurrentLayer())===null||I===void 0||I.props.onImageLoadError(p,D.t0);case 22:case"end":return D.stop()}},i,this,[[10,18]])}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"getRequestId",value:function(){return this.state._nextRequestId++}},{key:"debounce",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500;clearTimeout(this.state._timeoutId),this.state._timeoutId=setTimeout(function(){return a()},i)}}]),t}(ea.CompositeLayer);(0,gs.default)(Zo,"layerName","WMSLayer");(0,gs.default)(Zo,"defaultProps",v8);var FA=m(z()),kA=m(Ce()),DA=m(Oe()),Hh=m(Me()),Vh=m(J()),NA=m(Zt());function g8(e){var r=y8();return function(){var n=(0,Hh.default)(e),a;if(r){var i=(0,Hh.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,DA.default)(this,a)}}function y8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b8={getHeight:{type:"accessor",value:0},greatCircle:!0},eu=function(e){(0,kA.default)(t,e);var r=g8(t);function t(){return(0,FA.default)(this,t),r.apply(this,arguments)}return t}(NA.ArcLayer);(0,Vh.default)(eu,"layerName","GreatCircleLayer");(0,Vh.default)(eu,"defaultProps",b8);var rx=m(z()),nx=m(q()),ax=m(Ce()),ix=m(Oe()),Xh=m(Me()),Kh=m(J());var UA=m(z()),jA=m(q()),HA=m(Ce()),VA=m(Oe()),zh=m(Me()),tu=m(J()),zA=m(er()),Wh=m(Zt());function _8(e){var r=A8();return function(){var n=(0,zh.default)(e),a;if(r){var i=(0,zh.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,VA.default)(this,a)}}function A8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function GA(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function x8(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?GA(Object(t),!0).forEach(function(n){(0,tu.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):GA(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var T8=x8({},Wh.PolygonLayer.defaultProps),Jt=function(e){(0,HA.default)(t,e);var r=_8(t);function t(){return(0,UA.default)(this,t),r.apply(this,arguments)}return(0,jA.default)(t,[{key:"indexToBounds",value:function(){return null}},{key:"renderLayers",value:function(){var a=this.props,i=a.elevationScale,s=a.extruded,o=a.wireframe,u=a.filled,f=a.stroked,l=a.lineWidthUnits,c=a.lineWidthScale,h=a.lineWidthMinPixels,d=a.lineWidthMaxPixels,p=a.lineJointRounded,v=a.lineMiterLimit,g=a.lineDashJustified,y=a.getElevation,_=a.getFillColor,T=a.getLineColor,x=a.getLineWidth,E=this.props,C=E.updateTriggers,L=E.material,w=E.transitions,S=this.getSubLayerClass("cell",Wh.PolygonLayer);return new S({filled:u,wireframe:o,extruded:s,elevationScale:i,stroked:f,lineWidthUnits:l,lineWidthScale:c,lineWidthMinPixels:h,lineWidthMaxPixels:d,lineJointRounded:p,lineMiterLimit:v,lineDashJustified:g,material:L,transitions:w,getElevation:y,getFillColor:_,getLineColor:T,getLineWidth:x},this.getSubLayerProps({id:"cell",updateTriggers:C&&{getElevation:C.getElevation,getFillColor:C.getFillColor,getLineColor:C.getLineColor,getLineWidth:C.getLineWidth}}),this.indexToBounds())}}]),t}(zA.CompositeLayer);(0,tu.default)(Jt,"layerName","GeoCellLayer");(0,tu.default)(Jt,"defaultProps",T8);var Jh=m(ve()),ru=m(qh()),M8=3,E8=30,S8=2*E8+1,qA=180/Math.PI;function XA(e,r,t){var n=1<<r;return[(e[0]+t[0])/n,(e[1]+t[1])/n]}function JA(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function KA(e){return[JA(e[0]),JA(e[1])]}function YA(e,r){var t=(0,Jh.default)(r,2),n=t[0],a=t[1];switch(e){case 0:return[1,n,a];case 1:return[-n,1,a];case 2:return[-n,-a,1];case 3:return[-1,-a,-n];case 4:return[a,-1,-n];case 5:return[a,n,-1];default:throw new Error("Invalid face")}}function QA(e){var r=(0,Jh.default)(e,3),t=r[0],n=r[1],a=r[2],i=Math.atan2(a,Math.sqrt(t*t+n*n)),s=Math.atan2(n,t);return[s*qA,i*qA]}function $A(e){for(var r=ru.default.fromString(e,!0,10).toString(2);r.length<M8+S8;)r="0"+r;for(var t=r.lastIndexOf("1"),n=r.substring(0,3),a=r.substring(3,t),i=a.length/2,s=ru.default.fromString(n,!0,2).toString(10),o=ru.default.fromString(a,!0,2).toString(4);o.length<i;)o="0"+o;return"".concat(s,"/").concat(o)}function w8(e,r,t,n){if(n===0){t===1&&(r[0]=e-1-r[0],r[1]=e-1-r[1]);var a=r[0];r[0]=r[1],r[1]=a}}function ZA(e){for(var r=e.split("/"),t=parseInt(r[0],10),n=r[1],a=n.length,i=[0,0],s,o=a-1;o>=0;o--){s=a-o;var u=n[o],f=0,l=0;u==="1"?l=1:u==="2"?(f=1,l=1):u==="3"&&(f=1);var c=Math.pow(2,s-1);w8(c,i,f,l),i[0]+=c*f,i[1]+=c*l}if(t%2===1){var h=i[0];i[0]=i[1],i[1]=h}return{face:t,ij:i,level:s}}var ex=m(qh());function C8(e){var r=e.padEnd(16,"0");return ex.default.fromString(r,16)}var O8=100;function B8(e){for(var r=e.face,t=e.ij,n=e.level,a=[[0,0],[0,1],[1,1],[1,0],[0,0]],i=Math.max(1,Math.ceil(O8*Math.pow(2,-n))),s=new Float64Array(4*i*2+2),o=0,u=0,f=0;f<4;f++)for(var l=a[f].slice(0),c=a[f+1],h=(c[0]-l[0])/i,d=(c[1]-l[1])/i,p=0;p<i;p++){l[0]+=h,l[1]+=d;var v=XA(t,n,l),g=KA(v),y=YA(r,g),_=QA(y);Math.abs(_[1])>89.999&&(_[0]=u);var T=_[0]-u;_[0]+=T>180?-360:T<-180?360:0,s[o++]=_[0],s[o++]=_[1],u=_[0]}return s[o++]=s[0],s[o++]=s[1],s}function P8(e){if(typeof e=="string"){if(e.indexOf("/")>0)return e;e=C8(e)}return $A(e.toString())}function tx(e){var r=P8(e),t=ZA(r);return B8(t)}function I8(e){var r=R8();return function(){var n=(0,Xh.default)(e),a;if(r){var i=(0,Xh.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,ix.default)(this,a)}}function R8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var L8={getS2Token:{type:"accessor",value:function(r){return r.token}}},nu=function(e){(0,ax.default)(t,e);var r=I8(t);function t(){return(0,rx.default)(this,t),r.apply(this,arguments)}return(0,nx.default)(t,[{key:"indexToBounds",value:function(){var a=this.props,i=a.data,s=a.getS2Token;return{data:i,_normalize:!1,positionFormat:"XY",getPolygon:function(u,f){return tx(s(u,f))}}}}]),t}(Jt);(0,Kh.default)(nu,"layerName","S2Layer");(0,Kh.default)(nu,"defaultProps",L8);var Hx=m(z()),Vx=m(q()),zx=m(Ce()),Wx=m(Oe()),yd=m(Me()),bd=m(J());var xu=m(ve());function Ka(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Yh(e){if(Array.isArray(e))return Ka(e)}function Qh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bs(e,r){if(e){if(typeof e=="string")return Ka(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ka(e,r)}}function $h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ya(e){return Yh(e)||Qh(e)||bs(e)||$h()}function Zh(e){if(Array.isArray(e))return e}function ed(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,s,o;try{for(t=t.call(e);!(a=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));a=!0);}catch(u){i=!0,o=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw o}}return n}}function td(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ht(e,r){return Zh(e)||ed(e,r)||bs(e,r)||td()}function rd(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function sx(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nd(e,r,t){return r&&sx(e.prototype,r),t&&sx(e,t),e}function Be(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ee=1e-6,ft=typeof Float32Array<"u"?Float32Array:Array;var Bee=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function F8(){var e=new ft(4);return ft!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function ox(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e}function au(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e}function ux(e){var r=e[0],t=e[1],n=e[2],a=e[3];return Math.hypot(r,t,n,a)}function fx(e){var r=e[0],t=e[1],n=e[2],a=e[3];return r*r+t*t+n*n+a*a}function lx(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],s=t*t+n*n+a*a+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t*s,e[1]=n*s,e[2]=a*s,e[3]=i*s,e}function cx(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}function hx(e,r,t,n){var a=r[0],i=r[1],s=r[2],o=r[3];return e[0]=a+n*(t[0]-a),e[1]=i+n*(t[1]-i),e[2]=s+n*(t[2]-s),e[3]=o+n*(t[3]-o),e}function iu(e,r,t){var n=r[0],a=r[1],i=r[2],s=r[3];return e[0]=t[0]*n+t[4]*a+t[8]*i+t[12]*s,e[1]=t[1]*n+t[5]*a+t[9]*i+t[13]*s,e[2]=t[2]*n+t[6]*a+t[10]*i+t[14]*s,e[3]=t[3]*n+t[7]*a+t[11]*i+t[15]*s,e}function dx(e,r,t){var n=r[0],a=r[1],i=r[2],s=t[0],o=t[1],u=t[2],f=t[3],l=f*n+o*i-u*a,c=f*a+u*n-s*i,h=f*i+s*a-o*n,d=-s*n-o*a-u*i;return e[0]=l*f+d*-s+c*-u-h*-o,e[1]=c*f+d*-o+h*-s-l*-u,e[2]=h*f+d*-u+l*-o-c*-s,e[3]=r[3],e}var Pee=function(){var e=F8();return function(r,t,n,a,i,s){var o,u;for(t||(t=4),n||(n=0),a?u=Math.min(a*t+n,r.length):u=r.length,o=n;o<u;o+=t)e[0]=r[o],e[1]=r[o+1],e[2]=r[o+2],e[3]=r[o+3],i(e,e,s),r[o]=e[0],r[o+1]=e[1],r[o+2]=e[2],r[o+3]=e[3];return r}}();function $a(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function dn(e,r){var t=iu([],r,e);return au(t,t,1/t[3]),t}function _s(e,r,t){return e<r?r:e>t?t:e}function k8(e){return Math.log(e)*Math.LOG2E}var su=Math.log2||k8;function D8(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function px(e,r){if(e===r){var t=r[1],n=r[2],a=r[3],i=r[6],s=r[7],o=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=i,e[11]=r[14],e[12]=a,e[13]=s,e[14]=o}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}function ou(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],s=r[4],o=r[5],u=r[6],f=r[7],l=r[8],c=r[9],h=r[10],d=r[11],p=r[12],v=r[13],g=r[14],y=r[15],_=t*o-n*s,T=t*u-a*s,x=t*f-i*s,E=n*u-a*o,C=n*f-i*o,L=a*f-i*u,w=l*v-c*p,S=l*g-h*p,A=l*y-d*p,I=c*g-h*v,F=c*y-d*v,D=h*y-d*g,N=_*D-T*F+x*I+E*A-C*S+L*w;return N?(N=1/N,e[0]=(o*D-u*F+f*I)*N,e[1]=(a*F-n*D-i*I)*N,e[2]=(v*L-g*C+y*E)*N,e[3]=(h*C-c*L-d*E)*N,e[4]=(u*A-s*D-f*S)*N,e[5]=(t*D-a*A+i*S)*N,e[6]=(g*x-p*L-y*T)*N,e[7]=(l*L-h*x+d*T)*N,e[8]=(s*F-o*A+f*w)*N,e[9]=(n*A-t*F-i*w)*N,e[10]=(p*C-v*x+y*_)*N,e[11]=(c*x-l*C-d*_)*N,e[12]=(o*S-s*I-u*w)*N,e[13]=(t*I-n*S+a*w)*N,e[14]=(v*T-p*E-g*_)*N,e[15]=(l*E-c*T+h*_)*N,e):null}function mx(e){var r=e[0],t=e[1],n=e[2],a=e[3],i=e[4],s=e[5],o=e[6],u=e[7],f=e[8],l=e[9],c=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],y=r*s-t*i,_=r*o-n*i,T=r*u-a*i,x=t*o-n*s,E=t*u-a*s,C=n*u-a*o,L=f*p-l*d,w=f*v-c*d,S=f*g-h*d,A=l*v-c*p,I=l*g-h*p,F=c*g-h*v;return y*F-_*I+T*A+x*S-E*w+C*L}function ta(e,r,t){var n=r[0],a=r[1],i=r[2],s=r[3],o=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=r[9],d=r[10],p=r[11],v=r[12],g=r[13],y=r[14],_=r[15],T=t[0],x=t[1],E=t[2],C=t[3];return e[0]=T*n+x*o+E*c+C*v,e[1]=T*a+x*u+E*h+C*g,e[2]=T*i+x*f+E*d+C*y,e[3]=T*s+x*l+E*p+C*_,T=t[4],x=t[5],E=t[6],C=t[7],e[4]=T*n+x*o+E*c+C*v,e[5]=T*a+x*u+E*h+C*g,e[6]=T*i+x*f+E*d+C*y,e[7]=T*s+x*l+E*p+C*_,T=t[8],x=t[9],E=t[10],C=t[11],e[8]=T*n+x*o+E*c+C*v,e[9]=T*a+x*u+E*h+C*g,e[10]=T*i+x*f+E*d+C*y,e[11]=T*s+x*l+E*p+C*_,T=t[12],x=t[13],E=t[14],C=t[15],e[12]=T*n+x*o+E*c+C*v,e[13]=T*a+x*u+E*h+C*g,e[14]=T*i+x*f+E*d+C*y,e[15]=T*s+x*l+E*p+C*_,e}function ra(e,r,t){var n=t[0],a=t[1],i=t[2],s,o,u,f,l,c,h,d,p,v,g,y;return r===e?(e[12]=r[0]*n+r[4]*a+r[8]*i+r[12],e[13]=r[1]*n+r[5]*a+r[9]*i+r[13],e[14]=r[2]*n+r[6]*a+r[10]*i+r[14],e[15]=r[3]*n+r[7]*a+r[11]*i+r[15]):(s=r[0],o=r[1],u=r[2],f=r[3],l=r[4],c=r[5],h=r[6],d=r[7],p=r[8],v=r[9],g=r[10],y=r[11],e[0]=s,e[1]=o,e[2]=u,e[3]=f,e[4]=l,e[5]=c,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=y,e[12]=s*n+l*a+p*i+r[12],e[13]=o*n+c*a+v*i+r[13],e[14]=u*n+h*a+g*i+r[14],e[15]=f*n+d*a+y*i+r[15]),e}function Za(e,r,t){var n=t[0],a=t[1],i=t[2];return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*a,e[5]=r[5]*a,e[6]=r[6]*a,e[7]=r[7]*a,e[8]=r[8]*i,e[9]=r[9]*i,e[10]=r[10]*i,e[11]=r[11]*i,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function vx(e,r,t,n){var a=n[0],i=n[1],s=n[2],o=Math.hypot(a,i,s),u,f,l,c,h,d,p,v,g,y,_,T,x,E,C,L,w,S,A,I,F,D,N,B;return o<Ee?null:(o=1/o,a*=o,i*=o,s*=o,u=Math.sin(t),f=Math.cos(t),l=1-f,c=r[0],h=r[1],d=r[2],p=r[3],v=r[4],g=r[5],y=r[6],_=r[7],T=r[8],x=r[9],E=r[10],C=r[11],L=a*a*l+f,w=i*a*l+s*u,S=s*a*l-i*u,A=a*i*l-s*u,I=i*i*l+f,F=s*i*l+a*u,D=a*s*l+i*u,N=i*s*l-a*u,B=s*s*l+f,e[0]=c*L+v*w+T*S,e[1]=h*L+g*w+x*S,e[2]=d*L+y*w+E*S,e[3]=p*L+_*w+C*S,e[4]=c*A+v*I+T*F,e[5]=h*A+g*I+x*F,e[6]=d*A+y*I+E*F,e[7]=p*A+_*I+C*F,e[8]=c*D+v*N+T*B,e[9]=h*D+g*N+x*B,e[10]=d*D+y*N+E*B,e[11]=p*D+_*N+C*B,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function uu(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[4],s=r[5],o=r[6],u=r[7],f=r[8],l=r[9],c=r[10],h=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=i*a+f*n,e[5]=s*a+l*n,e[6]=o*a+c*n,e[7]=u*a+h*n,e[8]=f*a-i*n,e[9]=l*a-s*n,e[10]=c*a-o*n,e[11]=h*a-u*n,e}function gx(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[0],s=r[1],o=r[2],u=r[3],f=r[8],l=r[9],c=r[10],h=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=i*a-f*n,e[1]=s*a-l*n,e[2]=o*a-c*n,e[3]=u*a-h*n,e[8]=i*n+f*a,e[9]=s*n+l*a,e[10]=o*n+c*a,e[11]=u*n+h*a,e}function fu(e,r,t){var n=Math.sin(t),a=Math.cos(t),i=r[0],s=r[1],o=r[2],u=r[3],f=r[4],l=r[5],c=r[6],h=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=i*a+f*n,e[1]=s*a+l*n,e[2]=o*a+c*n,e[3]=u*a+h*n,e[4]=f*a-i*n,e[5]=l*a-s*n,e[6]=c*a-o*n,e[7]=h*a-u*n,e}function yx(e,r){var t=r[0],n=r[1],a=r[2],i=r[4],s=r[5],o=r[6],u=r[8],f=r[9],l=r[10];return e[0]=Math.hypot(t,n,a),e[1]=Math.hypot(i,s,o),e[2]=Math.hypot(u,f,l),e}function bx(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],s=t+t,o=n+n,u=a+a,f=t*s,l=n*s,c=n*o,h=a*s,d=a*o,p=a*u,v=i*s,g=i*o,y=i*u;return e[0]=1-c-p,e[1]=l+y,e[2]=h-g,e[3]=0,e[4]=l-y,e[5]=1-f-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _x(e,r,t,n,a,i,s){var o=1/(t-r),u=1/(a-n),f=1/(i-s);return e[0]=i*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i*2*u,e[6]=0,e[7]=0,e[8]=(t+r)*o,e[9]=(a+n)*u,e[10]=(s+i)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i*2*f,e[15]=0,e}function N8(e,r,t,n,a){var i=1/Math.tan(r/2),s;return e[0]=i/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(s=1/(n-a),e[10]=(a+n)*s,e[14]=2*a*n*s):(e[10]=-1,e[14]=-2*n),e}var lu=N8;function G8(e,r,t,n,a,i,s){var o=1/(r-t),u=1/(n-a),f=1/(i-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(r+t)*o,e[13]=(a+n)*u,e[14]=(s+i)*f,e[15]=1,e}var Ax=G8;function xx(e,r,t,n){var a,i,s,o,u,f,l,c,h,d,p=r[0],v=r[1],g=r[2],y=n[0],_=n[1],T=n[2],x=t[0],E=t[1],C=t[2];return Math.abs(p-x)<Ee&&Math.abs(v-E)<Ee&&Math.abs(g-C)<Ee?D8(e):(l=p-x,c=v-E,h=g-C,d=1/Math.hypot(l,c,h),l*=d,c*=d,h*=d,a=_*h-T*c,i=T*l-y*h,s=y*c-_*l,d=Math.hypot(a,i,s),d?(d=1/d,a*=d,i*=d,s*=d):(a=0,i=0,s=0),o=c*s-h*i,u=h*a-l*s,f=l*i-c*a,d=Math.hypot(o,u,f),d?(d=1/d,o*=d,u*=d,f*=d):(o=0,u=0,f=0),e[0]=a,e[1]=o,e[2]=l,e[3]=0,e[4]=i,e[5]=u,e[6]=c,e[7]=0,e[8]=s,e[9]=f,e[10]=h,e[11]=0,e[12]=-(a*p+i*v+s*g),e[13]=-(o*p+u*v+f*g),e[14]=-(l*p+c*v+h*g),e[15]=1,e)}function sd(e,r){var t=e[0],n=e[1],a=e[2],i=e[3],s=e[4],o=e[5],u=e[6],f=e[7],l=e[8],c=e[9],h=e[10],d=e[11],p=e[12],v=e[13],g=e[14],y=e[15],_=r[0],T=r[1],x=r[2],E=r[3],C=r[4],L=r[5],w=r[6],S=r[7],A=r[8],I=r[9],F=r[10],D=r[11],N=r[12],B=r[13],P=r[14],R=r[15];return Math.abs(t-_)<=Ee*Math.max(1,Math.abs(t),Math.abs(_))&&Math.abs(n-T)<=Ee*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(a-x)<=Ee*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(i-E)<=Ee*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-C)<=Ee*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(o-L)<=Ee*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(u-w)<=Ee*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(f-S)<=Ee*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(l-A)<=Ee*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-I)<=Ee*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-F)<=Ee*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(d-D)<=Ee*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(p-N)<=Ee*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(v-B)<=Ee*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(g-P)<=Ee*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(y-R)<=Ee*Math.max(1,Math.abs(y),Math.abs(R))}function U8(){var e=new ft(2);return ft!=Float32Array&&(e[0]=0,e[1]=0),e}function od(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e}function Tx(e,r){return e[0]=-r[0],e[1]=-r[1],e}function hu(e,r,t,n){var a=r[0],i=r[1];return e[0]=a+n*(t[0]-a),e[1]=i+n*(t[1]-i),e}function Mx(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e}function Ex(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a+t[4],e[1]=t[1]*n+t[3]*a+t[5],e}function du(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[3]*a+t[6],e[1]=t[1]*n+t[4]*a+t[7],e}function pu(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[4]*a+t[12],e[1]=t[1]*n+t[5]*a+t[13],e}var Lee=function(){var e=U8();return function(r,t,n,a,i,s){var o,u;for(t||(t=2),n||(n=0),a?u=Math.min(a*t+n,r.length):u=r.length,o=n;o<u;o+=t)e[0]=r[o],e[1]=r[o+1],i(e,e,s),r[o]=e[0],r[o+1]=e[1];return r}}();function ud(){var e=new ft(3);return ft!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function fd(e){var r=e[0],t=e[1],n=e[2];return Math.hypot(r,t,n)}function ld(e,r,t){var n=new ft(3);return n[0]=e,n[1]=r,n[2]=t,n}function Sx(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e}function j8(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}function wx(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}function Cx(e,r){var t=r[0],n=r[1],a=r[2],i=t*t+n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e}function As(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function ti(e,r,t){var n=r[0],a=r[1],i=r[2],s=t[0],o=t[1],u=t[2];return e[0]=a*u-i*o,e[1]=i*s-n*u,e[2]=n*o-a*s,e}function ri(e,r,t){var n=r[0],a=r[1],i=r[2],s=t[3]*n+t[7]*a+t[11]*i+t[15];return s=s||1,e[0]=(t[0]*n+t[4]*a+t[8]*i+t[12])/s,e[1]=(t[1]*n+t[5]*a+t[9]*i+t[13])/s,e[2]=(t[2]*n+t[6]*a+t[10]*i+t[14])/s,e}function mu(e,r,t){var n=r[0],a=r[1],i=r[2];return e[0]=n*t[0]+a*t[3]+i*t[6],e[1]=n*t[1]+a*t[4]+i*t[7],e[2]=n*t[2]+a*t[5]+i*t[8],e}function vu(e,r,t){var n=t[0],a=t[1],i=t[2],s=t[3],o=r[0],u=r[1],f=r[2],l=a*f-i*u,c=i*o-n*f,h=n*u-a*o,d=a*h-i*c,p=i*l-n*h,v=n*c-a*l,g=s*2;return l*=g,c*=g,h*=g,d*=2,p*=2,v*=2,e[0]=o+l+d,e[1]=u+c+p,e[2]=f+h+v,e}function Ox(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e}function Bx(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e}function Px(e,r,t,n){var a=[],i=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e}function Ix(e,r){var t=e[0],n=e[1],a=e[2],i=r[0],s=r[1],o=r[2],u=Math.sqrt(t*t+n*n+a*a),f=Math.sqrt(i*i+s*s+o*o),l=u*f,c=l&&As(e,r)/l;return Math.acos(Math.min(Math.max(c,-1),1))}var Rx=j8;var Lx=fd;var Fee=function(){var e=ud();return function(r,t,n,a,i,s){var o,u;for(t||(t=3),n||(n=0),a?u=Math.min(a*t+n,r.length):u=r.length,o=n;o<u;o+=t)e[0]=r[o],e[1]=r[o+1],e[2]=r[o+2],i(e,e,s),r[o]=e[0],r[o+1]=e[1],r[o+2]=e[2];return r}}();function or(e,r){if(!e)throw new Error(r||"@math.gl/web-mercator: assertion failed.")}var ur=Math.PI,kx=ur/4,_r=ur/180,cd=180/ur,xs=512,Fx=4003e4,ai=85.051129,hd=1.5;function gu(e){return Math.pow(2,e)}function Ut(e){var r=ht(e,2),t=r[0],n=r[1];or(Number.isFinite(t)),or(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");var a=t*_r,i=n*_r,s=xs*(a+ur)/(2*ur),o=xs*(ur+Math.log(Math.tan(kx+i*.5)))/(2*ur);return[s,o]}function Bt(e){var r=ht(e,2),t=r[0],n=r[1],a=t/xs*(2*ur)-ur,i=2*(Math.atan(Math.exp(n/xs*(2*ur)-ur))-kx);return[a*cd,i*cd]}function dd(e){var r=e.latitude,t=e.longitude,n=e.highPrecision,a=n===void 0?!1:n;or(Number.isFinite(r)&&Number.isFinite(t));var i=xs,s=Math.cos(r*_r),o=i/360,u=o/s,f=i/Fx/s,l={unitsPerMeter:[f,f,f],metersPerUnit:[1/f,1/f,1/f],unitsPerDegree:[o,u,f],degreesPerUnit:[1/o,1/u,1/f]};if(a){var c=_r*Math.tan(r*_r)/s,h=o*c/2,d=i/Fx*c,p=d/u*f;l.unitsPerDegree2=[0,h,d],l.unitsPerMeter2=[p,0,p]}return l}function pd(e){var r=e.height,t=e.pitch,n=e.bearing,a=e.altitude,i=e.scale,s=e.center,o=$a();ra(o,o,[0,0,-a]),uu(o,o,-t*_r),fu(o,o,n*_r);var u=i/r;return Za(o,o,[u,u,u]),s&&ra(o,o,wx([],s)),o}function Dx(e){var r=e.width,t=e.height,n=e.altitude,a=e.pitch,i=a===void 0?0:a,s=e.offset,o=e.center,u=e.scale,f=e.nearZMultiplier,l=f===void 0?1:f,c=e.farZMultiplier,h=c===void 0?1:c,d=e.fovy,p=d===void 0?ni(hd):d;n!==void 0&&(p=ni(n));var v=p*_r,g=i*_r,y=yu(p),_=y;o&&(_+=o[2]*u/Math.cos(g)/t);var T=v*(.5+(s?s[1]:0)/t),x=Math.sin(T)*_/Math.sin(_s(Math.PI/2-g-T,.01,Math.PI-.01)),E=Math.sin(g)*x+_,C=_*10,L=Math.min(E*h,C);return{fov:v,aspect:r/t,focalDistance:y,near:l,far:L}}function md(e){var r=Dx(e),t=r.fov,n=r.aspect,a=r.near,i=r.far,s=lu([],t,n,a,i);return s}function ni(e){return 2*Math.atan(.5/e)*cd}function yu(e){return .5/Math.tan(.5*e*_r)}function vd(e,r){var t=ht(e,3),n=t[0],a=t[1],i=t[2],s=i===void 0?0:i;return or(Number.isFinite(n)&&Number.isFinite(a)&&Number.isFinite(s)),dn(r,[n,a,s,1])}function bu(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=ht(e,3),a=n[0],i=n[1],s=n[2];if(or(Number.isFinite(a)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s)){var o=dn(r,[a,i,s,1]);return o}var u=dn(r,[a,i,0,1]),f=dn(r,[a,i,1,1]),l=u[2],c=f[2],h=l===c?0:((t||0)-l)/(c-l);return hu([],u,f,h)}function _u(e){var r=e.width,t=e.height,n=e.bounds,a=e.minExtent,i=a===void 0?0:a,s=e.maxZoom,o=s===void 0?24:s,u=e.offset,f=u===void 0?[0,0]:u,l=ht(n,2),c=ht(l[0],2),h=c[0],d=c[1],p=ht(l[1],2),v=p[0],g=p[1],y=H8(e.padding),_=Ut([h,_s(g,-ai,ai)]),T=Ut([v,_s(d,-ai,ai)]),x=[Math.max(Math.abs(T[0]-_[0]),i),Math.max(Math.abs(T[1]-_[1]),i)],E=[r-y.left-y.right-Math.abs(f[0])*2,t-y.top-y.bottom-Math.abs(f[1])*2];or(E[0]>0&&E[1]>0);var C=E[0]/x[0],L=E[1]/x[1],w=(y.right-y.left)/2/C,S=(y.bottom-y.top)/2/L,A=[(T[0]+_[0])/2+w,(T[1]+_[1])/2+S],I=Bt(A),F=Math.min(o,su(Math.abs(Math.min(C,L))));return or(Number.isFinite(F)),{longitude:I[0],latitude:I[1],zoom:F}}function H8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(or(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}var Nx=Math.PI/180;function Au(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=e.width,n=e.height,a=e.unproject,i={targetZ:r},s=a([0,n],i),o=a([t,n],i),u,f,l=e.fovy?.5*e.fovy*Nx:Math.atan(.5/e.altitude),c=(90-e.pitch)*Nx;return l>c-.01?(u=Gx(e,0,r),f=Gx(e,t,r)):(u=a([0,0],i),f=a([t,0],i)),[s,o,f,u]}function Gx(e,r,t){var n=e.pixelUnprojectionMatrix,a=dn(n,[r,0,1,1]),i=dn(n,[r,e.height,1,1]),s=t*e.distanceScales.unitsPerMeter[2],o=(s-a[2])/(i[2]-a[2]),u=hu([],a,i,o),f=Bt(u);return f.push(t),f}var Ux=function(){function e(){var r=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{width:1,height:1};rd(this,e),Be(this,"latitude",void 0),Be(this,"longitude",void 0),Be(this,"zoom",void 0),Be(this,"pitch",void 0),Be(this,"bearing",void 0),Be(this,"altitude",void 0),Be(this,"fovy",void 0),Be(this,"meterOffset",void 0),Be(this,"center",void 0),Be(this,"width",void 0),Be(this,"height",void 0),Be(this,"scale",void 0),Be(this,"distanceScales",void 0),Be(this,"viewMatrix",void 0),Be(this,"projectionMatrix",void 0),Be(this,"viewProjectionMatrix",void 0),Be(this,"pixelProjectionMatrix",void 0),Be(this,"pixelUnprojectionMatrix",void 0),Be(this,"equals",function(F){return F instanceof e?F.width===r.width&&F.height===r.height&&sd(F.projectionMatrix,r.projectionMatrix)&&sd(F.viewMatrix,r.viewMatrix):!1}),Be(this,"project",function(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=D.topLeft,B=N===void 0?!0:N,P=r.projectPosition(F),R=vd(P,r.pixelProjectionMatrix),V=ht(R,2),G=V[0],W=V[1],$=B?W:r.height-W;return F.length===2?[G,$]:[G,$,R[2]]}),Be(this,"unproject",function(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=D.topLeft,B=N===void 0?!0:N,P=D.targetZ,R=P===void 0?void 0:P,V=ht(F,3),G=V[0],W=V[1],$=V[2],oe=B?W:r.height-W,He=R&&R*r.distanceScales.unitsPerMeter[2],Re=bu([G,oe,$],r.pixelUnprojectionMatrix,He),mt=r.unprojectPosition(Re),Ke=ht(mt,3),on=Ke[0],zt=Ke[1],Na=Ke[2];return Number.isFinite($)?[on,zt,Na]:Number.isFinite(R)?[on,zt,R]:[on,zt]}),Be(this,"projectPosition",function(F){var D=Ut(F),N=ht(D,2),B=N[0],P=N[1],R=(F[2]||0)*r.distanceScales.unitsPerMeter[2];return[B,P,R]}),Be(this,"unprojectPosition",function(F){var D=Bt(F),N=ht(D,2),B=N[0],P=N[1],R=(F[2]||0)*r.distanceScales.metersPerUnit[2];return[B,P,R]});var n=t.width,a=t.height,i=t.altitude,s=i===void 0?null:i,o=t.fovy,u=o===void 0?null:o,f=t.latitude,l=f===void 0?0:f,c=t.longitude,h=c===void 0?0:c,d=t.zoom,p=d===void 0?0:d,v=t.pitch,g=v===void 0?0:v,y=t.bearing,_=y===void 0?0:y,T=t.position,x=T===void 0?null:T,E=t.nearZMultiplier,C=E===void 0?.02:E,L=t.farZMultiplier,w=L===void 0?1.01:L;n=n||1,a=a||1,u===null&&s===null?(s=hd,u=ni(s)):u===null?u=ni(s):s===null&&(s=yu(u));var S=gu(p);s=Math.max(.75,s);var A=dd({longitude:h,latitude:l}),I=Ut([h,l]);I.push(0),x&&Sx(I,I,Rx([],x,A.unitsPerMeter)),this.projectionMatrix=md({width:n,height:a,scale:S,center:I,pitch:g,fovy:u,nearZMultiplier:C,farZMultiplier:w}),this.viewMatrix=pd({height:a,scale:S,center:I,pitch:g,bearing:_,altitude:s}),this.width=n,this.height=a,this.scale=S,this.latitude=l,this.longitude=h,this.zoom=p,this.pitch=g,this.bearing=_,this.altitude=s,this.fovy=u,this.center=I,this.meterOffset=x||[0,0,0],this.distanceScales=A,this._initMatrices(),Object.freeze(this)}return nd(e,[{key:"_initMatrices",value:function(){var t=this.width,n=this.height,a=this.projectionMatrix,i=this.viewMatrix,s=$a();ta(s,s,a),ta(s,s,i),this.viewProjectionMatrix=s;var o=$a();Za(o,o,[t/2,-n/2,1]),ra(o,o,[1,-1,0]),ta(o,o,s);var u=ou($a(),o);if(!u)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=u}},{key:"projectFlat",value:function(t){return Ut(t)}},{key:"unprojectFlat",value:function(t){return Bt(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var n=t.lngLat,a=t.pos,i=bu(a,this.pixelUnprojectionMatrix),s=Ut(n),o=od([],s,Tx([],i)),u=od([],this.center,o);return Bt(u)}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.width,i=this.height,s=_u(Object.assign({width:a,height:i,bounds:t},n)),o=s.longitude,u=s.latitude,f=s.zoom;return new e({width:a,height:i,longitude:o,latitude:u,zoom:f})}},{key:"getBounds",value:function(t){var n=this.getBoundingRegion(t),a=Math.min.apply(Math,Ya(n.map(function(u){return u[0]}))),i=Math.max.apply(Math,Ya(n.map(function(u){return u[0]}))),s=Math.min.apply(Math,Ya(n.map(function(u){return u[1]}))),o=Math.max.apply(Math,Ya(n.map(function(u){return u[1]})));return[[a,s],[i,o]]}},{key:"getBoundingRegion",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Au(this,t.z||0)}},{key:"getLocationAtPoint",value:function(t){var n=t.lngLat,a=t.pos;return this.getMapCenterByLngLatPosition({lngLat:n,pos:a})}}]),e}();var gd=512;function z8(e){for(var r=0,t=0,n=1<<e.length,a=n/gd,i=0;i<e.length;i++){n>>=1;var s=parseInt(e[i]);s%2&&(r|=n),s>1&&(t|=n)}return[[r/a,gd-t/a],[(r+.99)/a,gd-(t+.99)/a]]}function jx(e){var r=z8(e),t=(0,xu.default)(r,2),n=t[0],a=t[1],i=Bt(n),s=(0,xu.default)(i,2),o=s[0],u=s[1],f=Bt(a),l=(0,xu.default)(f,2),c=l[0],h=l[1];return[c,u,c,h,o,h,o,u,c,u]}function W8(e){var r=q8();return function(){var n=(0,yd.default)(e),a;if(r){var i=(0,yd.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Wx.default)(this,a)}}function q8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J8={getQuadkey:{type:"accessor",value:function(r){return r.quadkey}}},Tu=function(e){(0,zx.default)(t,e);var r=W8(t);function t(){return(0,Hx.default)(this,t),r.apply(this,arguments)}return(0,Vx.default)(t,[{key:"indexToBounds",value:function(){var a=this.props,i=a.data,s=a.getQuadkey;return{data:i,_normalize:!1,positionFormat:"XY",getPolygon:function(u,f){return jx(s(u,f))}}}}]),t}(Jt);(0,bd.default)(Tu,"layerName","QuadkeyLayer");(0,bd.default)(Tu,"defaultProps",J8);var rM=m(z()),nM=m(q()),aM=m(Ce()),iM=m(Oe()),rp=m(Me()),Vu=m(J()),zu=m(er()),sM=m(Zt());var Zd=m(ve()),QT=m(z()),$T=m(q()),qe=m(J());function Ze(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function qx(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function et(e,r,t){return r&&qx(e.prototype,r),t&&qx(e,t),e}function Ts(e,r){return Ts=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},Ts(e,r)}function tt(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ts(e,r)}function na(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?na=function(t){return typeof t}:na=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(e)}function _d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e,r){if(r&&(na(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _d(e)}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xe(e)}function de(e,r){if(!e)throw new Error("math.gl assertion ".concat(r))}var X8=1/Math.PI*180,K8=1/180*Math.PI,Se={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Ad(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.precision,n=t===void 0?Se.precision:t;return e=Y8(e),"".concat(parseFloat(e.toPrecision(n)))}function _t(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xd(e){return Jx(e)}function Td(e){return aa(e)}function Jx(e,r){return Md(e,function(t){return t*K8},r)}function aa(e,r){return Md(e,function(t){return t*X8},r)}function Mu(e,r,t){return Md(e,function(n){return Math.max(r,Math.min(t,n))})}function mn(e,r,t){return _t(e)?e.map(function(n,a){return mn(n,r[a],t)}):t*r+(1-t)*e}function nt(e,r,t){var n=Se.EPSILON;t&&(Se.EPSILON=t);try{if(e===r)return!0;if(_t(e)&&_t(r)){if(e.length!==r.length)return!1;for(var a=0;a<e.length;++a)if(!nt(e[a],r[a]))return!1;return!0}return e&&e.equals?e.equals(r):r&&r.equals?r.equals(e):typeof e=="number"&&typeof r=="number"?Math.abs(e-r)<=Se.EPSILON*Math.max(1,Math.abs(e),Math.abs(r)):!1}finally{Se.EPSILON=n}}function Y8(e){return Math.round(e/Se.EPSILON)*Se.EPSILON}function Q8(e){return e.clone?e.clone():new Array(e.length)}function Md(e,r,t){if(_t(e)){var n=e;t=t||Q8(n);for(var a=0;a<t.length&&a<n.length;++a)t[a]=r(e[a],a,t);return t}return r(e)}function $8(e){var r=Z8();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function Z8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function e4(e){function r(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return r.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e,r}var ii=function(e){tt(t,e);var r=$8(t);function t(){return Ze(this,t),r.apply(this,arguments)}return et(t,[{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=0;s<this.ELEMENTS;++s)this[s]=a[s+i];return this.check()}},{key:"toArray",value:function(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=0;s<this.ELEMENTS;++s)a[i+s]=this[s];return a}},{key:"from",value:function(a){return Array.isArray(a)?this.copy(a):this.fromObject(a)}},{key:"to",value:function(a){return a===this?this:_t(a)?this.toArray(a):this.toObject(a)}},{key:"toTarget",value:function(a){return a?this.to(a):this}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(Se)}},{key:"formatString",value:function(a){for(var i="",s=0;s<this.ELEMENTS;++s)i+=(s>0?", ":"")+Ad(this[s],a);return"".concat(a.printTypes?this.constructor.name:"","[").concat(i,"]")}},{key:"equals",value:function(a){if(!a||this.length!==a.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!nt(this[i],a[i]))return!1;return!0}},{key:"exactEquals",value:function(a){if(!a||this.length!==a.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==a[i])return!1;return!0}},{key:"negate",value:function(){for(var a=0;a<this.ELEMENTS;++a)this[a]=-this[a];return this.check()}},{key:"lerp",value:function(a,i,s){if(s===void 0)return this.lerp(this,a,i);for(var o=0;o<this.ELEMENTS;++o){var u=a[o];this[o]=u+s*(i[o]-u)}return this.check()}},{key:"min",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(a[i],this[i]);return this.check()}},{key:"max",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(a[i],this[i]);return this.check()}},{key:"clamp",value:function(a,i){for(var s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],a[s]),i[s]);return this.check()}},{key:"add",value:function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];for(var o=0,u=i;o<u.length;o++)for(var f=u[o],l=0;l<this.ELEMENTS;++l)this[l]+=f[l];return this.check()}},{key:"subtract",value:function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];for(var o=0,u=i;o<u.length;o++)for(var f=u[o],l=0;l<this.ELEMENTS;++l)this[l]-=f[l];return this.check()}},{key:"scale",value:function(a){if(typeof a=="number")for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;else for(var s=0;s<this.ELEMENTS&&s<a.length;++s)this[s]*=a[s];return this.check()}},{key:"multiplyByScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;return this.check()}},{key:"check",value:function(){if(Se.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var a=this.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)a=a&&Number.isFinite(this[i]);return a}},{key:"sub",value:function(a){return this.subtract(a)}},{key:"setScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}},{key:"addScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}},{key:"subScalar",value:function(a){return this.addScalar(-a)}},{key:"multiplyScalar",value:function(a){for(var i=0;i<this.ELEMENTS;++i)this[i]*=a;return this.check()}},{key:"divideScalar",value:function(a){return this.multiplyByScalar(1/a)}},{key:"clampScalar",value:function(a,i){for(var s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],a),i);return this.check()}},{key:"elements",get:function(){return this}}]),t}(e4(Array));function t4(e,r){if(e.length!==r)return!1;for(var t=0;t<e.length;++t)if(!Number.isFinite(e[t]))return!1;return!0}function fe(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function vn(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(Se.debug&&!t4(e,r))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return e}function r4(e){var r=n4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function n4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var si=function(e){tt(t,e);var r=r4(t);function t(){return Ze(this,t),r.apply(this,arguments)}return et(t,[{key:"x",get:function(){return this[0]},set:function(a){this[0]=fe(a)}},{key:"y",get:function(){return this[1]},set:function(a){this[1]=fe(a)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var a=0,i=0;i<this.ELEMENTS;++i)a+=this[i]*this[i];return a}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(a){return Math.sqrt(this.distanceSquared(a))}},{key:"distanceSquared",value:function(a){for(var i=0,s=0;s<this.ELEMENTS;++s){var o=this[s]-a[s];i+=o*o}return fe(i)}},{key:"dot",value:function(a){for(var i=0,s=0;s<this.ELEMENTS;++s)i+=this[s]*a[s];return fe(i)}},{key:"normalize",value:function(){var a=this.magnitude();if(a!==0)for(var i=0;i<this.ELEMENTS;++i)this[i]/=a;return this.check()}},{key:"multiply",value:function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];for(var o=0,u=i;o<u.length;o++)for(var f=u[o],l=0;l<this.ELEMENTS;++l)this[l]*=f[l];return this.check()}},{key:"divide",value:function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];for(var o=0,u=i;o<u.length;o++)for(var f=u[o],l=0;l<this.ELEMENTS;++l)this[l]/=f[l];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(a){return this.distance(a)}},{key:"distanceToSquared",value:function(a){return this.distanceSquared(a)}},{key:"getComponent",value:function(a){return de(a>=0&&a<this.ELEMENTS,"index is out of range"),fe(this[a])}},{key:"setComponent",value:function(a,i){return de(a>=0&&a<this.ELEMENTS,"index is out of range"),this[a]=i,this.check()}},{key:"addVectors",value:function(a,i){return this.copy(a).add(i)}},{key:"subVectors",value:function(a,i){return this.copy(a).subtract(i)}},{key:"multiplyVectors",value:function(a,i){return this.copy(a).multiply(i)}},{key:"addScaledVector",value:function(a,i){return this.add(new this.constructor(a).multiplyScalar(i))}}]),t}(ii);function Eu(e,r,t){var n=r[0],a=r[1],i=t[3]*n+t[7]*a||1;return e[0]=(t[0]*n+t[4]*a)/i,e[1]=(t[1]*n+t[5]*a)/i,e}function Su(e,r,t){var n=r[0],a=r[1],i=r[2],s=t[3]*n+t[7]*a+t[11]*i||1;return e[0]=(t[0]*n+t[4]*a+t[8]*i)/s,e[1]=(t[1]*n+t[5]*a+t[9]*i)/s,e[2]=(t[2]*n+t[6]*a+t[10]*i)/s,e}function Xx(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e[2]=r[2],e}function Kx(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e[2]=r[2],e[3]=r[3],e}function wu(e,r,t){var n=r[0],a=r[1],i=r[2];return e[0]=t[0]*n+t[3]*a+t[6]*i,e[1]=t[1]*n+t[4]*a+t[7]*i,e[2]=t[2]*n+t[5]*a+t[8]*i,e[3]=r[3],e}function a4(e){var r=i4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function i4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ia=function(e){tt(t,e);var r=a4(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ze(this,t),n=r.call(this,2),_t(a)&&arguments.length===1?n.copy(a):(Se.debug&&(fe(a),fe(i)),n[0]=a,n[1]=i),n}return et(t,[{key:"set",value:function(a,i){return this[0]=a,this[1]=i,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this.check()}},{key:"fromObject",value:function(a){return Se.debug&&(fe(a.x),fe(a.y)),this[0]=a.x,this[1]=a.y,this.check()}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a}},{key:"ELEMENTS",get:function(){return 2}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(a){return this.transformAsPoint(a)}},{key:"transformAsPoint",value:function(a){return pu(this,this,a),this.check()}},{key:"transformAsVector",value:function(a){return Eu(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return du(this,this,a),this.check()}},{key:"transformByMatrix2x3",value:function(a){return Ex(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return Mx(this,this,a),this.check()}}]),t}(si);function s4(e){var r=o4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function o4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ed=[0,0,0],Cu,O=function(e){tt(t,e);var r=s4(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Ze(this,t),n=r.call(this,-0,-0,-0),arguments.length===1&&_t(a)?n.copy(a):(Se.debug&&(fe(a),fe(i),fe(s)),n[0]=a,n[1]=i,n[2]=s),n}return et(t,[{key:"set",value:function(a,i,s){return this[0]=a,this[1]=i,this[2]=s,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this.check()}},{key:"fromObject",value:function(a){return Se.debug&&(fe(a.x),fe(a.y),fe(a.z)),this[0]=a.x,this[1]=a.y,this[2]=a.z,this.check()}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a.z=this[2],a}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=fe(a)}},{key:"angle",value:function(a){return Ix(this,a)}},{key:"cross",value:function(a){return ti(this,this,a),this.check()}},{key:"rotateX",value:function(a){var i=a.radians,s=a.origin,o=s===void 0?Ed:s;return Ox(this,this,o,i),this.check()}},{key:"rotateY",value:function(a){var i=a.radians,s=a.origin,o=s===void 0?Ed:s;return Bx(this,this,o,i),this.check()}},{key:"rotateZ",value:function(a){var i=a.radians,s=a.origin,o=s===void 0?Ed:s;return Px(this,this,o,i),this.check()}},{key:"transform",value:function(a){return this.transformAsPoint(a)}},{key:"transformAsPoint",value:function(a){return ri(this,this,a),this.check()}},{key:"transformAsVector",value:function(a){return Su(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return mu(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return Xx(this,this,a),this.check()}},{key:"transformByQuaternion",value:function(a){return vu(this,this,a),this.check()}}],[{key:"ZERO",get:function(){return Cu||(Cu=new t(0,0,0),Object.freeze(Cu)),Cu}}]),t}(si);function u4(e){var r=f4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function f4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ou,Yx=function(e){tt(t,e);var r=u4(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return Ze(this,t),n=r.call(this,-0,-0,-0,-0),_t(a)&&arguments.length===1?n.copy(a):(Se.debug&&(fe(a),fe(i),fe(s),fe(o)),n[0]=a,n[1]=i,n[2]=s,n[3]=o),n}return et(t,[{key:"set",value:function(a,i,s,o){return this[0]=a,this[1]=i,this[2]=s,this[3]=o,this.check()}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this.check()}},{key:"fromObject",value:function(a){return Se.debug&&(fe(a.x),fe(a.y),fe(a.z),fe(a.w)),this[0]=a.x,this[1]=a.y,this[2]=a.z,this[3]=a.w,this}},{key:"toObject",value:function(a){return a.x=this[0],a.y=this[1],a.z=this[2],a.w=this[3],a}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=fe(a)}},{key:"w",get:function(){return this[3]},set:function(a){this[3]=fe(a)}},{key:"transform",value:function(a){return ri(this,this,a),this.check()}},{key:"transformByMatrix3",value:function(a){return wu(this,this,a),this.check()}},{key:"transformByMatrix2",value:function(a){return Kx(this,this,a),this.check()}},{key:"transformByQuaternion",value:function(a){return vu(this,this,a),this.check()}},{key:"applyMatrix4",value:function(a){return a.transform(this,this),this}}],[{key:"ZERO",get:function(){return Ou||(Ou=new t(0,0,0,0),Object.freeze(Ou)),Ou}}]),t}(si);function l4(e){var r=c4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function c4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Bu=function(e){tt(t,e);var r=l4(t);function t(){return Ze(this,t),r.apply(this,arguments)}return et(t,[{key:"toString",value:function(){var a="[";if(Se.printRowMajor){a+="row-major:";for(var i=0;i<this.RANK;++i)for(var s=0;s<this.RANK;++s)a+=" ".concat(this[s*this.RANK+i])}else{a+="column-major:";for(var o=0;o<this.ELEMENTS;++o)a+=" ".concat(this[o])}return a+="]",a}},{key:"getElementIndex",value:function(a,i){return i*this.RANK+a}},{key:"getElement",value:function(a,i){return this[i*this.RANK+a]}},{key:"setElement",value:function(a,i,s){return this[i*this.RANK+a]=fe(s),this}},{key:"getColumn",value:function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Array(this.RANK).fill(-0),s=a*this.RANK,o=0;o<this.RANK;++o)i[o]=this[s+o];return i}},{key:"setColumn",value:function(a,i){for(var s=a*this.RANK,o=0;o<this.RANK;++o)this[s+o]=i[o];return this}}]),t}(ii);function Qx(){var e=new ft(9);return ft!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function $x(e,r){if(e===r){var t=r[1],n=r[2],a=r[5];e[1]=r[3],e[2]=r[6],e[3]=t,e[5]=r[7],e[6]=n,e[7]=a}else e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8];return e}function Zx(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],s=r[4],o=r[5],u=r[6],f=r[7],l=r[8],c=l*s-o*f,h=-l*i+o*u,d=f*i-s*u,p=t*c+n*h+a*d;return p?(p=1/p,e[0]=c*p,e[1]=(-l*n+a*f)*p,e[2]=(o*n-a*s)*p,e[3]=h*p,e[4]=(l*t-a*u)*p,e[5]=(-o*t+a*i)*p,e[6]=d*p,e[7]=(-f*t+n*u)*p,e[8]=(s*t-n*i)*p,e):null}function eT(e){var r=e[0],t=e[1],n=e[2],a=e[3],i=e[4],s=e[5],o=e[6],u=e[7],f=e[8];return r*(f*i-s*u)+t*(-f*a+s*o)+n*(u*a-i*o)}function Sd(e,r,t){var n=r[0],a=r[1],i=r[2],s=r[3],o=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=t[0],d=t[1],p=t[2],v=t[3],g=t[4],y=t[5],_=t[6],T=t[7],x=t[8];return e[0]=h*n+d*s+p*f,e[1]=h*a+d*o+p*l,e[2]=h*i+d*u+p*c,e[3]=v*n+g*s+y*f,e[4]=v*a+g*o+y*l,e[5]=v*i+g*u+y*c,e[6]=_*n+T*s+x*f,e[7]=_*a+T*o+x*l,e[8]=_*i+T*u+x*c,e}function tT(e,r,t){var n=r[0],a=r[1],i=r[2],s=r[3],o=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=t[0],d=t[1];return e[0]=n,e[1]=a,e[2]=i,e[3]=s,e[4]=o,e[5]=u,e[6]=h*n+d*s+f,e[7]=h*a+d*o+l,e[8]=h*i+d*u+c,e}function rT(e,r,t){var n=r[0],a=r[1],i=r[2],s=r[3],o=r[4],u=r[5],f=r[6],l=r[7],c=r[8],h=Math.sin(t),d=Math.cos(t);return e[0]=d*n+h*s,e[1]=d*a+h*o,e[2]=d*i+h*u,e[3]=d*s-h*n,e[4]=d*o-h*a,e[5]=d*u-h*i,e[6]=f,e[7]=l,e[8]=c,e}function wd(e,r,t){var n=t[0],a=t[1];return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=a*r[3],e[4]=a*r[4],e[5]=a*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function nT(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],s=t+t,o=n+n,u=a+a,f=t*s,l=n*s,c=n*o,h=a*s,d=a*o,p=a*u,v=i*s,g=i*o,y=i*u;return e[0]=1-c-p,e[3]=l-y,e[6]=h+g,e[1]=l+y,e[4]=1-f-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-f-c,e}function h4(e){var r=d4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function d4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cd;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(Cd||(Cd={}));var p4=Object.freeze([1,0,0,0,1,0,0,0,1]),Te=function(e){tt(t,e);var r=h4(t);function t(n){for(var a,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return Ze(this,t),a=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?a.copy(n):s.length>0?a.copy([n].concat(s)):a.identity(),a}return et(t,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return Cd}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this[4]=a[4],this[5]=a[5],this[6]=a[6],this[7]=a[7],this[8]=a[8],this.check()}},{key:"identity",value:function(){return this.copy(p4)}},{key:"fromObject",value:function(a){return this.check()}},{key:"fromQuaternion",value:function(a){return nT(this,a),this.check()}},{key:"set",value:function(a,i,s,o,u,f,l,c,h){return this[0]=a,this[1]=i,this[2]=s,this[3]=o,this[4]=u,this[5]=f,this[6]=l,this[7]=c,this[8]=h,this.check()}},{key:"setRowMajor",value:function(a,i,s,o,u,f,l,c,h){return this[0]=a,this[1]=o,this[2]=l,this[3]=i,this[4]=u,this[5]=c,this[6]=s,this[7]=f,this[8]=h,this.check()}},{key:"determinant",value:function(){return eT(this)}},{key:"transpose",value:function(){return $x(this,this),this.check()}},{key:"invert",value:function(){return Zx(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return Sd(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return Sd(this,this,a),this.check()}},{key:"rotate",value:function(a){return rT(this,this,a),this.check()}},{key:"scale",value:function(a){return Array.isArray(a)?wd(this,this,a):wd(this,this,[a,a]),this.check()}},{key:"translate",value:function(a){return tT(this,this,a),this.check()}},{key:"transform",value:function(a,i){var s;switch(a.length){case 2:s=du(i||[-0,-0],a,this);break;case 3:s=mu(i||[-0,-0,-0],a,this);break;case 4:s=wu(i||[-0,-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return vn(s,a.length),s}},{key:"transformVector",value:function(a,i){return this.transform(a,i)}},{key:"transformVector2",value:function(a,i){return this.transform(a,i)}},{key:"transformVector3",value:function(a,i){return this.transform(a,i)}}],[{key:"IDENTITY",get:function(){return v4()}},{key:"ZERO",get:function(){return m4()}}]),t}(Bu);var Pu,Iu;function m4(){return Pu||(Pu=new Te([0,0,0,0,0,0,0,0,0]),Object.freeze(Pu)),Pu}function v4(){return Iu||(Iu=new Te,Object.freeze(Iu)),Iu}function g4(e){var r=y4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function y4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Pd;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(Pd||(Pd={}));var b4=45*Math.PI/180,_4=1,Od=.1,Bd=500,A4=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ae=function(e){tt(t,e);var r=g4(t);function t(n){var a;return Ze(this,t),a=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?a.copy(n):a.identity(),a}return et(t,[{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"INDICES",get:function(){return Pd}},{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this[4]=a[4],this[5]=a[5],this[6]=a[6],this[7]=a[7],this[8]=a[8],this[9]=a[9],this[10]=a[10],this[11]=a[11],this[12]=a[12],this[13]=a[13],this[14]=a[14],this[15]=a[15],this.check()}},{key:"set",value:function(a,i,s,o,u,f,l,c,h,d,p,v,g,y,_,T){return this[0]=a,this[1]=i,this[2]=s,this[3]=o,this[4]=u,this[5]=f,this[6]=l,this[7]=c,this[8]=h,this[9]=d,this[10]=p,this[11]=v,this[12]=g,this[13]=y,this[14]=_,this[15]=T,this.check()}},{key:"setRowMajor",value:function(a,i,s,o,u,f,l,c,h,d,p,v,g,y,_,T){return this[0]=a,this[1]=u,this[2]=h,this[3]=g,this[4]=i,this[5]=f,this[6]=d,this[7]=y,this[8]=s,this[9]=l,this[10]=p,this[11]=_,this[12]=o,this[13]=c,this[14]=v,this[15]=T,this.check()}},{key:"toRowMajor",value:function(a){return a[0]=this[0],a[1]=this[4],a[2]=this[8],a[3]=this[12],a[4]=this[1],a[5]=this[5],a[6]=this[9],a[7]=this[13],a[8]=this[2],a[9]=this[6],a[10]=this[10],a[11]=this[14],a[12]=this[3],a[13]=this[7],a[14]=this[11],a[15]=this[15],a}},{key:"identity",value:function(){return this.copy(A4)}},{key:"fromObject",value:function(a){return this.check()}},{key:"fromQuaternion",value:function(a){return bx(this,a),this.check()}},{key:"frustum",value:function(a){var i=a.left,s=a.right,o=a.bottom,u=a.top,f=a.near,l=f===void 0?Od:f,c=a.far,h=c===void 0?Bd:c;return h===1/0?M4(this,i,s,o,u,l):_x(this,i,s,o,u,l,h),this.check()}},{key:"lookAt",value:function(a){var i=a.eye,s=a.center,o=s===void 0?[0,0,0]:s,u=a.up,f=u===void 0?[0,1,0]:u;return xx(this,i,o,f),this.check()}},{key:"ortho",value:function(a){var i=a.left,s=a.right,o=a.bottom,u=a.top,f=a.near,l=f===void 0?Od:f,c=a.far,h=c===void 0?Bd:c;return Ax(this,i,s,o,u,l,h),this.check()}},{key:"orthographic",value:function(a){var i=a.fovy,s=i===void 0?b4:i,o=a.aspect,u=o===void 0?_4:o,f=a.focalDistance,l=f===void 0?1:f,c=a.near,h=c===void 0?Od:c,d=a.far,p=d===void 0?Bd:d;iT(s);var v=s/2,g=l*Math.tan(v),y=g*u;return this.ortho({left:-y,right:y,bottom:-g,top:g,near:h,far:p})}},{key:"perspective",value:function(a){var i=a.fovy,s=i===void 0?45*Math.PI/180:i,o=a.aspect,u=o===void 0?1:o,f=a.near,l=f===void 0?.1:f,c=a.far,h=c===void 0?500:c;return iT(s),lu(this,s,u,l,h),this.check()}},{key:"determinant",value:function(){return mx(this)}},{key:"getScale",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return a[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),a[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),a[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),a}},{key:"getTranslation",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return a[0]=this[12],a[1]=this[13],a[2]=this[14],a}},{key:"getRotation",value:function(a,i){a=a||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var s=this.getScale(i),o=1/s[0],u=1/s[1],f=1/s[2];return a[0]=this[0]*o,a[1]=this[1]*u,a[2]=this[2]*f,a[3]=0,a[4]=this[4]*o,a[5]=this[5]*u,a[6]=this[6]*f,a[7]=0,a[8]=this[8]*o,a[9]=this[9]*u,a[10]=this[10]*f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{key:"getRotationMatrix3",value:function(a,i){a=a||[-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var s=this.getScale(i),o=1/s[0],u=1/s[1],f=1/s[2];return a[0]=this[0]*o,a[1]=this[1]*u,a[2]=this[2]*f,a[3]=this[4]*o,a[4]=this[5]*u,a[5]=this[6]*f,a[6]=this[8]*o,a[7]=this[9]*u,a[8]=this[10]*f,a}},{key:"transpose",value:function(){return px(this,this),this.check()}},{key:"invert",value:function(){return ou(this,this),this.check()}},{key:"multiplyLeft",value:function(a){return ta(this,a,this),this.check()}},{key:"multiplyRight",value:function(a){return ta(this,this,a),this.check()}},{key:"rotateX",value:function(a){return uu(this,this,a),this.check()}},{key:"rotateY",value:function(a){return gx(this,this,a),this.check()}},{key:"rotateZ",value:function(a){return fu(this,this,a),this.check()}},{key:"rotateXYZ",value:function(a){return this.rotateX(a[0]).rotateY(a[1]).rotateZ(a[2])}},{key:"rotateAxis",value:function(a,i){return vx(this,this,a,i),this.check()}},{key:"scale",value:function(a){return Za(this,this,Array.isArray(a)?a:[a,a,a]),this.check()}},{key:"translate",value:function(a){return ra(this,this,a),this.check()}},{key:"transform",value:function(a,i){return a.length===4?(i=iu(i||[-0,-0,-0,-0],a,this),vn(i,4),i):this.transformAsPoint(a,i)}},{key:"transformAsPoint",value:function(a,i){var s=a.length,o;switch(s){case 2:o=pu(i||[-0,-0],a,this);break;case 3:o=ri(i||[-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return vn(o,a.length),o}},{key:"transformAsVector",value:function(a,i){var s;switch(a.length){case 2:s=Eu(i||[-0,-0],a,this);break;case 3:s=Su(i||[-0,-0,-0],a,this);break;default:throw new Error("Illegal vector")}return vn(s,a.length),s}},{key:"transformPoint",value:function(a,i){return this.transformAsPoint(a,i)}},{key:"transformVector",value:function(a,i){return this.transformAsPoint(a,i)}},{key:"transformDirection",value:function(a,i){return this.transformAsVector(a,i)}},{key:"makeRotationX",value:function(a){return this.identity().rotateX(a)}},{key:"makeTranslation",value:function(a,i,s){return this.identity().translate([a,i,s])}}],[{key:"IDENTITY",get:function(){return T4()}},{key:"ZERO",get:function(){return x4()}}]),t}(Bu);var Ru,Lu;function x4(){return Ru||(Ru=new ae([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Ru)),Ru}function T4(){return Lu||(Lu=new ae,Object.freeze(Lu)),Lu}function iT(e){if(e>Math.PI*2)throw Error("expected radians")}function M4(e,r,t,n,a,i){var s=2*i/(t-r),o=2*i/(a-n),u=(t+r)/(t-r),f=(a+n)/(a-n),l=-1,c=-1,h=-2*i;return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=u,e[9]=f,e[10]=l,e[11]=c,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function sT(){var e=new ft(4);return ft!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function oT(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Id(e,r,t){t=t*.5;var n=Math.sin(t);return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=Math.cos(t),e}function Rd(e,r,t){var n=r[0],a=r[1],i=r[2],s=r[3],o=t[0],u=t[1],f=t[2],l=t[3];return e[0]=n*l+s*o+a*f-i*u,e[1]=a*l+s*u+i*o-n*f,e[2]=i*l+s*f+n*u-a*o,e[3]=s*l-n*o-a*u-i*f,e}function uT(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],s=r[3],o=Math.sin(t),u=Math.cos(t);return e[0]=n*u+s*o,e[1]=a*u+i*o,e[2]=i*u-a*o,e[3]=s*u-n*o,e}function fT(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],s=r[3],o=Math.sin(t),u=Math.cos(t);return e[0]=n*u-i*o,e[1]=a*u+s*o,e[2]=i*u+n*o,e[3]=s*u-a*o,e}function lT(e,r,t){t*=.5;var n=r[0],a=r[1],i=r[2],s=r[3],o=Math.sin(t),u=Math.cos(t);return e[0]=n*u+a*o,e[1]=a*u-n*o,e[2]=i*u+s*o,e[3]=s*u-i*o,e}function cT(e,r){var t=r[0],n=r[1],a=r[2];return e[0]=t,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-t*t-n*n-a*a)),e}function Ms(e,r,t,n){var a=r[0],i=r[1],s=r[2],o=r[3],u=t[0],f=t[1],l=t[2],c=t[3],h,d,p,v,g;return d=a*u+i*f+s*l+o*c,d<0&&(d=-d,u=-u,f=-f,l=-l,c=-c),1-d>Ee?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),e[0]=v*a+g*u,e[1]=v*i+g*f,e[2]=v*s+g*l,e[3]=v*o+g*c,e}function hT(e,r){var t=r[0],n=r[1],a=r[2],i=r[3],s=t*t+n*n+a*a+i*i,o=s?1/s:0;return e[0]=-t*o,e[1]=-n*o,e[2]=-a*o,e[3]=i*o,e}function dT(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=r[3],e}function Ld(e,r){var t=r[0]+r[4]+r[8],n;if(t>0)n=Math.sqrt(t+1),e[3]=.5*n,n=.5/n,e[0]=(r[5]-r[7])*n,e[1]=(r[6]-r[2])*n,e[2]=(r[1]-r[3])*n;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[a*3+a]&&(a=2);var i=(a+1)%3,s=(a+2)%3;n=Math.sqrt(r[a*3+a]-r[i*3+i]-r[s*3+s]+1),e[a]=.5*n,n=.5/n,e[3]=(r[i*3+s]-r[s*3+i])*n,e[i]=(r[i*3+a]+r[a*3+i])*n,e[s]=(r[s*3+a]+r[a*3+s])*n}return e}var pT=ox;var mT=au,vT=cx,gT=hx,yT=ux;var bT=fx;var _T=lx;var AT=function(){var e=ud(),r=ld(1,0,0),t=ld(0,1,0);return function(n,a,i){var s=As(a,i);return s<-.999999?(ti(e,r,a),Lx(e)<1e-6&&ti(e,t,a),Cx(e,e),Id(n,e,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(ti(e,a,i),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+s,_T(n,n))}}(),Ane=function(){var e=sT(),r=sT();return function(t,n,a,i,s,o){return Ms(e,n,s,o),Ms(r,a,i,o),Ms(t,e,r,2*o*(1-o)),t}}(),xne=function(){var e=Qx();return function(r,t,n,a){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-t[0],e[5]=-t[1],e[8]=-t[2],_T(r,Ld(r,e))}}();function S4(e){var r=w4();return function(){var n=xe(e),a;if(r){var i=xe(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return rt(this,a)}}function w4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C4=[0,0,0,1],gn=function(e){tt(t,e);var r=S4(t);function t(){var n,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return Ze(this,t),n=r.call(this,-0,-0,-0,-0),Array.isArray(a)&&arguments.length===1?n.copy(a):n.set(a,i,s,o),n}return et(t,[{key:"copy",value:function(a){return this[0]=a[0],this[1]=a[1],this[2]=a[2],this[3]=a[3],this.check()}},{key:"set",value:function(a,i,s,o){return this[0]=a,this[1]=i,this[2]=s,this[3]=o,this.check()}},{key:"fromObject",value:function(a){return this[0]=a.x,this[1]=a.y,this[2]=a.z,this[3]=a.w,this.check()}},{key:"fromMatrix3",value:function(a){return Ld(this,a),this.check()}},{key:"fromAxisRotation",value:function(a,i){return Id(this,a,i),this.check()}},{key:"identity",value:function(){return oT(this),this.check()}},{key:"setAxisAngle",value:function(a,i){return this.fromAxisRotation(a,i)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(a){this[0]=fe(a)}},{key:"y",get:function(){return this[1]},set:function(a){this[1]=fe(a)}},{key:"z",get:function(){return this[2]},set:function(a){this[2]=fe(a)}},{key:"w",get:function(){return this[3]},set:function(a){this[3]=fe(a)}},{key:"len",value:function(){return yT(this)}},{key:"lengthSquared",value:function(){return bT(this)}},{key:"dot",value:function(a){return vT(this,a)}},{key:"rotationTo",value:function(a,i){return AT(this,a,i),this.check()}},{key:"add",value:function(a){return pT(this,this,a),this.check()}},{key:"calculateW",value:function(){return cT(this,this),this.check()}},{key:"conjugate",value:function(){return dT(this,this),this.check()}},{key:"invert",value:function(){return hT(this,this),this.check()}},{key:"lerp",value:function(a,i,s){return s===void 0?this.lerp(this,a,i):(gT(this,a,i,s),this.check())}},{key:"multiplyRight",value:function(a){return Rd(this,this,a),this.check()}},{key:"multiplyLeft",value:function(a){return Rd(this,a,this),this.check()}},{key:"normalize",value:function(){var a=this.len(),i=a>0?1/a:0;return this[0]=this[0]*i,this[1]=this[1]*i,this[2]=this[2]*i,this[3]=this[3]*i,a===0&&(this[3]=1),this.check()}},{key:"rotateX",value:function(a){return uT(this,this,a),this.check()}},{key:"rotateY",value:function(a){return fT(this,this,a),this.check()}},{key:"rotateZ",value:function(a){return lT(this,this,a),this.check()}},{key:"scale",value:function(a){return mT(this,this,a),this.check()}},{key:"slerp",value:function(a,i,s){var o,u,f;switch(arguments.length){case 1:var l=a.start;o=l===void 0?C4:l,u=a.target,f=a.ratio;break;case 2:o=this,u=a,f=i;break;default:o=a,u=i,f=s}return Ms(this,o,u,f),this.check()}},{key:"transformVector4",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Yx;return dx(i,a,this),vn(i,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(a,i){return this.setAxisAngle(a,i)}},{key:"premultiply",value:function(a){return this.multiplyLeft(a)}},{key:"multiply",value:function(a){return this.multiplyRight(a)}}]),t}(ii);var Ar={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2};var xT=m(Y()),TT=m(z()),MT=m(q()),at=m(J()),Fd=m(K()),Es=function(){function e(r){(0,TT.default)(this,e),(0,at.default)(this,"index",void 0),(0,at.default)(this,"isVisible",void 0),(0,at.default)(this,"isSelected",void 0),(0,at.default)(this,"parent",void 0),(0,at.default)(this,"children",void 0),(0,at.default)(this,"content",void 0),(0,at.default)(this,"state",void 0),(0,at.default)(this,"layers",void 0),(0,at.default)(this,"id",void 0),(0,at.default)(this,"bbox",void 0),(0,at.default)(this,"zoom",void 0),(0,at.default)(this,"userData",void 0),(0,at.default)(this,"_abortController",void 0),(0,at.default)(this,"_loader",void 0),(0,at.default)(this,"_loaderId",void 0),(0,at.default)(this,"_isLoaded",void 0),(0,at.default)(this,"_isCancelled",void 0),(0,at.default)(this,"_needsReload",void 0),this.index=r,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}return(0,MT.default)(e,[{key:"data",get:function(){var t=this;return this.isLoading&&this._loader?this._loader.then(function(){return t.data}):this.content}},{key:"isLoaded",get:function(){return this._isLoaded&&!this._needsReload}},{key:"isLoading",get:function(){return Boolean(this._loader)&&!this._isCancelled}},{key:"needsReload",get:function(){return this._needsReload||this._isCancelled}},{key:"byteLength",get:function(){var t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}},{key:"_loadData",value:function(){var r=(0,xT.default)(Fd.default.mark(function n(a){var i,s,o,u,f,l,c,h,d,p,v,g,y,_;return Fd.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return i=a.getData,s=a.requestScheduler,o=a.onLoad,u=a.onError,f=this.index,l=this.id,c=this.bbox,h=this.userData,d=this.zoom,p=this._loaderId,this._abortController=new AbortController,v=this._abortController.signal,x.next=7,s.scheduleRequest(this,function(E){return E.isSelected?1:-1});case 7:if(g=x.sent,g){x.next=11;break}return this._isCancelled=!0,x.abrupt("return");case 11:if(!this._isCancelled){x.next=14;break}return g.done(),x.abrupt("return");case 14:return y=null,x.prev=15,x.next=18,i({index:f,id:l,bbox:c,userData:h,zoom:d,signal:v});case 18:y=x.sent,x.next=24;break;case 21:x.prev=21,x.t0=x.catch(15),_=x.t0||!0;case 24:return x.prev=24,g.done(),x.finish(24);case 27:if(p===this._loaderId){x.next=29;break}return x.abrupt("return");case 29:if(this._loader=void 0,this.content=y,!(this._isCancelled&&!y)){x.next=34;break}return this._isLoaded=!1,x.abrupt("return");case 34:this._isLoaded=!0,this._isCancelled=!1,_?u(_,this):o(this);case 37:case"end":return x.stop()}},n,this,[[15,21,24,27]])}));function t(n){return r.apply(this,arguments)}return t}()},{key:"loadData",value:function(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}},{key:"setNeedsReload",value:function(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}},{key:"abort",value:function(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}]),e}();var ua=m(ve()),Cs=m(wt());var qd=m(ve()),NT=m(z()),GT=m(q()),oa=m(J()),ws=m(er());var ze={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};function At(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ET(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xt(e,r,t){return r&&ET(e.prototype,r),t&&ET(e,t),e}function Q(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ST=new O,O4=new O,Fu=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;At(this,e),Q(this,"center",void 0),Q(this,"halfDiagonal",void 0),Q(this,"minimum",void 0),Q(this,"maximum",void 0),n=n||ST.copy(r).add(t).scale(.5),this.center=new O(n),this.halfDiagonal=new O(t).subtract(this.center),this.minimum=new O(r),this.maximum=new O(t)}return xt(e,[{key:"clone",value:function(){return new e(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}},{key:"transform",value:function(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}},{key:"intersectPlane",value:function(t){var n=this.halfDiagonal,a=O4.from(t.normal),i=n.x*Math.abs(a.x)+n.y*Math.abs(a.y)+n.z*Math.abs(a.z),s=this.center.dot(a)+t.distance;return s-i>0?ze.INSIDE:s+i<0?ze.OUTSIDE:ze.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var n=ST.from(t).subtract(this.center),a=this.halfDiagonal,i=0,s;return s=Math.abs(n.x)-a.x,s>0&&(i+=s*s),s=Math.abs(n.y)-a.y,s>0&&(i+=s*s),s=Math.abs(n.z)-a.z,s>0&&(i+=s*s),i}}]),e}();var Ss=new O,wT=new O,yn=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;At(this,e),Q(this,"center",void 0),Q(this,"radius",void 0),this.radius=-0,this.center=new O,this.fromCenterRadius(r,t)}return xt(e,[{key:"fromCenterRadius",value:function(t,n){return this.center.from(t),this.radius=n,this}},{key:"fromCornerPoints",value:function(t,n){return n=Ss.from(n),this.center=new O().from(t).add(n).scale(.5),this.radius=this.center.distance(n),this}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}},{key:"clone",value:function(){return new e(this.center,this.radius)}},{key:"union",value:function(t){var n=this.center,a=this.radius,i=t.center,s=t.radius,o=Ss.copy(i).subtract(n),u=o.magnitude();if(a>=u+s)return this.clone();if(s>=u+a)return t.clone();var f=(a+u+s)*.5;return wT.copy(o).scale((-a+f)/u).add(n),this.center.copy(wT),this.radius=f,this}},{key:"expand",value:function(t){var n=Ss.from(t),a=n.subtract(this.center).magnitude();return a>this.radius&&(this.radius=a),this}},{key:"transform",value:function(t){this.center.transform(t);var n=yx(Ss,t);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(t){var n=this.distanceTo(t);return n*n}},{key:"distanceTo",value:function(t){var n=Ss.from(t),a=n.subtract(this.center);return Math.max(0,a.len()-this.radius)}},{key:"intersectPlane",value:function(t){var n=this.center,a=this.radius,i=t.normal,s=i.dot(n)+t.distance;return s<-a?ze.OUTSIDE:s<a?ze.INTERSECTING:ze.INSIDE}}]),e}();function oi(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function kd(e){if(Array.isArray(e))return oi(e)}function Dd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nd(e,r){if(e){if(typeof e=="string")return oi(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oi(e,r)}}function Gd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bn(e){return kd(e)||Dd(e)||Nd(e)||Gd()}var B4=new O,P4=new O,ku=new O,Du=new O,Nu=new O,I4=new O,R4=new O,Vr={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8},sa=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0,0,0,0,0,0,0];At(this,e),Q(this,"center",void 0),Q(this,"halfAxes",void 0),this.center=new O().from(r),this.halfAxes=new Te(t)}return xt(e,[{key:"halfSize",get:function(){var t=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),a=this.halfAxes.getColumn(2);return[new O(t).len(),new O(n).len(),new O(a).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),a=this.halfAxes.getColumn(2),i=new O(t).normalize(),s=new O(n).normalize(),o=new O(a).normalize();return new gn().fromMatrix3(new Te([].concat(bn(i),bn(s),bn(o))))}},{key:"fromCenterHalfSizeQuaternion",value:function(t,n,a){var i=new gn(a),s=new Te().fromQuaternion(i);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=new O().from(t),this.halfAxes=s,this}},{key:"clone",value:function(){return new e(this.center,this.halfAxes)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}},{key:"getBoundingSphere",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new yn,n=this.halfAxes,a=n.getColumn(0,ku),i=n.getColumn(1,Du),s=n.getColumn(2,Nu),o=B4.copy(a).add(i).add(s);return t.center.copy(this.center),t.radius=o.magnitude(),t}},{key:"intersectPlane",value:function(t){var n=this.center,a=t.normal,i=this.halfAxes,s=a.x,o=a.y,u=a.z,f=Math.abs(s*i[Vr.COLUMN0ROW0]+o*i[Vr.COLUMN0ROW1]+u*i[Vr.COLUMN0ROW2])+Math.abs(s*i[Vr.COLUMN1ROW0]+o*i[Vr.COLUMN1ROW1]+u*i[Vr.COLUMN1ROW2])+Math.abs(s*i[Vr.COLUMN2ROW0]+o*i[Vr.COLUMN2ROW1]+u*i[Vr.COLUMN2ROW2]),l=a.dot(n)+t.distance;return l<=-f?ze.OUTSIDE:l>=f?ze.INSIDE:ze.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var n=P4.from(t).subtract(this.center),a=this.halfAxes,i=a.getColumn(0,ku),s=a.getColumn(1,Du),o=a.getColumn(2,Nu),u=i.magnitude(),f=s.magnitude(),l=o.magnitude();i.normalize(),s.normalize(),o.normalize();var c=0,h;return h=Math.abs(n.dot(i))-u,h>0&&(c+=h*h),h=Math.abs(n.dot(s))-f,h>0&&(c+=h*h),h=Math.abs(n.dot(o))-l,h>0&&(c+=h*h),c}},{key:"computePlaneDistances",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[-0,-0],i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=this.center,u=this.halfAxes,f=u.getColumn(0,ku),l=u.getColumn(1,Du),c=u.getColumn(2,Nu),h=I4.copy(f).add(l).add(c).add(o),d=R4.copy(h).subtract(t),p=n.dot(d);return i=Math.min(p,i),s=Math.max(p,s),h.copy(o).add(f).add(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),s=Math.max(p,s),h.copy(o).add(f).subtract(l).add(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),s=Math.max(p,s),h.copy(o).add(f).subtract(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),s=Math.max(p,s),o.copy(h).subtract(f).add(l).add(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),s=Math.max(p,s),o.copy(h).subtract(f).add(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),s=Math.max(p,s),o.copy(h).subtract(f).subtract(l).add(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),s=Math.max(p,s),o.copy(h).subtract(f).subtract(l).subtract(c),d.copy(h).subtract(t),p=n.dot(d),i=Math.min(p,i),s=Math.max(p,s),a[0]=i,a[1]=s,a}},{key:"transform",value:function(t){this.center.transformAsPoint(t);var n=this.halfAxes.getColumn(0,ku);n.transformAsPoint(t);var a=this.halfAxes.getColumn(1,Du);a.transformAsPoint(t);var i=this.halfAxes.getColumn(2,Nu);return i.transformAsPoint(t),this.halfAxes=new Te([].concat(bn(n),bn(a),bn(i))),this}},{key:"getTransform",value:function(){throw new Error("not implemented")}}]),e}();var CT=new O,OT=new O,We=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,1],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;At(this,e),Q(this,"normal",void 0),Q(this,"distance",void 0),this.normal=new O,this.distance=-0,this.fromNormalDistance(r,t)}return xt(e,[{key:"fromNormalDistance",value:function(t,n){return de(Number.isFinite(n)),this.normal.from(t).normalize(),this.distance=n,this}},{key:"fromPointNormal",value:function(t,n){t=CT.from(t),this.normal.from(n).normalize();var a=-this.normal.dot(t);return this.distance=a,this}},{key:"fromCoefficients",value:function(t,n,a,i){return this.normal.set(t,n,a),de(nt(this.normal.len(),1)),this.distance=i,this}},{key:"clone",value:function(){return new e(this.normal,this.distance)}},{key:"equals",value:function(t){return nt(this.distance,t.distance)&&nt(this.normal,t.normal)}},{key:"getPointDistance",value:function(t){return this.normal.dot(t)+this.distance}},{key:"transform",value:function(t){var n=OT.copy(this.normal).transformAsVector(t).normalize(),a=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(a,n)}},{key:"projectPointOntoPlane",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];t=CT.from(t);var a=this.getPointDistance(t),i=OT.copy(this.normal).scale(a);return t.subtract(i).to(n)}}]),e}();function BT(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=L4(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function L4(e,r){if(e){if(typeof e=="string")return PT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PT(e,r)}}function PT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var IT=[new O([1,0,0]),new O([0,1,0]),new O([0,0,1])],RT=new O,F4=new O,qae=new We(new O(1,0,0),0),Pt=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];At(this,e),Q(this,"planes",void 0),this.planes=r}return xt(e,[{key:"fromBoundingSphere",value:function(t){this.planes.length=2*IT.length;var n=t.center,a=t.radius,i=0,s=BT(IT),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,f=this.planes[i],l=this.planes[i+1];f||(f=this.planes[i]=new We),l||(l=this.planes[i+1]=new We);var c=RT.copy(u).scale(-a).add(n),h=-u.dot(c);f.fromPointNormal(c,u);var d=RT.copy(u).scale(a).add(n),p=F4.copy(u).negate(),v=-p.dot(d);l.fromPointNormal(d,p),i+=2}}catch(g){s.e(g)}finally{s.f()}return this}},{key:"computeVisibility",value:function(t){var n=ze.INSIDE,a=BT(this.planes),i;try{for(a.s();!(i=a.n()).done;){var s=i.value,o=t.intersectPlane(s);switch(o){case ze.OUTSIDE:return ze.OUTSIDE;case ze.INTERSECTING:n=ze.INTERSECTING;break;default:}}}catch(u){a.e(u)}finally{a.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(t,n){if(de(Number.isFinite(n),"parentPlaneMask is required."),n===e.MASK_OUTSIDE||n===e.MASK_INSIDE)return n;for(var a=e.MASK_INSIDE,i=this.planes,s=0;s<this.planes.length;++s){var o=s<31?1<<s:0;if(!(s<31&&!(n&o))){var u=i[s],f=t.intersectPlane(u);if(f===ze.OUTSIDE)return e.MASK_OUTSIDE;f===ze.INTERSECTING&&(a|=o)}}return a}}]),e}();Q(Pt,"MASK_OUTSIDE",4294967295);Q(Pt,"MASK_INSIDE",0);Q(Pt,"MASK_INDETERMINATE",2147483647);var k4=new O,D4=new O,N4=new O,G4=new O,U4=new O,Ud=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};At(this,e),Q(this,"left",void 0),Q(this,"_left",void 0),Q(this,"right",void 0),Q(this,"_right",void 0),Q(this,"top",void 0),Q(this,"_top",void 0),Q(this,"bottom",void 0),Q(this,"_bottom",void 0),Q(this,"near",void 0),Q(this,"_near",void 0),Q(this,"far",void 0),Q(this,"_far",void 0),Q(this,"_cullingVolume",new Pt([new We,new We,new We,new We,new We,new We])),Q(this,"_perspectiveMatrix",new ae),Q(this,"_infinitePerspective",new ae);var t=r.near,n=t===void 0?1:t,a=r.far,i=a===void 0?5e8:a;this.left=r.left,this._left=void 0,this.right=r.right,this._right=void 0,this.top=r.top,this._top=void 0,this.bottom=r.bottom,this._bottom=void 0,this.near=n,this._near=n,this.far=i,this._far=i}return xt(e,[{key:"clone",value:function(){return new e({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(t){return t&&t instanceof e&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far}},{key:"projectionMatrix",get:function(){return this._update(),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._infinitePerspective}},{key:"computeCullingVolume",value:function(t,n,a){de(t,"position is required."),de(n,"direction is required."),de(a,"up is required.");var i=this._cullingVolume.planes;a=k4.copy(a).normalize();var s=D4.copy(n).cross(a).normalize(),o=N4.copy(n).multiplyByScalar(this.near).add(t),u=G4.copy(n).multiplyByScalar(this.far).add(t),f=U4;return f.copy(s).multiplyByScalar(this.left).add(o).subtract(t).cross(a),i[0].fromPointNormal(t,f),f.copy(s).multiplyByScalar(this.right).add(o).subtract(t).cross(a).negate(),i[1].fromPointNormal(t,f),f.copy(a).multiplyByScalar(this.bottom).add(o).subtract(t).cross(s).negate(),i[2].fromPointNormal(t,f),f.copy(a).multiplyByScalar(this.top).add(o).subtract(t).cross(s),i[3].fromPointNormal(t,f),f=new O().copy(n),i[4].fromPointNormal(o,f),f.negate(),i[5].fromPointNormal(u,f),this._cullingVolume}},{key:"getPixelDimensions",value:function(t,n,a,i){this._update(),de(Number.isFinite(t)&&Number.isFinite(n)),de(t>0),de(n>0),de(a>0),de(i);var s=1/this.near,o=this.top*s,u=2*a*o/n;o=this.right*s;var f=2*a*o/t;return i.x=f,i.y=u,i}},{key:"_update",value:function(){de(Number.isFinite(this.right)&&Number.isFinite(this.left)&&Number.isFinite(this.top)&&Number.isFinite(this.bottom)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var t=this.top,n=this.bottom,a=this.right,i=this.left,s=this.near,o=this.far;(t!==this._top||n!==this._bottom||i!==this._left||a!==this._right||s!==this._near||o!==this._far)&&(de(this.near>0&&this.near<this.far,"near must be greater than zero and less than far."),this._left=i,this._right=a,this._top=t,this._bottom=n,this._near=s,this._far=o,this._perspectiveMatrix=new ae().frustum({left:i,right:a,bottom:n,top:t,near:s,far:o}),this._infinitePerspective=new ae().frustum({left:i,right:a,bottom:n,top:t,near:s,far:1/0}))}}]),e}();var j4=function(r){return r!==null&&typeof r<"u"},H4=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};At(this,e),Q(this,"_offCenterFrustum",new Ud),Q(this,"fov",void 0),Q(this,"_fov",void 0),Q(this,"_fovy",void 0),Q(this,"_sseDenominator",void 0),Q(this,"aspectRatio",void 0),Q(this,"_aspectRatio",void 0),Q(this,"near",void 0),Q(this,"_near",void 0),Q(this,"far",void 0),Q(this,"_far",void 0),Q(this,"xOffset",void 0),Q(this,"_xOffset",void 0),Q(this,"yOffset",void 0),Q(this,"_yOffset",void 0);var t=r.fov,n=r.aspectRatio,a=r.near,i=a===void 0?1:a,s=r.far,o=s===void 0?5e8:s,u=r.xOffset,f=u===void 0?0:u,l=r.yOffset,c=l===void 0?0:l;this.fov=t,this.aspectRatio=n,this.near=i,this.far=o,this.xOffset=f,this.yOffset=c}return xt(e,[{key:"clone",value:function(){return new e({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(t){return!j4(t)||!(t instanceof e)?!1:(this._update(),t._update(),this.fov===t.fov&&this.aspectRatio===t.aspectRatio&&this.near===t.near&&this.far===t.far&&this._offCenterFrustum.equals(t._offCenterFrustum))}},{key:"projectionMatrix",get:function(){return this._update(),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return this._update(),this._fovy}},{key:"sseDenominator",get:function(){return this._update(),this._sseDenominator}},{key:"computeCullingVolume",value:function(t,n,a){return this._update(),this._offCenterFrustum.computeCullingVolume(t,n,a)}},{key:"getPixelDimensions",value:function(t,n,a,i){return this._update(),this._offCenterFrustum.getPixelDimensions(t,n,a,i||new ia)}},{key:"_update",value:function(){de(Number.isFinite(this.fov)&&Number.isFinite(this.aspectRatio)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var t=this._offCenterFrustum;(this.fov!==this._fov||this.aspectRatio!==this._aspectRatio||this.near!==this._near||this.far!==this._far||this.xOffset!==this._xOffset||this.yOffset!==this._yOffset)&&(de(this.fov>=0&&this.fov<Math.PI),de(this.aspectRatio>0),de(this.near>=0&&this.near<this.far),this._aspectRatio=this.aspectRatio,this._fov=this.fov,this._fovy=this.aspectRatio<=1?this.fov:Math.atan(Math.tan(this.fov*.5)/this.aspectRatio)*2,this._near=this.near,this._far=this.far,this._sseDenominator=2*Math.tan(.5*this._fovy),this._xOffset=this.xOffset,this._yOffset=this.yOffset,t.top=this.near*Math.tan(.5*this._fovy),t.bottom=-t.top,t.right=this.aspectRatio*t.top,t.left=-t.right,t.near=this.near,t.far=this.far,t.right+=this.xOffset,t.left+=this.xOffset,t.top+=this.yOffset,t.bottom+=this.yOffset)}}]),e}();var fie=new O,lie=new O,cie=new O,hie=new O,die=new O,pie=new O,mie=new O,vie=new O,gie=new O,yie=new O,bie=new O,_ie=new O,Aie=4/3*Math.PI;var xr=new Te,V4=new Te,z4=new Te,Gu=new Te,LT=new Te;function Uu(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Ar.EPSILON20,n=10,a=0,i=0,s=V4,o=z4;s.identity(),o.copy(e);for(var u=t*W4(o);i<n&&q4(o)>u;)J4(o,Gu),LT.copy(Gu).transpose(),o.multiplyRight(Gu),o.multiplyLeft(LT),s.multiplyRight(Gu),++a>2&&(++i,a=0);return r.unitary=s.toTarget(r.unitary),r.diagonal=o.toTarget(r.diagonal),r}function W4(e){for(var r=0,t=0;t<9;++t){var n=e[t];r+=n*n}return Math.sqrt(r)}var jd=[1,0,0],Hd=[2,2,1];function q4(e){for(var r=0,t=0;t<3;++t){var n=e[xr.getElementIndex(Hd[t],jd[t])];r+=2*n*n}return Math.sqrt(r)}function J4(e,r){for(var t=Ar.EPSILON15,n=0,a=1,i=0;i<3;++i){var s=Math.abs(e[xr.getElementIndex(Hd[i],jd[i])]);s>n&&(a=i,n=s)}var o=jd[a],u=Hd[a],f=1,l=0;if(Math.abs(e[xr.getElementIndex(u,o)])>t){var c=e[xr.getElementIndex(u,u)],h=e[xr.getElementIndex(o,o)],d=e[xr.getElementIndex(u,o)],p=(c-h)/2/d,v;p<0?v=-1/(-p+Math.sqrt(1+p*p)):v=1/(p+Math.sqrt(1+p*p)),f=1/Math.sqrt(1+v*v),l=v*f}return Te.IDENTITY.to(r),r[xr.getElementIndex(o,o)]=r[xr.getElementIndex(u,u)]=f,r[xr.getElementIndex(u,o)]=l,r[xr.getElementIndex(o,u)]=-l,r}function Vd(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=X4(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function X4(e,r){if(e){if(typeof e=="string")return FT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return FT(e,r)}}function FT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var _n=new O,K4=new O,Y4=new O,Q4=new O,$4=new O,Z4=new Te,eN={diagonal:new Te,unitary:new Te};function zd(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new sa;if(!e||e.length===0)return r.halfAxes=new Te([0,0,0,0,0,0,0,0,0]),r.center=new O,r;var t=e.length,n=new O(0,0,0),a=Vd(e),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;n.add(s)}}catch(W){a.e(W)}finally{a.f()}var o=1/t;n.multiplyByScalar(o);var u=0,f=0,l=0,c=0,h=0,d=0,p=Vd(e),v;try{for(p.s();!(v=p.n()).done;){var g=v.value,y=_n.copy(g).subtract(n);u+=y.x*y.x,f+=y.x*y.y,l+=y.x*y.z,c+=y.y*y.y,h+=y.y*y.z,d+=y.z*y.z}}catch(W){p.e(W)}finally{p.f()}u*=o,f*=o,l*=o,c*=o,h*=o,d*=o;var _=Z4;_[0]=u,_[1]=f,_[2]=l,_[3]=f,_[4]=c,_[5]=h,_[6]=l,_[7]=h,_[8]=d;var T=Uu(_,eN),x=T.unitary,E=r.halfAxes.copy(x),C=E.getColumn(0,Y4),L=E.getColumn(1,Q4),w=E.getColumn(2,$4),S=-Number.MAX_VALUE,A=-Number.MAX_VALUE,I=-Number.MAX_VALUE,F=Number.MAX_VALUE,D=Number.MAX_VALUE,N=Number.MAX_VALUE,B=Vd(e),P;try{for(B.s();!(P=B.n()).done;){var R=P.value;_n.copy(R),S=Math.max(_n.dot(C),S),A=Math.max(_n.dot(L),A),I=Math.max(_n.dot(w),I),F=Math.min(_n.dot(C),F),D=Math.min(_n.dot(L),D),N=Math.min(_n.dot(w),N)}}catch(W){B.e(W)}finally{B.f()}C=C.multiplyByScalar(.5*(F+S)),L=L.multiplyByScalar(.5*(D+A)),w=w.multiplyByScalar(.5*(N+I)),r.center.copy(C).add(L).add(w);var V=K4.set(S-F,A-D,I-N).multiplyByScalar(.5),G=new Te([V[0],0,0,0,V[1],0,0,0,V[2]]);return r.halfAxes.multiplyRight(G),r}function Wd(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=tN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function tN(e,r){if(e){if(typeof e=="string")return kT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kT(e,r)}}function kT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var ui=512,DT=3,UT=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],jT=UT.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),rN=jT.concat([[.25,.5],[.75,.5]]),nN=function(){function e(r,t,n){(0,NT.default)(this,e),(0,oa.default)(this,"x",void 0),(0,oa.default)(this,"y",void 0),(0,oa.default)(this,"z",void 0),(0,oa.default)(this,"childVisible",void 0),(0,oa.default)(this,"selected",void 0),(0,oa.default)(this,"_children",void 0),this.x=r,this.y=t,this.z=n}return(0,GT.default)(e,[{key:"children",get:function(){if(!this._children){var t=this.x*2,n=this.y*2,a=this.z+1;this._children=[new e(t,n,a),new e(t,n+1,a),new e(t+1,n,a),new e(t+1,n+1,a)]}return this._children}},{key:"update",value:function(t){var n=t.viewport,a=t.cullingVolume,i=t.elevationBounds,s=t.minZ,o=t.maxZ,u=t.bounds,f=t.offset,l=t.project,c=this.getBoundingVolume(i,f,l);if(u&&!this.insideBounds(u))return!1;var h=a.computeVisibility(c);if(h<0)return!1;if(!this.childVisible){var d=this.z;if(d<o&&d>=s){var p=c.distanceTo(n.cameraPosition)*n.scale/n.height;d+=Math.floor(Math.log2(p))}if(d>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var v=Wd(this.children),g;try{for(v.s();!(g=v.n()).done;){var y=g.value;y.update(t)}}catch(_){v.e(_)}finally{v.f()}return!0}},{key:"getSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(this.selected&&t.push(this),this._children){var n=Wd(this._children),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.getSelected(t)}}catch(s){n.e(s)}finally{n.f()}}return t}},{key:"insideBounds",value:function(t){var n=(0,qd.default)(t,4),a=n[0],i=n[1],s=n[2],o=n[3],u=Math.pow(2,this.z),f=ui/u;return this.x*f<s&&this.y*f<o&&(this.x+1)*f>a&&(this.y+1)*f>i}},{key:"getBoundingVolume",value:function(t,n,a){if(a){var i=this.z<1?rN:this.z<2?jT:UT,s=[],o=Wd(i),u;try{for(o.s();!(u=o.n()).done;){var f=u.value,l=ju(this.x+f[0],this.y+f[1],this.z);l[2]=t[0],s.push(a(l)),t[0]!==t[1]&&(l[2]=t[1],s.push(a(l)))}}catch(v){o.e(v)}finally{o.f()}return zd(s)}var c=Math.pow(2,this.z),h=ui/c,d=this.x*h+n*ui,p=ui-(this.y+1)*h;return new Fu([d,p,t[0]],[d+h,p+h,t[1]])}}]),e}();function HT(e,r,t,n){var a=e instanceof ws._GlobeViewport&&e.resolution?e.projectPosition:null,i=Object.values(e.getFrustumPlanes()).map(function(E){var C=E.normal,L=E.distance;return new We(C.clone().negate(),L)}),s=new Pt(i),o=e.distanceScales.unitsPerMeter[2],u=t&&t[0]*o||0,f=t&&t[1]*o||0,l=e instanceof ws.WebMercatorViewport&&e.pitch<=60?r:0;if(n){var c=n,h=(0,qd.default)(c,4),d=h[0],p=h[1],v=h[2],g=h[3],y=Ut([d,g]),_=Ut([v,p]);n=[y[0],ui-y[1],_[0],ui-_[1]]}var T=new nN(0,0,0),x={viewport:e,project:a,cullingVolume:s,elevationBounds:[u,f],minZ:l,maxZ:r,bounds:n,offset:0};if(T.update(x),e instanceof ws.WebMercatorViewport&&e.subViewports&&e.subViewports.length>1){for(x.offset=-1;T.update(x)&&!(--x.offset<-DT););for(x.offset=1;T.update(x)&&!(++x.offset>DT););}return T.getSelected()}var zr=512,aN=[-1/0,-1/0,1/0,1/0],An={type:"object",value:null,validate:function(r,t){return t.optional&&r===null||typeof r=="string"||Array.isArray(r)&&r.every(function(n){return typeof n=="string"})},equal:function(r,t){if(r===t)return!0;if(!Array.isArray(r)||!Array.isArray(t))return!1;var n=r.length;if(n!==t.length)return!1;for(var a=0;a<n;a++)if(r[a]!==t[a])return!1;return!0}};function zT(e,r){var t=[r.transformAsPoint([e[0],e[1]]),r.transformAsPoint([e[2],e[1]]),r.transformAsPoint([e[0],e[3]]),r.transformAsPoint([e[2],e[3]])],n=[Math.min.apply(Math,(0,Cs.default)(t.map(function(a){return a[0]}))),Math.min.apply(Math,(0,Cs.default)(t.map(function(a){return a[1]}))),Math.max.apply(Math,(0,Cs.default)(t.map(function(a){return a[0]}))),Math.max.apply(Math,(0,Cs.default)(t.map(function(a){return a[1]})))];return n}function iN(e){return Math.abs(e.split("").reduce(function(r,t){return(r<<5)-r+t.charCodeAt(0)|0},0))}function Tr(e,r){if(!e||!e.length)return null;var t=r.index,n=r.id;if(Array.isArray(e)){var a=iN(n)%e.length;e=e[a]}for(var i=e,s=0,o=Object.keys(t);s<o.length;s++){var u=o[s],f=new RegExp("{".concat(u,"}"),"g");i=i.replace(f,String(t[u]))}return Number.isInteger(t.y)&&Number.isInteger(t.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,t.z)-t.y-1))),i}function sN(e,r,t){var n;if(r&&r.length===2){var a=(0,ua.default)(r,2),i=a[0],s=a[1],o=e.getBounds({z:i}),u=e.getBounds({z:s});n=[Math.min(o[0],u[0]),Math.min(o[1],u[1]),Math.max(o[2],u[2]),Math.max(o[3],u[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],t[0]),Math.max(n[1],t[1]),Math.min(n[2],t[2]),Math.min(n[3],t[3])]:[Math.max(Math.min(n[0],t[2]),t[0]),Math.max(Math.min(n[1],t[3]),t[1]),Math.min(Math.max(n[2],t[0]),t[2]),Math.min(Math.max(n[3],t[1]),t[3])]}function WT(e){var r=e.viewport,t=e.z,n=t===void 0?0:t,a=e.cullRect,i=r.subViewports||[r];return i.map(function(s){return Jd(s,n,a)})}function Jd(e,r,t){if(!Array.isArray(r)){var n=t.x-e.x,a=t.y-e.y,i=t.width,s=t.height,o={targetZ:r},u=e.unproject([n,a],o),f=e.unproject([n+i,a],o),l=e.unproject([n,a+s],o),c=e.unproject([n+i,a+s],o);return[Math.min(u[0],f[0],l[0],c[0]),Math.min(u[1],f[1],l[1],c[1]),Math.max(u[0],f[0],l[0],c[0]),Math.max(u[1],f[1],l[1],c[1])]}var h=Jd(e,r[0],t),d=Jd(e,r[1],t);return[Math.min(h[0],d[0]),Math.min(h[1],d[1]),Math.max(h[2],d[2]),Math.max(h[3],d[3])]}function oN(e,r,t){if(t){var n=zT(e,t).map(function(a){return a*r/zr});return n}return e.map(function(a){return a*r/zr})}function Xd(e,r){return Math.pow(2,e)*zr/r}function ju(e,r,t){var n=Xd(t,zr),a=e/n*360-180,i=Math.PI-2*Math.PI*r/n,s=180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)));return[a,s]}function VT(e,r,t,n){var a=Xd(t,n);return[e/a*zr,r/a*zr]}function Kd(e,r,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:zr;if(e.isGeospatial){var i=ju(r,t,n),s=(0,ua.default)(i,2),o=s[0],u=s[1],f=ju(r+1,t+1,n),l=(0,ua.default)(f,2),c=l[0],h=l[1];return{west:o,north:u,east:c,south:h}}var d=VT(r,t,n,a),p=(0,ua.default)(d,2),v=p[0],g=p[1],y=VT(r+1,t+1,n,a),_=(0,ua.default)(y,2),T=_[0],x=_[1];return{left:v,top:g,right:T,bottom:x}}function uN(e,r,t,n,a){for(var i=sN(e,null,n),s=Xd(r,t),o=oN(i,s,a),u=(0,ua.default)(o,4),f=u[0],l=u[1],c=u[2],h=u[3],d=[],p=Math.floor(f);p<c;p++)for(var v=Math.floor(l);v<h;v++)d.push({x:p,y:v,z:r});return d}function Yd(e){var r=e.viewport,t=e.maxZoom,n=e.minZoom,a=e.zRange,i=e.extent,s=e.tileSize,o=s===void 0?zr:s,u=e.modelMatrix,f=e.modelMatrixInverse,l=e.zoomOffset,c=l===void 0?0:l,h=r.isGeospatial?Math.round(r.zoom+Math.log2(zr/o))+c:Math.ceil(r.zoom)+c;if(typeof n=="number"&&Number.isFinite(n)&&h<n){if(!i)return[];h=n}typeof t=="number"&&Number.isFinite(t)&&h>t&&(h=t);var d=i;return u&&f&&i&&!r.isGeospatial&&(d=zT(i,u)),r.isGeospatial?HT(r,h,a,i):uN(r,h,o,d||aN,f)}function Qd(e){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(e)}function $d(e){return Number.isFinite(e.west)&&Number.isFinite(e.north)&&Number.isFinite(e.east)&&Number.isFinite(e.south)}function qT(e){var r={},t;return function(n){for(var a in n)if(!fN(n[a],r[a])){t=e(n),r=n;break}return t}}function fN(e,r){if(e===r)return!0;if(Array.isArray(e)){var t=e.length;if(!r||r.length!==t)return!1;for(var n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}return!1}var Os;function ot(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=lN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function lN(e,r){if(e){if(typeof e=="string")return JT(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return JT(e,r)}}function JT(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function XT(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function KT(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?XT(Object(t),!0).forEach(function(n){(0,qe.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):XT(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var YT=1,Hu=2,cN="never",hN="no-overlap",Bs="best-available",dN=5,pN=(Os={},(0,qe.default)(Os,Bs,vN),(0,qe.default)(Os,hN,gN),(0,qe.default)(Os,cN,function(){}),Os),mN={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){}},Ps=function(){function e(r){var t=this;(0,QT.default)(this,e),(0,qe.default)(this,"opts",void 0),(0,qe.default)(this,"_requestScheduler",void 0),(0,qe.default)(this,"_cache",void 0),(0,qe.default)(this,"_dirty",void 0),(0,qe.default)(this,"_tiles",void 0),(0,qe.default)(this,"_cacheByteSize",void 0),(0,qe.default)(this,"_viewport",void 0),(0,qe.default)(this,"_zRange",void 0),(0,qe.default)(this,"_selectedTiles",void 0),(0,qe.default)(this,"_frameNumber",void 0),(0,qe.default)(this,"_modelMatrix",void 0),(0,qe.default)(this,"_modelMatrixInverse",void 0),(0,qe.default)(this,"_maxZoom",void 0),(0,qe.default)(this,"_minZoom",void 0),(0,qe.default)(this,"onTileLoad",void 0),(0,qe.default)(this,"_getCullBounds",qT(WT)),this.opts=KT(KT({},mN),r),this.onTileLoad=function(n){var a,i;(a=(i=t.opts).onTileLoad)===null||a===void 0||a.call(i,n),t.opts.maxCacheByteSize&&(t._cacheByteSize+=n.byteLength,t._resizeCache())},this._requestScheduler=new Qi({maxRequests:r.maxRequests,throttleRequests:Boolean(r.maxRequests&&r.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new ae,this._modelMatrixInverse=new ae,this.setOptions(r)}return(0,$T.default)(e,[{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles!==null&&this._selectedTiles.every(function(t){return t.isLoaded})}},{key:"needsReload",get:function(){return this._selectedTiles!==null&&this._selectedTiles.some(function(t){return t.needsReload})}},{key:"setOptions",value:function(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}},{key:"finalize",value:function(){var t=ot(this._cache.values()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.isLoading&&a.abort()}}catch(i){t.e(i)}finally{t.f()}this._cache.clear(),this._tiles=[],this._selectedTiles=null}},{key:"reloadAll",value:function(){var t=ot(this._cache.keys()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value,i=this._cache.get(a);!this._selectedTiles||!this._selectedTiles.includes(i)?this._cache.delete(a):i.setNeedsReload()}}catch(s){t.e(s)}finally{t.f()}}},{key:"update",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.zRange,s=a.modelMatrix,o=new ae(s),u=!o.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!nt(this._zRange,i)||u){u&&(this._modelMatrixInverse=o.clone().invert(),this._modelMatrix=o),this._viewport=t,this._zRange=i;var f=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:i,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=f.map(function(c){return n._getTile(c,!0)}),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(function(c){return n._getTile(c.index,!0)}));var l=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),l&&this._frameNumber++,this._frameNumber}},{key:"isTileVisible",value:function(t,n){if(!t.isVisible)return!1;if(n&&this._viewport){var a=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:n}),i=t.bbox,s=ot(a),o;try{for(s.s();!(o=s.n()).done;){var u=(0,Zd.default)(o.value,4),f=u[0],l=u[1],c=u[2],h=u[3],d=void 0;if("west"in i)d=i.west<c&&i.east>f&&i.south<h&&i.north>l;else{var p=Math.min(i.top,i.bottom),v=Math.max(i.top,i.bottom);d=i.left<c&&i.right>f&&p<h&&v>l}if(d)return!0}}catch(g){s.e(g)}finally{s.f()}return!1}return!0}},{key:"getTileIndices",value:function(t){var n=t.viewport,a=t.maxZoom,i=t.minZoom,s=t.zRange,o=t.modelMatrix,u=t.modelMatrixInverse,f=this.opts,l=f.tileSize,c=f.extent,h=f.zoomOffset;return Yd({viewport:n,maxZoom:a,minZoom:i,zRange:s,tileSize:l,extent:c,modelMatrix:o,modelMatrixInverse:u,zoomOffset:h})}},{key:"getTileId",value:function(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}},{key:"getTileZoom",value:function(t){return t.z}},{key:"getTileMetadata",value:function(t){var n=this.opts.tileSize;return{bbox:Kd(this._viewport,t.x,t.y,t.z,n)}}},{key:"getParentIndex",value:function(t){var n=Math.floor(t.x/2),a=Math.floor(t.y/2),i=t.z-1;return{x:n,y:a,z:i}}},{key:"updateTileStates",value:function(){var t=this.opts.refinementStrategy||Bs,n=new Array(this._cache.size),a=0,i=ot(this._cache.values()),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;n[a++]=o.isVisible,o.isSelected=!1,o.isVisible=!1}}catch(p){i.e(p)}finally{i.f()}var u=ot(this._selectedTiles),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;l.isSelected=!0,l.isVisible=!0}}catch(p){u.e(p)}finally{u.f()}(typeof t=="function"?t:pN[t])(Array.from(this._cache.values())),a=0;var c=ot(this._cache.values()),h;try{for(c.s();!(h=c.n()).done;){var d=h.value;if(n[a++]!==d.isVisible)return!0}}catch(p){c.e(p)}finally{c.f()}return!1}},{key:"_pruneRequests",value:function(){var t=this.opts.maxRequests,n=t===void 0?0:t,a=[],i=0,s=ot(this._cache.values()),o;try{for(s.s();!(o=s.n()).done;){var u=o.value;u.isLoading&&(i++,!u.isSelected&&!u.isVisible&&a.push(u))}}catch(l){s.e(l)}finally{s.f()}for(;n>0&&i>n&&a.length>0;){var f=a.shift();f.abort(),i--}}},{key:"_rebuildTree",value:function(){var t=this._cache,n=ot(t.values()),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.parent=null,i.children&&(i.children.length=0)}}catch(l){n.e(l)}finally{n.f()}var s=ot(t.values()),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,f=this._getNearestAncestor(u);u.parent=f,f!=null&&f.children&&f.children.push(u)}}catch(l){s.e(l)}finally{s.f()}}},{key:"_resizeCache",value:function(){var t=this._cache,n=this.opts,a=n.maxCacheSize||(n.maxCacheByteSize?1/0:dN*this.selectedTiles.length),i=n.maxCacheByteSize||1/0,s=t.size>a||this._cacheByteSize>i;if(s){var o=ot(t),u;try{for(o.s();!(u=o.n()).done;){var f=(0,Zd.default)(u.value,2),l=f[0],c=f[1];if(!c.isVisible&&!c.isSelected){var h,d;this._cacheByteSize-=n.maxCacheByteSize?c.byteLength:0,t.delete(l),(h=(d=this.opts).onTileUnload)===null||h===void 0||h.call(d,c)}if(t.size<=a&&this._cacheByteSize<=i)break}}catch(p){o.e(p)}finally{o.f()}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(function(p,v){return p.zoom-v.zoom}),this._dirty=!1)}},{key:"_getTile",value:function(t,n){var a=this.getTileId(t),i=this._cache.get(a),s=!1;return!i&&n?(i=new Es(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:a,zoom:this.getTileZoom(i.index)}),s=!0,this._cache.set(a,i),this._dirty=!0):i&&i.needsReload&&(s=!0),i&&s&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}},{key:"_getNearestAncestor",value:function(t){for(var n=this._minZoom,a=n===void 0?0:n,i=t.index;this.getTileZoom(i)>a;){i=this.getParentIndex(i);var s=this._getTile(i);if(s)return s}return null}}]),e}();function vN(e){var r=ot(e),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;n.state=0}}catch(l){r.e(l)}finally{r.f()}var a=ot(e),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;s.isSelected&&!ZT(s)&&ep(s)}}catch(l){a.e(l)}finally{a.f()}var o=ot(e),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;f.isVisible=Boolean(f.state&Hu)}}catch(l){o.e(l)}finally{o.f()}}function gN(e){var r=ot(e),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;n.state=0}}catch(p){r.e(p)}finally{r.f()}var a=ot(e),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;s.isSelected&&ZT(s)}}catch(p){a.e(p)}finally{a.f()}var o=Array.from(e).sort(function(p,v){return p.zoom-v.zoom}),u=ot(o),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;if(l.isVisible=Boolean(l.state&Hu),l.children&&(l.isVisible||l.state&YT)){var c=ot(l.children),h;try{for(c.s();!(h=c.n()).done;){var d=h.value;d.state=YT}}catch(p){c.e(p)}finally{c.f()}}else l.isSelected&&ep(l)}}catch(p){u.e(p)}finally{u.f()}}function ZT(e){for(var r=e;r;){if(r.isLoaded||r.content)return r.state|=Hu,!0;r=r.parent}return!1}function ep(e){var r=ot(e.children),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isLoaded||n.content?n.state|=Hu:ep(n)}}catch(a){r.e(a)}finally{r.f()}}function eM(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function tp(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?eM(Object(t),!0).forEach(function(n){(0,Vu.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eM(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function yN(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=bN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function bN(e,r){if(e){if(typeof e=="string")return tM(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tM(e,r)}}function tM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _N(e){var r=AN();return function(){var n=(0,rp.default)(e),a;if(r){var i=(0,rp.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,iM.default)(this,a)}}function AN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xN={TilesetClass:Ps,data:{type:"data",value:[]},dataComparator:An.equal,renderSubLayers:{type:"function",value:function(r){return new sM.GeoJsonLayer(r)}},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:function(r){}},onTileUnload:{type:"function",value:function(r){}},onTileError:{type:"function",value:function(r){return console.error(r)}},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Bs,zRange:null,maxRequests:6,zoomOffset:0},Wr=function(e){(0,aM.default)(t,e);var r=_N(t);function t(){return(0,rM.default)(this,t),r.apply(this,arguments)}return(0,nM.default)(t,[{key:"initializeState",value:function(){this.state={tileset:null,isLoaded:!1}}},{key:"finalizeState",value:function(){var a,i;(a=this.state)===null||a===void 0||(i=a.tileset)===null||i===void 0||i.finalize()}},{key:"isLoaded",get:function(){var a,i;return(a=this.state)===null||a===void 0||(i=a.tileset)===null||i===void 0?void 0:i.selectedTiles.every(function(s){return s.isLoaded&&s.layers&&s.layers.every(function(o){return o.isLoaded})})}},{key:"shouldUpdateState",value:function(a){var i=a.changeFlags;return i.somethingChanged}},{key:"updateState",value:function(a){var i=a.changeFlags,s=this.state.tileset,o=i.propsOrDataChanged||i.updateTriggersChanged,u=i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getTileData);s?o&&(s.setOptions(this._getTilesetOptions()),u?s.reloadAll():this.state.tileset.tiles.forEach(function(f){f.layers=null})):(s=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:s})),this._updateTileset()}},{key:"_getTilesetOptions",value:function(){var a=this.props,i=a.tileSize,s=a.maxCacheSize,o=a.maxCacheByteSize,u=a.refinementStrategy,f=a.extent,l=a.maxZoom,c=a.minZoom,h=a.maxRequests,d=a.zoomOffset;return{maxCacheSize:s,maxCacheByteSize:o,maxZoom:l,minZoom:c,tileSize:i,refinementStrategy:u,extent:f,maxRequests:h,zoomOffset:d,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}},{key:"_updateTileset",value:function(){var a=this.state.tileset,i=this.props,s=i.zRange,o=i.modelMatrix,u=a.update(this.context.viewport,{zRange:s,modelMatrix:o}),f=a.isLoaded,l=this.state.isLoaded!==f,c=this.state.frameNumber!==u;f&&(l||c)&&this._onViewportLoad(),c&&this.setState({frameNumber:u}),this.state.isLoaded=f}},{key:"_onViewportLoad",value:function(){var a=this.state.tileset,i=this.props.onViewportLoad;i&&i(a.selectedTiles)}},{key:"_onTileLoad",value:function(a){this.props.onTileLoad(a),a.layers=null,this.setNeedsUpdate()}},{key:"_onTileError",value:function(a,i){this.props.onTileError(a),i.layers=null,this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(a){this.props.onTileUnload(a)}},{key:"getTileData",value:function(a){var i=this.props,s=i.data,o=i.getTileData,u=i.fetch,f=a.signal;return a.url=typeof s=="string"||Array.isArray(s)?Tr(s,a):null,o?o(a):u&&a.url?u(a.url,{propName:"data",layer:this,signal:f}):null}},{key:"renderSubLayers",value:function(a){return this.props.renderSubLayers(a)}},{key:"getSubLayerPropsByTile",value:function(a){return null}},{key:"getPickingInfo",value:function(a){var i=a.info,s=a.sourceLayer,o=s.props.tile;return i.picked&&(i.tile=o),i.sourceTile=o,i}},{key:"_updateAutoHighlight",value:function(a){var i=a.sourceTile;if(i&&i.layers){var s=yN(i.layers),o;try{for(s.s();!(o=s.n()).done;){var u=o.value;u.updateAutoHighlight(a)}}catch(f){s.e(f)}finally{s.f()}}}},{key:"renderLayers",value:function(){var a=this;return this.state.tileset.tiles.map(function(i){var s=a.getSubLayerPropsByTile(i);if(!(!i.isLoaded&&!i.content))if(i.layers)s&&i.layers[0]&&Object.keys(s).some(function(u){return i.layers[0].props[u]!==s[u]})&&(i.layers=i.layers.map(function(u){return u.clone(s)}));else{var o=a.renderSubLayers(tp(tp({},a.props),{},{id:"".concat(a.id,"-").concat(i.id),data:i.content,_offset:0,tile:i}));i.layers=(0,zu._flatten)(o,Boolean).map(function(u){return u.clone(tp({tile:i},s))})}return i.layers})}},{key:"filterSubLayer",value:function(a){var i=a.layer,s=a.cullRect,o=i.props.tile;return this.state.tileset.isTileVisible(o,s)}}]),t}(zu.CompositeLayer);(0,Vu.default)(Wr,"defaultProps",xN);(0,Vu.default)(Wr,"layerName","TileLayer");var cM=m(z()),hM=m(q()),Ju=m(fi()),dM=m(Ce()),pM=m(Oe()),li=m(Me()),Xu=m(J()),mM=m(Zt());function fM(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function lM(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?fM(Object(t),!0).forEach(function(n){(0,Xu.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fM(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function SN(e){var r=wN();return function(){var n=(0,li.default)(e),a;if(r){var i=(0,li.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,pM.default)(this,a)}}function wN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var CN={fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:function(r){return r.timestamps}}},Ku=function(e){(0,dM.default)(t,e);var r=SN(t);function t(){return(0,cM.default)(this,t),r.apply(this,arguments)}return(0,hM.default)(t,[{key:"getShaders",value:function(){var a=(0,Ju.default)((0,li.default)(t.prototype),"getShaders",this).call(this);return a.inject={"vs:#decl":`uniform float trailLength;
attribute float instanceTimestamps;
attribute float instanceNextTimestamps;
varying float vTime;
`,"vs:#main-end":`vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;
`,"fs:#decl":`uniform bool fadeTrail;
uniform float trailLength;
uniform float currentTime;
varying float vTime;
`,"fs:#main-start":`if(vTime > currentTime || (fadeTrail && (vTime < currentTime - trailLength))) {
  discard;
}
`,"fs:DECKGL_FILTER_COLOR":`if(fadeTrail) {
  color.a *= 1.0 - (currentTime - vTime) / trailLength;
}
`},a}},{key:"initializeState",value:function(){(0,Ju.default)((0,li.default)(t.prototype),"initializeState",this).call(this);var a=this.getAttributeManager();a.addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(a){var i=this.props,s=i.fadeTrail,o=i.trailLength,u=i.currentTime;a.uniforms=lM(lM({},a.uniforms),{},{fadeTrail:s,trailLength:o,currentTime:u}),(0,Ju.default)((0,li.default)(t.prototype),"draw",this).call(this,a)}}]),t}(mM.PathLayer);(0,Xu.default)(Ku,"layerName","TripsLayer");(0,Xu.default)(Ku,"defaultProps",CN);var OM=m(z()),BM=m(q()),PM=m(Ce()),IM=m(Oe()),sp=m(Me()),op=m(J()),RM=m(np()),LM=m(er());var _M=m(z()),AM=m(q()),xM=m(vt()),TM=m(Ce()),MM=m(Oe()),ap=m(Me()),ci=m(J()),EM=m(De()),Is=m(ve()),dt=m(np());var Qu=m(er()),Rs=m(Zt());function ON(e){var r=BN();return function(){var n=(0,ap.default)(e),a;if(r){var i=(0,ap.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,MM.default)(this,a)}}function BN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gM(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Yu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?gM(Object(t),!0).forEach(function(n){(0,ci.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gM(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ip(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=PN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function PN(e,r){if(e){if(typeof e=="string")return yM(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yM(e,r)}}function yM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var IN=10;function SM(e,r){r=r===void 0?e[0][0]:r;var t=ip(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value,i=a[0]-r;i>180?a[0]-=360:i<-180&&(a[0]+=360)}}catch(s){t.e(s)}finally{t.f()}}function RN(e,r,t){var n=(0,dt.h3ToGeo)(e),a=(0,Is.default)(n,2),i=a[0],s=a[1],o=r.length;SM(r,s);for(var u=r[0]===r[o-1]?o-1:o,f=0;f<u;f++)r[f][0]=mn(s,r[f][0],t),r[f][1]=mn(i,r[f][1],t)}function LN(e,r,t){var n=e(r,t),a=(0,dt.h3ToGeo)(n),i=(0,Is.default)(a,2),s=i[0],o=i[1];return[o,s]}function bM(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=(0,dt.h3ToGeoBoundary)(e,!0);return r!==1?RN(e,t,r):SM(t),t}function FN(e){var r=new Float64Array(e.length*2),t=0,n=ip(e),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;r[t++]=i[0],r[t++]=i[1]}}catch(s){n.e(s)}finally{n.f()}return r}function kN(e,r){var t;return e==null?t=r:(0,EM.default)(e)==="object"?t=Yu(Yu({},e),{},{coverage:r}):t={getHexagon:e,coverage:r},t}var DN=Yu(Yu({},Rs.PolygonLayer.defaultProps),{},{highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:function(r){return r.hexagon}},extruded:!0}),fa=function(e){(0,TM.default)(t,e);var r=ON(t);function t(){var n;(0,_M.default)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r.call.apply(r,[this].concat(i)),(0,ci.default)((0,xM.default)(n),"state",void 0),n}return(0,AM.default)(t,[{key:"initializeState",value:function(){t._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}},{key:"shouldUpdateState",value:function(a){var i=a.changeFlags;return this._shouldUseHighPrecision()?i.propsOrDataChanged:i.somethingChanged}},{key:"updateState",value:function(a){var i=a.props,s=a.changeFlags;if(i.highPrecision!==!0&&(s.dataChanged||s.updateTriggersChanged&&s.updateTriggersChanged.getHexagon)){var o=this._calculateH3DataProps();this.setState(o)}this._updateVertices(this.context.viewport)}},{key:"_calculateH3DataProps",value:function(){var a=-1,i=!1,s=!1,o=(0,Qu.createIterable)(this.props.data),u=o.iterable,f=o.objectInfo,l=ip(u),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;f.index++;var d=this.props.getHexagon(h,f),p=(0,dt.h3GetResolution)(d);if(a<0){if(a=p,!this.props.highPrecision)break}else if(a!==p){s=!0;break}if((0,dt.h3IsPentagon)(d)){i=!0;break}}}catch(v){l.e(v)}finally{l.f()}return{resolution:a,edgeLengthKM:a>=0?(0,dt.edgeLength)(a,"km"):0,hasMultipleRes:s,hasPentagon:i}}},{key:"_shouldUseHighPrecision",value:function(){if(this.props.highPrecision==="auto"){var a=this.state,i=a.resolution,s=a.hasPentagon,o=a.hasMultipleRes,u=this.context.viewport;return Boolean(u?.resolution)||o||s||i>=0&&i<=5}return this.props.highPrecision}},{key:"_updateVertices",value:function(a){if(!this._shouldUseHighPrecision()){var i=this.state,s=i.resolution,o=i.edgeLengthKM,u=i.centerHex;if(!(s<0)){var f=this.props.centerHexagon||(0,dt.geoToH3)(a.latitude,a.longitude,s);if(u!==f){if(u){var l=(0,dt.h3Distance)(u,f);if(l>=0&&l*o<IN)return}var c=a.distanceScales.unitsPerMeter,h=bM(f),d=(0,dt.h3ToGeo)(f),p=(0,Is.default)(d,2),v=p[0],g=p[1],y=a.projectFlat([g,v]),_=(0,Is.default)(y,2),T=_[0],x=_[1];h=h.map(function(E){var C=a.projectFlat(E);return[(C[0]-T)/c[0],(C[1]-x)/c[1]]}),this.setState({centerHex:f,vertices:h})}}}}},{key:"renderLayers",value:function(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}},{key:"_getForwardProps",value:function(){var a=this.props,i=a.elevationScale,s=a.material,o=a.coverage,u=a.extruded,f=a.wireframe,l=a.stroked,c=a.filled,h=a.lineWidthUnits,d=a.lineWidthScale,p=a.lineWidthMinPixels,v=a.lineWidthMaxPixels,g=a.getFillColor,y=a.getElevation,_=a.getLineColor,T=a.getLineWidth,x=a.transitions,E=a.updateTriggers;return{elevationScale:i,extruded:u,coverage:o,wireframe:f,stroked:l,filled:c,lineWidthUnits:h,lineWidthScale:d,lineWidthMinPixels:p,lineWidthMaxPixels:v,material:s,getElevation:y,getFillColor:g,getLineColor:_,getLineWidth:T,transitions:x,updateTriggers:{getFillColor:E.getFillColor,getElevation:E.getElevation,getLineColor:E.getLineColor,getLineWidth:E.getLineWidth}}}},{key:"_renderPolygonLayer",value:function(){var a=this.props,i=a.data,s=a.getHexagon,o=a.updateTriggers,u=a.coverage,f=this.getSubLayerClass("hexagon-cell-hifi",Rs.PolygonLayer),l=this._getForwardProps();return l.updateTriggers.getPolygon=kN(o.getHexagon,u),new f(l,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:l.updateTriggers}),{data:i,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:function(h,d){var p=s(h,d);return FN(bM(p,u))}})}},{key:"_renderColumnLayer",value:function(){var a=this.props,i=a.data,s=a.getHexagon,o=a.updateTriggers,u=this.getSubLayerClass("hexagon-cell",Rs.ColumnLayer),f=this._getForwardProps();return f.updateTriggers.getPosition=o.getHexagon,new u(f,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:f.updateTriggers}),{data:i,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:LN.bind(null,s)})}}]),t}(Qu.CompositeLayer);(0,ci.default)(fa,"defaultProps",DN);(0,ci.default)(fa,"layerName","H3HexagonLayer");(0,ci.default)(fa,"_checkH3Lib",function(){});function wM(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=NN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function NN(e,r){if(e){if(typeof e=="string")return CM(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CM(e,r)}}function CM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function GN(e){var r=UN();return function(){var n=(0,sp.default)(e),a;if(r){var i=(0,sp.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,IM.default)(this,a)}}function UN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jN={getHexagons:{type:"accessor",value:function(r){return r.hexagons}}},$u=function(e){(0,PM.default)(t,e);var r=GN(t);function t(){return(0,OM.default)(this,t),r.apply(this,arguments)}return(0,BM.default)(t,[{key:"initializeState",value:function(){fa._checkH3Lib()}},{key:"updateState",value:function(a){var i=a.props,s=a.changeFlags;if(s.dataChanged||s.updateTriggersChanged&&s.updateTriggersChanged.getHexagons){var o=i.data,u=i.getHexagons,f=[],l=(0,LM.createIterable)(o),c=l.iterable,h=l.objectInfo,d=wM(c),p;try{for(d.s();!(p=d.n()).done;){var v=p.value;h.index++;var g=u(v,h),y=(0,RM.h3SetToMultiPolygon)(g,!0),_=wM(y),T;try{for(_.s();!(T=_.n()).done;){var x=T.value;f.push(this.getSubLayerRow({polygon:x},v,h.index))}}catch(E){_.e(E)}finally{_.f()}}}catch(E){d.e(E)}finally{d.f()}this.setState({polygons:f})}}},{key:"indexToBounds",value:function(){return{data:this.state.polygons,getPolygon:function(i){return i.polygon}}}}]),t}(Jt);(0,op.default)($u,"layerName","H3ClusterLayer");(0,op.default)($u,"defaultProps",jN);var OB=m(Y()),BB=m(z()),PB=m(q()),IB=m(vt()),RB=m(Ce()),LB=m(Oe()),a0=m(Me()),po=m(J()),i0=m(K()),FB=m(up()),Fn=m(er()),kB=m(Zt()),DB=m(Zu());var LE=m(z()),FE=m(q()),yi=m(fi()),kE=m(Ce()),DE=m(Oe()),Cn=m(Me()),Af=m(J());var af=m(De()),Ls=m(wt()),QM=m(J()),$M=m(z()),ZM=m(q());var DM=m(De());var ef=m(De());function fp(e){if(typeof window<"u"&&(0,ef.default)(window.process)==="object"&&window.process.type==="renderer"||typeof process<"u"&&(0,ef.default)(process.versions)==="object"&&Boolean(process.versions.electron))return!0;var r=(typeof navigator>"u"?"undefined":(0,ef.default)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,t=e||r;return!!(t&&t.indexOf("Electron")>=0)}function Tt(){var e=(typeof process>"u"?"undefined":(0,DM.default)(process))==="object"&&String(process)==="[object process]"&&!process.browser;return!e||fp()}var NM=m(De()),xn={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:(typeof process>"u"?"undefined":(0,NM.default)(process))==="object"&&process};var HN=xn.self||xn.window||xn.global,hi=xn.window||xn.self||xn.global,VN=xn.document||{},la=xn.process||{};var tf="8.9.0",Sse=Tt();var GM=m(z()),UM=m(q());function zN(e){try{var r=window[e],t="__storage_test__";return r.setItem(t,t),r.removeItem(t),r}catch{return null}}var jM=function(){function e(r){(0,GM.default)(this,e);var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";b(this,"storage",void 0),b(this,"id",void 0),b(this,"config",{}),this.storage=zN(n),this.id=r,this.config={},Object.assign(this.config,t),this._loadConfiguration()}return(0,UM.default)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}]),e}();function HM(e){var r;return e<10?r="".concat(e.toFixed(2),"ms"):e<100?r="".concat(e.toFixed(1),"ms"):e<1e3?r="".concat(e.toFixed(0),"ms"):r="".concat((e/1e3).toFixed(2),"s"),r}function VM(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,t=Math.max(r-e.length,0);return"".concat(" ".repeat(t)).concat(e)}function rf(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,a=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(t=Math.min(t,n/e.width));var i=e.width*t,s=e.height*t,o=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(a,");"),"background-size:".concat(i,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(r," %c+"),o]}var nf;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(nf||(nf={}));function zM(e){return typeof e=="string"?nf[e.toUpperCase()]||nf.WHITE:e}function WM(e,r,t){return!Tt&&typeof e=="string"&&(r&&(r=zM(r),e="\x1B[".concat(r,"m").concat(e,"\x1B[39m")),t&&(r=zM(t),e="\x1B[".concat(t+10,"m").concat(e,"\x1B[49m"))),e}function WN(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=qN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function qN(e,r){if(e){if(typeof e=="string")return qM(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qM(e,r)}}function qM(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function JM(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],t=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(t),a=WN(n),i;try{var s=function(){var u=i.value;typeof e[u]=="function"&&(r.find(function(f){return u===f})||(e[u]=e[u].bind(e)))};for(a.s();!(i=a.n()).done;)s()}catch(o){a.e(o)}finally{a.f()}}function di(e,r){if(!e)throw new Error(r||"Assertion failed")}function ca(){var e;if(Tt&&"performance"in hi){var r,t;e=hi===null||hi===void 0||(r=hi.performance)===null||r===void 0||(t=r.now)===null||t===void 0?void 0:t.call(r)}else if("hrtime"in la){var n,a=la===null||la===void 0||(n=la.hrtime)===null||n===void 0?void 0:n.call(la);e=a[0]*1e3+a[1]/1e6}else e=Date.now();return e}var pi={debug:Tt&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},JN={enabled:!0,level:0};function Xt(){}var XM={},KM={once:!0},Mr=function(){function e(){(0,$M.default)(this,e);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""},t=r.id;b(this,"id",void 0),b(this,"VERSION",tf),b(this,"_startTs",ca()),b(this,"_deltaTs",ca()),b(this,"_storage",void 0),b(this,"userData",{}),b(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new jM("__probe-".concat(this.id,"__"),JN),this.userData={},this.timeStamp("".concat(this.id," started")),JM(this),Object.seal(this)}return(0,ZM.default)(e,[{key:"level",get:function(){return this.getLevel()},set:function(t){this.setLevel(t)}},{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((ca()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((ca()-this._deltaTs).toPrecision(10))}},{key:"priority",get:function(){return this.level},set:function(t){this.level=t}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({level:t}),this}},{key:"get",value:function(t){return this._storage.config[t]}},{key:"set",value:function(t,n){this._storage.updateConfiguration((0,QM.default)({},t,n))}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"assert",value:function(t,n){di(t,n)}},{key:"warn",value:function(t){return this._getLogFunction(0,t,pi.warn,arguments,KM)}},{key:"error",value:function(t){return this._getLogFunction(0,t,pi.error,arguments)}},{key:"deprecated",value:function(t,n){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}},{key:"removed",value:function(t,n){return this.error("`".concat(t,"` has been removed. Use `").concat(n,"` instead"))}},{key:"probe",value:function(t,n){return this._getLogFunction(t,n,pi.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(t,n){return this._getLogFunction(t,n,pi.debug,arguments)}},{key:"info",value:function(t,n){return this._getLogFunction(t,n,console.info,arguments)}},{key:"once",value:function(t,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s];return this._getLogFunction(t,n,pi.debug||pi.info,arguments,KM)}},{key:"table",value:function(t,n,a){return n?this._getLogFunction(t,n,console.table||Xt,a&&[a],{tag:QN(n)}):Xt}},{key:"image",value:function(t){var n=t.logLevel,a=t.priority,i=t.image,s=t.message,o=s===void 0?"":s,u=t.scale,f=u===void 0?1:u;return this._shouldLog(n||a)?Tt?YN({image:i,message:o,scale:f}):KN({image:i,message:o,scale:f}):Xt}},{key:"time",value:function(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}},{key:"timeEnd",value:function(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(t,n){return this._getLogFunction(t,n,console.timeStamp||Xt)}},{key:"group",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=YM({logLevel:t,message:n,opts:a}),s=a.collapsed;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}},{key:"groupCollapsed",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,n,Object.assign({},a,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction(t,"",console.groupEnd||Xt)}},{key:"withGroup",value:function(t,n,a){this.group(t,n)();try{a()}finally{this.groupEnd(t)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return this.isEnabled()&&this.getLevel()>=e2(t)}},{key:"_getLogFunction",value:function(t,n,a,i,s){if(this._shouldLog(t)){var o;s=YM({logLevel:t,message:n,args:i,opts:s}),a=a||s.method,di(a),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=ca();var u=s.tag||s.message;if(s.once)if(!XM[u])XM[u]=ca();else return Xt;return n=XN(this.id,s.message,s),(o=a).bind.apply(o,[console,n].concat((0,Ls.default)(s.args)))}return Xt}}]),e}();b(Mr,"VERSION",tf);function e2(e){if(!e)return 0;var r;switch((0,af.default)(e)){case"number":r=e;break;case"object":r=e.logLevel||e.priority||0;break;default:return 0}return di(Number.isFinite(r)&&r>=0),r}function YM(e){var r=e.logLevel,t=e.message;e.logLevel=e2(r);for(var n=e.args?Array.from(e.args):[];n.length&&n.shift()!==t;);switch((0,af.default)(r)){case"string":case"function":t!==void 0&&n.unshift(t),e.message=r;break;case"object":Object.assign(e,r);break;default:}typeof e.message=="function"&&(e.message=e.message());var a=(0,af.default)(e.message);return di(a==="string"||a==="object"),Object.assign(e,{args:n},e.opts)}function XN(e,r,t){if(typeof r=="string"){var n=t.time?VM(HM(t.total)):"";r=t.time?"".concat(e,": ").concat(n,"  ").concat(r):"".concat(e,": ").concat(r),r=WM(r,t.color,t.background)}return r}function KN(e){var r=e.image,t=e.message,n=t===void 0?"":t,a=e.scale,i=a===void 0?1:a,s=null;try{s=module.require("asciify-image")}catch{}return s?function(){return s(r,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(o){return console.log(o)})}:Xt}function YN(e){var r=e.image,t=e.message,n=t===void 0?"":t,a=e.scale,i=a===void 0?1:a;if(typeof r=="string"){var s=new Image;return s.onload=function(){var l,c=rf(s,n,i);(l=console).log.apply(l,(0,Ls.default)(c))},s.src=r,Xt}var o=r.nodeName||"";if(o.toLowerCase()==="img"){var u;return(u=console).log.apply(u,(0,Ls.default)(rf(r,n,i))),Xt}if(o.toLowerCase()==="canvas"){var f=new Image;return f.onload=function(){var l;return(l=console).log.apply(l,(0,Ls.default)(rf(f,n,i)))},f.src=r.toDataURL(),Xt}return Xt}function QN(e){for(var r in e)for(var t in e[r])return t||"untitled";return"empty"}var eoe=new Mr({id:"@probe.gl/log"});var le=new Mr({id:"luma.gl"});function Xe(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}var $N="Invalid WebGLRenderingContext";var ZN="Requires WebGL2";function sf(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function ge(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function lp(e){return ge(e)?e:null}function Fs(e){return Xe(sf(e),$N),e}function ut(e){return Xe(ge(e),ZN),e}var ks={};function eG(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function tG(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function rG(e,r){ks[e]=!0,r!==void 0&&eG(r)}function nG(e){var r=e.getError;e.getError=function(){var n;do n=r.apply(e),n!==0&&(ks[n]=!0);while(n!==0);for(n in ks)if(ks[n])return delete ks[n],parseInt(n,10);return 0}}var Ds=function e(r){var t=r.gl;this.ext=r,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(r.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var a=new e.VertexAttrib(t);this.attribs[n]=a}this.maxAttrib=0};Ds.VertexAttrib=function(r){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Ds.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var ha=function(r){var t=this;this.gl=r,nG(r);var n=this.original={getParameter:r.getParameter,enableVertexAttribArray:r.enableVertexAttribArray,disableVertexAttribArray:r.disableVertexAttribArray,bindBuffer:r.bindBuffer,getVertexAttrib:r.getVertexAttrib,vertexAttribPointer:r.vertexAttribPointer};r.getParameter=function(i){return i===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:n.getParameter.apply(this,arguments)},r.enableVertexAttribArray=function(i){var s=t.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,i);var o=s.attribs[i];return o.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},r.disableVertexAttribArray=function(i){var s=t.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,i);var o=s.attribs[i];return o.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},r.bindBuffer=function(i,s){switch(i){case 34962:t.currentArrayBuffer=s;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=s;break;default:}return n.bindBuffer.apply(this,arguments)},r.getVertexAttrib=function(i,s){var o=t.currentVertexArrayObject,u=o.attribs[i];switch(s){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},r.vertexAttribPointer=function(i,s,o,u,f,l){var c=t.currentVertexArrayObject;c.maxAttrib=Math.max(c.maxAttrib,i);var h=c.attribs[i];return h.buffer=t.currentArrayBuffer,h.size=s,h.type=o,h.normalized=u,h.stride=f,h.offset=l,h.recache(),n.vertexAttribPointer.apply(this,arguments)},r.instrumentExtension&&r.instrumentExtension(this,"OES_vertex_array_object"),r.canvas&&r.canvas.addEventListener("webglcontextrestored",function(){tG("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};ha.prototype.VERTEX_ARRAY_BINDING_OES=34229;ha.prototype.reset_=function(){var r=this.vertexArrayObjects!==void 0;if(r)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Ds(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};ha.prototype.createVertexArrayOES=function(){var r=new Ds(this);return this.vertexArrayObjects.push(r),r};ha.prototype.deleteVertexArrayOES=function(r){r.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(r),1),this.currentVertexArrayObject===r&&this.bindVertexArrayOES(null)};ha.prototype.isVertexArrayOES=function(r){return!!(r&&r instanceof Ds&&r.hasBeenBound&&r.ext===this)};ha.prototype.bindVertexArrayOES=function(r){var t=this.gl;if(r&&!r.isAlive){rG(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}var n=this.original,a=this.currentVertexArrayObject;this.currentVertexArrayObject=r||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(a!==i){(!a||i.elementArrayBuffer!==a.elementArrayBuffer)&&n.bindBuffer.call(t,34963,i.elementArrayBuffer);for(var s=this.currentArrayBuffer,o=Math.max(a?a.maxAttrib:0,i.maxAttrib),u=0;u<=o;u++){var f=i.attribs[u],l=a?a.attribs[u]:null;if((!a||f.enabled!==l.enabled)&&(f.enabled?n.enableVertexAttribArray.call(t,u):n.disableVertexAttribArray.call(t,u)),f.enabled){var c=!1;(!a||f.buffer!==l.buffer)&&(s!==f.buffer&&(n.bindBuffer.call(t,34962,f.buffer),s=f.buffer),c=!0),(c||f.cached!==l.cached)&&n.vertexAttribPointer.call(t,u,f.size,f.type,f.normalized,f.stride,f.offset)}}this.currentArrayBuffer!==s&&n.bindBuffer.call(t,34962,this.currentArrayBuffer)}};function t2(e){if(typeof e.createVertexArray!="function"){var r=e.getSupportedExtensions;e.getSupportedExtensions=function(){var a=r.call(this)||[];return a.indexOf("OES_vertex_array_object")<0&&a.push("OES_vertex_array_object"),a};var t=e.getExtension;e.getExtension=function(a){var i=t.call(this,a);return i||(a!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new ha(this)),this.__OESVertexArrayObject))}}}var Ns=m(J());var ue=m(J());var se,r2="OES_element_index",n2="WEBGL_draw_buffers",aG="EXT_disjoint_timer_query",iG="EXT_disjoint_timer_query_webgl2",sG="EXT_texture_filter_anisotropic",a2="WEBGL_debug_renderer_info",oG=35723,uG=4352,fG=36795,lG=34047,cG=37445,hG=37446,Pe=function(r){return ge(r)?void 0:0},dG=(se={},(0,ue.default)(se,3074,function(r){return ge(r)?void 0:36064}),(0,ue.default)(se,oG,function(e){return ge(e)?void 0:uG}),(0,ue.default)(se,35977,Pe),(0,ue.default)(se,32937,Pe),(0,ue.default)(se,fG,function(e,r){var t=ge(e)?e.getExtension(iG):e.getExtension(aG);return t&&t.GPU_DISJOINT_EXT?r(t.GPU_DISJOINT_EXT):0}),(0,ue.default)(se,cG,function(e,r){var t=e.getExtension(a2);return r(t&&t.UNMASKED_VENDOR_WEBGL||7936)}),(0,ue.default)(se,hG,function(e,r){var t=e.getExtension(a2);return r(t&&t.UNMASKED_RENDERER_WEBGL||7937)}),(0,ue.default)(se,lG,function(e,r){var t=e.luma.extensions[sG];return t?r(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),(0,ue.default)(se,32883,Pe),(0,ue.default)(se,35071,Pe),(0,ue.default)(se,37447,Pe),(0,ue.default)(se,36063,function(r,t){if(!ge(r)){var n=r.getExtension(n2);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),(0,ue.default)(se,35379,Pe),(0,ue.default)(se,35374,Pe),(0,ue.default)(se,35377,Pe),(0,ue.default)(se,34852,function(r){if(!ge(r)){var t=r.getExtension(n2);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),(0,ue.default)(se,36203,function(r){return r.getExtension(r2)?2147483647:65535}),(0,ue.default)(se,33001,function(r){return r.getExtension(r2)?16777216:65535}),(0,ue.default)(se,33e3,function(r){return 16777216}),(0,ue.default)(se,37157,Pe),(0,ue.default)(se,35373,Pe),(0,ue.default)(se,35657,Pe),(0,ue.default)(se,36183,Pe),(0,ue.default)(se,37137,Pe),(0,ue.default)(se,34045,Pe),(0,ue.default)(se,35978,Pe),(0,ue.default)(se,35979,Pe),(0,ue.default)(se,35968,Pe),(0,ue.default)(se,35376,Pe),(0,ue.default)(se,35375,Pe),(0,ue.default)(se,35659,Pe),(0,ue.default)(se,37154,Pe),(0,ue.default)(se,35371,Pe),(0,ue.default)(se,35658,Pe),(0,ue.default)(se,35076,Pe),(0,ue.default)(se,35077,Pe),(0,ue.default)(se,35380,Pe),se);function i2(e,r,t){var n=dG[t],a=typeof n=="function"?n(e,r,t):n,i=a!==void 0?a:r(t);return i}var mi,pG="OES_vertex_array_object",s2="ANGLE_instanced_arrays",mG="WEBGL_draw_buffers",vG="EXT_disjoint_timer_query",gG="EXT_texture_filter_anisotropic",yG="VertexArray requires WebGL2 or OES_vertex_array_object extension";function bG(e,r){return{webgl2:ge(e),ext:e.getExtension(r)}}var cp=(mi={},(0,Ns.default)(mi,pG,{meta:{suffix:"OES"},createVertexArray:function(){Xe(!1,yG)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,Ns.default)(mi,s2,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(r,t){Xe(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,Ns.default)(mi,mG,{meta:{suffix:"WEBGL"},drawBuffers:function(){Xe(!1)}}),(0,Ns.default)(mi,vG,{meta:{suffix:"EXT"},createQuery:function(){Xe(!1)},deleteQuery:function(){Xe(!1)},beginQuery:function(){Xe(!1)},endQuery:function(){},getQuery:function(r,t){return this.getQueryObject(r,t)},getQueryParameter:function(r,t){return this.getQueryObject(r,t)},getQueryObject:function(){}}),mi),of={readBuffer:function(r,t,n){ge(r)&&t(n)},getVertexAttrib:function(r,t,n,a){var i=bG(r,s2),s=i.webgl2,o=i.ext,u;switch(a){case 35069:u=s?void 0:!1;break;case 35070:u=!s&&!o?0:void 0;break;default:}return u!==void 0?u:t(n,a)},getProgramParameter:function(r,t,n,a){if(!ge(r))switch(a){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return t(n,a)},getInternalformatParameter:function(r,t,n,a,i){if(!ge(r))switch(i){case 32937:return new Int32Array([0]);default:}return r.getInternalformatParameter(n,a,i)},getTexParameter:function(r,t,n,a){switch(a){case 34046:var i=r.luma.extensions,s=i[gG];a=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return t(n,a)},getParameter:i2,hint:function(r,t,n,a){return t(n,a)}};function u2(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_G(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function _G(e,r){if(e){if(typeof e=="string")return o2(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o2(e,r)}}function o2(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function f2(e){e.luma=e.luma||{};var r=e.luma;return r.polyfilled||(t2(e),AG(e),TG(e,cp),xG(e,{target:r,target2:e}),r.polyfilled=!0),e}globalThis.polyfillContext=f2;function AG(e){e.luma.extensions={};var r=e.getSupportedExtensions()||[],t=u2(r),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;e.luma[a]=e.getExtension(a)}}catch(i){t.e(i)}finally{t.f()}}function xG(e,r){var t=r.target,n=r.target2;Object.keys(of).forEach(function(a){if(typeof of[a]=="function"){var i=e[a]?e[a].bind(e):function(){},s=of[a].bind(null,e,i);t[a]=s,n[a]=s}})}function TG(e,r){var t=u2(Object.getOwnPropertyNames(r)),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a!=="overrides"&&MG(e,{extension:a,target:e.luma,target2:e})}}catch(i){t.e(i)}finally{t.f()}}function MG(e,r){var t=r.extension,n=r.target,a=r.target2,i=cp[t];Xe(i);for(var s=i.meta,o=s===void 0?{}:s,u=o.suffix,f=u===void 0?"":u,l=e.getExtension(t),c=function(){var v=d[h],g="".concat(v).concat(f),y=null;v==="meta"||typeof e[v]=="function"||(l&&typeof l[g]=="function"?y=function(){return l[g].apply(l,arguments)}:typeof i[v]=="function"&&(y=i[v].bind(n))),y&&(n[v]=y,a[v]=y)},h=0,d=Object.keys(i);h<d.length;h++)c()}var uf=m(ve()),Ue=m(wt()),M=m(J());var X,U,Kt,ff=(X={},(0,M.default)(X,3042,!1),(0,M.default)(X,32773,new Float32Array([0,0,0,0])),(0,M.default)(X,32777,32774),(0,M.default)(X,34877,32774),(0,M.default)(X,32969,1),(0,M.default)(X,32968,0),(0,M.default)(X,32971,1),(0,M.default)(X,32970,0),(0,M.default)(X,3106,new Float32Array([0,0,0,0])),(0,M.default)(X,3107,[!0,!0,!0,!0]),(0,M.default)(X,2884,!1),(0,M.default)(X,2885,1029),(0,M.default)(X,2929,!1),(0,M.default)(X,2931,1),(0,M.default)(X,2932,513),(0,M.default)(X,2928,new Float32Array([0,1])),(0,M.default)(X,2930,!0),(0,M.default)(X,3024,!0),(0,M.default)(X,36006,null),(0,M.default)(X,2886,2305),(0,M.default)(X,33170,4352),(0,M.default)(X,2849,1),(0,M.default)(X,32823,!1),(0,M.default)(X,32824,0),(0,M.default)(X,10752,0),(0,M.default)(X,32938,1),(0,M.default)(X,32939,!1),(0,M.default)(X,3089,!1),(0,M.default)(X,3088,new Int32Array([0,0,1024,1024])),(0,M.default)(X,2960,!1),(0,M.default)(X,2961,0),(0,M.default)(X,2968,4294967295),(0,M.default)(X,36005,4294967295),(0,M.default)(X,2962,519),(0,M.default)(X,2967,0),(0,M.default)(X,2963,4294967295),(0,M.default)(X,34816,519),(0,M.default)(X,36003,0),(0,M.default)(X,36004,4294967295),(0,M.default)(X,2964,7680),(0,M.default)(X,2965,7680),(0,M.default)(X,2966,7680),(0,M.default)(X,34817,7680),(0,M.default)(X,34818,7680),(0,M.default)(X,34819,7680),(0,M.default)(X,2978,[0,0,1024,1024]),(0,M.default)(X,3333,4),(0,M.default)(X,3317,4),(0,M.default)(X,37440,!1),(0,M.default)(X,37441,!1),(0,M.default)(X,37443,37444),(0,M.default)(X,35723,4352),(0,M.default)(X,36010,null),(0,M.default)(X,35977,!1),(0,M.default)(X,3330,0),(0,M.default)(X,3332,0),(0,M.default)(X,3331,0),(0,M.default)(X,3314,0),(0,M.default)(X,32878,0),(0,M.default)(X,3316,0),(0,M.default)(X,3315,0),(0,M.default)(X,32877,0),X),Tn=function(r,t,n){return t?r.enable(n):r.disable(n)},l2=function(r,t,n){return r.hint(n,t)},jt=function(r,t,n){return r.pixelStorei(n,t)},EG=function(r,t){var n=ge(r)?36009:36160;return r.bindFramebuffer(n,t)},SG=function(r,t){return r.bindFramebuffer(36008,t)};function Gs(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var c2=(U={},(0,M.default)(U,3042,Tn),(0,M.default)(U,32773,function(r,t){return r.blendColor.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,32777,"blendEquation"),(0,M.default)(U,34877,"blendEquation"),(0,M.default)(U,32969,"blendFunc"),(0,M.default)(U,32968,"blendFunc"),(0,M.default)(U,32971,"blendFunc"),(0,M.default)(U,32970,"blendFunc"),(0,M.default)(U,3106,function(r,t){return r.clearColor.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,3107,function(r,t){return r.colorMask.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,2884,Tn),(0,M.default)(U,2885,function(r,t){return r.cullFace(t)}),(0,M.default)(U,2929,Tn),(0,M.default)(U,2931,function(r,t){return r.clearDepth(t)}),(0,M.default)(U,2932,function(r,t){return r.depthFunc(t)}),(0,M.default)(U,2928,function(r,t){return r.depthRange.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,2930,function(r,t){return r.depthMask(t)}),(0,M.default)(U,3024,Tn),(0,M.default)(U,35723,l2),(0,M.default)(U,36006,EG),(0,M.default)(U,2886,function(r,t){return r.frontFace(t)}),(0,M.default)(U,33170,l2),(0,M.default)(U,2849,function(r,t){return r.lineWidth(t)}),(0,M.default)(U,32823,Tn),(0,M.default)(U,32824,"polygonOffset"),(0,M.default)(U,10752,"polygonOffset"),(0,M.default)(U,35977,Tn),(0,M.default)(U,32938,"sampleCoverage"),(0,M.default)(U,32939,"sampleCoverage"),(0,M.default)(U,3089,Tn),(0,M.default)(U,3088,function(r,t){return r.scissor.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,2960,Tn),(0,M.default)(U,2961,function(r,t){return r.clearStencil(t)}),(0,M.default)(U,2968,function(r,t){return r.stencilMaskSeparate(1028,t)}),(0,M.default)(U,36005,function(r,t){return r.stencilMaskSeparate(1029,t)}),(0,M.default)(U,2962,"stencilFuncFront"),(0,M.default)(U,2967,"stencilFuncFront"),(0,M.default)(U,2963,"stencilFuncFront"),(0,M.default)(U,34816,"stencilFuncBack"),(0,M.default)(U,36003,"stencilFuncBack"),(0,M.default)(U,36004,"stencilFuncBack"),(0,M.default)(U,2964,"stencilOpFront"),(0,M.default)(U,2965,"stencilOpFront"),(0,M.default)(U,2966,"stencilOpFront"),(0,M.default)(U,34817,"stencilOpBack"),(0,M.default)(U,34818,"stencilOpBack"),(0,M.default)(U,34819,"stencilOpBack"),(0,M.default)(U,2978,function(r,t){return r.viewport.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,3333,jt),(0,M.default)(U,3317,jt),(0,M.default)(U,37440,jt),(0,M.default)(U,37441,jt),(0,M.default)(U,37443,jt),(0,M.default)(U,3330,jt),(0,M.default)(U,3332,jt),(0,M.default)(U,3331,jt),(0,M.default)(U,36010,SG),(0,M.default)(U,3314,jt),(0,M.default)(U,32878,jt),(0,M.default)(U,3316,jt),(0,M.default)(U,3315,jt),(0,M.default)(U,32877,jt),(0,M.default)(U,"framebuffer",function(r,t){var n=t&&"handle"in t?t.handle:t;return r.bindFramebuffer(36160,n)}),(0,M.default)(U,"blend",function(r,t){return t?r.enable(3042):r.disable(3042)}),(0,M.default)(U,"blendColor",function(r,t){return r.blendColor.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"blendEquation",function(r,t){t=Gs(t)?t:[t,t],r.blendEquationSeparate.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"blendFunc",function(r,t){t=Gs(t)&&t.length===2?[].concat((0,Ue.default)(t),(0,Ue.default)(t)):t,r.blendFuncSeparate.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"clearColor",function(r,t){return r.clearColor.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"clearDepth",function(r,t){return r.clearDepth(t)}),(0,M.default)(U,"clearStencil",function(r,t){return r.clearStencil(t)}),(0,M.default)(U,"colorMask",function(r,t){return r.colorMask.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"cull",function(r,t){return t?r.enable(2884):r.disable(2884)}),(0,M.default)(U,"cullFace",function(r,t){return r.cullFace(t)}),(0,M.default)(U,"depthTest",function(r,t){return t?r.enable(2929):r.disable(2929)}),(0,M.default)(U,"depthFunc",function(r,t){return r.depthFunc(t)}),(0,M.default)(U,"depthMask",function(r,t){return r.depthMask(t)}),(0,M.default)(U,"depthRange",function(r,t){return r.depthRange.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"dither",function(r,t){return t?r.enable(3024):r.disable(3024)}),(0,M.default)(U,"derivativeHint",function(r,t){r.hint(35723,t)}),(0,M.default)(U,"frontFace",function(r,t){return r.frontFace(t)}),(0,M.default)(U,"mipmapHint",function(r,t){return r.hint(33170,t)}),(0,M.default)(U,"lineWidth",function(r,t){return r.lineWidth(t)}),(0,M.default)(U,"polygonOffsetFill",function(r,t){return t?r.enable(32823):r.disable(32823)}),(0,M.default)(U,"polygonOffset",function(r,t){return r.polygonOffset.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"sampleCoverage",function(r,t){return r.sampleCoverage.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"scissorTest",function(r,t){return t?r.enable(3089):r.disable(3089)}),(0,M.default)(U,"scissor",function(r,t){return r.scissor.apply(r,(0,Ue.default)(t))}),(0,M.default)(U,"stencilTest",function(r,t){return t?r.enable(2960):r.disable(2960)}),(0,M.default)(U,"stencilMask",function(r,t){t=Gs(t)?t:[t,t];var n=t,a=(0,uf.default)(n,2),i=a[0],s=a[1];r.stencilMaskSeparate(1028,i),r.stencilMaskSeparate(1029,s)}),(0,M.default)(U,"stencilFunc",function(r,t){t=Gs(t)&&t.length===3?[].concat((0,Ue.default)(t),(0,Ue.default)(t)):t;var n=t,a=(0,uf.default)(n,6),i=a[0],s=a[1],o=a[2],u=a[3],f=a[4],l=a[5];r.stencilFuncSeparate(1028,i,s,o),r.stencilFuncSeparate(1029,u,f,l)}),(0,M.default)(U,"stencilOp",function(r,t){t=Gs(t)&&t.length===3?[].concat((0,Ue.default)(t),(0,Ue.default)(t)):t;var n=t,a=(0,uf.default)(n,6),i=a[0],s=a[1],o=a[2],u=a[3],f=a[4],l=a[5];r.stencilOpSeparate(1028,i,s,o),r.stencilOpSeparate(1029,u,f,l)}),(0,M.default)(U,"viewport",function(r,t){return r.viewport.apply(r,(0,Ue.default)(t))}),U);function Ve(e,r,t){return r[e]!==void 0?r[e]:t[e]}var h2={blendEquation:function(r,t,n){return r.blendEquationSeparate(Ve(32777,t,n),Ve(34877,t,n))},blendFunc:function(r,t,n){return r.blendFuncSeparate(Ve(32969,t,n),Ve(32968,t,n),Ve(32971,t,n),Ve(32970,t,n))},polygonOffset:function(r,t,n){return r.polygonOffset(Ve(32824,t,n),Ve(10752,t,n))},sampleCoverage:function(r,t,n){return r.sampleCoverage(Ve(32938,t,n),Ve(32939,t,n))},stencilFuncFront:function(r,t,n){return r.stencilFuncSeparate(1028,Ve(2962,t,n),Ve(2967,t,n),Ve(2963,t,n))},stencilFuncBack:function(r,t,n){return r.stencilFuncSeparate(1029,Ve(34816,t,n),Ve(36003,t,n),Ve(36004,t,n))},stencilOpFront:function(r,t,n){return r.stencilOpSeparate(1028,Ve(2964,t,n),Ve(2965,t,n),Ve(2966,t,n))},stencilOpBack:function(r,t,n){return r.stencilOpSeparate(1029,Ve(34817,t,n),Ve(34818,t,n),Ve(34819,t,n))}},hp={enable:function(r,t){return r((0,M.default)({},t,!0))},disable:function(r,t){return r((0,M.default)({},t,!1))},pixelStorei:function(r,t,n){return r((0,M.default)({},t,n))},hint:function(r,t,n){return r((0,M.default)({},t,n))},bindFramebuffer:function(r,t,n){var a;switch(t){case 36160:return r((a={},(0,M.default)(a,36006,n),(0,M.default)(a,36010,n),a));case 36009:return r((0,M.default)({},36006,n));case 36008:return r((0,M.default)({},36010,n));default:return null}},blendColor:function(r,t,n,a,i){return r((0,M.default)({},32773,new Float32Array([t,n,a,i])))},blendEquation:function(r,t){var n;return r((n={},(0,M.default)(n,32777,t),(0,M.default)(n,34877,t),n))},blendEquationSeparate:function(r,t,n){var a;return r((a={},(0,M.default)(a,32777,t),(0,M.default)(a,34877,n),a))},blendFunc:function(r,t,n){var a;return r((a={},(0,M.default)(a,32969,t),(0,M.default)(a,32968,n),(0,M.default)(a,32971,t),(0,M.default)(a,32970,n),a))},blendFuncSeparate:function(r,t,n,a,i){var s;return r((s={},(0,M.default)(s,32969,t),(0,M.default)(s,32968,n),(0,M.default)(s,32971,a),(0,M.default)(s,32970,i),s))},clearColor:function(r,t,n,a,i){return r((0,M.default)({},3106,new Float32Array([t,n,a,i])))},clearDepth:function(r,t){return r((0,M.default)({},2931,t))},clearStencil:function(r,t){return r((0,M.default)({},2961,t))},colorMask:function(r,t,n,a,i){return r((0,M.default)({},3107,[t,n,a,i]))},cullFace:function(r,t){return r((0,M.default)({},2885,t))},depthFunc:function(r,t){return r((0,M.default)({},2932,t))},depthRange:function(r,t,n){return r((0,M.default)({},2928,new Float32Array([t,n])))},depthMask:function(r,t){return r((0,M.default)({},2930,t))},frontFace:function(r,t){return r((0,M.default)({},2886,t))},lineWidth:function(r,t){return r((0,M.default)({},2849,t))},polygonOffset:function(r,t,n){var a;return r((a={},(0,M.default)(a,32824,t),(0,M.default)(a,10752,n),a))},sampleCoverage:function(r,t,n){var a;return r((a={},(0,M.default)(a,32938,t),(0,M.default)(a,32939,n),a))},scissor:function(r,t,n,a,i){return r((0,M.default)({},3088,new Int32Array([t,n,a,i])))},stencilMask:function(r,t){var n;return r((n={},(0,M.default)(n,2968,t),(0,M.default)(n,36005,t),n))},stencilMaskSeparate:function(r,t,n){return r((0,M.default)({},t===1028?2968:36005,n))},stencilFunc:function(r,t,n,a){var i;return r((i={},(0,M.default)(i,2962,t),(0,M.default)(i,2967,n),(0,M.default)(i,2963,a),(0,M.default)(i,34816,t),(0,M.default)(i,36003,n),(0,M.default)(i,36004,a),i))},stencilFuncSeparate:function(r,t,n,a,i){var s;return r((s={},(0,M.default)(s,t===1028?2962:34816,n),(0,M.default)(s,t===1028?2967:36003,a),(0,M.default)(s,t===1028?2963:36004,i),s))},stencilOp:function(r,t,n,a){var i;return r((i={},(0,M.default)(i,2964,t),(0,M.default)(i,2965,n),(0,M.default)(i,2966,a),(0,M.default)(i,34817,t),(0,M.default)(i,34818,n),(0,M.default)(i,34819,a),i))},stencilOpSeparate:function(r,t,n,a,i){var s;return r((s={},(0,M.default)(s,t===1028?2964:34817,n),(0,M.default)(s,t===1028?2965:34818,a),(0,M.default)(s,t===1028?2966:34819,i),s))},viewport:function(r,t,n,a,i){return r((0,M.default)({},2978,[t,n,a,i]))}},Er=function(r,t){return r.isEnabled(t)},dp=(Kt={},(0,M.default)(Kt,3042,Er),(0,M.default)(Kt,2884,Er),(0,M.default)(Kt,2929,Er),(0,M.default)(Kt,3024,Er),(0,M.default)(Kt,32823,Er),(0,M.default)(Kt,32926,Er),(0,M.default)(Kt,32928,Er),(0,M.default)(Kt,3089,Er),(0,M.default)(Kt,2960,Er),(0,M.default)(Kt,35977,Er),Kt);var m2=m(z()),v2=m(q());function pp(e){for(var r in e)return!1;return!0}function d2(e,r){if(e===r)return!0;var t=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(r)||ArrayBuffer.isView(r);if(t&&n&&e.length===r.length){for(var a=0;a<e.length;++a)if(e[a]!==r[a])return!1;return!0}return!1}function p2(e,r){var t=e[r].bind(e);e[r]=function(){var a=arguments.length<=0?void 0:arguments[0];return a in e.state.cache&&e.state.enable?e.state.cache[a]:t.apply(void 0,arguments)},Object.defineProperty(e[r],"name",{value:"".concat(r,"-from-cache"),configurable:!1})}function wG(e,r,t){var n=e[r].bind(e);e[r]=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var u=t.apply(void 0,[e.state._updateCache].concat(s)),f=u.valueChanged,l=u.oldValue;return f&&n.apply(void 0,s),l},Object.defineProperty(e[r],"name",{value:"".concat(r,"-to-cache"),configurable:!1})}function CG(e){var r=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(r(n),e.state.program=n)}}var OG=function(){function e(r){(0,m2.default)(this,e);var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.copyState,a=n===void 0?!1:n,i=t.log,s=i===void 0?function(){}:i;this.gl=r,this.program=null,this.stateStack=[],this.enable=!0,this.cache=a?gp(r):Object.assign({},ff),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,v2.default)(e,[{key:"push",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.stateStack.push({})}},{key:"pop",value:function(){Xe(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];cf(this.gl,t),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var n=!1,a,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var s in t){Xe(s!==void 0);var o=t[s],u=this.cache[s];d2(o,u)||(n=!0,a=u,i&&!(s in i)&&(i[s]=u),this.cache[s]=o)}return{valueChanged:n,oldValue:a}}}]),e}();function mp(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.enable,n=t===void 0?!0:t,a=r.copyState;if(Xe(a!==void 0),!e.state){var i=globalThis.polyfillContext;i&&i(e),e.state=new OG(e,{copyState:a}),CG(e);for(var s in hp){var o=hp[s];wG(e,s,o)}p2(e,"getParameter"),p2(e,"isEnabled")}return e.state.enable=n,e}function vp(e){e.state||mp(e,{copyState:!1}),e.state.push()}function lf(e){Xe(e.state),e.state.pop()}function BG(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=PG(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function PG(e,r){if(e){if(typeof e=="string")return g2(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g2(e,r)}}function g2(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function cf(e,r){if(Xe(sf(e),"setParameters requires a WebGL context"),!pp(r)){var t={};for(var n in r){var a=Number(n),i=c2[n];i&&(typeof i=="string"?t[i]=!0:i(e,r[n],a))}var s=e.state&&e.state.cache;if(s)for(var o in t){var u=h2[o];u(e,r,s)}}}function gp(e,r){if(r=r||ff,typeof r=="number"){var t=r,n=dp[t];return n?n(e,t):e.getParameter(t)}var a=Array.isArray(r)?r:Object.keys(r),i={},s=BG(a),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,f=dp[u];i[u]=f?f(e,Number(u)):e.getParameter(Number(u))}}catch(l){s.e(l)}finally{s.f()}return i}function qr(e,r,t){if(pp(r))return t(e);var n=r.nocatch,a=n===void 0?!0:n;vp(e),cf(e,r);var i;if(a)i=t(e),lf(e);else try{i=t(e)}finally{lf(e)}return i}var joe=Tt();var y2=m(z()),b2=m(q());var Us="8.5.16",IG="set luma.log.level=1 (or higher) to trace rendering",yp=function(){function e(){(0,y2.default)(this,e),this.stats=new Map}return(0,b2.default)(e,[{key:"get",value:function(t){return this.stats.has(t)||this.stats.set(t,new Wn({id:t})),this.stats.get(t)}}]),e}(),vi=new yp;if(globalThis.luma&&globalThis.luma.VERSION!==Us)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Us));globalThis.luma||(Tt()&&le.log(1,"luma.gl ".concat(Us," - ").concat(IG))(),globalThis.luma=globalThis.luma||{VERSION:Us,version:Us,log:le,stats:vi,globals:{modules:{},nodeIO:{}}});var oue=globalThis.luma;var wE=m(J());var K2=m(z()),Y2=m(q()),Q2=m(vt()),$2=m(Ce()),Z2=m(Oe()),Ep=m(Me());var V2=m(ve()),z2=m(z()),W2=m(q()),q2=m(Ce()),J2=m(Oe()),Tp=m(Me());var x2=m(z()),T2=m(q());function ee(e,r){if(!e)throw new Error(r||"luma.gl: assertion failed.")}function hf(e,r){if(typeof r!="string")return r;var t=Number(r);if(!isNaN(t))return t;r=r.replace(/^.*\./,"");var n=e[r];return ee(n!==void 0,"Accessing undefined constant GL.".concat(r)),n}function da(e,r){r=Number(r);for(var t in e)if(e[t]===r)return"GL.".concat(t);return String(r)}var bp={};function df(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";bp[e]=bp[e]||1;var r=bp[e]++;return"".concat(e,"-").concat(r)}function _p(e){return ee(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function _2(e,r,t,n){var a="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),i=Object.getPrototypeOf(e);n.forEach(function(s){i.methodName||(i[s]=function(){throw le.removed("Calling removed method ".concat(r,".").concat(s,": "),a)(),new Error(s)})})}function RG(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=LG(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function LG(e,r){if(e){if(typeof e=="string")return A2(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A2(e,r)}}function A2(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var gi="Resource subclass must define virtual methods",Mn=function(e){function r(t){(0,x2.default)(this,r);var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fs(t);var a=n.id,i=n.userData,s=i===void 0?{}:i;this.gl=t,this.gl2=t,this.id=a||df(this[Symbol.toStringTag]),this.userData=s,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}return(0,T2.default)(r,[{key:e,get:function(){return"Resource"}},{key:"toString",value:function(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}},{key:"handle",get:function(){return this._handle}},{key:"delete",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.deleteChildren,i=a===void 0?!1:a,s=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,s&&i&&s.filter(Boolean).forEach(function(o){return o.delete()}),this}},{key:"bind",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof n!="function")return this._bindHandle(n),this;var a;return this._bound?a=n():(this._bindHandle(this.handle),this._bound=!0,a=n(),this._bound=!1,this._bindHandle(null)),a}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n=hf(this.gl,n),ee(n);var i=this.constructor.PARAMETERS||{},s=i[n];if(s){var o=ge(this.gl),u=(!("webgl2"in s)||o)&&(!("extension"in s)||this.gl.getExtension(s.extension));if(!u){var f=s.webgl1,l="webgl2"in s?s.webgl2:s.webgl1,c=o?l:f;return c}}return this._getParameter(n,a)}},{key:"getParameters",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.parameters,i=n.keys,s=this.constructor.PARAMETERS||{},o=ge(this.gl),u={},f=a||Object.keys(s),l=RG(f),c;try{for(l.s();!(c=l.n()).done;){var h=c.value,d=s[h],p=d&&(!("webgl2"in d)||o)&&(!("extension"in d)||this.gl.getExtension(d.extension));if(p){var v=i?da(this.gl,h):h;u[v]=this.getParameter(h,n),i&&d.type==="GLenum"&&(u[v]=da(this.gl,u[v]))}}}catch(g){l.e(g)}finally{l.f()}return u}},{key:"setParameter",value:function(n,a){n=hf(this.gl,n),ee(n);var i=this.constructor.PARAMETERS||{},s=i[n];if(s){var o=ge(this.gl),u=(!("webgl2"in s)||o)&&(!("extension"in s)||this.gl.getExtension(s.extension));if(!u)throw new Error("Parameter not available on this platform");s.type==="GLenum"&&(a=hf(a))}return this._setParameter(n,a),this}},{key:"setParameters",value:function(n){for(var a in n)this.setParameter(a,n[a]);return this}},{key:"stubRemovedMethods",value:function(n,a,i){return _2(this,n,a,i)}},{key:"initialize",value:function(n){}},{key:"_createHandle",value:function(){throw new Error(gi)}},{key:"_deleteHandle",value:function(){throw new Error(gi)}},{key:"_bindHandle",value:function(n){throw new Error(gi)}},{key:"_getOptsFromHandle",value:function(){throw new Error(gi)}},{key:"_getParameter",value:function(n,a){throw new Error(gi)}},{key:"_setParameter",value:function(n,a){throw new Error(gi)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_initStats",value:function(){this.gl.stats=this.gl.stats||new yp}},{key:"_addStats",value:function(){var n=this[Symbol.toStringTag],a=vi.get("Resource Counts");a.get("Resources Created").incrementCount(),a.get("".concat(n,"s Created")).incrementCount(),a.get("".concat(n,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var n=this[Symbol.toStringTag],a=vi.get("Resource Counts");a.get("".concat(n,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(n,a),this._doTrackAllocatedMemory(n,a,this.gl.stats.get("Memory Usage"))}},{key:"_doTrackAllocatedMemory",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vi.get("Memory Usage");i.get("GPU Memory").addCount(n),i.get("".concat(a," Memory")).addCount(n),this.byteLength=n}},{key:"_trackDeallocatedMemory",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(n),this._doTrackDeallocatedMemory(n,this.gl.stats.get("Memory Usage"))}},{key:"_doTrackDeallocatedMemory",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vi.get("Memory Usage");a.get("GPU Memory").subtractCount(this.byteLength),a.get("".concat(n," Memory")).subtractCount(this.byteLength),this.byteLength=0}}]),r}(Symbol.toStringTag);var P2=m(z()),I2=m(q()),R2=m(vt()),L2=m(Ce()),F2=m(Oe()),Ap=m(Me());var w2=m(M2()),C2=m(z()),O2=m(q());var DG="Failed to deduce GL constant from typed array";function js(e){var r=ArrayBuffer.isView(e)?e.constructor:e;switch(r){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(DG)}}function En(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.clamped,n=t===void 0?!0:t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function E2(e){var r=e.data,t=e.width,n=e.height,a=e.bytesPerPixel,i=a===void 0?4:a,s=e.temp,o=t*i;s=s||new Uint8Array(o);for(var u=0;u<n/2;++u){var f=u*o,l=(n-u-1)*o;s.set(r.subarray(f,f+o)),r.copyWithin(f,l,l+o),r.set(s,l)}}function S2(e){for(var r=e.data,t=e.width,n=e.height,a=Math.round(t/2),i=Math.round(n/2),s=new Uint8Array(a*i*4),o=0;o<i;o++)for(var u=0;u<a;u++)for(var f=0;f<4;f++)s[(o*a+u)*4+f]=r[(o*2*t+u*2)*4+f];return{data:s,width:a,height:i}}function Hs(e,r,t){var n=t.removedProps,a=n===void 0?{}:n,i=t.deprecatedProps,s=i===void 0?{}:i,o=t.replacedProps,u=o===void 0?{}:o;for(var f in a)if(f in r){var l=a[f],c=l?"".concat(e,".").concat(a[f]):"N/A";le.removed("".concat(e,".").concat(f),c)()}for(var h in s)if(h in r){var d=s[h];le.deprecated("".concat(e,".").concat(h),"".concat(e,".").concat(d))()}var p=null;for(var v in u)if(v in r){var g=u[v];le.deprecated("".concat(e,".").concat(v),"".concat(e,".").concat(g))(),p=p||Object.assign({},r),p[g]=r[v],delete p[v]}return p||r}var NG={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},GG={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},pa=function(){function e(){var r=this;(0,C2.default)(this,e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach(function(i){return r._assign(i)}),Object.freeze(this)}return(0,O2.default)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=Hs("Accessor",t,GG),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}],[{key:"getBytesPerElement",value:function(t){var n=En(t.type||5126);return n.BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){ee(t.size);var n=En(t.type||5126);return n.BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(0,w2.default)(e,[NG].concat(n))}}]),e}();function UG(e){var r=jG();return function(){var n=(0,Ap.default)(e),a;if(r){var i=(0,Ap.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,F2.default)(this,a)}}function jG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var B2=10,k2={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},HG={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:k2},VG={removedProps:k2},xp=function(e,r){(0,L2.default)(n,e);var t=UG(n);function n(a){var i;(0,P2.default)(this,n);var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=t.call(this,a,s),i.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),i.target=s.target||(i.gl.webgl2?36662:34962),i.initialize(s),Object.seal((0,R2.default)(i)),i}return(0,I2.default)(n,[{key:r,get:function(){return"Buffer"}},{key:"getElementCount",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/pa.getBytesPerElement(i))}},{key:"getVertexCount",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/pa.getBytesPerVertex(i))}},{key:"initialize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(i)&&(i={data:i}),Number.isFinite(i)&&(i={byteLength:i}),i=Hs("Buffer",i,HG),this.usage=i.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},i,i.accessor)),i.data?this._setData(i.data,i.offset,i.byteLength):this._setByteLength(i.byteLength||0),this}},{key:"setProps",value:function(i){return i=Hs("Buffer",i,VG),"accessor"in i&&this.setAccessor(i.accessor),this}},{key:"setAccessor",value:function(i){return i=Object.assign({},i),delete i.buffer,this.accessor=new pa(i),this}},{key:"reallocate",value:function(i){return i>this.byteLength?(this._setByteLength(i),!0):(this.bytesUsed=i,!1)}},{key:"setData",value:function(i){return this.initialize(i)}},{key:"subData",value:function(i){ArrayBuffer.isView(i)&&(i={data:i});var s=i,o=s.data,u=s.offset,f=u===void 0?0:u,l=s.srcOffset,c=l===void 0?0:l,h=i.byteLength||i.length;ee(o);var d=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(d,this.handle),c!==0||h!==void 0?(ut(this.gl),this.gl.bufferSubData(this.target,f,o,c,h)):this.gl.bufferSubData(d,f,o),this.gl.bindBuffer(d,null),this.debugData=null,this._inferType(o),this}},{key:"copyData",value:function(i){var s=i.sourceBuffer,o=i.readOffset,u=o===void 0?0:o,f=i.writeOffset,l=f===void 0?0:f,c=i.size,h=this.gl;return ut(h),h.bindBuffer(36662,s.handle),h.bindBuffer(36663,this.handle),h.copyBufferSubData(36662,36663,u,l,c),h.bindBuffer(36662,null),h.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.dstData,o=s===void 0?null:s,u=i.srcByteOffset,f=u===void 0?0:u,l=i.dstOffset,c=l===void 0?0:l,h=i.length,d=h===void 0?0:h;ut(this.gl);var p=En(this.accessor.type||5126,{clamped:!1}),v=this._getAvailableElementCount(f),g=c,y,_;o?(_=o.length,y=_-g):(y=Math.min(v,d||v),_=g+y);var T=Math.min(v,y);return d=d||T,ee(d<=T),o=o||new p(_),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,f,o,c,d),this.gl.bindBuffer(36662,null),o}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.target,o=s===void 0?this.target:s,u=i.index,f=u===void 0?this.accessor&&this.accessor.index:u,l=i.offset,c=l===void 0?0:l,h=i.size;return o===35345||o===35982?h!==void 0?this.gl.bindBufferRange(o,f,this.handle,c,h):(ee(c===0),this.gl.bindBufferBase(o,f,this.handle)):this.gl.bindBuffer(o,this.handle),this}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.target,o=s===void 0?this.target:s,u=i.index,f=u===void 0?this.accessor&&this.accessor.index:u,l=o===35345||o===35982;return l?this.gl.bindBufferBase(o,f,null):this.gl.bindBuffer(o,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(B2,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i.byteLength+s;ee(ArrayBuffer.isView(i)),this._trackDeallocatedMemory();var u=this._getTarget();this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,o,this.usage),this.gl.bufferSubData(u,s,i),this.gl.bindBuffer(u,null),this.debugData=i.slice(0,B2),this.bytesUsed=o,this._trackAllocatedMemory(o);var f=js(i);return ee(f),this.setAccessor(new pa(this.accessor,{type:f})),this}},{key:"_setByteLength",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;ee(i>=0),this._trackDeallocatedMemory();var o=i;i===0&&(o=new Float32Array(0));var u=this._getTarget();return this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,o,s),this.gl.bindBuffer(u,null),this.usage=s,this.debugData=null,this.bytesUsed=i,this._trackAllocatedMemory(i),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(i){var s=En(this.accessor.type||5126,{clamped:!1}),o=i/s.BYTES_PER_ELEMENT;return this.getElementCount()-o}},{key:"_inferType",value:function(i){this.accessor.type||this.setAccessor(new pa(this.accessor,{type:js(i)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(i){this.gl.bindBuffer(this.target,this.handle);var s=this.gl.getBufferParameter(this.target,i);return this.gl.bindBuffer(this.target,null),s}},{key:"type",get:function(){return le.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return le.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}},{key:"setByteLength",value:function(i){return le.deprecated("setByteLength","reallocate")(),this.reallocate(i)}},{key:"updateAccessor",value:function(i){return le.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new pa(this.accessor,i),this}}]),n}(Mn,Symbol.toStringTag);var be=m(J());var fr,Mt,Sr,vf=(fr={},(0,be.default)(fr,6407,{dataFormat:6407,types:[5121,33635]}),(0,be.default)(fr,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,be.default)(fr,6406,{dataFormat:6406,types:[5121]}),(0,be.default)(fr,6409,{dataFormat:6409,types:[5121]}),(0,be.default)(fr,6410,{dataFormat:6410,types:[5121]}),(0,be.default)(fr,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,be.default)(fr,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,be.default)(fr,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,be.default)(fr,34836,{dataFormat:6408,types:[5126],gl2:!0}),fr),D2=(Mt={},(0,be.default)(Mt,6403,1),(0,be.default)(Mt,36244,1),(0,be.default)(Mt,33319,2),(0,be.default)(Mt,33320,2),(0,be.default)(Mt,6407,3),(0,be.default)(Mt,36248,3),(0,be.default)(Mt,6408,4),(0,be.default)(Mt,36249,4),(0,be.default)(Mt,6402,1),(0,be.default)(Mt,34041,1),(0,be.default)(Mt,6406,1),(0,be.default)(Mt,6409,1),(0,be.default)(Mt,6410,2),Mt),N2=(Sr={},(0,be.default)(Sr,5126,4),(0,be.default)(Sr,5125,4),(0,be.default)(Sr,5124,4),(0,be.default)(Sr,5123,2),(0,be.default)(Sr,5122,2),(0,be.default)(Sr,5131,2),(0,be.default)(Sr,5120,1),(0,be.default)(Sr,5121,1),Sr);function G2(e,r){var t=vf[r];if(!t)return!1;if(t.gl1===void 0&&t.gl2===void 0)return!0;var n=ge(e)&&t.gl2||t.gl1;return typeof n=="string"?e.getExtension(n):n}function U2(e,r){var t=vf[r];switch(t&&t.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}function zG(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=WG(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function WG(e,r){if(e){if(typeof e=="string")return j2(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j2(e,r)}}function j2(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function qG(e){var r=JG();return function(){var n=(0,Tp.default)(e),a;if(r){var i=(0,Tp.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,J2.default)(this,a)}}function JG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var XG=[9729,9728],H2=globalThis.WebGLBuffer||function(){},Mp=function(e,r){(0,q2.default)(n,e);var t=qG(n);function n(a,i){var s;(0,z2.default)(this,n);var o=i.id,u=o===void 0?df("texture"):o,f=i.handle,l=i.target;return s=t.call(this,a,{id:u,handle:f}),s.target=l,s.textureUnit=void 0,s.loaded=!1,s.width=void 0,s.height=void 0,s.depth=void 0,s.format=void 0,s.type=void 0,s.dataFormat=void 0,s.border=void 0,s.textureUnit=void 0,s.mipmaps=void 0,s}return(0,W2.default)(n,[{key:r,get:function(){return"Texture"}},{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=s.data;if(o instanceof Promise)return o.then(function(V){return i.initialize(Object.assign({},s,{pixels:V,data:V}))}),this;var u=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement;if(u&&o.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,o.addEventListener("loadeddata",function(){return i.initialize(s)}),this;var f=s.pixels,l=f===void 0?null:f,c=s.format,h=c===void 0?6408:c,d=s.border,p=d===void 0?0:d,v=s.recreate,g=v===void 0?!1:v,y=s.parameters,_=y===void 0?{}:y,T=s.pixelStore,x=T===void 0?{}:T,E=s.textureUnit,C=E===void 0?void 0:E;o||(o=l);var L=s.width,w=s.height,S=s.dataFormat,A=s.type,I=s.compressed,F=I===void 0?!1:I,D=s.mipmaps,N=D===void 0?!0:D,B=s.depth,P=B===void 0?0:B,R=this._deduceParameters({format:h,type:A,dataFormat:S,compressed:F,data:o,width:L,height:w});return L=R.width,w=R.height,F=R.compressed,S=R.dataFormat,A=R.type,this.width=L,this.height=w,this.depth=P,this.format=h,this.type=A,this.dataFormat=S,this.border=p,this.textureUnit=C,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),N&&this._isNPOT()&&(le.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),N=!1,this._updateForNPOT(_)),this.mipmaps=N,this.setImageData({data:o,width:L,height:w,depth:P,format:h,type:A,dataFormat:S,border:p,mipmaps:N,parameters:x,compressed:F}),N&&this.generateMipmap(),this.setParameters(_),g&&(this.data=o),u&&(this._video={video:o,parameters:_,lastTime:o.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?o.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var i=this._video,s=i.video,o=i.parameters,u=i.lastTime;if(u===s.currentTime||s.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:s,parameters:o}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=s.currentTime}}},{key:"resize",value:function(i){var s=i.height,o=i.width,u=i.mipmaps,f=u===void 0?!1:u;return o!==this.width||s!==this.height?this.initialize({width:o,height:s,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:f}):this}},{key:"generateMipmap",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(le.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),qr(this.gl,s,function(){i.gl.generateMipmap(i.target)}),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(i){this._trackDeallocatedMemory("Texture");var s=i.target,o=s===void 0?this.target:s,u=i.pixels,f=u===void 0?null:u,l=i.level,c=l===void 0?0:l,h=i.format,d=h===void 0?this.format:h,p=i.border,v=p===void 0?this.border:p,g=i.offset,y=g===void 0?0:g,_=i.parameters,T=_===void 0?{}:_,x=i.data,E=x===void 0?null:x,C=i.type,L=C===void 0?this.type:C,w=i.width,S=w===void 0?this.width:w,A=i.height,I=A===void 0?this.height:A,F=i.dataFormat,D=F===void 0?this.dataFormat:F,N=i.compressed,B=N===void 0?!1:N;E||(E=f);var P=this._deduceParameters({format:d,type:L,dataFormat:D,compressed:B,data:E,width:S,height:I});L=P.type,D=P.dataFormat,B=P.compressed,S=P.width,I=P.height;var R=this.gl;R.bindTexture(this.target,this.handle);var V=null,G=this._getDataType({data:E,compressed:B});E=G.data,V=G.dataType;var W,$=0;if(qr(this.gl,T,function(){switch(V){case"null":R.texImage2D(o,c,d,S,I,v,D,L,E);break;case"typed-array":R.texImage2D(o,c,d,S,I,v,D,L,E,y);break;case"buffer":W=ut(R),W.bindBuffer(35052,E.handle||E),W.texImage2D(o,c,d,S,I,v,D,L,y),W.bindBuffer(35052,null);break;case"browser-object":ge(R)?R.texImage2D(o,c,d,S,I,v,D,L,E):R.texImage2D(o,c,d,D,L,E);break;case"compressed":var Re=zG(E.entries()),mt;try{for(Re.s();!(mt=Re.n()).done;){var Ke=(0,V2.default)(mt.value,2),on=Ke[0],zt=Ke[1];R.compressedTexImage2D(o,on,zt.format,zt.width,zt.height,v,zt.data),$+=zt.levelSize}}catch(Na){Re.e(Na)}finally{Re.f()}break;default:ee(!1,"Unknown image data type")}}),V==="compressed")this._trackAllocatedMemory($,"Texture");else if(E&&E.byteLength)this._trackAllocatedMemory(E.byteLength,"Texture");else{var oe=D2[this.dataFormat]||4,He=N2[this.type]||1;this._trackAllocatedMemory(this.width*this.height*oe*He,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(i){var s=this,o=i.target,u=o===void 0?this.target:o,f=i.pixels,l=f===void 0?null:f,c=i.data,h=c===void 0?null:c,d=i.x,p=d===void 0?0:d,v=i.y,g=v===void 0?0:v,y=i.width,_=y===void 0?this.width:y,T=i.height,x=T===void 0?this.height:T,E=i.level,C=E===void 0?0:E,L=i.format,w=L===void 0?this.format:L,S=i.type,A=S===void 0?this.type:S,I=i.dataFormat,F=I===void 0?this.dataFormat:I,D=i.compressed,N=D===void 0?!1:D,B=i.offset,P=B===void 0?0:B,R=i.border,V=R===void 0?this.border:R,G=i.parameters,W=G===void 0?{}:G,$=this._deduceParameters({format:w,type:A,dataFormat:F,compressed:N,data:h,width:_,height:x});if(A=$.type,F=$.dataFormat,N=$.compressed,_=$.width,x=$.height,ee(this.depth===0,"texSubImage not supported for 3D textures"),h||(h=l),h&&h.data){var oe=h;h=oe.data,_=oe.shape[0],x=oe.shape[1]}h instanceof xp&&(h=h.handle),this.gl.bindTexture(this.target,this.handle),qr(this.gl,W,function(){if(N)s.gl.compressedTexSubImage2D(u,C,p,g,_,x,w,h);else if(h===null)s.gl.texSubImage2D(u,C,p,g,_,x,F,A,null);else if(ArrayBuffer.isView(h))s.gl.texSubImage2D(u,C,p,g,_,x,F,A,h,P);else if(h instanceof H2){var He=ut(s.gl);He.bindBuffer(35052,h),He.texSubImage2D(u,C,p,g,_,x,F,A,P),He.bindBuffer(35052,null)}else if(ge(s.gl)){var Re=ut(s.gl);Re.texSubImage2D(u,C,p,g,_,x,F,A,h)}else s.gl.texSubImage2D(u,C,p,g,F,A,h)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,s=this.gl;return i!==void 0&&(this.textureUnit=i,s.activeTexture(33984+i)),s.bindTexture(this.target,this.handle),i}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,s=this.gl;return i!==void 0&&(this.textureUnit=i,s.activeTexture(33984+i)),s.bindTexture(this.target,null),i}},{key:"_getDataType",value:function(i){var s=i.data,o=i.compressed,u=o===void 0?!1:o;return u?{data:s,dataType:"compressed"}:s===null?{data:s,dataType:"null"}:ArrayBuffer.isView(s)?{data:s,dataType:"typed-array"}:s instanceof xp?{data:s.handle,dataType:"buffer"}:s instanceof H2?{data:s,dataType:"buffer"}:{data:s,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(i){var s=i.format,o=i.data,u=i.width,f=i.height,l=i.dataFormat,c=i.type,h=i.compressed,d=vf[s];l=l||d&&d.dataFormat,c=c||d&&d.types[0],h=h||d&&d.compressed;var p=this._deduceImageSize(o,u,f);return u=p.width,f=p.height,{dataFormat:l,type:c,compressed:h,width:u,height:f,format:s,data:o}}},{key:"_deduceImageSize",value:function(i,s,o){var u;return typeof ImageData<"u"&&i instanceof ImageData?u={width:i.width,height:i.height}:typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement?u={width:i.naturalWidth,height:i.naturalHeight}:typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement?u={width:i.width,height:i.height}:typeof ImageBitmap<"u"&&i instanceof ImageBitmap?u={width:i.width,height:i.height}:typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement?u={width:i.videoWidth,height:i.videoHeight}:i?u={width:s,height:o}:u={width:s>=0?s:1,height:o>=0?o:1},ee(u,"Could not deduced texture size"),ee(s===void 0||u.width===s,"Deduced texture width does not match supplied width"),ee(o===void 0||u.height===o,"Deduced texture height does not match supplied height"),u}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(i){switch(i){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var s=this.gl.getTexParameter(this.target,i);return this.gl.bindTexture(this.target,null),s}}},{key:"_setParameter",value:function(i,s){switch(this.gl.bindTexture(this.target,this.handle),s=this._getNPOTParam(i,s),i){case 33082:case 33083:this.gl.texParameterf(this.handle,i,s);break;case 4096:case 4097:ee(!1);break;default:this.gl.texParameteri(this.target,i,s);break}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return ge(this.gl)||!this.width||!this.height?!1:!_p(this.width)||!_p(this.height)}},{key:"_updateForNPOT",value:function(i){i[this.gl.TEXTURE_MIN_FILTER]===void 0&&(i[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),i[this.gl.TEXTURE_WRAP_S]===void 0&&(i[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),i[this.gl.TEXTURE_WRAP_T]===void 0&&(i[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(i,s){if(this._isNPOT())switch(i){case 10241:XG.indexOf(s)===-1&&(s=9729);break;case 10242:case 10243:s!==33071&&(s=33071);break;default:break}return s}}],[{key:"isSupported",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.format,u=s.linearFiltering,f=!0;return o&&(f=f&&G2(i,o),f=f&&(!u||U2(i,o))),f}}]),n}(Mn,Symbol.toStringTag);var KG="";function X2(e,r){return ee(typeof e=="string"),e=KG+e,new Promise(function(t,n){try{var a=new Image;a.onload=function(){return t(a)},a.onerror=function(){return n(new Error("Could not load image ".concat(e,".")))},a.crossOrigin=r&&r.crossOrigin||"anonymous",a.src=e}catch(i){n(i)}})}function YG(e){var r=QG();return function(){var n=(0,Ep.default)(e),a;if(r){var i=(0,Ep.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Z2.default)(this,a)}}function QG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ma=function(e,r){(0,$2.default)(n,e);var t=YG(n);function n(a){var i;(0,K2.default)(this,n);var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Fs(a),(s instanceof Promise||typeof s=="string")&&(s={data:s}),typeof s.data=="string"&&(s=Object.assign({},s,{data:X2(s.data)})),i=t.call(this,a,Object.assign({},s,{target:3553})),i.initialize(s),Object.seal((0,Q2.default)(i)),i}return(0,Y2.default)(n,[{key:r,get:function(){return"Texture2D"}}],[{key:"isSupported",value:function(i,s){return Mp.isSupported(i,s)}}]),n}(Mp,Symbol.toStringTag);var zs=m(J()),_E=m(ve()),AE=m(z()),xE=m(q()),TE=m(vt()),ME=m(fi()),EE=m(Ce()),SE=m(Oe()),bf=m(Me());var eE=m(z()),tE=m(q()),rE=m(vt()),nE=m(Ce()),aE=m(Oe()),wp=m(Me());var ie=m(J()),re,va="EXT_color_buffer_float",Sp=(re={},(0,ie.default)(re,33189,{bpp:2}),(0,ie.default)(re,33190,{gl2:!0,bpp:3}),(0,ie.default)(re,36012,{gl2:!0,bpp:4}),(0,ie.default)(re,36168,{bpp:1}),(0,ie.default)(re,34041,{bpp:4}),(0,ie.default)(re,35056,{gl2:!0,bpp:4}),(0,ie.default)(re,36013,{gl2:!0,bpp:5}),(0,ie.default)(re,32854,{bpp:2}),(0,ie.default)(re,36194,{bpp:2}),(0,ie.default)(re,32855,{bpp:2}),(0,ie.default)(re,33321,{gl2:!0,bpp:1}),(0,ie.default)(re,33330,{gl2:!0,bpp:1}),(0,ie.default)(re,33329,{gl2:!0,bpp:1}),(0,ie.default)(re,33332,{gl2:!0,bpp:2}),(0,ie.default)(re,33331,{gl2:!0,bpp:2}),(0,ie.default)(re,33334,{gl2:!0,bpp:4}),(0,ie.default)(re,33333,{gl2:!0,bpp:4}),(0,ie.default)(re,33323,{gl2:!0,bpp:2}),(0,ie.default)(re,33336,{gl2:!0,bpp:2}),(0,ie.default)(re,33335,{gl2:!0,bpp:2}),(0,ie.default)(re,33338,{gl2:!0,bpp:4}),(0,ie.default)(re,33337,{gl2:!0,bpp:4}),(0,ie.default)(re,33340,{gl2:!0,bpp:8}),(0,ie.default)(re,33339,{gl2:!0,bpp:8}),(0,ie.default)(re,32849,{gl2:!0,bpp:3}),(0,ie.default)(re,32856,{gl2:!0,bpp:4}),(0,ie.default)(re,32857,{gl2:!0,bpp:4}),(0,ie.default)(re,36220,{gl2:!0,bpp:4}),(0,ie.default)(re,36238,{gl2:!0,bpp:4}),(0,ie.default)(re,36975,{gl2:!0,bpp:4}),(0,ie.default)(re,36214,{gl2:!0,bpp:8}),(0,ie.default)(re,36232,{gl2:!0,bpp:8}),(0,ie.default)(re,36226,{gl2:!0,bpp:16}),(0,ie.default)(re,36208,{gl2:!0,bpp:16}),(0,ie.default)(re,33325,{gl2:va,bpp:2}),(0,ie.default)(re,33327,{gl2:va,bpp:4}),(0,ie.default)(re,34842,{gl2:va,bpp:8}),(0,ie.default)(re,33326,{gl2:va,bpp:4}),(0,ie.default)(re,33328,{gl2:va,bpp:8}),(0,ie.default)(re,34836,{gl2:va,bpp:16}),(0,ie.default)(re,35898,{gl2:va,bpp:4}),re);function $G(e){var r=ZG();return function(){var n=(0,wp.default)(e),a;if(r){var i=(0,wp.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,aE.default)(this,a)}}function ZG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function e9(e,r,t){var n=t[r];if(!n)return!1;var a=ge(e)&&n.gl2||n.gl1;return typeof a=="string"?e.getExtension(a):a}var Vs=function(e,r){(0,nE.default)(n,e);var t=$G(n);function n(a){var i;(0,eE.default)(this,n);var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=t.call(this,a,s),i.initialize(s),Object.seal((0,rE.default)(i)),i}return(0,tE.default)(n,[{key:r,get:function(){return"Renderbuffer"}},{key:"initialize",value:function(i){var s=i.format,o=i.width,u=o===void 0?1:o,f=i.height,l=f===void 0?1:f,c=i.samples,h=c===void 0?0:c;return ee(s,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),h!==0&&ge(this.gl)?this.gl.renderbufferStorageMultisample(36161,h,s,u,l):this.gl.renderbufferStorage(36161,s,u,l),this.format=s,this.width=u,this.height=l,this.samples=h,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Sp[this.format].bpp),this}},{key:"resize",value:function(i){var s=i.width,o=i.height;return s!==this.width||o!==this.height?this.initialize({width:s,height:o,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(i){this.gl.bindRenderbuffer(36161,i)}},{key:"_syncHandle",value:function(i){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(i){this.gl.bindRenderbuffer(36161,this.handle);var s=this.gl.getRenderbufferParameter(36161,i);return s}}],[{key:"isSupported",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null},o=s.format;return!o||e9(i,o,Sp)}},{key:"getSamplesForFormat",value:function(i,s){var o=s.format;return i.getInternalformatParameter(36161,o,32937)}}]),n}(Mn,Symbol.toStringTag);var fE=m(ve());var t9=256,r9=1024,n9=16384,iE=6144,sE=6145,oE=6146,uE=34041,lE="clear: bad arguments";function cE(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.framebuffer,n=t===void 0?null:t,a=r.color,i=a===void 0?null:a,s=r.depth,o=s===void 0?null:s,u=r.stencil,f=u===void 0?null:u,l={};n&&(l.framebuffer=n);var c=0;i&&(c|=n9,i!==!0&&(l.clearColor=i)),o&&(c|=t9,o!==!0&&(l.clearDepth=o)),f&&(c|=r9,o!==!0&&(l.clearStencil=o)),ee(c!==0,lE),qr(e,l,function(){e.clear(c)})}function hE(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.framebuffer,n=t===void 0?null:t,a=r.buffer,i=a===void 0?iE:a,s=r.drawBuffer,o=s===void 0?0:s,u=r.value,f=u===void 0?[0,0,0,0]:u;ut(e),qr(e,{framebuffer:n},function(){switch(i){case iE:switch(f.constructor){case Int32Array:e.clearBufferiv(i,o,f);break;case Uint32Array:e.clearBufferuiv(i,o,f);break;case Float32Array:default:e.clearBufferfv(i,o,f)}break;case sE:e.clearBufferfv(sE,0,[f]);break;case oE:e.clearBufferiv(oE,0,[f]);break;case uE:var l=(0,fE.default)(f,2),c=l[0],h=l[1];e.clearBufferfi(uE,0,c,h);break;default:ee(!1,lE)}})}function dE(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return ee(!1),0}}function a9(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.sourceX,n=t===void 0?0:t,a=r.sourceY,i=a===void 0?0:a,s=r.sourceFormat,o=s===void 0?6408:s,u=r.sourceAttachment,f=u===void 0?36064:u,l=r.target,c=l===void 0?null:l,h=r.sourceWidth,d=r.sourceHeight,p=r.sourceType,v=i9(e),g=v.framebuffer,y=v.deleteFramebuffer;ee(g);var _=g.gl,T=g.handle,x=g.attachments;h=h||g.width,d=d||g.height,f===36064&&T===null&&(f=1028),ee(x[f]),p=p||x[f].type,c=s9(c,p,o,h,d),p=p||js(c);var E=_.bindFramebuffer(36160,T);return _.readPixels(n,i,h,d,o,p,c),_.bindFramebuffer(36160,E||null),y&&g.delete(),c}function Cp(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.sourceAttachment,n=t===void 0?36064:t,a=r.targetMaxHeight,i=a===void 0?Number.MAX_SAFE_INTEGER:a,s=a9(e,{sourceAttachment:n}),o=e.width,u=e.height;u>i;){var f=S2({data:s,width:o,height:u});s=f.data,o=f.width,u=f.height}E2({data:s,width:o,height:u});var l=document.createElement("canvas");l.width=o,l.height=u;var c=l.getContext("2d"),h=c.createImageData(o,u);return h.data.set(s),c.putImageData(h,0,0),l.toDataURL()}function i9(e){return e instanceof Sn?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:pE(e),deleteFramebuffer:!0}}function s9(e,r,t,n,a){if(e)return e;r=r||5121;var i=En(r,{clamped:!1}),s=dE(t);return new i(n*a*s)}var Fe=m(J());var Le,Ie={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function o9(e){var r=new ma(e,{format:6408,type:5126,dataFormat:6408}),t=new Sn(e,{id:"test-framebuffer",check:!1,attachments:(0,Fe.default)({},36064,r)}),n=t.getStatus();return r.delete(),t.delete(),n===36053}var Op=(Le={},(0,Fe.default)(Le,Ie.WEBGL2,[!1,!0]),(0,Fe.default)(Le,Ie.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),(0,Fe.default)(Le,Ie.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),(0,Fe.default)(Le,Ie.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),(0,Fe.default)(Le,Ie.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),(0,Fe.default)(Le,Ie.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),(0,Fe.default)(Le,Ie.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),(0,Fe.default)(Le,Ie.FLOAT_BLEND,["EXT_float_blend"]),(0,Fe.default)(Le,Ie.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),(0,Fe.default)(Le,Ie.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),(0,Fe.default)(Le,Ie.TEXTURE_FLOAT,["OES_texture_float",!0]),(0,Fe.default)(Le,Ie.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),(0,Fe.default)(Le,Ie.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),(0,Fe.default)(Le,Ie.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),(0,Fe.default)(Le,Ie.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),(0,Fe.default)(Le,Ie.COLOR_ATTACHMENT_RGBA32F,[o9,"EXT_color_buffer_float"]),(0,Fe.default)(Le,Ie.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),(0,Fe.default)(Le,Ie.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),(0,Fe.default)(Le,Ie.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),(0,Fe.default)(Le,Ie.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),(0,Fe.default)(Le,Ie.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),(0,Fe.default)(Le,Ie.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),Le);function u9(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=f9(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function f9(e,r){if(e){if(typeof e=="string")return mE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mE(e,r)}}function mE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l9=2;function gf(e,r){return Bp(e,r)}function Bp(e,r){return r=Array.isArray(r)?r:[r],r.every(function(t){return vE(e,t)})}function yf(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(var r in Op)e.luma.caps[r]===void 0&&(e.luma.caps[r]=vE(e,r));return e.luma.caps}function vE(e,r){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[r]===void 0&&(e.luma.caps[r]=c9(e,r)),e.luma.caps[r]||le.log(l9,"Feature: ".concat(r," not supported"))(),e.luma.caps[r]}function c9(e,r){var t=Op[r];ee(t,r);var n,a=ge(e)&&t[1]||t[0];if(typeof a=="function")n=a(e);else if(Array.isArray(a)){n=!0;var i=u9(a),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;n=n&&Boolean(e.getExtension(o))}}catch(u){i.e(u)}finally{i.f()}}else typeof a=="string"?n=Boolean(e.getExtension(a)):typeof a=="boolean"?n=a:ee(!1);return n}function gE(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=h9(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function h9(e,r){if(e){if(typeof e=="string")return yE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yE(e,r)}}function yE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function d9(e){var r=p9();return function(){var n=(0,bf.default)(e),a;if(r){var i=(0,bf.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,SE.default)(this,a)}}function p9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var bE="Multiple render targets not supported",Sn=function(e,r){(0,EE.default)(n,e);var t=d9(n);function n(a){var i;(0,AE.default)(this,n);var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=t.call(this,a,s),i.width=null,i.height=null,i.attachments={},i.readBuffer=36064,i.drawBuffers=[36064],i.ownResources=[],i.initialize(s),Object.seal((0,TE.default)(i)),i}return(0,xE.default)(n,[{key:r,get:function(){return"Framebuffer"}},{key:"MAX_COLOR_ATTACHMENTS",get:function(){var i=ut(this.gl);return i.getParameter(i.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var i=ut(this.gl);return i.getParameter(i.MAX_DRAW_BUFFERS)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}},{key:"initialize",value:function(i){var s=i.width,o=s===void 0?1:s,u=i.height,f=u===void 0?1:u,l=i.attachments,c=l===void 0?null:l,h=i.color,d=h===void 0?!0:h,p=i.depth,v=p===void 0?!0:p,g=i.stencil,y=g===void 0?!1:g,_=i.check,T=_===void 0?!0:_,x=i.readBuffer,E=x===void 0?void 0:x,C=i.drawBuffers,L=C===void 0?void 0:C;if(ee(o>=0&&f>=0,"Width and height need to be integers"),this.width=o,this.height=f,c)for(var w in c){var S=c[w],A=Array.isArray(S)?S[0]:S;A.resize({width:o,height:f})}else c=this._createDefaultAttachments(d,v,y,o,f);this.update({clearAttachments:!0,attachments:c,readBuffer:E,drawBuffers:L}),c&&T&&this.checkStatus()}},{key:"delete",value:function(){var i=gE(this.ownResources),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;o.delete()}}catch(u){i.e(u)}finally{i.f()}return(0,ME.default)((0,bf.default)(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(i){var s=i.attachments,o=s===void 0?{}:s,u=i.readBuffer,f=i.drawBuffers,l=i.clearAttachments,c=l===void 0?!1:l,h=i.resizeAttachments,d=h===void 0?!0:h;this.attach(o,{clearAttachments:c,resizeAttachments:d});var p=this.gl,v=p.bindFramebuffer(36160,this.handle);return u&&this._setReadBuffer(u),f&&this._setDrawBuffers(f),p.bindFramebuffer(36160,v||null),this}},{key:"resize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.width,o=i.height;if(this.handle===null)return ee(s===void 0&&o===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;s===void 0&&(s=this.gl.drawingBufferWidth),o===void 0&&(o=this.gl.drawingBufferHeight),s!==this.width&&o!==this.height&&le.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(s,"x").concat(o))();for(var u in this.attachments)this.attachments[u].resize({width:s,height:o});return this.width=s,this.height=o,this}},{key:"attach",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.clearAttachments,f=u===void 0?!1:u,l=o.resizeAttachments,c=l===void 0?!0:l,h={};f&&Object.keys(this.attachments).forEach(function(w){h[w]=null}),Object.assign(h,i);var d=this.gl.bindFramebuffer(36160,this.handle);for(var p in h){ee(p!==void 0,"Misspelled framebuffer binding point?");var v=Number(p),g=h[v],y=g;if(!y)this._unattach(v);else if(y instanceof Vs)this._attachRenderbuffer({attachment:v,renderbuffer:y});else if(Array.isArray(g)){var _=(0,_E.default)(g,3),T=_[0],x=_[1],E=x===void 0?0:x,C=_[2],L=C===void 0?0:C;y=T,this._attachTexture({attachment:v,texture:T,layer:E,level:L})}else this._attachTexture({attachment:v,texture:y,layer:0,level:0});c&&y&&y.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,d||null),Object.assign(this.attachments,i),Object.keys(this.attachments).filter(function(w){return!s.attachments[w]}).forEach(function(w){delete s.attachments[w]})}},{key:"checkStatus",value:function(){var i=this.gl,s=this.getStatus();if(s!==36053)throw new Error(v9(s));return this}},{key:"getStatus",value:function(){var i=this.gl,s=i.bindFramebuffer(36160,this.handle),o=i.checkFramebufferStatus(36160);return i.bindFramebuffer(36160,s||null),o}},{key:"clear",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=s.color,u=s.depth,f=s.stencil,l=s.drawBuffers,c=l===void 0?[]:l,h=this.gl.bindFramebuffer(36160,this.handle);return(o||u||f)&&cE(this.gl,{color:o,depth:u,stencil:f}),c.forEach(function(d,p){hE(i.gl,{drawBuffer:p,value:d})}),this.gl.bindFramebuffer(36160,h||null),this}},{key:"readPixels",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(i){var s=i.attachments,o=s===void 0?[]:s,u=i.x,f=u===void 0?0:u,l=i.y,c=l===void 0?0:l,h=i.width,d=i.height,p=ut(this.gl),v=p.bindFramebuffer(36008,this.handle),g=f===0&&c===0&&h===void 0&&d===void 0;return g?p.invalidateFramebuffer(36008,o):p.invalidateFramebuffer(36008,o,f,c,h,d),p.bindFramebuffer(36008,v),this}},{key:"getAttachmentParameter",value:function(i,s,o){var u=this._getAttachmentParameterFallback(s);return u===null&&(this.gl.bindFramebuffer(36160,this.handle),u=this.gl.getFramebufferAttachmentParameter(36160,i,s),this.gl.bindFramebuffer(36160,null)),o&&u>1e3&&(u=da(this.gl,u)),u}},{key:"getAttachmentParameters",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,s=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],u={},f=gE(o),l;try{for(f.s();!(l=f.n()).done;){var c=l.value,h=s?da(this.gl,c):c;u[h]=this.getAttachmentParameter(i,c,s)}}catch(d){f.e(d)}finally{f.f()}return u}},{key:"getParameters",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,s=Object.keys(this.attachments),o={},u=0,f=s;u<f.length;u++){var l=f[u],c=Number(l),h=i?da(this.gl,c):c;o[h]=this.getAttachmentParameters(c,i)}return o}},{key:"show",value:function(){return typeof window<"u"&&window.open(Cp(this),"luma-debug-texture"),this}},{key:"log",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(i>le.level||typeof window>"u")return this;s=s||"Framebuffer ".concat(this.id);var o=Cp(this,{targetMaxHeight:100});return le.image({logLevel:i,message:s,image:o},s)(),this}},{key:"bind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.target,o=s===void 0?36160:s;return this.gl.bindFramebuffer(o,this.handle),this}},{key:"unbind",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.target,o=s===void 0?36160:s;return this.gl.bindFramebuffer(o,null),this}},{key:"_createDefaultAttachments",value:function(i,s,o,u,f){var l=null;if(i){var c;l=l||{},l[36064]=new ma(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:u,height:f,mipmaps:!1,parameters:(c={},(0,zs.default)(c,10241,9729),(0,zs.default)(c,10240,9729),(0,zs.default)(c,10242,33071),(0,zs.default)(c,10243,33071),c)}),this.ownResources.push(l[36064])}return s&&o?(l=l||{},l[33306]=new Vs(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:u,height:111}),this.ownResources.push(l[33306])):s?(l=l||{},l[36096]=new Vs(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:u,height:f}),this.ownResources.push(l[36096])):o&&ee(!1),l}},{key:"_unattach",value:function(i){var s=this.attachments[i];s&&(s instanceof Vs?this.gl.framebufferRenderbuffer(36160,i,36161,null):this.gl.framebufferTexture2D(36160,i,3553,null,0),delete this.attachments[i])}},{key:"_attachRenderbuffer",value:function(i){var s=i.attachment,o=s===void 0?36064:s,u=i.renderbuffer,f=this.gl;f.framebufferRenderbuffer(36160,o,36161,u.handle),this.attachments[o]=u}},{key:"_attachTexture",value:function(i){var s=i.attachment,o=s===void 0?36064:s,u=i.texture,f=i.layer,l=i.level,c=this.gl;switch(c.bindTexture(u.target,u.handle),u.target){case 35866:case 32879:var h=ut(c);h.framebufferTextureLayer(36160,o,u.target,l,f);break;case 34067:var d=m9(f);c.framebufferTexture2D(36160,o,d,u.handle,l);break;case 3553:c.framebufferTexture2D(36160,o,3553,u.handle,l);break;default:ee(!1,"Illegal texture type")}c.bindTexture(u.target,null),this.attachments[o]=u}},{key:"_setReadBuffer",value:function(i){var s=lp(this.gl);s?s.readBuffer(i):ee(i===36064||i===1029,bE),this.readBuffer=i}},{key:"_setDrawBuffers",value:function(i){var s=this.gl,o=ut(s);if(o)o.drawBuffers(i);else{var u=s.getExtension("WEBGL_draw_buffers");u?u.drawBuffersWEBGL(i):ee(i.length===1&&(i[0]===36064||i[0]===1029),bE)}this.drawBuffers=i}},{key:"_getAttachmentParameterFallback",value:function(i){var s=yf(this.gl);switch(i){case 36052:return s.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return s.WEBGL2?null:8;case 33297:return s.WEBGL2?null:5125;case 33296:return!s.WEBGL2&&!s.EXT_sRGB?9729:null;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(i){return this.gl.bindFramebuffer(36160,i)}}],[{key:"isSupported",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.colorBufferFloat,u=s.colorBufferHalfFloat,f=!0;return o&&(f=Boolean(i.getExtension("EXT_color_buffer_float")||i.getExtension("WEBGL_color_buffer_float")||i.getExtension("OES_texture_float"))),u&&(f=f&&Boolean(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float"))),f}},{key:"getDefaultFramebuffer",value:function(i){return i.luma=i.luma||{},i.luma.defaultFramebuffer=i.luma.defaultFramebuffer||new n(i,{id:"default-framebuffer",handle:null,attachments:{}}),i.luma.defaultFramebuffer}}]),n}(Mn,Symbol.toStringTag);function m9(e){return e<34069?e+34069:e}function v9(e){var r=Sn.STATUS||{};return r[e]||"Framebuffer error ".concat(e)}var g9=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Sn.ATTACHMENT_PARAMETERS=g9;function pE(e,r){var t=e.gl,n=e.width,a=e.height,i=e.id,s=new Sn(t,Object.assign({},r,{id:"framebuffer-for-".concat(i),width:n,height:a,attachments:(0,wE.default)({},36064,e)}));return s}var _f=m(J()),OE=m(z()),BE=m(q());function CE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Pp(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?CE(Object(t),!0).forEach(function(n){(0,_f.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CE(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Ip=function(){function e(r,t){(0,OE.default)(this,e);var n=t.attributes,a=t.material,i=t.pbrDebug,s=t.imageBasedLightingEnvironment,o=t.lights,u=t.useTangents;this.gl=r,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},gf(r,Ie.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),i&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(n.NORMAL,"HAS_NORMALS"),this.defineIfPresent(n.TANGENT&&u,"HAS_TANGENTS"),this.defineIfPresent(n.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(i,"PBR_DEBUG"),a&&this.parseMaterial(a)}return(0,BE.default)(e,[{key:"defineIfPresent",value:function(t,n){t&&(this.defines[n]=1)}},{key:"parseTexture",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},s=t.texture.source.image,o,u={};s.compressed?(o=s,u=(0,_f.default)({},this.gl.TEXTURE_MIN_FILTER,s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR)):o={data:s};var f=new ma(this.gl,Pp({id:t.name||t.id,parameters:Pp(Pp({},i),u),pixelStore:(0,_f.default)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1)},o));this.uniforms[n]=f,this.defineIfPresent(a,a),this.generatedTextures.push(f)}},{key:"parsePbrMetallicRoughness",value:function(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var n=t.metallicFactor,a=n===void 0?1:n,i=t.roughnessFactor,s=i===void 0?1:i;this.uniforms.u_MetallicRoughnessValues=[a,s]}},{key:"parseMaterial",value:function(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var n=t.normalTexture.scale,a=n===void 0?1:n;this.uniforms.u_NormalScale=a}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var i=t.occlusionTexture.strength,s=i===void 0?1:i;this.uniforms.u_OcclusionStrength=s}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),t.alphaMode==="MASK"){var o=t.alphaCutoff,u=o===void 0?.5:o;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=u}else t.alphaMode==="BLEND"&&(le.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}},{key:"delete",value:function(){this.generatedTextures.forEach(function(t){return t.delete()})}}]),e}();var xf=m(up()),NE=m(Zu());var PE=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs
uniform float sizeScale;
uniform bool composeModelMatrix;
uniform bool pickFeatureIds;
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec4 uvRegions;
in vec3 featureIdsPickingColors;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

vec2 applyUVRegion(vec2 uv) {
  #ifdef HAS_UV_REGIONS
    return fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;
  #else
    return uv;
  #endif
}

void main(void) {
  vec2 uv = applyUVRegion(texCoords);
  geometry.uv = uv;

  if (pickFeatureIds) {
    geometry.pickingColor = featureIdsPickingColors;
  } else {
    geometry.pickingColor = instancePickingColors;
  }

  vTexCoord = uv;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale;
  vec3 projectedPosition = project_position(positions);
  position_commonspace = vec4(projectedPosition, 1.0);
  gl_Position = project_common_position_to_clipspace(position_commonspace);

  geometry.position = position_commonspace;
  normals_commonspace = project_normal(instanceModelMatrix * normals);
  geometry.normal = normals_commonspace;

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = uv;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var IE=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  
#ifdef MODULE_PBR

  fragColor = vColor * pbr_filterColor(vec4(0));
  geometry.uv = pbr_vUV;
  fragColor.a *= opacity;

#else

  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);

#endif

  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function RE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function wn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?RE(Object(t),!0).forEach(function(n){(0,Af.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):RE(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function y9(e){var r=b9();return function(){var n=(0,Cn.default)(e),a;if(r){var i=(0,Cn.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,DE.default)(this,a)}}function b9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _9(e){var r=e.COLOR_0||e.colors;r||(e.colors={constant:!0,value:new Float32Array([1,1,1])})}var A9={pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}},Tf=function(e){(0,kE.default)(t,e);var r=y9(t);function t(){return(0,LE.default)(this,t),r.apply(this,arguments)}return(0,FE.default)(t,[{key:"getShaders",value:function(){var a=(0,yi.default)((0,Cn.default)(t.prototype),"getShaders",this).call(this),i=a.modules;return i.push(xf.pbr),wn(wn({},a),{},{vs:PE,fs:IE})}},{key:"initializeState",value:function(){var a=this.props.featureIds;(0,yi.default)((0,Cn.default)(t.prototype),"initializeState",this).call(this);var i=this.getAttributeManager();a&&i.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}},{key:"updateState",value:function(a){(0,yi.default)((0,Cn.default)(t.prototype),"updateState",this).call(this,a);var i=a.props,s=a.oldProps;i.pbrMaterial!==s.pbrMaterial&&this.updatePbrMaterialUniforms(i.pbrMaterial)}},{key:"draw",value:function(a){var i=this.props.featureIds;this.state.model&&(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,pickFeatureIds:Boolean(i)}),(0,yi.default)((0,Cn.default)(t.prototype),"draw",this).call(this,a))}},{key:"getModel",value:function(a){var i=this.props,s=i.id,o=i.pbrMaterial,u=this.parseMaterial(o,a);this.setState({materialParser:u});var f=this.getShaders();_9(a.attributes);var l=new xf.Model(this.context.gl,wn(wn({},this.getShaders()),{},{id:s,geometry:a,defines:wn(wn(wn({},f.defines),u?.defines),{},{HAS_UV_REGIONS:a.attributes.uvRegions}),parameters:u?.parameters,isInstanced:!0}));return l}},{key:"updatePbrMaterialUniforms",value:function(a){var i=this.state.model;if(i){var s=this.props.mesh,o=this.parseMaterial(a,s);this.setState({materialParser:o}),i.setUniforms(o.uniforms)}}},{key:"parseMaterial",value:function(a,i){var s,o=Boolean(a.pbrMetallicRoughness&&a.pbrMetallicRoughness.baseColorTexture);return(s=this.state.materialParser)===null||s===void 0||s.delete(),new Ip(this.context.gl,{attributes:{NORMAL:i.attributes.normals,TEXCOORD_0:i.attributes.texCoords},material:wn({unlit:o},a),pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}},{key:"calculateFeatureIdsPickingColors",value:function(a){for(var i=this.props.featureIds,s=new Uint8ClampedArray(i.length*a.size),o=[],u=0;u<i.length;u++)this.encodePickingColor(i[u],o),s[u*3]=o[0],s[u*3+1]=o[1],s[u*3+2]=o[2];a.value=s}},{key:"finalizeState",value:function(a){var i;(0,yi.default)((0,Cn.default)(t.prototype),"finalizeState",this).call(this,a),(i=this.state.materialParser)===null||i===void 0||i.delete(),this.setState({materialParser:null})}}]),t}(NE.SimpleMeshLayer);(0,Af.default)(Tf,"layerName","MeshLayer");(0,Af.default)(Tf,"defaultProps",A9);var WE=m(Y()),jp=m(K());var qs=m(Y()),Jr=m(K());var Rp=m(De()),x9=function(r){return typeof r=="boolean"},Ws=function(r){return typeof r=="function"},bi=function(r){return r!==null&&(0,Rp.default)(r)==="object"},Lp=function(r){return bi(r)&&r.constructor==={}.constructor};var GE=function(r){return r&&typeof r[Symbol.iterator]=="function"},UE=function(r){return r&&typeof r[Symbol.asyncIterator]=="function"};var lr=function(r){return typeof Response<"u"&&r instanceof Response||r&&r.arrayBuffer&&r.text&&r.json};var cr=function(r){return typeof Blob<"u"&&r instanceof Blob},jE=function(r){return r&&(0,Rp.default)(r)==="object"&&r.isBuffer};var T9=function(r){return typeof ReadableStream<"u"&&r instanceof ReadableStream||bi(r)&&Ws(r.tee)&&Ws(r.cancel)&&Ws(r.getReader)};var M9=function(r){return bi(r)&&Ws(r.read)&&Ws(r.pipe)&&x9(r.readable)},Mf=function(r){return T9(r)||M9(r)};var E9=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,S9=/^([-\w.]+\/[-\w.+]+)/;function HE(e){var r=S9.exec(e);return r?r[1]:e}function Fp(e){var r=E9.exec(e);return r?r[1]:""}var w9=/\?.*/;function ga(e){if(lr(e)){var r=kp(e.url||""),t=e.headers.get("content-type")||"";return{url:r,type:HE(t)||Fp(r)}}return cr(e)?{url:kp(e.name||""),type:e.type||""}:typeof e=="string"?{url:kp(e),type:Fp(e)}:{url:"",type:""}}function VE(e){return lr(e)?e.headers["content-length"]||-1:cr(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function kp(e){return e.replace(w9,"")}function Ef(e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,qs.default)(Jr.default.mark(function e(r){var t,n,a,i,s,o,u;return Jr.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!lr(r)){l.next=2;break}return l.abrupt("return",r);case 2:return t={},n=VE(r),n>=0&&(t["content-length"]=String(n)),a=ga(r),i=a.url,s=a.type,s&&(t["content-type"]=s),l.next=9,O9(r);case 9:return o=l.sent,o&&(t["x-first-bytes"]=o),typeof r=="string"&&(r=new TextEncoder().encode(r)),u=new Response(r,{headers:t}),Object.defineProperty(u,"url",{value:i}),l.abrupt("return",u);case 15:case"end":return l.stop()}},e)})),Dp.apply(this,arguments)}function zE(e){return Np.apply(this,arguments)}function Np(){return Np=(0,qs.default)(Jr.default.mark(function e(r){var t;return Jr.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r.ok){a.next=5;break}return a.next=3,C9(r);case 3:throw t=a.sent,new Error(t);case 5:case"end":return a.stop()}},e)})),Np.apply(this,arguments)}function C9(e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,qs.default)(Jr.default.mark(function e(r){var t,n,a;return Jr.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t="Failed to fetch resource ".concat(r.url," (").concat(r.status,"): "),s.prev=1,n=r.headers.get("Content-Type"),a=r.statusText,!n.includes("application/json")){s.next=11;break}return s.t0=a,s.t1=" ",s.next=9,r.text();case 9:s.t2=s.sent,a=s.t0+=s.t1.concat.call(s.t1,s.t2);case 11:t+=a,t=t.length>60?"".concat(t.slice(0,60),"..."):t,s.next=17;break;case 15:s.prev=15,s.t3=s.catch(1);case 17:return s.abrupt("return",t);case 18:case"end":return s.stop()}},e,null,[[1,15]])})),Gp.apply(this,arguments)}function O9(e){return Up.apply(this,arguments)}function Up(){return Up=(0,qs.default)(Jr.default.mark(function e(r){var t,n,a,i;return Jr.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=5,typeof r!="string"){o.next=3;break}return o.abrupt("return","data:,".concat(r.slice(0,t)));case 3:if(!(r instanceof Blob)){o.next=8;break}return n=r.slice(0,5),o.next=7,new Promise(function(u){var f=new FileReader;f.onload=function(l){var c;return u(l==null||(c=l.target)===null||c===void 0?void 0:c.result)},f.readAsDataURL(n)});case 7:return o.abrupt("return",o.sent);case 8:if(!(r instanceof ArrayBuffer)){o.next=12;break}return a=r.slice(0,t),i=B9(a),o.abrupt("return","data:base64,".concat(i));case 12:return o.abrupt("return",null);case 13:case"end":return o.stop()}},e)})),Up.apply(this,arguments)}function B9(e){for(var r="",t=new Uint8Array(e),n=0;n<t.byteLength;n++)r+=String.fromCharCode(t[n]);return btoa(r)}function Vp(e,r){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,WE.default)(jp.default.mark(function e(r,t){var n;return jp.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(typeof r!="string"){i.next=7;break}return r=Wc(r),n=t,t!=null&&t.fetch&&typeof t?.fetch!="function"&&(n=t.fetch),i.next=6,fetch(r,n);case 6:return i.abrupt("return",i.sent);case 7:return i.next=9,Ef(r);case 9:return i.abrupt("return",i.sent);case 10:case"end":return i.stop()}},e)})),Hp.apply(this,arguments)}var ZE=m(J());var zp=m(z()),Wp=m(q());var qp=new Mr({id:"loaders.gl"}),qE=function(){function e(){(0,zp.default)(this,e)}return(0,Wp.default)(e,[{key:"log",value:function(){return function(){}}},{key:"info",value:function(){return function(){}}},{key:"warn",value:function(){return function(){}}},{key:"error",value:function(){return function(){}}}]),e}(),JE=function(){function e(){(0,zp.default)(this,e),b(this,"console",void 0),this.console=console}return(0,Wp.default)(e,[{key:"log",value:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=this.console.log).bind.apply(t,[this.console].concat(a))}},{key:"info",value:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=this.console.info).bind.apply(t,[this.console].concat(a))}},{key:"warn",value:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=this.console.warn).bind.apply(t,[this.console].concat(a))}},{key:"error",value:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=this.console.error).bind.apply(t,[this.console].concat(a))}}]),e}();var Jp={fetch:null,mimeType:void 0,nothrow:!1,log:new JE,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:tr,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},XE={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function eS(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=P9(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function P9(e,r){if(e){if(typeof e=="string")return KE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KE(e,r)}}function KE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function YE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Sf(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?YE(Object(t),!0).forEach(function(n){(0,ZE.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):YE(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Xp(){globalThis.loaders=globalThis.loaders||{};var e=globalThis.loaders;return e._state=e._state||{},e._state}var tS=function(){var r=Xp();return r.globalOptions=r.globalOptions||Sf({},Jp),r.globalOptions};function rS(e,r,t,n){return t=t||[],t=Array.isArray(t)?t:[t],I9(e,t),L9(r,e,n)}function wf(e,r){var t=tS(),n=e||t;return typeof n.fetch=="function"?n.fetch:bi(n.fetch)?function(a){return Vp(a,n)}:r!=null&&r.fetch?r?.fetch:Vp}function I9(e,r){QE(e,null,Jp,XE,r);var t=eS(r),n;try{for(t.s();!(n=t.n()).done;){var a=n.value,i=e&&e[a.id]||{},s=a.options&&a.options[a.id]||{},o=a.deprecatedOptions&&a.deprecatedOptions[a.id]||{};QE(i,a.id,s,o,r)}}catch(u){t.e(u)}finally{t.f()}}function QE(e,r,t,n,a){var i=r||"Top level",s=r?"".concat(r,"."):"";for(var o in e){var u=!r&&bi(e[o]),f=o==="baseUri"&&!r,l=o==="workerUrl"&&r;if(!(o in t)&&!f&&!l){if(o in n)qp.warn("".concat(i," loader option '").concat(s).concat(o,"' no longer supported, use '").concat(n[o],"'"))();else if(!u){var c=R9(o,a);qp.warn("".concat(i," loader option '").concat(s).concat(o,"' not recognized. ").concat(c))()}}}}function R9(e,r){var t=e.toLowerCase(),n="",a=eS(r),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;for(var o in s.options){if(e===o)return"Did you mean '".concat(s.id,".").concat(o,"'?");var u=o.toLowerCase(),f=t.startsWith(u)||u.startsWith(t);f&&(n=n||"Did you mean '".concat(s.id,".").concat(o,"'?"))}}}catch(l){a.e(l)}finally{a.f()}return n}function L9(e,r,t){var n=e.options||{},a=Sf({},n);return F9(a,t),a.log===null&&(a.log=new qE),$E(a,tS()),$E(a,r),a}function $E(e,r){for(var t in r)if(t in r){var n=r[t];Lp(n)&&Lp(e[t])?e[t]=Sf(Sf({},e[t]),r[t]):e[t]=r[t]}}function F9(e,r){r&&!("baseUri"in e)&&(e.baseUri=r)}var aS=m(J());function nS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Cf(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?nS(Object(t),!0).forEach(function(n){(0,aS.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Js(e){var r;if(!e)return!1;Array.isArray(e)&&(e=e[0]);var t=Array.isArray((r=e)===null||r===void 0?void 0:r.extensions);return t}function Kp(e){var r,t;ne(e,"null loader"),ne(Js(e),"invalid loader");var n;return Array.isArray(e)&&(n=e[1],e=e[0],e=Cf(Cf({},e),{},{options:Cf(Cf({},e.options),n)})),((r=e)!==null&&r!==void 0&&r.parseTextSync||(t=e)!==null&&t!==void 0&&t.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}var k9=function(){var r=Xp();return r.loaderRegistry=r.loaderRegistry||[],r.loaderRegistry};function iS(){return k9()}var hS=m(J()),dS=m(De()),pS=m(wt()),mS=m(Y()),Qp=m(K());var sS=new Mr({id:"loaders.gl"});function oS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function uS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?oS(Object(t),!0).forEach(function(n){(0,hS.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Xs(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=D9(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function D9(e,r){if(e){if(typeof e=="string")return fS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fS(e,r)}}function fS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var N9=/\.([^.]+)$/;function vS(e){return $p.apply(this,arguments)}function $p(){return $p=(0,mS.default)(Qp.default.mark(function e(r){var t,n,a,i,s=arguments;return Qp.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=s.length>1&&s[1]!==void 0?s[1]:[],n=s.length>2?s[2]:void 0,a=s.length>3?s[3]:void 0,gS(r)){u.next=5;break}return u.abrupt("return",null);case 5:if(i=lS(r,t,uS(uS({},n),{},{nothrow:!0}),a),!i){u.next=8;break}return u.abrupt("return",i);case 8:if(!cr(r)){u.next=13;break}return u.next=11,r.slice(0,10).arrayBuffer();case 11:r=u.sent,i=lS(r,t,n,a);case 13:if(!(!i&&!(n!=null&&n.nothrow))){u.next=15;break}throw new Error(yS(r));case 15:return u.abrupt("return",i);case 16:case"end":return u.stop()}},e)})),$p.apply(this,arguments)}function lS(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!gS(e))return null;if(r&&!Array.isArray(r))return Kp(r);var a=[];if(r&&(a=a.concat(r)),!(t!=null&&t.ignoreRegisteredLoaders)){var i;(i=a).push.apply(i,(0,pS.default)(iS()))}U9(a);var s=G9(e,a,t,n);if(!s&&!(t!=null&&t.nothrow))throw new Error(yS(e));return s}function G9(e,r,t,n){var a=ga(e),i=a.url,s=a.type,o=i||n?.url,u=null,f="";if(t!=null&&t.mimeType&&(u=Yp(r,t?.mimeType),f="match forced by supplied MIME type ".concat(t?.mimeType)),u=u||j9(r,o),f=f||(u?"matched url ".concat(o):""),u=u||Yp(r,s),f=f||(u?"matched MIME type ".concat(s):""),u=u||V9(r,e),f=f||(u?"matched initial data ".concat(bS(e)):""),u=u||Yp(r,t?.fallbackMimeType),f=f||(u?"matched fallback MIME type ".concat(s):""),f){var l;sS.log(1,"selectLoader selected ".concat((l=u)===null||l===void 0?void 0:l.name,": ").concat(f,"."))}return u}function gS(e){return!(e instanceof Response&&e.status===204)}function yS(e){var r=ga(e),t=r.url,n=r.type,a="No valid loader found (";a+=t?"".concat(cn.filename(t),", "):"no url provided, ",a+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");var i=e?bS(e):"";return a+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",a+=")",a}function U9(e){var r=Xs(e),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;Kp(n)}}catch(a){r.e(a)}finally{r.f()}}function j9(e,r){var t=r&&N9.exec(r),n=t&&t[1];return n?H9(e,n):null}function H9(e,r){r=r.toLowerCase();var t=Xs(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value,i=Xs(a.extensions),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;if(o.toLowerCase()===r)return a}}catch(u){i.e(u)}finally{i.f()}}}catch(u){t.e(u)}finally{t.f()}return null}function Yp(e,r){var t=Xs(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(a.mimeTypes&&a.mimeTypes.includes(r)||r==="application/x.".concat(a.id))return a}}catch(i){t.e(i)}finally{t.f()}return null}function V9(e,r){if(!r)return null;var t=Xs(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(typeof r=="string"){if(z9(r,a))return a}else if(ArrayBuffer.isView(r)){if(cS(r.buffer,r.byteOffset,a))return a}else if(r instanceof ArrayBuffer){var i=0;if(cS(r,i,a))return a}}}catch(s){t.e(s)}finally{t.f()}return null}function z9(e,r){if(r.testText)return r.testText(e);var t=Array.isArray(r.tests)?r.tests:[r.tests];return t.some(function(n){return e.startsWith(n)})}function cS(e,r,t){var n=Array.isArray(t.tests)?t.tests:[t.tests];return n.some(function(a){return W9(e,r,t,a)})}function W9(e,r,t,n){if(n instanceof ArrayBuffer)return kc(n,e,n.byteLength);switch((0,dS.default)(n)){case"function":return n(e,t);case"string":var a=Zp(e,r,n.length);return n===a;default:return!1}}function bS(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;if(typeof e=="string")return e.slice(0,r);if(ArrayBuffer.isView(e))return Zp(e.buffer,e.byteOffset,r);if(e instanceof ArrayBuffer){var t=0;return Zp(e,t,r)}return""}function Zp(e,r,t){if(e.byteLength<r+t)return"";for(var n=new DataView(e),a="",i=0;i<t;i++)a+=String.fromCharCode(n.getUint8(r+i));return a}var IS=m(De()),mm=m(Y()),Ys=m(K());var ES=m(Y()),lm=m(K());var em=m(K()),q9=em.default.mark(tm),J9=256*1024;function tm(e,r){var t,n,a,i,s;return em.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=r?.chunkSize||J9,n=0,a=new TextEncoder;case 3:if(!(n<e.length)){u.next=11;break}return i=Math.min(e.length-n,t),s=e.slice(n,n+i),n+=i,u.next=9,a.encode(s);case 9:u.next=3;break;case 11:case"end":return u.stop()}},q9)}var rm=m(K()),X9=rm.default.mark(nm),K9=256*1024;function nm(e){var r,t,n,a,i,s,o,u,f=arguments;return rm.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=f.length>1&&f[1]!==void 0?f[1]:{},t=r.chunkSize,n=t===void 0?K9:t,a=0;case 3:if(!(a<e.byteLength)){c.next=14;break}return i=Math.min(e.byteLength-a,n),s=new ArrayBuffer(i),o=new Uint8Array(e,a,i),u=new Uint8Array(s),u.set(o),a+=i,c.next=12,s;case 12:c.next=3;break;case 14:case"end":return c.stop()}},X9)}var _S=m(Uc()),AS=m(jc()),am=m(K()),Y9=1024*1024;function xS(e,r){return im.apply(this,arguments)}function im(){return im=(0,AS.default)(am.default.mark(function e(r,t){var n,a,i,s;return am.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=t?.chunkSize||Y9,a=0;case 2:if(!(a<r.size)){u.next=12;break}return i=a+n,u.next=6,(0,_S.default)(r.slice(a,i).arrayBuffer());case 6:return s=u.sent,a=i,u.next=10,s;case 10:u.next=2;break;case 12:case"end":return u.stop()}},e)})),im.apply(this,arguments)}var TS=m(Mc()),Of=m(Uc()),um=m(jc()),Ks=m(K());function fm(e,r){return tr?Q9(e,r):$9(e,r)}function Q9(e,r){return sm.apply(this,arguments)}function sm(){return sm=(0,um.default)(Ks.default.mark(function e(r,t){var n,a,i,s,o,u;return Ks.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=r.getReader(),l.prev=1;case 2:return i=a||n.read(),t!=null&&t._streamReadAhead&&(a=n.read()),l.next=7,(0,Of.default)(i);case 7:if(s=l.sent,o=s.done,u=s.value,!o){l.next=12;break}return l.abrupt("return");case 12:return l.next=14,Po(u);case 14:l.next=2;break;case 16:l.next=21;break;case 18:l.prev=18,l.t0=l.catch(1),n.releaseLock();case 21:case"end":return l.stop()}},e,null,[[1,18]])})),sm.apply(this,arguments)}function $9(e,r){return om.apply(this,arguments)}function om(){return om=(0,um.default)(Ks.default.mark(function e(r,t){var n,a,i,s,o,u;return Ks.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=!1,a=!1,l.prev=2,s=(0,TS.default)(r);case 4:return l.next=6,(0,Of.default)(s.next());case 6:if(!(n=!(o=l.sent).done)){l.next=13;break}return u=o.value,l.next=10,Po(u);case 10:n=!1,l.next=4;break;case 13:l.next=19;break;case 15:l.prev=15,l.t0=l.catch(2),a=!0,i=l.t0;case 19:if(l.prev=19,l.prev=20,!(n&&s.return!=null)){l.next=24;break}return l.next=24,(0,Of.default)(s.return());case 24:if(l.prev=24,!a){l.next=27;break}throw i;case 27:return l.finish(24);case 28:return l.finish(19);case 29:case"end":return l.stop()}},e,null,[[2,15,19,29],[20,,24,28]])})),om.apply(this,arguments)}function MS(e,r){if(typeof e=="string")return tm(e,r);if(e instanceof ArrayBuffer)return nm(e,r);if(cr(e))return xS(e,r);if(Mf(e))return fm(e,r);if(lr(e)){var t=e;return fm(t.body,r)}throw new Error("makeIterator")}var SS="Cannot convert supplied data type";function Z9(e,r,t){if(r.text&&typeof e=="string")return e;if(jE(e)&&(e=e.buffer),e instanceof ArrayBuffer){var n=e;if(r.text&&!r.binary){var a=new TextDecoder("utf8");return a.decode(n)}return n}if(ArrayBuffer.isView(e)){if(r.text&&!r.binary){var i=new TextDecoder("utf8");return i.decode(e)}var s=e.buffer,o=e.byteLength||e.length;return(e.byteOffset!==0||o!==s.byteLength)&&(s=s.slice(e.byteOffset,e.byteOffset+o)),s}throw new Error(SS)}function wS(e,r,t){return cm.apply(this,arguments)}function cm(){return cm=(0,ES.default)(lm.default.mark(function e(r,t,n){var a,i;return lm.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a=r instanceof ArrayBuffer||ArrayBuffer.isView(r),!(typeof r=="string"||a)){o.next=3;break}return o.abrupt("return",Z9(r,t,n));case 3:if(!cr(r)){o.next=7;break}return o.next=6,Ef(r);case 6:r=o.sent;case 7:if(!lr(r)){o.next=21;break}return i=r,o.next=11,zE(i);case 11:if(!t.binary){o.next=17;break}return o.next=14,i.arrayBuffer();case 14:o.t0=o.sent,o.next=20;break;case 17:return o.next=19,i.text();case 19:o.t0=o.sent;case 20:return o.abrupt("return",o.t0);case 21:if(Mf(r)&&(r=MS(r,n)),!(GE(r)||UE(r))){o.next=24;break}return o.abrupt("return",zc(r));case 24:throw new Error(SS);case 25:case"end":return o.stop()}},e)})),cm.apply(this,arguments)}var hm=m(wt()),OS=m(J());function CS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function eU(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?CS(Object(t),!0).forEach(function(n){(0,OS.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function BS(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(t)return t;var n=eU({fetch:wf(r,e)},e);return Array.isArray(n.loaders)||(n.loaders=null),n}function PS(e,r){if(!r&&e&&!Array.isArray(e))return e;var t;if(e&&(t=Array.isArray(e)?e:[e]),r&&r.loaders){var n=Array.isArray(r.loaders)?r.loaders:[r.loaders];t=t?[].concat((0,hm.default)(t),(0,hm.default)(n)):n}return t&&t.length?t:null}function Bf(e,r,t,n){return dm.apply(this,arguments)}function dm(){return dm=(0,mm.default)(Ys.default.mark(function e(r,t,n,a){var i,s,o,u,f;return Ys.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return st(!a||(0,IS.default)(a)==="object"),t&&!Array.isArray(t)&&!Js(t)&&(a=void 0,n=t,t=void 0),c.next=4,r;case 4:return r=c.sent,n=n||{},i=ga(r),s=i.url,o=t,u=PS(o,a),c.next=11,vS(r,u,n);case 11:if(f=c.sent,f){c.next=14;break}return c.abrupt("return",null);case 14:return n=rS(n,f,u,s),a=BS({url:s,parse:Bf,loaders:u},n,a),c.next=18,tU(f,r,n,a);case 18:return c.abrupt("return",c.sent);case 19:case"end":return c.stop()}},e)})),dm.apply(this,arguments)}function tU(e,r,t,n){return pm.apply(this,arguments)}function pm(){return pm=(0,mm.default)(Ys.default.mark(function e(r,t,n,a){var i,s,o,u,f,l,c,h;return Ys.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return Ec(r),lr(t)&&(i=t,s=i.ok,o=i.redirected,u=i.status,f=i.statusText,l=i.type,c=i.url,h=Object.fromEntries(i.headers.entries()),a.response={headers:h,ok:s,redirected:o,status:u,statusText:f,type:l,url:c}),p.next=4,wS(t,r,n);case 4:if(t=p.sent,!(r.parseTextSync&&typeof t=="string")){p.next=8;break}return n.dataType="text",p.abrupt("return",r.parseTextSync(t,n,a,r));case 8:if(!Rc(r,n)){p.next=12;break}return p.next=11,Lc(r,t,n,a,Bf);case 11:return p.abrupt("return",p.sent);case 12:if(!(r.parseText&&typeof t=="string")){p.next=16;break}return p.next=15,r.parseText(t,n,a,r);case 15:return p.abrupt("return",p.sent);case 16:if(!r.parse){p.next=20;break}return p.next=19,r.parse(t,n,a,r);case 19:return p.abrupt("return",p.sent);case 20:throw st(!r.parseSync),new Error("".concat(r.id," loader - no parser found and worker is disabled"));case 22:case"end":return p.stop()}},e)})),pm.apply(this,arguments)}var RS=m(Y()),vm=m(K());function hr(e,r,t,n){return gm.apply(this,arguments)}function gm(){return gm=(0,RS.default)(vm.default.mark(function e(r,t,n,a){var i,s;return vm.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!Array.isArray(t)&&!Js(t)&&(a=void 0,n=t,t=void 0),i=wf(n),s=r,typeof r!="string"){u.next=7;break}return u.next=6,i(r);case 6:s=u.sent;case 7:if(!cr(r)){u.next=11;break}return u.next=10,i(r);case 10:s=u.sent;case 11:return u.next=13,Bf(s,t,n);case 13:return u.abrupt("return",u.sent);case 14:case"end":return u.stop()}},e)})),gm.apply(this,arguments)}var Wm=m(ve()),Vf=m(Y()),nC=m(J()),aC=m(z()),iC=m(q()),_a=m(K());function ym(e){if(Array.isArray(e))return e}function bm(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,s,o;try{for(t=t.call(e);!(a=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));a=!0);}catch(u){i=!0,o=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw o}}return n}}function Pf(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _m(e,r){if(e){if(typeof e=="string")return Pf(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pf(e,r)}}function Am(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xm(e,r){return ym(e)||bm(e,r)||_m(e,r)||Am()}function Tm(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function LS(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mm(e,r,t){return r&&LS(e.prototype,r),t&&LS(e,t),e}function Yt(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Xr=6378137,Kr=6378137,Yr=6356752314245179e-9,rU={radii:[Xr,Kr,Yr],radiiSquared:[Xr*Xr,Kr*Kr,Yr*Yr],oneOverRadii:[1/Xr,1/Kr,1/Yr],oneOverRadiiSquared:[1/(Xr*Xr),1/(Kr*Kr),1/(Yr*Yr)],maximumRadius:Math.max(Xr,Kr,Yr),centerToleranceSquared:.1};function If(e){return e}var Fce=new O;function nU(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:If;return"longitude"in e?(r[0]=t(e.longitude),r[1]=t(e.latitude),r[2]=e.height):"x"in e?(r[0]=t(e.x),r[1]=t(e.y),r[2]=e.z):(r[0]=t(e[0]),r[1]=t(e[1]),r[2]=e[2]),r}function FS(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return nU(e,r,Se._cartographicRadians?If:xd)}function aU(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:If;return"longitude"in r?(r.longitude=t(e[0]),r.latitude=t(e[1]),r.height=e[2]):"x"in r?(r.x=t(e[0]),r.y=t(e[1]),r.z=e[2]):(r[0]=t(e[0]),r[1]=t(e[1]),r[2]=e[2]),r}function kS(e,r){return aU(e,r,Se._cartographicRadians?If:Td)}var _i=new O,iU=new O,sU=new O;function Em(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=r.oneOverRadii,a=r.oneOverRadiiSquared,i=r.centerToleranceSquared;_i.from(e);var s=_i.x,o=_i.y,u=_i.z,f=n.x,l=n.y,c=n.z,h=s*s*f*f,d=o*o*l*l,p=u*u*c*c,v=h+d+p,g=Math.sqrt(1/v);if(Number.isFinite(g)){var y=iU;if(y.copy(e).scale(g),v<i)return y.to(t);var _=a.x,T=a.y,x=a.z,E=sU;E.set(y.x*_*2,y.y*T*2,y.z*x*2);var C=(1-g)*_i.len()/(.5*E.len()),L=0,w,S,A,I;do{C-=L,w=1/(1+C*_),S=1/(1+C*T),A=1/(1+C*x);var F=w*w,D=S*S,N=A*A,B=F*w,P=D*S,R=N*A;I=h*F+d*D+p*N-1;var V=h*B*_+d*P*T+p*R*x,G=-2*V;L=I/G}while(Math.abs(I)>Ar.EPSILON12);return _i.scale([w,S,A]).to(t)}}var DS=1e-14,oU=new O,NS={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Sm={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Qr={east:new O,north:new O,up:new O,west:new O,south:new O,down:new O},uU=new O,fU=new O,lU=new O;function Rf(e,r,t,n,a,i){var s=NS[r]&&NS[r][t];de(s&&(!n||n===s));var o,u,f,l=oU.copy(a),c=nt(l.x,0,DS)&&nt(l.y,0,DS);if(c){var h=Math.sign(l.z);o=uU.fromArray(Sm[r]),r!=="east"&&r!=="west"&&o.scale(h),u=fU.fromArray(Sm[t]),t!=="east"&&t!=="west"&&u.scale(h),f=lU.fromArray(Sm[n]),n!=="east"&&n!=="west"&&f.scale(h)}else{var d=Qr.up,p=Qr.east,v=Qr.north;p.set(-l.y,l.x,0).normalize(),e.geodeticSurfaceNormal(l,d),v.copy(d).cross(p);var g=Qr.down,y=Qr.west,_=Qr.south;g.copy(d).scale(-1),y.copy(p).scale(-1),_.copy(v).scale(-1),o=Qr[r],u=Qr[t],f=Qr[n]}return i[0]=o.x,i[1]=o.y,i[2]=o.z,i[3]=0,i[4]=u.x,i[5]=u.y,i[6]=u.z,i[7]=0,i[8]=f.x,i[9]=f.y,i[10]=f.z,i[11]=0,i[12]=l.x,i[13]=l.y,i[14]=l.z,i[15]=1,i}var Lf=new O,GS=new O,cU=new O,dr=new O,hU=new O,Ff=new O;var we=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;Tm(this,e),Yt(this,"radii",void 0),Yt(this,"radiiSquared",void 0),Yt(this,"radiiToTheFourth",void 0),Yt(this,"oneOverRadii",void 0),Yt(this,"oneOverRadiiSquared",void 0),Yt(this,"minimumRadius",void 0),Yt(this,"maximumRadius",void 0),Yt(this,"centerToleranceSquared",Ar.EPSILON1),Yt(this,"squaredXOverSquaredZ",void 0),de(r>=0),de(t>=0),de(n>=0),this.radii=new O(r,t,n),this.radiiSquared=new O(r*r,t*t,n*n),this.radiiToTheFourth=new O(r*r*r*r,t*t*t*t,n*n*n*n),this.oneOverRadii=new O(r===0?0:1/r,t===0?0:1/t,n===0?0:1/n),this.oneOverRadiiSquared=new O(r===0?0:1/(r*r),t===0?0:1/(t*t),n===0?0:1/(n*n)),this.minimumRadius=Math.min(r,t,n),this.maximumRadius=Math.max(r,t,n),this.radiiSquared.z!==0&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Mm(e,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],a=GS,i=cU,s=xm(t,3),o=s[2];this.geodeticSurfaceNormalCartographic(t,a),i.copy(this.radiiSquared).scale(a);var u=Math.sqrt(a.dot(i));return i.scale(1/u),a.scale(o),i.add(a),i.to(n)}},{key:"cartesianToCartographic",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];Ff.from(t);var a=this.scaleToGeodeticSurface(Ff,dr);if(a){var i=this.geodeticSurfaceNormal(a,GS),s=hU;s.copy(Ff).subtract(a);var o=Math.atan2(i.y,i.x),u=Math.asin(i.z),f=Math.sign(As(s,Ff))*fd(s);return kS([o,u,f],n)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new ae;return Rf(this,"east","north","up",t,n)}},{key:"localFrameToFixedFrame",value:function(t,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new ae;return Rf(this,t,n,a,i,s)}},{key:"geocentricSurfaceNormal",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Lf.from(t).normalize().to(n)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],a=FS(t),i=a[0],s=a[1],o=Math.cos(s);return Lf.set(o*Math.cos(i),o*Math.sin(i),Math.sin(s)).normalize(),Lf.to(n)}},{key:"geodeticSurfaceNormal",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Lf.from(t).scale(this.oneOverRadiiSquared).normalize().to(n)}},{key:"scaleToGeodeticSurface",value:function(t,n){return Em(t,this,n)}},{key:"scaleToGeocentricSurface",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];dr.from(t);var a=dr.x,i=dr.y,s=dr.z,o=this.oneOverRadiiSquared,u=1/Math.sqrt(a*a*o.x+i*i*o.y+s*s*o.z);return dr.multiplyScalar(u).to(n)}},{key:"transformPositionToScaledSpace",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return dr.from(t).scale(this.oneOverRadii).to(n)}},{key:"transformPositionFromScaledSpace",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return dr.from(t).scale(this.radii).to(n)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];de(nt(this.radii.x,this.radii.y,Ar.EPSILON15)),de(this.radii.z>0),dr.from(t);var i=dr.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-n))return dr.set(0,0,i).to(a)}}]),e}();Yt(we,"WGS84",new we(Xr,Kr,Yr));var WS=m(z()),qS=m(q());var HS=m(z()),VS=m(q());var US=m(z());var jS=function e(r,t,n){(0,US.default)(this,e),b(this,"item",void 0),b(this,"previous",void 0),b(this,"next",void 0),this.item=r,this.previous=t,this.next=n};var zS=function(){function e(){(0,HS.default)(this,e),b(this,"head",null),b(this,"tail",null),b(this,"_length",0)}return(0,VS.default)(e,[{key:"length",get:function(){return this._length}},{key:"add",value:function(t){var n=new jS(t,this.tail,null);return this.tail?(this.tail.next=n,this.tail=n):(this.head=n,this.tail=n),++this._length,n}},{key:"remove",value:function(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)}},{key:"splice",value:function(t,n){t!==n&&(this.remove(n),this._insert(t,n))}},{key:"_insert",value:function(t,n){var a=t.next;t.next=n,this.tail===t?this.tail=n:a.previous=n,n.next=a,n.previous=t,++this._length}}]),e}();function wm(e){return e!=null}var JS=function(){function e(){(0,WS.default)(this,e),b(this,"_list",void 0),b(this,"_sentinel",void 0),b(this,"_trimTiles",void 0),this._list=new zS,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return(0,qS.default)(e,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(t){var n=t._cacheNode;wm(n)&&this._list.splice(this._sentinel,n)}},{key:"add",value:function(t,n,a){wm(n._cacheNode)||(n._cacheNode=this._list.add(n),a&&a(t,n))}},{key:"unloadTile",value:function(t,n,a){var i=n._cacheNode;wm(i)&&(this._list.remove(i),n._cacheNode=void 0,a&&a(t,n))}},{key:"unloadTiles",value:function(t,n){var a=this._trimTiles;this._trimTiles=!1;for(var i=this._list,s=t.maximumMemoryUsage*1024*1024,o=this._sentinel,u=i.head;u!==o&&(t.gpuMemoryUsageInBytes>s||a);){var f=u.item;u=u.next,this.unloadTile(t,f,n)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),e}();function XS(e,r){ne(e),ne(r);var t=r.rtcCenter,n=r.gltfUpAxis,a=e.computedTransform,i=e.boundingVolume.center,s=new ae(a);switch(t&&s.translate(t),n){case"Z":break;case"Y":var o=new ae().rotateX(Math.PI/2);s=s.multiplyRight(o);break;case"X":var u=new ae().rotateY(-Math.PI/2);s=s.multiplyRight(u);break;default:break}r.isQuantized&&s.translate(r.quantizedVolumeOffset).scale(r.quantizedVolumeScale);var f=new O(i);r.cartesianModelMatrix=s,r.cartesianOrigin=f;var l=we.WGS84.cartesianToCartographic(f,new O),c=we.WGS84.eastNorthUpToFixedFrame(f),h=c.invert();r.cartographicModelMatrix=h.multiplyRight(s),r.cartographicOrigin=l,r.coordinateSystem||(r.modelMatrix=r.cartographicModelMatrix)}var Om=m(ve());function dU(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=pU(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function pU(e,r){if(e){if(typeof e=="string")return KS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KS(e,r)}}function KS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var YS=new O,Cm=new O,Bm=new Pt([new We,new We,new We,new We,new We,new We]);function $S(e,r){var t=e.cameraDirection,n=e.cameraUp,a=e.height,i=e.distanceScales.metersPerUnit,s=kf(e,e.center),o=we.WGS84.eastNorthUpToFixedFrame(s),u=e.unprojectPosition(e.cameraPosition),f=we.WGS84.cartographicToCartesian(u,new O),l=new O(o.transformAsVector(new O(t).scale(i))).normalize(),c=new O(o.transformAsVector(new O(n).scale(i))).normalize();mU(e);var h=e.constructor,d=e.longitude,p=e.latitude,v=e.width,g=e.bearing,y=e.zoom,_=new h({longitude:d,latitude:p,height:a,width:v,bearing:g,zoom:y,pitch:0});return{camera:{position:f,direction:l,up:c},viewport:e,topDownViewport:_,height:a,cullingVolume:Bm,frameNumber:r,sseDenominator:1.15}}function ZS(e,r,t){if(t===0||e.length<=t)return[e,[]];var n=[],a=r.viewport,i=a.longitude,s=a.latitude,o=dU(e.entries()),u;try{for(o.s();!(u=o.n()).done;){var f=(0,Om.default)(u.value,2),l=f[0],c=f[1],h=(0,Om.default)(c.header.mbs,2),d=h[0],p=h[1],v=Math.abs(i-d),g=Math.abs(s-p),y=Math.sqrt(g*g+v*v);n.push([l,y])}}catch(L){o.e(L)}finally{o.f()}for(var _=n.sort(function(L,w){return L[1]-w[1]}),T=[],x=0;x<t;x++)T.push(e[_[x][0]]);for(var E=[],C=t;C<_.length;C++)E.push(e[_[C][0]]);return[T,E]}function mU(e){var r=e.getFrustumPlanes(),t=QS(r.near,e.cameraPosition),n=kf(e,t),a=kf(e,e.cameraPosition,Cm),i=0;Bm.planes[i++].fromPointNormal(n,YS.copy(n).subtract(a));for(var s in r)if(s!=="near"){var o=r[s],u=QS(o,t,Cm),f=kf(e,u,Cm);Bm.planes[i++].fromPointNormal(f,YS.copy(n).subtract(f))}}function QS(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new O,n=e.normal.dot(r);return t.copy(e.normal).scale(e.distance-n).add(r),t}function kf(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new O,n=e.unprojectPosition(r);return we.WGS84.cartographicToCartesian(n,t)}var tw=m(ve());var vU=6378137,gU=6378137,Pm=6356752314245179e-9,ew=new O;function rw(e,r){if(e instanceof sa){var t=e.halfAxes,n=yU(t);return Math.log2(Pm/(n+r[2]))}else if(e instanceof yn){var a=e.radius;return Math.log2(Pm/(a+r[2]))}else if(e.width&&e.height){var i=e.width,s=e.height,o=Math.log2(vU/i),u=Math.log2(gU/s);return(o+u)/2}return 1}function Im(e,r,t){var n=we.WGS84.cartographicToCartesian([e.xmax,e.ymax,e.zmax],new O),a=Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)+Math.pow(n[2]-t[2],2));return Math.log2(Pm/(a+r[2]))}function nw(e,r,t){var n=(0,tw.default)(e,4),a=n[0],i=n[1],s=n[2],o=n[3];return Im({xmin:a,xmax:s,ymin:i,ymax:o,zmin:0,zmax:0},r,t)}function yU(e){e.getColumn(0,ew);var r=e.getColumn(1),t=e.getColumn(2),n=ew.add(r).add(t),a=n.len();return a}var Nm=m(J()),Mw=m(Y()),Ew=m(z()),Sw=m(q()),Dm=m(K());var Et={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},It={ADD:1,REPLACE:2},$r={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},pt={I3S:"I3S",TILES3D:"TILES3D"},ya={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},aw={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};var ba=m(wt()),sw=m(ve());function ow(e){return e!=null}var bU=new O,_U=new O,AU=new O;function Df(e,r,t){if(ne(e,"3D Tile: boundingVolume must be defined"),e.box)return xU(e.box,r,t);if(e.region){var n=(0,sw.default)(e.region,6),a=n[0],i=n[1],s=n[2],o=n[3],u=n[4],f=n[5],l=we.WGS84.cartographicToCartesian([aa(a),aa(o),u],_U),c=we.WGS84.cartographicToCartesian([aa(s),aa(i),f],AU),h=new O().addVectors(l,c).multiplyScalar(.5),d=new O().subVectors(l,c).len()/2;return iw([h[0],h[1],h[2],d],new ae)}if(e.sphere)return iw(e.sphere,r,t);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function xU(e,r,t){var n=new O(e[0],e[1],e[2]);r.transform(n,n);var a=[];if(e.length===10){var i=e.slice(3,6),s=new gn;s.fromArray(e,6);var o=new O([1,0,0]),u=new O([0,1,0]),f=new O([0,0,1]);o.transformByQuaternion(s),o.scale(i[0]),u.transformByQuaternion(s),u.scale(i[1]),f.transformByQuaternion(s),f.scale(i[2]),a=[].concat((0,ba.default)(o.toArray()),(0,ba.default)(u.toArray()),(0,ba.default)(f.toArray()))}else a=[].concat((0,ba.default)(e.slice(3,6)),(0,ba.default)(e.slice(6,9)),(0,ba.default)(e.slice(9,12)));var l=r.transformAsVector(a.slice(0,3)),c=r.transformAsVector(a.slice(3,6)),h=r.transformAsVector(a.slice(6,9)),d=new Te([l[0],l[1],l[2],c[0],c[1],c[2],h[0],h[1],h[2]]);return ow(t)?(t.center=n,t.halfAxes=d,t):new sa(n,d)}function iw(e,r,t){var n=new O(e[0],e[1],e[2]);r.transform(n,n);var a=r.getScale(bU),i=Math.max(Math.max(a[0],a[1]),a[2]),s=e[3]*i;return ow(t)?(t.center=n,t.radius=s,t):new yn(n,s)}var Che=new O,Ohe=new O,Bhe=new ae,Phe=new O,Ihe=new O,Rhe=new O;function TU(e,r){var t=e*r;return 1-Math.exp(-(t*t))}function MU(e,r){if(e.dynamicScreenSpaceError&&e.dynamicScreenSpaceErrorComputedDensity){var t=e.dynamicScreenSpaceErrorComputedDensity,n=e.dynamicScreenSpaceErrorFactor,a=TU(r,t)*n;return a}return 0}function uw(e,r,t){var n=e.tileset,a=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,i=t?a:e.lodMetricValue;if(i===0)return 0;var s=Math.max(e._distanceToCamera,1e-7),o=r.height,u=r.sseDenominator,f=n.options.viewDistanceScale,l=i*o*(f||1)/(s*u);return l-=MU(n,s),l}var hw=m(wt());var Rm=new O,fw=new O,On=new O,lw=new O,EU=new O,Lm=new ae,cw=new ae;function dw(e,r){if(e.lodMetricValue===0||isNaN(e.lodMetricValue))return"DIG";var t=2*Fm(e,r);return t<2?"OUT":!e.header.children||t<=e.lodMetricValue?"DRAW":e.header.children?"DIG":"OUT"}function Fm(e,r){var t=r.topDownViewport,n=e.header.mbs[1],a=e.header.mbs[0],i=e.header.mbs[2],s=e.header.mbs[3],o=(0,hw.default)(e.boundingVolume.center),u=t.unprojectPosition(t.cameraPosition);we.WGS84.cartographicToCartesian(u,Rm),fw.copy(Rm).subtract(o).normalize(),we.WGS84.eastNorthUpToFixedFrame(o,Lm),cw.copy(Lm).invert(),On.copy(Rm).transform(cw);var f=Math.sqrt(On[0]*On[0]+On[1]*On[1]),l=f*f/On[2];lw.copy([On[0],On[1],l]);var c=lw.transform(Lm),h=c.subtract(o).normalize(),d=fw.cross(h).normalize().scale(s),p=d.add(o),v=we.WGS84.cartesianToCartographic(p),g=t.project([a,n,i]),y=t.project(v),_=EU.copy(g).subtract(y).magnitude();return _}function pw(e){return{assetGltfUpAxis:e.asset&&e.asset.gltfUpAxis||"Y"}}var bw=m(J()),_w=m(z()),Aw=m(q());var mw=m(z()),vw=m(q());var km=function(){function e(){(0,mw.default)(this,e);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;b(this,"_map",new Map),b(this,"_array",void 0),b(this,"_length",void 0),this._array=new Array(r),this._length=r}return(0,vw.default)(e,[{key:"length",get:function(){return this._length},set:function(t){this._length=t,t>this._array.length&&(this._array.length=t)}},{key:"values",get:function(){return this._array}},{key:"get",value:function(t){return ne(t<this._array.length),this._array[t]}},{key:"set",value:function(t,n){ne(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=n,this._map.set(n,t)}},{key:"delete",value:function(t){var n=this._map.get(t);n>=0&&(this._array.splice(n,1),this._map.delete(t),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(t){if(!this._map.has(t)){var n=this.length++;this._array[n]=t,this._map.set(t,n)}}},{key:"pop",value:function(){var t=this._array[--this.length];return this._map.delete(t),t}},{key:"reserve",value:function(t){ne(t>=0),t>this._array.length&&(this._array.length=t)}},{key:"resize",value:function(t){ne(t>=0),this.length=t}},{key:"trim",value:function(t){t==null&&(t=this.length),this._array.length=t}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(t){return this._map.has(t)}}]),e}();function Nf(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=SU(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function SU(e,r){if(e){if(typeof e=="string")return gw(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gw(e,r)}}function gw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function yw(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Gf(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?yw(Object(t),!0).forEach(function(n){(0,bw.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yw(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var wU={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""},Bn=function(){function e(r){(0,_w.default)(this,e),b(this,"options",void 0),b(this,"root",void 0),b(this,"requestedTiles",void 0),b(this,"selectedTiles",void 0),b(this,"emptyTiles",void 0),b(this,"lastUpdate",new Date().getTime()),b(this,"updateDebounceTime",1e3),b(this,"_traversalStack",void 0),b(this,"_emptyTraversalStack",void 0),b(this,"_frameNumber",void 0),this.options=Gf(Gf({},wU),r),this._traversalStack=new km,this._emptyTraversalStack=new km,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}return(0,Aw.default)(e,[{key:"traversalFinished",value:function(t){return!0}},{key:"traverse",value:function(t,n,a){this.root=t,this.options=Gf(Gf({},this.options),a),this.reset(),this.updateTile(t,n),this._frameNumber=n.frameNumber,this.executeTraversal(t,n)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(t,n){var a=this._traversalStack;for(t._selectionDepth=1,a.push(t);a.length>0;){var i=a.pop(),s=!1;this.canTraverse(i,n)&&(this.updateChildTiles(i,n),s=this.updateAndPushChildren(i,n,a,i.hasRenderContent?i._selectionDepth+1:i._selectionDepth));var o=i.parent,u=Boolean(!o||o._shouldRefine),f=!s;i.hasRenderContent?i.refine===It.ADD?(this.loadTile(i,n),this.selectTile(i,n)):i.refine===It.REPLACE&&(this.loadTile(i,n),f&&this.selectTile(i,n)):(this.emptyTiles[i.id]=i,this.loadTile(i,n),f&&this.selectTile(i,n)),this.touchTile(i,n),i._shouldRefine=s&&u}var l=new Date().getTime();(this.traversalFinished(n)||l-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=l,this.options.onTraversalEnd(n))}},{key:"updateChildTiles",value:function(t,n){var a=t.children,i=Nf(a),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;this.updateTile(o,n)}}catch(u){i.e(u)}finally{i.f()}return!0}},{key:"updateAndPushChildren",value:function(t,n,a,i){var s=this.options,o=s.loadSiblings,u=s.skipLevelOfDetail,f=t.children;f.sort(this.compareDistanceToCamera.bind(this));var l=t.refine===It.REPLACE&&t.hasRenderContent&&!u,c=!1,h=!0,d=Nf(f),p;try{for(d.s();!(p=d.n()).done;){var v=p.value;if(v._selectionDepth=i,v.isVisibleAndInRequestVolume?(a.find(v)&&a.delete(v),a.push(v),c=!0):(l||o)&&(this.loadTile(v,n),this.touchTile(v,n)),l){var g=void 0;if(v._inRequestVolume?v.hasRenderContent?g=v.contentAvailable:g=this.executeEmptyTraversal(v,n):g=!1,h=h&&g,!h)return!1}}}catch(y){d.e(y)}finally{d.f()}return c||(h=!1),h}},{key:"updateTile",value:function(t,n){this.updateTileVisibility(t,n)}},{key:"selectTile",value:function(t,n){this.shouldSelectTile(t)&&(t._selectedFrame=n.frameNumber,this.selectedTiles[t.id]=t)}},{key:"loadTile",value:function(t,n){this.shouldLoadTile(t)&&(t._requestedFrame=n.frameNumber,t._priority=t._getPriority(),this.requestedTiles[t.id]=t)}},{key:"touchTile",value:function(t,n){t.tileset._cache.touch(t),t._touchedFrame=n.frameNumber}},{key:"canTraverse",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.hasChildren?t.hasTilesetContent?!t.contentExpired:!i&&!t.isVisibleAndInRequestVolume?!1:this.shouldRefine(t,n,a):!1}},{key:"shouldLoadTile",value:function(t){return t.hasUnloadedContent||t.contentExpired}},{key:"shouldSelectTile",value:function(t){return t.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(t,n,a){var i=t._screenSpaceError;return a&&(i=t.getScreenSpaceError(n,!0)),i>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(t,n){var a=[];if(this.options.viewportTraversersMap)for(var i in this.options.viewportTraversersMap){var s=this.options.viewportTraversersMap[i];s===n.viewport.id&&a.push(i)}else a.push(n.viewport.id);t.updateVisibility(n,a)}},{key:"compareDistanceToCamera",value:function(t,n){return t._distanceToCamera-n._distanceToCamera}},{key:"anyChildrenVisible",value:function(t,n){var a=!1,i=Nf(t.children),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;o.updateVisibility(n),a=a||o.isVisibleAndInRequestVolume}}catch(u){i.e(u)}finally{i.f()}return a}},{key:"executeEmptyTraversal",value:function(t,n){var a=!0,i=this._emptyTraversalStack;for(i.push(t);i.length>0&&a;){var s=i.pop();this.updateTile(s,n),s.isVisibleAndInRequestVolume||this.loadTile(s,n),this.touchTile(s,n);var o=!s.hasRenderContent&&this.canTraverse(s,n,!1,!0);if(o){var u=s.children,f=Nf(u),l;try{for(f.s();!(l=f.n()).done;){var c=l.value;i.find(c)&&i.delete(c),i.push(c)}}catch(h){f.e(h)}finally{f.f()}}else s.contentAvailable||(a=!1)}return a}}]),e}();function xw(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ai(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?xw(Object(t),!0).forEach(function(n){(0,Nm.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xw(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Tw=new O;function CU(e){return e!=null}var Qs=function(){function e(r,t,n){(0,Ew.default)(this,e);var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";b(this,"tileset",void 0),b(this,"header",void 0),b(this,"id",void 0),b(this,"url",void 0),b(this,"parent",void 0),b(this,"refine",void 0),b(this,"type",void 0),b(this,"contentUrl",void 0),b(this,"lodMetricType",void 0),b(this,"lodMetricValue",void 0),b(this,"boundingVolume",void 0),b(this,"content",void 0),b(this,"contentState",void 0),b(this,"gpuMemoryUsageInBytes",void 0),b(this,"children",void 0),b(this,"depth",void 0),b(this,"viewportIds",void 0),b(this,"transform",void 0),b(this,"extensions",void 0),b(this,"implicitTiling",void 0),b(this,"userData",void 0),b(this,"computedTransform",void 0),b(this,"hasEmptyContent",void 0),b(this,"hasTilesetContent",void 0),b(this,"traverser",void 0),b(this,"_cacheNode",void 0),b(this,"_frameNumber",void 0),b(this,"_lodJudge",void 0),b(this,"_expireDate",void 0),b(this,"_expiredContent",void 0),b(this,"_shouldRefine",void 0),b(this,"_distanceToCamera",void 0),b(this,"_centerZDepth",void 0),b(this,"_screenSpaceError",void 0),b(this,"_visibilityPlaneMask",void 0),b(this,"_visible",void 0),b(this,"_inRequestVolume",void 0),b(this,"_stackLength",void 0),b(this,"_selectionDepth",void 0),b(this,"_touchedFrame",void 0),b(this,"_visitedFrame",void 0),b(this,"_selectedFrame",void 0),b(this,"_requestedFrame",void 0),b(this,"_priority",void 0),b(this,"_contentBoundingVolume",void 0),b(this,"_viewerRequestVolume",void 0),b(this,"_initialTransform",void 0),this.header=t,this.tileset=r,this.id=a||t.id,this.url=t.url,this.parent=n,this.refine=this._getRefine(t.refine),this.type=t.type,this.contentUrl=t.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=Et.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new Bn({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new ae,this.transform=new ae,this._initializeLodMetric(t),this._initializeTransforms(t),this._initializeBoundingVolumes(t),this._initializeContent(t),this._initializeRenderingState(t),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this.implicitTiling=null,Object.seal(this)}return(0,Sw.default)(e,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return this.header===null}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===Et.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===Et.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===Et.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===Et.FAILED}},{key:"distanceToCamera",get:function(){return this._distanceToCamera}},{key:"screenSpaceError",get:function(){return this._screenSpaceError}},{key:"getScreenSpaceError",value:function(t,n){switch(this.tileset.type){case pt.I3S:return Fm(this,t);case pt.TILES3D:return uw(this,t,n);default:throw new Error("Unsupported tileset type")}}},{key:"unselect",value:function(){this._selectedFrame=0}},{key:"_getPriority",value:function(){var t=this.tileset._traverser,n=t.options.skipLevelOfDetail,a=this.refine===It.ADD||n;if(a&&!this.isVisible&&this._visible!==void 0||this.tileset._frameNumber-this._touchedFrame>=1||this.contentState===Et.UNLOADED)return-1;var i=this.parent,s=i&&(!a||this._screenSpaceError===0||i.hasTilesetContent),o=s?i._screenSpaceError:this._screenSpaceError,u=t.root?t.root._screenSpaceError:0;return Math.max(u-o,0)}},{key:"loadContent",value:function(){var r=(0,Mw.default)(Dm.default.mark(function n(){var a,i,s,o,u;return Dm.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.hasEmptyContent){l.next=2;break}return l.abrupt("return",!1);case 2:if(!this.content){l.next=4;break}return l.abrupt("return",!0);case 4:return a=this.contentExpired,a&&(this._expireDate=null),this.contentState=Et.LOADING,l.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(i=l.sent,i){l.next=13;break}return this.contentState=Et.UNLOADED,l.abrupt("return",!1);case 13:return l.prev=13,s=this.tileset.getTileUrl(this.contentUrl),o=this.tileset.loader,u=Ai(Ai({},this.tileset.loadOptions),{},(0,Nm.default)({},o.id,Ai(Ai({},this.tileset.loadOptions[o.id]),{},{isTileset:this.type==="json"},this._getLoaderSpecificOptions(o.id)))),l.next=19,hr(s,o,u);case 19:if(this.content=l.sent,!this.tileset.options.contentLoader){l.next=23;break}return l.next=23,this.tileset.options.contentLoader(this);case 23:return this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=Et.READY,this._onContentLoaded(),l.abrupt("return",!0);case 29:throw l.prev=29,l.t0=l.catch(13),this.contentState=Et.FAILED,l.t0;case 33:return l.prev=33,i.done(),l.finish(33);case 36:case"end":return l.stop()}},n,this,[[13,29,33,36]])}));function t(){return r.apply(this,arguments)}return t}()},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=Et.UNLOADED,!0}},{key:"updateVisibility",value:function(t,n){if(this._frameNumber!==t.frameNumber){var a=this.parent,i=a?a._visibilityPlaneMask:Pt.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){var s=a?a.computedTransform:this.tileset.modelMatrix;this._updateTransform(s)}this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,i),this._visible=this._visibilityPlaneMask!==Pt.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._frameNumber=t.frameNumber,this.viewportIds=n}}},{key:"visibility",value:function(t,n){var a=t.cullingVolume,i=this.boundingVolume;return a.computeVisibilityWithPlaneMask(i,n)}},{key:"contentVisibility",value:function(){return!0}},{key:"distanceToTile",value:function(t){var n=this.boundingVolume;return Math.sqrt(Math.max(n.distanceSquaredTo(t.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(t){var n=t.camera,a=this.boundingVolume;return Tw.subVectors(a.center,n.position),n.direction.dot(Tw)}},{key:"insideViewerRequestVolume",value:function(t){var n=this._viewerRequestVolume;return!n||n.distanceSquaredTo(t.camera.position)<=0}},{key:"updateExpiration",value:function(){if(CU(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){var t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=Et.EXPIRED,this._expiredContent=this.content)}}},{key:"extras",get:function(){return this.header.extras}},{key:"_initializeLodMetric",value:function(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(t){this.transform=t.transform?new ae(t.transform):new ae;var n=this.parent,a=this.tileset,i=n&&n.computedTransform?n.computedTransform.clone():a.modelMatrix.clone();this.computedTransform=new ae(i).multiplyRight(this.transform);var s=n&&n._initialTransform?n._initialTransform.clone():new ae;this._initialTransform=new ae(s).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)}},{key:"_initializeContent",value:function(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=Et.UNLOADED,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=Pt.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(t){return t||this.parent&&this.parent.refine||It.REPLACE}},{key:"_isTileset",value:function(){return this.contentUrl.indexOf(".json")!==-1}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0;break;default:}this._isTileset()&&(this.hasTilesetContent=!0)}},{key:"_updateBoundingVolume",value:function(t){this.boundingVolume=Df(t.boundingVolume,this.computedTransform,this.boundingVolume);var n=t.content;n&&(n.boundingVolume&&(this._contentBoundingVolume=Df(n.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=Df(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ae,n=t.clone().multiplyRight(this.transform),a=!n.equals(this.computedTransform);a&&(this.computedTransform=n,this._updateBoundingVolume(this.header))}},{key:"_getLoaderSpecificOptions",value:function(t){switch(t){case"i3s":return Ai(Ai({},this.tileset.options.i3s),{},{_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1});case"3d-tiles":case"cesium-ion":default:return pw(this.tileset.tileset)}}}]),e}();var ww=m(z()),Cw=m(q()),Ow=m(fi()),Bw=m(Ce()),Pw=m(Oe()),Uf=m(Me());function OU(e){var r=BU();return function(){var n=(0,Uf.default)(e),a;if(r){var i=(0,Uf.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Pw.default)(this,a)}}function BU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Iw=function(e){(0,Bw.default)(t,e);var r=OU(t);function t(){return(0,ww.default)(this,t),r.apply(this,arguments)}return(0,Cw.default)(t,[{key:"compareDistanceToCamera",value:function(a,i){return i._distanceToCamera===0&&a._distanceToCamera===0?i._centerZDepth-a._centerZDepth:i._distanceToCamera-a._distanceToCamera}},{key:"updateTileVisibility",value:function(a,i){if((0,Ow.default)((0,Uf.default)(t.prototype),"updateTileVisibility",this).call(this,a,i),!!a.isVisibleAndInRequestVolume){var s=a.children.length>0;if(a.hasTilesetContent&&s){var o=a.children[0];this.updateTileVisibility(o,i),a._visible=o._visible;return}if(this.meetsScreenSpaceErrorEarly(a,i)){a._visible=!1;return}var u=a.refine===It.REPLACE,f=a._optimChildrenWithinParent===aw.USE_OPTIMIZATION;if(u&&f&&s&&!this.anyChildrenVisible(a,i)){a._visible=!1;return}}}},{key:"meetsScreenSpaceErrorEarly",value:function(a,i){var s=a.parent;return!s||s.hasTilesetContent||s.refine!==It.ADD?!1:!this.shouldRefine(a,i,!0)}}]),t}(Bn);var jw=m(J()),Hw=m(Y()),Vw=m(z()),zw=m(q()),Ww=m(vt()),qw=m(Ce()),Jw=m(Oe()),Um=m(Me()),jm=m(K());var kw=m(z()),Dw=m(q());var Rw=m(z()),Lw=m(q());var Fw=function(){function e(){(0,Rw.default)(this,e),b(this,"frameNumberMap",new Map)}return(0,Lw.default)(e,[{key:"register",value:function(t,n){var a=this.frameNumberMap.get(t)||new Map,i=a.get(n)||0;a.set(n,i+1),this.frameNumberMap.set(t,a)}},{key:"deregister",value:function(t,n){var a=this.frameNumberMap.get(t);if(a){var i=a.get(n)||1;a.set(n,i-1)}}},{key:"isZero",value:function(t,n){var a,i=((a=this.frameNumberMap.get(t))===null||a===void 0?void 0:a.get(n))||0;return i===0}}]),e}();var Gm={REQUESTED:"REQUESTED",COMPLETED:"COMPLETED",ERROR:"ERROR"},Nw=function(){function e(){(0,kw.default)(this,e),b(this,"_statusMap",void 0),b(this,"pendingTilesRegister",new Fw),this._statusMap={}}return(0,Dw.default)(e,[{key:"add",value:function(t,n,a,i){var s=this;if(!this._statusMap[n]){var o=i.frameNumber,u=i.viewport.id;this._statusMap[n]={request:t,callback:a,key:n,frameState:i,status:Gm.REQUESTED},this.pendingTilesRegister.register(u,o),t().then(function(f){s._statusMap[n].status=Gm.COMPLETED;var l=s._statusMap[n].frameState,c=l.frameNumber,h=l.viewport.id;s.pendingTilesRegister.deregister(h,c),s._statusMap[n].callback(f,i)}).catch(function(f){s._statusMap[n].status=Gm.ERROR;var l=s._statusMap[n].frameState,c=l.frameNumber,h=l.viewport.id;s.pendingTilesRegister.deregister(h,c),a(f)})}}},{key:"update",value:function(t,n){if(this._statusMap[t]){var a=this._statusMap[t].frameState,i=a.frameNumber,s=a.viewport.id;this.pendingTilesRegister.deregister(s,i);var o=n.frameNumber,u=n.viewport.id;this.pendingTilesRegister.register(u,o),this._statusMap[t].frameState=n}}},{key:"find",value:function(t){return this._statusMap[t]}},{key:"hasPendingTiles",value:function(t,n){return!this.pendingTilesRegister.isZero(t,n)}}]),e}();function Gw(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function jf(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Gw(Object(t),!0).forEach(function(n){(0,jw.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gw(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function PU(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=IU(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function IU(e,r){if(e){if(typeof e=="string")return Uw(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Uw(e,r)}}function Uw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function RU(e){var r=LU();return function(){var n=(0,Um.default)(e),a;if(r){var i=(0,Um.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,Jw.default)(this,a)}}function LU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Xw=function(e){(0,qw.default)(t,e);var r=RU(t);function t(n){var a;return(0,Vw.default)(this,t),a=r.call(this,n),b((0,Ww.default)(a),"_tileManager",void 0),a._tileManager=new Nw,a}return(0,zw.default)(t,[{key:"traversalFinished",value:function(a){return!this._tileManager.hasPendingTiles(a.viewport.id,this._frameNumber||0)}},{key:"shouldRefine",value:function(a,i){return a._lodJudge=dw(a,i),a._lodJudge==="DIG"}},{key:"updateChildTiles",value:function(a,i){var s=this,o=a.header.children||[],u=a.children,f=a.tileset,l=PU(o),c;try{var h=function(){var p=c.value,v="".concat(p.id,"-").concat(i.viewport.id),g=u&&u.find(function(T){return T.id===v});if(g)g&&s.updateTile(g,i);else{var y=function(){return s._loadTile(p.id,f)},_=s._tileManager.find(v);_?s._tileManager.update(v,i):(f.tileset.nodePages&&(y=function(){return f.tileset.nodePagesTile.formTileFromNodePages(p.id)}),s._tileManager.add(y,v,function(T){return s._onTileLoad(T,a,v)},i))}};for(l.s();!(c=l.n()).done;)h()}catch(d){l.e(d)}finally{l.f()}return!1}},{key:"_loadTile",value:function(){var n=(0,Hw.default)(jm.default.mark(function i(s,o){var u,f,l;return jm.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return u=o.loader,f=o.getTileUrl("".concat(o.url,"/nodes/").concat(s)),l=jf(jf({},o.loadOptions),{},{i3s:jf(jf({},o.loadOptions.i3s),{},{isTileHeader:!0})}),h.next=5,hr(f,u,l);case 5:return h.abrupt("return",h.sent);case 6:case"end":return h.stop()}},i)}));function a(i,s){return n.apply(this,arguments)}return a}()},{key:"_onTileLoad",value:function(a,i,s){var o=new Qs(i.tileset,a,i,s);i.children.push(o);var u=this._tileManager.find(o.id).frameState;this.updateTile(o,u),this._frameNumber===u.frameNumber&&(this.traversalFinished(u)||new Date().getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(o,u)}}]),t}(Bn);function Zr(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=FU(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function FU(e,r){if(e){if(typeof e=="string")return Kw(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Kw(e,r)}}function Kw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Yw(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function xi(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Yw(Object(t),!0).forEach(function(n){(0,nC.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yw(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var kU={description:"",ellipsoid:we.WGS84,modelMatrix:new ae,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){},onTraversalComplete:function(r){return r},contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},Hf="Tiles In Tileset(s)",Hm="Tiles In Memory",Qw="Tiles In View",$w="Tiles To Render",Zw="Tiles Loaded",Vm="Tiles Loading",eC="Tiles Unloaded",tC="Failed Tile Loads",rC="Points/Vertices",zm="Tile Memory Use",qm=function(){function e(r,t){(0,aC.default)(this,e),b(this,"options",void 0),b(this,"loadOptions",void 0),b(this,"type",void 0),b(this,"tileset",void 0),b(this,"loader",void 0),b(this,"url",void 0),b(this,"basePath",void 0),b(this,"modelMatrix",void 0),b(this,"ellipsoid",void 0),b(this,"lodMetricType",void 0),b(this,"lodMetricValue",void 0),b(this,"refine",void 0),b(this,"root",void 0),b(this,"roots",void 0),b(this,"asset",void 0),b(this,"description",void 0),b(this,"properties",void 0),b(this,"extras",void 0),b(this,"attributions",void 0),b(this,"credits",void 0),b(this,"stats",void 0),b(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),b(this,"traverseCounter",void 0),b(this,"geometricError",void 0),b(this,"selectedTiles",void 0),b(this,"updatePromise",null),b(this,"tilesetInitializationPromise",void 0),b(this,"cartographicCenter",void 0),b(this,"cartesianCenter",void 0),b(this,"zoom",void 0),b(this,"boundingVolume",void 0),b(this,"gpuMemoryUsageInBytes",void 0),b(this,"dynamicScreenSpaceErrorComputedDensity",void 0),b(this,"_traverser",void 0),b(this,"_cache",void 0),b(this,"_requestScheduler",void 0),b(this,"_frameNumber",void 0),b(this,"_queryParamsString",void 0),b(this,"_queryParams",void 0),b(this,"_extensionsUsed",void 0),b(this,"_tiles",void 0),b(this,"_pendingCount",void 0),b(this,"lastUpdatedVieports",void 0),b(this,"_requestedTiles",void 0),b(this,"_emptyTiles",void 0),b(this,"frameStateData",void 0),b(this,"maximumMemoryUsage",void 0),ne(r),this.options=xi(xi({},kU),t),this.tileset=r,this.loader=r.loader,this.type=r.type,this.url=r.url,this.basePath=r.basePath||cn.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=r.lodMetricType,this.lodMetricValue=r.lodMetricValue,this.refine=r.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new JS,this._requestScheduler=new Qi({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new Wn({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this.tilesetInitializationPromise=this._initializeTileSet(r)}return(0,iC.default)(e,[{key:"destroy",value:function(){this._destroy()}},{key:"isLoaded",value:function(){return this._pendingCount===0&&this._frameNumber!==0&&this._requestedTiles.length===0}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=DU(this._queryParams)),this._queryParamsString}},{key:"setProps",value:function(t){this.options=xi(xi({},this.options),t)}},{key:"setOptions",value:function(t){this.options=xi(xi({},this.options),t)}},{key:"getTileUrl",value:function(t){var n=t.startsWith("data:");return n?t:"".concat(t).concat(this.queryParams)}},{key:"hasExtension",value:function(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)}},{key:"update",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.tilesetInitializationPromise.then(function(){!n&&t.lastUpdatedVieports?n=t.lastUpdatedVieports:t.lastUpdatedVieports=n,n&&t.doUpdate(n)})}},{key:"selectTiles",value:function(){var r=(0,Vf.default)(_a.default.mark(function n(){var a=this,i,s=arguments;return _a.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=s.length>0&&s[0]!==void 0?s[0]:null,u.next=3,this.tilesetInitializationPromise;case 3:return i&&(this.lastUpdatedVieports=i),this.updatePromise||(this.updatePromise=new Promise(function(f){setTimeout(function(){a.lastUpdatedVieports&&a.doUpdate(a.lastUpdatedVieports),f(a._frameNumber),a.updatePromise=null},a.options.debounceTime)})),u.abrupt("return",this.updatePromise);case 6:case"end":return u.stop()}},n,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"doUpdate",value:function(t){if(!("loadTiles"in this.options&&!this.options.loadTiles)&&!(this.traverseCounter>0)){var n=t instanceof Array?t:[t];this._cache.reset(),this._frameNumber++,this.traverseCounter=n.length;var a=[],i=Zr(n),s;try{for(i.s();!(s=i.n()).done;){var o=s.value,u=o.id;this._needTraverse(u)?a.push(u):this.traverseCounter--}}catch(p){i.e(p)}finally{i.f()}var f=Zr(n),l;try{for(f.s();!(l=f.n()).done;){var c=l.value,h=c.id;if(this.roots[h]||(this.roots[h]=this._initializeTileHeaders(this.tileset,null)),!!a.includes(h)){var d=$S(c,this._frameNumber);this._traverser.traverse(this.roots[h],d,this.options)}}}catch(p){f.e(p)}finally{f.f()}}}},{key:"_needTraverse",value:function(t){var n=t;return this.options.viewportTraversersMap&&(n=this.options.viewportTraversersMap[t]),n===t}},{key:"_onTraversalEnd",value:function(t){var n=t.viewport.id;this.frameStateData[n]||(this.frameStateData[n]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var a=this.frameStateData[n],i=Object.values(this._traverser.selectedTiles),s=ZS(i,t,this.options.maximumTilesSelected),o=(0,Wm.default)(s,2),u=o[0],f=o[1];a.selectedTiles=u;var l=Zr(f),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;h.unselect()}}catch(d){l.e(d)}finally{l.f()}a._requestedTiles=Object.values(this._traverser.requestedTiles),a._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,!(this.traverseCounter>0)&&this._updateTiles()}},{key:"_updateTiles",value:function(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(var t in this.frameStateData){var n=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(n.selectedTiles),this._requestedTiles=this._requestedTiles.concat(n._requestedTiles),this._emptyTiles=this._emptyTiles.concat(n._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);var a=Zr(this.selectedTiles),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;this._tiles[s.id]=s}}catch(o){a.e(o)}finally{a.f()}this._loadTiles(),this._unloadTiles(),this._updateStats()}},{key:"_tilesChanged",value:function(t,n){if(t.length!==n.length)return!0;var a=new Set(t.map(function(o){return o.id})),i=new Set(n.map(function(o){return o.id})),s=t.filter(function(o){return!i.has(o.id)}).length>0;return s=s||n.filter(function(o){return!a.has(o.id)}).length>0,s}},{key:"_loadTiles",value:function(){var t=Zr(this._requestedTiles),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.contentUnloaded&&this._loadTile(a)}}catch(i){t.e(i)}finally{t.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,function(t,n){return t._unloadTile(n)})}},{key:"_updateStats",value:function(){var t=0,n=0,a=Zr(this.selectedTiles),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;s.contentAvailable&&s.content&&(t++,s.content.pointCount?n+=s.content.pointCount:n+=s.content.vertexCount)}}catch(o){a.e(o)}finally{a.f()}this.stats.get(Qw).count=this.selectedTiles.length,this.stats.get($w).count=t,this.stats.get(rC).count=n}},{key:"_initializeTileSet",value:function(){var r=(0,Vf.default)(_a.default.mark(function n(a){return _a.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.type!==pt.I3S){s.next=5;break}return this.calculateViewPropsI3S(),s.next=4,a.root;case 4:a.root=s.sent;case 5:this.root=this._initializeTileHeaders(a,null),this.type===pt.TILES3D&&(this._initializeTiles3DTileset(a),this.calculateViewPropsTiles3D()),this.type===pt.I3S&&this._initializeI3STileset();case 8:case"end":return s.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"calculateViewPropsI3S",value:function(){var t,n=this.tileset.fullExtent;if(n){var a=n.xmin,i=n.xmax,s=n.ymin,o=n.ymax,u=n.zmin,f=n.zmax;this.cartographicCenter=new O(a+(i-a)/2,s+(o-s)/2,u+(f-u)/2),this.cartesianCenter=we.WGS84.cartographicToCartesian(this.cartographicCenter,new O),this.zoom=Im(n,this.cartographicCenter,this.cartesianCenter);return}var l=(t=this.tileset.store)===null||t===void 0?void 0:t.extent;if(l){var c=(0,Wm.default)(l,4),h=c[0],d=c[1],p=c[2],v=c[3];this.cartographicCenter=new O(h+(p-h)/2,d+(v-d)/2,0),this.cartesianCenter=we.WGS84.cartographicToCartesian(this.cartographicCenter,new O),this.zoom=nw(l,this.cartographicCenter,this.cartesianCenter);return}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new O,this.zoom=1}},{key:"calculateViewPropsTiles3D",value:function(){var t=this.root;ne(t);var n=t.boundingVolume.center;if(!n){console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new O,this.zoom=1;return}n[0]!==0||n[1]!==0||n[2]!==0?this.cartographicCenter=we.WGS84.cartesianToCartographic(n,new O):this.cartographicCenter=new O(0,0,-we.WGS84.radii[0]),this.cartesianCenter=n,this.zoom=rw(t.boundingVolume,this.cartographicCenter)}},{key:"_initializeStats",value:function(){this.stats.get(Hf),this.stats.get(Vm),this.stats.get(Hm),this.stats.get(Qw),this.stats.get($w),this.stats.get(Zw),this.stats.get(eC),this.stats.get(tC),this.stats.get(rC),this.stats.get(zm,"memory")}},{key:"_initializeTileHeaders",value:function(t,n){var a=new Qs(this,t.root,n);if(n&&(n.children.push(a),a.depth=n.depth+1),this.type===pt.TILES3D){var i=[];for(i.push(a);i.length>0;){var s=i.pop();this.stats.get(Hf).incrementCount();var o=s.header.children||[],u=Zr(o),f;try{for(u.s();!(f=u.n()).done;){var l=f.value,c=new Qs(this,l,s);s.children.push(c),c.depth=s.depth+1,i.push(c)}}catch(h){u.e(h)}finally{u.f()}}}return a}},{key:"_initializeTraverser",value:function(){var t,n=this.type;switch(n){case pt.TILES3D:t=Iw;break;case pt.I3S:t=Xw;break;default:t=Bn}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(t){this._destroySubtree(t)}},{key:"_loadTile",value:function(){var r=(0,Vf.default)(_a.default.mark(function n(a){var i;return _a.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,this._onStartTileLoading(),o.next=4,a.loadContent();case 4:i=o.sent,o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),this._onTileLoadError(a,o.t0);case 10:return o.prev=10,this._onEndTileLoading(),this._onTileLoad(a,i),o.finish(10);case 14:case"end":return o.stop()}},n,this,[[0,7,10,14]])}));function t(n){return r.apply(this,arguments)}return t}()},{key:"_onTileLoadError",value:function(t,n){this.stats.get(tC).incrementCount();var a=n.message||n.toString(),i=t.url;console.error("A 3D tile failed to load: ".concat(t.url," ").concat(a)),this.options.onTileError(t,a,i)}},{key:"_onTileLoad",value:function(t,n){if(n){if(this.type===pt.I3S){var a,i,s=((a=this.tileset)===null||a===void 0||(i=a.nodePagesTile)===null||i===void 0?void 0:i.nodesInNodePages)||0;this.stats.get(Hf).reset(),this.stats.get(Hf).addCount(s)}t&&t.content&&XS(t,t.content),this.updateContentTypes(t),this._addTileToCache(t),this.options.onTileLoad(t)}}},{key:"updateContentTypes",value:function(t){if(this.type===pt.I3S)switch(t.header.isDracoGeometry&&(this.contentFormats.draco=!0),t.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0;break;default:}else if(this.type===pt.TILES3D){var n,a=((n=t.content)===null||n===void 0?void 0:n.gltf)||{},i=a.extensionsRemoved,s=i===void 0?[]:i;s.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),s.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),s.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get(Vm).incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get(Vm).decrementCount()}},{key:"_addTileToCache",value:function(t){this._cache.add(this,t,function(n){return n._updateCacheStats(t)})}},{key:"_updateCacheStats",value:function(t){this.stats.get(Zw).incrementCount(),this.stats.get(Hm).incrementCount(),this.gpuMemoryUsageInBytes+=t.content.byteLength||0,this.stats.get(zm).count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(t){this.gpuMemoryUsageInBytes-=t.content&&t.content.byteLength||0,this.stats.get(Hm).decrementCount(),this.stats.get(eC).incrementCount(),this.stats.get(zm).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()}},{key:"_destroy",value:function(){var t=[];for(this.root&&t.push(this.root);t.length>0;){var n=t.pop(),a=Zr(n.children),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;t.push(s)}}catch(o){a.e(o)}finally{a.f()}this._destroyTile(n)}this.root=null}},{key:"_destroySubtree",value:function(t){var n=t,a=[];for(a.push(n);a.length>0;){t=a.pop();var i=Zr(t.children),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;a.push(o)}}catch(u){i.e(u)}finally{i.f()}t!==n&&this._destroyTile(t)}n.children=[]}},{key:"_destroyTile",value:function(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()}},{key:"_initializeTiles3DTileset",value:function(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if(this.asset.version!=="0.0"&&this.asset.version!=="1.0")throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras}},{key:"_initializeI3STileset",value:function(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}]),e}();function DU(e){for(var r=[],t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];r.push("".concat(a,"=").concat(e[a]))}switch(r.length){case 0:return"";case 1:return"?".concat(r[0]);default:return"?".concat(r.join("&"))}}var xl=m(Y()),Ra=m(K());var zf="3.3.1";var yB=m(Y()),Dg=m(K());var Aa={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"},Dde=Object.keys(Aa);function Jm(e,r,t){ne(e instanceof ArrayBuffer);var n=new TextDecoder("utf8"),a=new Uint8Array(e,r,t),i=n.decode(a);return i}function sC(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new DataView(e);return"".concat(String.fromCharCode(t.getUint8(r+0))).concat(String.fromCharCode(t.getUint8(r+1))).concat(String.fromCharCode(t.getUint8(r+2))).concat(String.fromCharCode(t.getUint8(r+3)))}var I3=m(J()),sl=m(Y()),Ma=m(K());var c3=m(Y()),h3=m(J()),sv=m(K());var uC=m(De());var oC="3.3.1";var NU={draco:{decoderType:(typeof WebAssembly>"u"?"undefined":(0,uC.default)(WebAssembly))==="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},fC={name:"Draco",id:gt?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:oC,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:NU};var tv=m(wt()),ZC=m(ve()),e3=m(J()),t3=m(z()),r3=m(q());function xa(e){for(var r=1/0,t=1/0,n=1/0,a=-1/0,i=-1/0,s=-1/0,o=e.POSITION?e.POSITION.value:[],u=o&&o.length,f=0;f<u;f+=3){var l=o[f],c=o[f+1],h=o[f+2];r=l<r?l:r,t=c<t?c:t,n=h<n?h:n,a=l>a?l:a,i=c>i?c:i,s=h>s?h:s}return[[r,t,n],[a,i,s]]}var Xm=m(wt()),dC=m(z()),pC=m(q());function lC(e,r){if(!e)throw new Error(r||"loader assertion failed.")}function Km(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=GU(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function GU(e,r){if(e){if(typeof e=="string")return cC(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cC(e,r)}}function cC(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var $s=function(){function e(r,t){(0,dC.default)(this,e),b(this,"fields",void 0),b(this,"metadata",void 0),lC(Array.isArray(r)),UU(r),this.fields=r,this.metadata=t||new Map}return(0,pC.default)(e,[{key:"compareTo",value:function(t){if(this.metadata!==t.metadata||this.fields.length!==t.fields.length)return!1;for(var n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(t.fields[n]))return!1;return!0}},{key:"select",value:function(){for(var t=Object.create(null),n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];for(var s=0,o=a;s<o.length;s++){var u=o[s];t[u]=!0}var f=this.fields.filter(function(l){return t[l.name]});return new e(f,this.metadata)}},{key:"selectAt",value:function(){for(var t=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.map(function(o){return t.fields[o]}).filter(Boolean);return new e(s,this.metadata)}},{key:"assign",value:function(t){var n,a=this.metadata;if(t instanceof e){var i=t;n=i.fields,a=hC(hC(new Map,this.metadata),i.metadata)}else n=t;var s=Object.create(null),o=Km(this.fields),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;s[f.name]=f}}catch(p){o.e(p)}finally{o.f()}var l=Km(n),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;s[h.name]=h}}catch(p){l.e(p)}finally{l.f()}var d=Object.values(s);return new e(d,a)}}]),e}();function UU(e){var r={},t=Km(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;r[a.name]&&console.warn("Schema: duplicated field name",a.name,a),r[a.name]=!0}}catch(i){t.e(i)}finally{t.f()}}function hC(e,r){return new Map([].concat((0,Xm.default)(e||new Map),(0,Xm.default)(r||new Map)))}var mC=m(z()),vC=m(q());var Zs=function(){function e(r,t){(0,mC.default)(this,e);var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Map;b(this,"name",void 0),b(this,"type",void 0),b(this,"nullable",void 0),b(this,"metadata",void 0),this.name=r,this.type=t,this.nullable=n,this.metadata=a}return(0,vC.default)(e,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new e(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),e}();var Ht=m(vt()),me=m(Ce()),gC=m(Oe()),Ym=m(Me()),ce=m(z()),Rt=m(q());var pe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(pe||(pe={}));function ye(e){var r=jU();return function(){var n=(0,Ym.default)(e),a;if(r){var i=(0,Ym.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,gC.default)(this,a)}}function jU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var yC,bC,_C,AC,xC,TC,MC,EC,Lt=function(){function e(){(0,ce.default)(this,e)}return(0,Rt.default)(e,[{key:"typeId",get:function(){return pe.NONE}},{key:"compareTo",value:function(t){return this===t}}],[{key:"isNull",value:function(t){return t&&t.typeId===pe.Null}},{key:"isInt",value:function(t){return t&&t.typeId===pe.Int}},{key:"isFloat",value:function(t){return t&&t.typeId===pe.Float}},{key:"isBinary",value:function(t){return t&&t.typeId===pe.Binary}},{key:"isUtf8",value:function(t){return t&&t.typeId===pe.Utf8}},{key:"isBool",value:function(t){return t&&t.typeId===pe.Bool}},{key:"isDecimal",value:function(t){return t&&t.typeId===pe.Decimal}},{key:"isDate",value:function(t){return t&&t.typeId===pe.Date}},{key:"isTime",value:function(t){return t&&t.typeId===pe.Time}},{key:"isTimestamp",value:function(t){return t&&t.typeId===pe.Timestamp}},{key:"isInterval",value:function(t){return t&&t.typeId===pe.Interval}},{key:"isList",value:function(t){return t&&t.typeId===pe.List}},{key:"isStruct",value:function(t){return t&&t.typeId===pe.Struct}},{key:"isUnion",value:function(t){return t&&t.typeId===pe.Union}},{key:"isFixedSizeBinary",value:function(t){return t&&t.typeId===pe.FixedSizeBinary}},{key:"isFixedSizeList",value:function(t){return t&&t.typeId===pe.FixedSizeList}},{key:"isMap",value:function(t){return t&&t.typeId===pe.Map}},{key:"isDictionary",value:function(t){return t&&t.typeId===pe.Dictionary}}]),e}(),SC=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(){return(0,ce.default)(this,n),t.apply(this,arguments)}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Null}},{key:r,get:function(){return"Null"}},{key:"toString",value:function(){return"Null"}}]),n}(Lt,Symbol.toStringTag),wC=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(){return(0,ce.default)(this,n),t.apply(this,arguments)}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Bool}},{key:r,get:function(){return"Bool"}},{key:"toString",value:function(){return"Bool"}}]),n}(Lt,Symbol.toStringTag);yC=Symbol.toStringTag;var wr=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a,i){var s;return(0,ce.default)(this,n),s=t.call(this),b((0,Ht.default)(s),"isSigned",void 0),b((0,Ht.default)(s),"bitWidth",void 0),s.isSigned=a,s.bitWidth=i,s}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Int}},{key:r,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),n}(Lt,yC),Wf=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!0,8)}return t}(wr),qf=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!0,16)}return t}(wr),Jf=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!0,32)}return t}(wr),CC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!0,64)}return t}(wr),Xf=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!1,8)}return t}(wr),Kf=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!1,16)}return t}(wr),Yf=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!1,32)}return t}(wr),OC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,!1,64)}return t}(wr),Qm={HALF:16,SINGLE:32,DOUBLE:64};bC=Symbol.toStringTag;var eo=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a){var i;return(0,ce.default)(this,n),i=t.call(this),b((0,Ht.default)(i),"precision",void 0),i.precision=a,i}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Float}},{key:r,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),n}(Lt,bC),BC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,Qm.HALF)}return t}(eo),Qf=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,Qm.SINGLE)}return t}(eo),$f=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,Qm.DOUBLE)}return t}(eo),PC=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(){return(0,ce.default)(this,n),t.call(this)}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Binary}},{key:"toString",value:function(){return"Binary"}},{key:r,get:function(){return"Binary"}}]),n}(Lt,Symbol.toStringTag),IC=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(){return(0,ce.default)(this,n),t.apply(this,arguments)}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Utf8}},{key:r,get:function(){return"Utf8"}},{key:"toString",value:function(){return"Utf8"}}]),n}(Lt,Symbol.toStringTag),$m={DAY:0,MILLISECOND:1};_C=Symbol.toStringTag;var Zf=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a){var i;return(0,ce.default)(this,n),i=t.call(this),b((0,Ht.default)(i),"unit",void 0),i.unit=a,i}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Date}},{key:r,get:function(){return"Date"}},{key:"toString",value:function(){return"Date".concat((this.unit+1)*32,"<").concat($m[this.unit],">")}}]),n}(Lt,_C),RC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,$m.DAY)}return t}(Zf),LC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,$m.MILLISECOND)}return t}(Zf),Pn={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};AC=Symbol.toStringTag;var el=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a,i){var s;return(0,ce.default)(this,n),s=t.call(this),b((0,Ht.default)(s),"unit",void 0),b((0,Ht.default)(s),"bitWidth",void 0),s.unit=a,s.bitWidth=i,s}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Time}},{key:"toString",value:function(){return"Time".concat(this.bitWidth,"<").concat(Pn[this.unit],">")}},{key:r,get:function(){return"Time"}}]),n}(Lt,AC),FC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,Pn.SECOND,32)}return t}(el),kC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,Pn.MILLISECOND,32)}return t}(el);xC=Symbol.toStringTag;var Ti=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a){var i;(0,ce.default)(this,n);var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return i=t.call(this),b((0,Ht.default)(i),"unit",void 0),b((0,Ht.default)(i),"timezone",void 0),i.unit=a,i.timezone=s,i}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Timestamp}},{key:r,get:function(){return"Timestamp"}},{key:"toString",value:function(){return"Timestamp<".concat(Pn[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}]),n}(Lt,xC),DC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){(0,ce.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Pn.SECOND,n)}return t}(Ti),NC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){(0,ce.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Pn.MILLISECOND,n)}return t}(Ti),GC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){(0,ce.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Pn.MICROSECOND,n)}return t}(Ti),UC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){(0,ce.default)(this,t);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Pn.NANOSECOND,n)}return t}(Ti),Zm={DAY_TIME:0,YEAR_MONTH:1};TC=Symbol.toStringTag;var tl=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a){var i;return(0,ce.default)(this,n),i=t.call(this),b((0,Ht.default)(i),"unit",void 0),i.unit=a,i}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Interval}},{key:r,get:function(){return"Interval"}},{key:"toString",value:function(){return"Interval<".concat(Zm[this.unit],">")}}]),n}(Lt,TC),jC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,Zm.DAY_TIME)}return t}(tl),HC=function(e){(0,me.default)(t,e);var r=ye(t);function t(){return(0,ce.default)(this,t),r.call(this,Zm.YEAR_MONTH)}return t}(tl);MC=Symbol.toStringTag;var rl=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a,i){var s;return(0,ce.default)(this,n),s=t.call(this),b((0,Ht.default)(s),"listSize",void 0),b((0,Ht.default)(s),"children",void 0),s.listSize=a,s.children=[i],s}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:r,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),n}(Lt,MC);EC=Symbol.toStringTag;var VC=function(e,r){(0,me.default)(n,e);var t=ye(n);function n(a){var i;return(0,ce.default)(this,n),i=t.call(this),b((0,Ht.default)(i),"children",void 0),i.children=a,i}return(0,Rt.default)(n,[{key:"typeId",get:function(){return pe.Struct}},{key:"toString",value:function(){return"Struct<{".concat(this.children.map(function(i){return"".concat(i.name,":").concat(i.type)}).join(", "),"}>")}},{key:r,get:function(){return"Struct"}}]),n}(Lt,EC);function zC(e){switch(e.constructor){case Int8Array:return new Wf;case Uint8Array:return new Xf;case Int16Array:return new qf;case Uint16Array:return new Kf;case Int32Array:return new Jf;case Uint32Array:return new Yf;case Float32Array:return new Qf;case Float64Array:return new $f;default:throw new Error("array type not supported")}}function ev(e,r,t){var n=zC(r.value),a=t||WC(r),i=new Zs(e,new rl(r.size,new Zs("value",n)),!1,a);return i}function WC(e){var r=new Map;return"byteOffset"in e&&r.set("byteOffset",e.byteOffset.toString(10)),"byteStride"in e&&r.set("byteStride",e.byteStride.toString(10)),"normalized"in e&&r.set("normalized",e.normalized.toString()),r}function JC(e,r,t){var n=XC(r.metadata),a=[],i=HU(r.attributes);for(var s in e){var o=e[s],u=qC(s,o,i[s]);a.push(u)}if(t){var f=qC("indices",t);a.push(f)}return new $s(a,n)}function HU(e){var r={};for(var t in e){var n=e[t];r[n.name||"undefined"]=n}return r}function qC(e,r,t){var n=t?XC(t.metadata):void 0,a=ev(e,r,n);return a}function XC(e){var r=new Map;for(var t in e)r.set("".concat(t,".string"),JSON.stringify(e[t]));return r}function VU(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=zU(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function zU(e,r){if(e){if(typeof e=="string")return KC(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KC(e,r)}}function KC(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function YC(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function QC(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?YC(Object(t),!0).forEach(function(n){(0,e3.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):YC(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var $C={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},WU={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},qU=4,n3=function(){function e(r){(0,t3.default)(this,e),b(this,"draco",void 0),b(this,"decoder",void 0),b(this,"metadataQuerier",void 0),this.draco=r,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return(0,r3.default)(e,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=new this.draco.DecoderBuffer;a.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(n);var i=this.decoder.GetEncodedGeometryType(a),s=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var o;switch(i){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(a,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(a,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){var u="DRACO decompression failed: ".concat(o.error_msg());throw new Error(u)}var f=this._getDracoLoaderData(s,i,n),l=this._getMeshData(s,f,n),c=xa(l.attributes),h=JC(l.attributes,f,l.indices),d=QC(QC({loader:"draco",loaderData:f,header:{vertexCount:s.num_points(),boundingBox:c}},l),{},{schema:h});return d}finally{this.draco.destroy(a),s&&this.draco.destroy(s)}}},{key:"_getDracoLoaderData",value:function(t,n,a){var i=this._getTopLevelMetadata(t),s=this._getDracoAttributes(t,a);return{geometry_type:n,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:i,attributes:s}}},{key:"_getDracoAttributes",value:function(t,n){for(var a={},i=0;i<t.num_attributes();i++){var s=this.decoder.GetAttribute(t,i),o=this._getAttributeMetadata(t,i);a[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:i,metadata:o};var u=this._getQuantizationTransform(s,n);u&&(a[s.unique_id()].quantization_transform=u);var f=this._getOctahedronTransform(s,n);f&&(a[s.unique_id()].octahedron_transform=f)}return a}},{key:"_getMeshData",value:function(t,n,a){var i=this._getMeshAttributes(n,t,a),s=i.POSITION;if(!s)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(a.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:i}}},{key:"_getMeshAttributes",value:function(t,n,a){for(var i={},s=0,o=Object.values(t.attributes);s<o.length;s++){var u=o[s],f=this._deduceAttributeName(u,a);u.name=f;var l=this._getAttributeValues(n,u),c=l.value,h=l.size;i[f]={value:c,size:h,byteOffset:u.byte_offset,byteStride:u.byte_stride,normalized:u.normalized}}return i}},{key:"_getTriangleListIndices",value:function(t){var n=t.num_faces(),a=n*3,i=a*qU,s=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(t,i,s),new Uint32Array(this.draco.HEAPF32.buffer,s,a).slice()}finally{this.draco._free(s)}}},{key:"_getTriangleStripIndices",value:function(t){var n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,n),KU(n)}finally{this.draco.destroy(n)}}},{key:"_getAttributeValues",value:function(t,n){var a=WU[n.data_type],i=n.num_components,s=t.num_points(),o=s*i,u=o*a.BYTES_PER_ELEMENT,f=JU(this.draco,a),l,c=this.draco._malloc(u);try{var h=this.decoder.GetAttribute(t,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,h,f,u,c),l=new a(this.draco.HEAPF32.buffer,c,o).slice()}finally{this.draco._free(c)}return{value:l,size:i}}},{key:"_deduceAttributeName",value:function(t,n){for(var a=t.unique_id,i=0,s=Object.entries(n.extraAttributes||{});i<s.length;i++){var o=(0,ZC.default)(s[i],2),u=o[0],f=o[1];if(f===a)return u}var l=t.attribute_type;for(var c in $C){var h=this.draco[c];if(h===l)return $C[c]}var d=n.attributeNameEntry||"name";return t.metadata[d]?t.metadata[d].string:"CUSTOM_ATTRIBUTE_".concat(a)}},{key:"_getTopLevelMetadata",value:function(t){var n=this.decoder.GetMetadata(t);return this._getDracoMetadata(n)}},{key:"_getAttributeMetadata",value:function(t,n){var a=this.decoder.GetAttributeMetadata(t,n);return this._getDracoMetadata(a)}},{key:"_getDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var n={},a=this.metadataQuerier.NumEntries(t),i=0;i<a;i++){var s=this.metadataQuerier.GetEntryName(t,i);n[s]=this._getDracoMetadataField(t,s)}return n}},{key:"_getDracoMetadataField",value:function(t,n){var a=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,n,a);var i=XU(a);return{int:this.metadataQuerier.GetIntEntry(t,n),string:this.metadataQuerier.GetStringEntry(t,n),double:this.metadataQuerier.GetDoubleEntry(t,n),intArray:i}}finally{this.draco.destroy(a)}}},{key:"_disableAttributeTransforms",value:function(t){var n=t.quantizedAttributes,a=n===void 0?[]:n,i=t.octahedronAttributes,s=i===void 0?[]:i,o=[].concat((0,tv.default)(a),(0,tv.default)(s)),u=VU(o),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;this.decoder.SkipAttributeTransform(this.draco[l])}}catch(c){u.e(c)}finally{u.f()}}},{key:"_getQuantizationTransform",value:function(t,n){var a=this,i=n.quantizedAttributes,s=i===void 0?[]:i,o=t.attribute_type(),u=s.map(function(l){return a.decoder[l]}).includes(o);if(u){var f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(t))return{quantization_bits:f.quantization_bits(),range:f.range(),min_values:new Float32Array([1,2,3]).map(function(l){return f.min_value(l)})}}finally{this.draco.destroy(f)}}return null}},{key:"_getOctahedronTransform",value:function(t,n){var a=this,i=n.octahedronAttributes,s=i===void 0?[]:i,o=t.attribute_type(),u=s.map(function(l){return a.decoder[l]}).includes(o);if(u){var f=new this.draco.AttributeQuantizationTransform;try{if(f.InitFromAttribute(t))return{quantization_bits:f.quantization_bits()}}finally{this.draco.destroy(f)}}return null}}]),e}();function JU(e,r){switch(r){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32;default:return e.DT_INVALID}}function XU(e){for(var r=e.size(),t=new Int32Array(r),n=0;n<r;n++)t[n]=e.GetValue(n);return t}function KU(e){for(var r=e.size(),t=new Int32Array(r),n=0;n<r;n++)t[n]=e.GetValue(n);return t}var s3=m(ve()),o3=m(J()),av=m(Y()),ro=m(K());function a3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function i3(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?a3(Object(t),!0).forEach(function(n){(0,o3.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a3(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var YU="1.5.5",QU="1.4.1",iv="https://www.gstatic.com/draco/versioned/decoders/".concat(YU),$U="".concat(iv,"/draco_decoder.js"),ZU="".concat(iv,"/draco_wasm_wrapper.js"),e5="".concat(iv,"/draco_decoder.wasm"),Epe="https://raw.githubusercontent.com/google/draco/".concat(QU,"/javascript/draco_encoder.js"),to;function u3(e){return rv.apply(this,arguments)}function rv(){return rv=(0,av.default)(ro.default.mark(function e(r){var t;return ro.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=r.modules||{},t.draco3d?to=to||t.draco3d.createDecoderModule({}).then(function(i){return{draco:i}}):to=to||t5(r),a.next=4,to;case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},e)})),rv.apply(this,arguments)}function t5(e){return nv.apply(this,arguments)}function nv(){return nv=(0,av.default)(ro.default.mark(function e(r){var t,n,a,i;return ro.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:o.t0=r.draco&&r.draco.decoderType,o.next=o.t0==="js"?3:(o.t0==="wasm",7);break;case 3:return o.next=5,gr($U,"draco",r);case 5:return t=o.sent,o.abrupt("break",21);case 7:return o.t1=Promise,o.next=10,gr(ZU,"draco",r);case 10:return o.t2=o.sent,o.next=13,gr(e5,"draco",r);case 13:return o.t3=o.sent,o.t4=[o.t2,o.t3],o.next=17,o.t1.all.call(o.t1,o.t4);case 17:a=o.sent,i=(0,s3.default)(a,2),t=i[0],n=i[1];case 21:return t=t||globalThis.DracoDecoderModule,o.next=24,r5(t,n);case 24:return o.abrupt("return",o.sent);case 25:case"end":return o.stop()}},e)})),nv.apply(this,arguments)}function r5(e,r){var t={};return r&&(t.wasmBinary=r),new Promise(function(n){e(i3(i3({},t),{},{onModuleLoaded:function(i){return n({draco:i})}}))})}function f3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function l3(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?f3(Object(t),!0).forEach(function(n){(0,h3.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f3(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nl=l3(l3({},fC),{},{parse:n5});function n5(e,r){return ov.apply(this,arguments)}function ov(){return ov=(0,c3.default)(sv.default.mark(function e(r,t){var n,a,i;return sv.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,u3(t);case 2:return n=o.sent,a=n.draco,i=new n3(a),o.prev=5,o.abrupt("return",i.parseSync(r,t?.draco));case 7:return o.prev=7,i.destroy(),o.finish(7);case 10:case"end":return o.stop()}},e,null,[[5,,7,10]])})),ov.apply(this,arguments)}var d3=m(z()),p3=m(q()),en=m(J());var Cr,uv=(Cr={},(0,en.default)(Cr,5130,Float64Array),(0,en.default)(Cr,5126,Float32Array),(0,en.default)(Cr,5123,Uint16Array),(0,en.default)(Cr,5125,Uint32Array),(0,en.default)(Cr,5121,Uint8Array),(0,en.default)(Cr,5120,Int8Array),(0,en.default)(Cr,5122,Int16Array),(0,en.default)(Cr,5124,Int32Array),Cr),a5={DOUBLE:5130,FLOAT:5126,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,UNSIGNED_BYTE:5121,BYTE:5120,SHORT:5122,INT:5124},fv="Failed to convert GL type",In=function(){function e(){(0,d3.default)(this,e)}return(0,p3.default)(e,null,[{key:"fromTypedArray",value:function(t){t=ArrayBuffer.isView(t)?t.constructor:t;for(var n in uv){var a=uv[n];if(a===t)return n}throw new Error(fv)}},{key:"fromName",value:function(t){var n=a5[t];if(!n)throw new Error(fv);return n}},{key:"getArrayType",value:function(t){switch(t){case 33635:case 32819:case 32820:return Uint16Array;default:var n=uv[t];if(!n)throw new Error(fv);return n}}},{key:"getByteSize",value:function(t){var n=e.getArrayType(t);return n.BYTES_PER_ELEMENT}},{key:"validate",value:function(t){return Boolean(e.getArrayType(t))}},{key:"createTypedArray",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;i===void 0&&(i=(n.byteLength-a)/e.getByteSize(t));var s=e.getArrayType(t);return new s(n,a,i)}}]),e}();function m3(e,r){if(!e)throw new Error("math.gl assertion failed. ".concat(r))}function lv(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],t=e>>11&31,n=e>>5&63,a=e&31;return r[0]=t<<3,r[1]=n<<2,r[2]=a<<3,r}var kpe=1/256;var Dpe=new ia,Npe=new O,Gpe=new ia,Upe=new ia,jpe=new Uint8Array(1);function v3(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;return Mu(e,0,r)/r*2-1}function g3(e){return e<0?-1:1}function y3(e,r,t,n){if(m3(n),e<0||e>t||r<0||r>t)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(t));if(n.x=v3(e,t),n.y=v3(r,t),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){var a=n.x;n.x=(1-Math.abs(n.y))*g3(a),n.y=(1-Math.abs(a))*g3(n.y)}return n.normalize()}function cv(e,r,t){return y3(e,r,255,t)}var b3=m(z()),_3=m(q());var Mi=function(){function e(r,t){(0,b3.default)(this,e),b(this,"json",void 0),b(this,"buffer",void 0),b(this,"featuresLength",0),b(this,"_cachedTypedArrays",{}),this.json=r,this.buffer=t}return(0,_3.default)(e,[{key:"getExtension",value:function(t){return this.json.extensions&&this.json.extensions[t]}},{key:"hasProperty",value:function(t){return Boolean(this.json[t])}},{key:"getGlobalProperty",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5125,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=this.json[t];return i&&Number.isFinite(i.byteOffset)?this._getTypedArrayFromBinary(t,n,a,1,i.byteOffset):i}},{key:"getPropertyArray",value:function(t,n,a){var i=this.json[t];return i&&Number.isFinite(i.byteOffset)?("componentType"in i&&(n=In.fromName(i.componentType)),this._getTypedArrayFromBinary(t,n,a,this.featuresLength,i.byteOffset)):this._getTypedArrayFromArray(t,n,i)}},{key:"getProperty",value:function(t,n,a,i,s){var o=this.json[t];if(!o)return o;var u=this.getPropertyArray(t,n,a);if(a===1)return u[i];for(var f=0;f<a;++f)s[f]=u[a*i+f];return s}},{key:"_getTypedArrayFromBinary",value:function(t,n,a,i,s){var o=this._cachedTypedArrays,u=o[t];return u||(u=In.createTypedArray(n,this.buffer.buffer,this.buffer.byteOffset+s,i*a),o[t]=u),u}},{key:"_getTypedArrayFromArray",value:function(t,n,a){var i=this._cachedTypedArrays,s=i[t];return s||(s=In.createTypedArray(n,a),i[t]=s),s}}]),e}();var M3=m(wt()),E3=m(z()),S3=m(q());var i5={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},s5={SCALAR:function(r,t){return r[t]},VEC2:function(r,t){return[r[2*t+0],r[2*t+1]]},VEC3:function(r,t){return[r[3*t+0],r[3*t+1],r[3*t+2]]},VEC4:function(r,t){return[r[4*t+0],r[4*t+1],r[4*t+2],r[4*t+3]]},MAT2:function(r,t){return[r[4*t+0],r[4*t+1],r[4*t+2],r[4*t+3]]},MAT3:function(r,t){return[r[9*t+0],r[9*t+1],r[9*t+2],r[9*t+3],r[9*t+4],r[9*t+5],r[9*t+6],r[9*t+7],r[9*t+8]]},MAT4:function(r,t){return[r[16*t+0],r[16*t+1],r[16*t+2],r[16*t+3],r[16*t+4],r[16*t+5],r[16*t+6],r[16*t+7],r[16*t+8],r[16*t+9],r[16*t+10],r[16*t+11],r[16*t+12],r[16*t+13],r[16*t+14],r[16*t+15]]}},o5={SCALAR:function(r,t,n){t[n]=r},VEC2:function(r,t,n){t[2*n+0]=r[0],t[2*n+1]=r[1]},VEC3:function(r,t,n){t[3*n+0]=r[0],t[3*n+1]=r[1],t[3*n+2]=r[2]},VEC4:function(r,t,n){t[4*n+0]=r[0],t[4*n+1]=r[1],t[4*n+2]=r[2],t[4*n+3]=r[3]},MAT2:function(r,t,n){t[4*n+0]=r[0],t[4*n+1]=r[1],t[4*n+2]=r[2],t[4*n+3]=r[3]},MAT3:function(r,t,n){t[9*n+0]=r[0],t[9*n+1]=r[1],t[9*n+2]=r[2],t[9*n+3]=r[3],t[9*n+4]=r[4],t[9*n+5]=r[5],t[9*n+6]=r[6],t[9*n+7]=r[7],t[9*n+8]=r[8],t[9*n+9]=r[9]},MAT4:function(r,t,n){t[16*n+0]=r[0],t[16*n+1]=r[1],t[16*n+2]=r[2],t[16*n+3]=r[3],t[16*n+4]=r[4],t[16*n+5]=r[5],t[16*n+6]=r[6],t[16*n+7]=r[7],t[16*n+8]=r[8],t[16*n+9]=r[9],t[16*n+10]=r[10],t[16*n+11]=r[11],t[16*n+12]=r[12],t[16*n+13]=r[13],t[16*n+14]=r[14],t[16*n+15]=r[15]}};function A3(e,r,t,n){var a=e.componentType;ne(e.componentType);var i=typeof a=="string"?In.fromName(a):a,s=i5[e.type],o=s5[e.type],u=o5[e.type];t+=e.byteOffset;var f=In.createTypedArray(i,r,t,s*n);return{values:f,type:i,size:s,unpacker:o,packer:u}}var Or=function(r){return r!==void 0};function x3(e,r,t){if(!r)return null;var n=e.getExtension("3DTILES_batch_table_hierarchy"),a=r.HIERARCHY;return a&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),r.extensions=r.extensions||{},r.extensions["3DTILES_batch_table_hierarchy"]=a,n=a),n?u5(n,t):null}function u5(e,r){var t,n,a,i=e.instancesLength,s=e.classes,o=e.classIds,u=e.parentCounts,f=e.parentIds,l=i;Or(o.byteOffset)&&(o.componentType=defaultValue(o.componentType,5123),o.type=AttributeType.SCALAR,a=getBinaryAccessor(o),o=a.createArrayBufferView(r.buffer,r.byteOffset+o.byteOffset,i));var c;if(Or(u))for(Or(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,5123),u.type=AttributeType.SCALAR,a=getBinaryAccessor(u),u=a.createArrayBufferView(r.buffer,r.byteOffset+u.byteOffset,i)),c=new Uint16Array(i),l=0,t=0;t<i;++t)c[t]=l,l+=u[t];Or(f)&&Or(f.byteOffset)&&(f.componentType=defaultValue(f.componentType,5123),f.type=AttributeType.SCALAR,a=getBinaryAccessor(f),f=a.createArrayBufferView(r.buffer,r.byteOffset+f.byteOffset,l));var h=s.length;for(t=0;t<h;++t){var d=s[t].length,p=s[t].instances,v=getBinaryProperties(d,p,r);s[t].instances=combine(v,p)}var g=new Array(h).fill(0),y=new Uint16Array(i);for(t=0;t<i;++t)n=o[t],y[t]=g[n],++g[n];var _={classes:s,classIds:o,classIndexes:y,parentCounts:u,parentIndexes:c,parentIds:f};return c5(_),_}function Ei(e,r,t){if(e){var n=e.parentCounts,a=e.parentIds;return a?t(e,r):n>0?f5(e,r,t):l5(e,r,t)}}function f5(e,r,t){var n=e.classIds,a=e.parentCounts,i=e.parentIds,s=e.parentIndexes,o=n.length,u=scratchVisited;u.length=Math.max(u.length,o);var f=++marker,l=scratchStack;for(l.length=0,l.push(r);l.length>0;)if(r=l.pop(),u[r]!==f){u[r]=f;var c=t(e,r);if(Or(c))return c;for(var h=a[r],d=s[r],p=0;p<h;++p){var v=i[d+p];v!==r&&l.push(v)}}return null}function l5(e,r,t){for(var n=!0;n;){var a=t(e,r);if(Or(a))return a;var i=e.parentIds[r];n=i!==r,r=i}throw new Error("traverseHierarchySingleParent")}function c5(e){for(var r=[],t=e.classIds,n=t.length,a=0;a<n;++a)T3(e,a,stack)}function T3(e,r,t){var n=e.parentCounts,a=e.parentIds,i=e.parentIndexes,s=e.classIds,o=s.length;if(Or(a)){assert(r<o,"Parent index ".concat(r," exceeds the total number of instances: ").concat(o)),assert(t.indexOf(r)===-1,"Circular dependency detected in the batch table hierarchy."),t.push(r);for(var u=Or(n)?n[r]:1,f=Or(n)?i[r]:r,l=0;l<u;++l){var c=a[f+l];c!==r&&T3(e,c,t)}t.pop(r)}}function Ft(e){return e!=null}var al=function(r,t){return r},h5={HIERARCHY:!0,extensions:!0,extras:!0},il=function(){function e(r,t,n){(0,E3.default)(this,e);var a,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};b(this,"json",void 0),b(this,"binary",void 0),b(this,"featureCount",void 0),b(this,"_extensions",void 0),b(this,"_properties",void 0),b(this,"_binaryProperties",void 0),b(this,"_hierarchy",void 0),ne(n>=0),this.json=r||{},this.binary=t,this.featureCount=n,this._extensions=((a=this.json)===null||a===void 0?void 0:a.extensions)||{},this._properties={};for(var s in this.json)h5[s]||(this._properties[s]=this.json[s]);this._binaryProperties=this._initializeBinaryProperties(),i["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=x3(this,this.json,this.binary))}return(0,S3.default)(e,[{key:"getExtension",value:function(t){return this.json&&this.json.extensions&&this.json.extensions[t]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(t,n){if(this._checkBatchId(t),ne(typeof n=="string",n),this._hierarchy){var a=Ei(this._hierarchy,t,function(i,s){var o=i.classIds[s],u=i.classes[o];return u.name===n});return Ft(a)}return!1}},{key:"isExactClass",value:function(t,n){return ne(typeof n=="string",n),this.getExactClassName(t)===n}},{key:"getExactClassName",value:function(t){if(this._checkBatchId(t),this._hierarchy){var n=this._hierarchy.classIds[t],a=this._hierarchy.classes[n];return a.name}}},{key:"hasProperty",value:function(t,n){return this._checkBatchId(t),ne(typeof n=="string",n),Ft(this._properties[n])||this._hasPropertyInHierarchy(t,n)}},{key:"getPropertyNames",value:function(t,n){var a;this._checkBatchId(t),n=Ft(n)?n:[],n.length=0;var i=Object.keys(this._properties);return(a=n).push.apply(a,(0,M3.default)(i)),this._hierarchy&&this._getPropertyNamesInHierarchy(t,n),n}},{key:"getProperty",value:function(t,n){if(this._checkBatchId(t),ne(typeof n=="string",n),this._binaryProperties){var a=this._binaryProperties[n];if(Ft(a))return this._getBinaryProperty(a,t)}var i=this._properties[n];if(Ft(i))return al(i[t],!0);if(this._hierarchy){var s=this._getHierarchyProperty(t,n);if(Ft(s))return s}}},{key:"setProperty",value:function(t,n,a){var i=this.featureCount;if(this._checkBatchId(t),ne(typeof n=="string",n),this._binaryProperties){var s=this._binaryProperties[n];if(s){this._setBinaryProperty(s,t,a);return}}if(!(this._hierarchy&&this._setHierarchyProperty(this,t,n,a))){var o=this._properties[n];Ft(o)||(this._properties[n]=new Array(i),o=this._properties[n]),o[t]=al(a,!0)}}},{key:"_checkBatchId",value:function(t){var n=t>=0&&t<this.featureCount;if(!n)throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(t,n){return t.unpack(t.typedArray,n)}},{key:"_setBinaryProperty",value:function(t,n,a){t.pack(a,t.typedArray,n)}},{key:"_initializeBinaryProperties",value:function(){var t=null;for(var n in this._properties){var a=this._properties[n],i=this._initializeBinaryProperty(n,a);i&&(t=t||{},t[n]=i)}return t}},{key:"_initializeBinaryProperty",value:function(t,n){if("byteOffset"in n){var a=n;ne(this.binary,"Property ".concat(t," requires a batch table binary.")),ne(a.type,"Property ".concat(t," requires a type."));var i=A3(a,this.binary.buffer,this.binary.byteOffset|0,this.featureCount);return{typedArray:i.values,componentCount:i.size,unpack:i.unpacker,pack:i.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(t,n){if(!this._hierarchy)return!1;var a=Ei(this._hierarchy,t,function(i,s){var o=i.classIds[s],u=i.classes[o].instances;return Ft(u[n])});return Ft(a)}},{key:"_getPropertyNamesInHierarchy",value:function(t,n){Ei(this._hierarchy,t,function(a,i){var s=a.classIds[i],o=a.classes[s].instances;for(var u in o)o.hasOwnProperty(u)&&n.indexOf(u)===-1&&n.push(u)})}},{key:"_getHierarchyProperty",value:function(t,n){var a=this;return Ei(this._hierarchy,t,function(i,s){var o=i.classIds[s],u=i.classes[o],f=i.classIndexes[s],l=u.instances[n];return Ft(l)?Ft(l.typedArray)?a._getBinaryProperty(l,f):al(l[f],!0):null})}},{key:"_setHierarchyProperty",value:function(t,n,a,i){var s=this,o=Ei(this._hierarchy,n,function(u,f){var l=u.classIds[f],c=u.classes[l],h=u.classIndexes[f],d=c.instances[a];return Ft(d)?(ne(f===n,'Inherited property "'.concat(a,'" is read-only.')),Ft(d.typedArray)?s._setBinaryProperty(d,h,i):d[h]=al(i,!0),!0):!1});return Ft(o)}}]),e}();var hv=4;function Rn(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=new DataView(r);if(e.magic=n.getUint32(t,!0),t+=hv,e.version=n.getUint32(t,!0),t+=hv,e.byteLength=n.getUint32(t,!0),t+=hv,e.version!==1)throw new Error("3D Tile Version ".concat(e.version," not supported"));return t}var Si=4,w3="b3dm tile in legacy format.";function wi(e,r,t){var n=new DataView(r),a;e.header=e.header||{};var i=n.getUint32(t,!0);t+=Si;var s=n.getUint32(t,!0);t+=Si;var o=n.getUint32(t,!0);t+=Si;var u=n.getUint32(t,!0);return t+=Si,o>=570425344?(t-=Si*2,a=i,o=s,u=0,i=0,s=0,console.warn(w3)):u>=570425344&&(t-=Si,a=o,o=i,u=s,i=0,s=0,console.warn(w3)),e.header.featureTableJsonByteLength=i,e.header.featureTableBinaryByteLength=s,e.header.batchTableJsonByteLength=o,e.header.batchTableBinaryByteLength=u,e.header.batchLength=a,t}function Ci(e,r,t,n){return t=d5(e,r,t,n),t=p5(e,r,t,n),t}function d5(e,r,t,n){var a=e.header,i=a.featureTableJsonByteLength,s=a.featureTableBinaryByteLength,o=a.batchLength;if(e.featureTableJson={BATCH_LENGTH:o||0},i>0){var u=Jm(r,t,i);e.featureTableJson=JSON.parse(u)}return t+=i,e.featureTableBinary=new Uint8Array(r,t,s),t+=s,t}function p5(e,r,t,n){var a=e.header,i=a.batchTableJsonByteLength,s=a.batchTableBinaryByteLength;if(i>0){var o=Jm(r,t,i);e.batchTableJson=JSON.parse(o),t+=i,s>0&&(e.batchTableBinary=new Uint8Array(r,t,s),e.batchTableBinary=new Uint8Array(e.batchTableBinary),t+=s)}return t}function dv(e,r,t){if(!r&&(!e||!e.batchIds||!t))return null;var n=e.batchIds,a=e.isRGB565,i=e.pointCount;if(n&&t){for(var s=new Uint8ClampedArray(i*3),o=0;o<i;o++){var u=n[o],f=t.getProperty(u,"dimensions"),l=f.map(function(p){return p*255});s[o*3]=l[0],s[o*3+1]=l[1],s[o*3+2]=l[2]}return{type:5121,value:s,size:3,normalized:!0}}if(a){for(var c=new Uint8ClampedArray(i*3),h=0;h<i;h++){var d=lv(r[h]);c[h*3]=d[0],c[h*3+1]=d[1],c[h*3+2]=d[2]}return{type:5121,value:c,size:3,normalized:!0}}return r&&r.length===i*3?{type:5121,value:r,size:3,normalized:!0}:{type:5121,value:r,size:4,normalized:!0}}var C3=new O;function O3(e,r){if(!r)return null;if(e.isOctEncoded16P){for(var t=new Float32Array(e.pointsLength*3),n=0;n<e.pointsLength;n++)cv(r[n*2],r[n*2+1],C3),C3.toArray(t,n*3);return{type:5126,size:2,value:t}}return{type:5126,size:2,value:r}}function B3(e,r,t){return e.isQuantized?t["3d-tiles"]&&t["3d-tiles"].decodeQuantizedPositions?(e.isQuantized=!1,m5(e,r)):{type:5123,value:r,size:3,normalized:!0}:r}function m5(e,r){for(var t=new O,n=new Float32Array(e.pointCount*3),a=0;a<e.pointCount;a++)t.set(r[a*3],r[a*3+1],r[a*3+2]).scale(1/e.quantizedRange).multiply(e.quantizedVolumeScale).add(e.quantizedVolumeOffset).toArray(n,a*3);return n}function P3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ta(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?P3(Object(t),!0).forEach(function(n){(0,I3.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P3(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function R3(e,r,t,n,a){return pv.apply(this,arguments)}function pv(){return pv=(0,sl.default)(Ma.default.mark(function e(r,t,n,a,i){var s,o,u;return Ma.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=Rn(r,t,n),n=wi(r,t,n),n=Ci(r,t,n,a),v5(r),s=g5(r),o=s.featureTable,u=s.batchTable,l.next=7,x5(r,o,u,a,i);case 7:return y5(r,o,a),b5(r,o,u),_5(r,o),l.abrupt("return",n);case 11:case"end":return l.stop()}},e)})),pv.apply(this,arguments)}function v5(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}function g5(e){var r=new Mi(e.featureTableJson,e.featureTableBinary),t=r.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(t))throw new Error("POINTS_LENGTH must be defined");r.featuresLength=t,e.featuresLength=t,e.pointsLength=t,e.pointCount=t,e.rtcCenter=r.getGlobalProperty("RTC_CENTER",5126,3);var n=A5(e,r);return{featureTable:r,batchTable:n}}function y5(e,r,t){if(!e.attributes.positions){if(r.hasProperty("POSITION"))e.attributes.positions=r.getPropertyArray("POSITION",5126,3);else if(r.hasProperty("POSITION_QUANTIZED")){var n=r.getPropertyArray("POSITION_QUANTIZED",5123,3);if(e.isQuantized=!0,e.quantizedRange=(1<<16)-1,e.quantizedVolumeScale=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",5126,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",5126,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");e.attributes.positions=B3(e,n,t)}}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function b5(e,r,t){if(!e.attributes.colors){var n=null;r.hasProperty("RGBA")?(n=r.getPropertyArray("RGBA",5121,4),e.isTranslucent=!0):r.hasProperty("RGB")?n=r.getPropertyArray("RGB",5121,3):r.hasProperty("RGB565")&&(n=r.getPropertyArray("RGB565",5123,1),e.isRGB565=!0),e.attributes.colors=dv(e,n,t)}r.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=r.getGlobalProperty("CONSTANT_RGBA",5121,4))}function _5(e,r){if(!e.attributes.normals){var t=null;r.hasProperty("NORMAL")?t=r.getPropertyArray("NORMAL",5126,3):r.hasProperty("NORMAL_OCT16P")&&(t=r.getPropertyArray("NORMAL_OCT16P",5121,2),e.isOctEncoded16P=!0),e.attributes.normals=O3(e,t)}}function A5(e,r){var t=null;if(!e.batchIds&&r.hasProperty("BATCH_ID")&&(e.batchIds=r.getPropertyArray("BATCH_ID",5123,1),e.batchIds)){var n=r.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var a=e.batchTableJson,i=e.batchTableBinary;t=new il(a,i,n)}return t}function x5(e,r,t,n,a){return mv.apply(this,arguments)}function mv(){return mv=(0,sl.default)(Ma.default.mark(function e(r,t,n,a,i){var s,o,u,f,l,c,h,d;return Ma.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(f=r.batchTableJson&&r.batchTableJson.extensions&&r.batchTableJson.extensions["3DTILES_draco_point_compression"],f&&(u=f.properties),l=t.getExtension("3DTILES_draco_point_compression"),!l){v.next=15;break}if(o=l.properties,c=l.byteOffset,h=l.byteLength,!(!o||!Number.isFinite(c)||!h)){v.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:s=r.featureTableBinary.slice(c,c+h),r.hasPositions=Number.isFinite(o.POSITION),r.hasColors=Number.isFinite(o.RGB)||Number.isFinite(o.RGBA),r.hasNormals=Number.isFinite(o.NORMAL),r.hasBatchIds=Number.isFinite(o.BATCH_ID),r.isTranslucent=Number.isFinite(o.RGBA);case 15:if(s){v.next=17;break}return v.abrupt("return",!0);case 17:return d={buffer:s,properties:Ta(Ta({},o),u),featureTableProperties:o,batchTableProperties:u,dequantizeInShader:!1},v.next=20,T5(r,d,a,i);case 20:return v.abrupt("return",v.sent);case 21:case"end":return v.stop()}},e)})),mv.apply(this,arguments)}function T5(e,r,t,n){return vv.apply(this,arguments)}function vv(){return vv=(0,sl.default)(Ma.default.mark(function e(r,t,n,a){var i,s,o,u,f,l,c,h,d,p,v,g,y,_,T;return Ma.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return i=a.parse,s=Ta(Ta({},n),{},{draco:Ta(Ta({},n.draco),{},{extraAttributes:t.batchTableProperties||{}})}),delete s["3d-tiles"],E.next=5,i(t.buffer,nl,s);case 5:if(o=E.sent,u=o.attributes.POSITION&&o.attributes.POSITION.value,f=o.attributes.COLOR_0&&o.attributes.COLOR_0.value,l=o.attributes.NORMAL&&o.attributes.NORMAL.value,c=o.attributes.BATCH_ID&&o.attributes.BATCH_ID.value,h=u&&o.attributes.POSITION.value.quantization,d=l&&o.attributes.NORMAL.value.quantization,h&&(p=o.POSITION.data.quantization,v=p.range,r.quantizedVolumeScale=new O(v,v,v),r.quantizedVolumeOffset=new O(p.minValues),r.quantizedRange=(1<<p.quantizationBits)-1,r.isQuantizedDraco=!0),d&&(r.octEncodedRange=(1<<o.NORMAL.data.quantization.quantizationBits)-1,r.isOctEncodedDraco=!0),g={},t.batchTableProperties)for(y=0,_=Object.keys(t.batchTableProperties);y<_.length;y++)T=_[y],o.attributes[T]&&o.attributes[T].value&&(g[T.toLowerCase()]=o.attributes[T].value);r.attributes=Ta({positions:u,colors:dv(r,f,void 0),normals:l,batchIds:c},g);case 17:case"end":return E.stop()}},e)})),vv.apply(this,arguments)}var lB=m(Y()),Og=m(K());var fB=m(Y()),wg=m(K());var oB=m(J()),uB=m(Y()),Eg=m(K());var L3="3.3.1";var co=m(Y()),nn=m(K());var F3="3.3.1";var tO=m(J());var Y3=m(De()),Q3=m(Y()),wv=m(K());var Tv=m(ve()),no=m(Y()),tn=m(K());var k3="3.3.1",M5="https://unpkg.com/@loaders.gl/textures@".concat(k3,"/dist/libs/basis_encoder.wasm"),E5="https://unpkg.com/@loaders.gl/textures@".concat(k3,"/dist/libs/basis_encoder.js"),gv;function Mv(e){return bv.apply(this,arguments)}function bv(){return bv=(0,no.default)(tn.default.mark(function e(r){var t;return tn.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=r.modules||{},!t.basis){a.next=3;break}return a.abrupt("return",t.basis);case 3:return gv=gv||S5(r),a.next=6,gv;case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},e)})),bv.apply(this,arguments)}function S5(e){return _v.apply(this,arguments)}function _v(){return _v=(0,no.default)(tn.default.mark(function e(r){var t,n,a,i;return tn.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=null,n=null,o.t0=Promise,o.next=5,gr("basis_transcoder.js","textures",r);case 5:return o.t1=o.sent,o.next=8,gr("basis_transcoder.wasm","textures",r);case 8:return o.t2=o.sent,o.t3=[o.t1,o.t2],o.next=12,o.t0.all.call(o.t0,o.t3);case 12:return a=o.sent,i=(0,Tv.default)(a,2),t=i[0],n=i[1],t=t||globalThis.BASIS,o.next=19,w5(t,n);case 19:return o.abrupt("return",o.sent);case 20:case"end":return o.stop()}},e)})),_v.apply(this,arguments)}function w5(e,r){var t={};return r&&(t.wasmBinary=r),new Promise(function(n){e(t).then(function(a){var i=a.BasisFile,s=a.initializeBasis;s(),n({BasisFile:i})})})}var yv;function Ev(e){return Av.apply(this,arguments)}function Av(){return Av=(0,no.default)(tn.default.mark(function e(r){var t;return tn.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=r.modules||{},!t.basisEncoder){a.next=3;break}return a.abrupt("return",t.basisEncoder);case 3:return yv=yv||C5(r),a.next=6,yv;case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},e)})),Av.apply(this,arguments)}function C5(e){return xv.apply(this,arguments)}function xv(){return xv=(0,no.default)(tn.default.mark(function e(r){var t,n,a,i;return tn.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=null,n=null,o.t0=Promise,o.next=5,gr(E5,"textures",r);case 5:return o.t1=o.sent,o.next=8,gr(M5,"textures",r);case 8:return o.t2=o.sent,o.t3=[o.t1,o.t2],o.next=12,o.t0.all.call(o.t0,o.t3);case 12:return a=o.sent,i=(0,Tv.default)(a,2),t=i[0],n=i[1],t=t||globalThis.BASIS,o.next=19,O5(t,n);case 19:return o.abrupt("return",o.sent);case 20:case"end":return o.stop()}},e)})),xv.apply(this,arguments)}function O5(e,r){var t={};return r&&(t.wasmBinary=r),new Promise(function(n){e(t).then(function(a){var i=a.BasisFile,s=a.KTX2File,o=a.initializeBasis,u=a.BasisEncoder;o(),n({BasisFile:i,KTX2File:s,BasisEncoder:u})})})}var Ea={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};function B5(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=P5(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function P5(e,r){if(e){if(typeof e=="string")return D3(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D3(e,r)}}function D3(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var I5=["","WEBKIT_","MOZ_"],N3={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},ol=null;function G3(e){if(!ol){e=e||R5()||void 0,ol=new Set;var r=B5(I5),t;try{for(r.s();!(t=r.n()).done;){var n=t.value;for(var a in N3)if(e&&e.getExtension("".concat(n).concat(a))){var i=N3[a];ol.add(i)}}}catch(s){r.e(s)}finally{r.f()}}return ol}function R5(){try{var e=document.createElement("canvas");return e.getContext("webgl")}catch{return null}}var Jme=new Uint8Array([0]);var U3,j3,H3,V3,z3,W3,q3,J3;(function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"})(U3||(U3={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(j3||(j3={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(H3||(H3={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(V3||(V3={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(z3||(z3={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(W3||(W3={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(q3||(q3={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(J3||(J3={}));var Vt=[171,75,84,88,32,50,48,187,13,10,26,10];function X3(e){var r=new Uint8Array(e),t=r.byteLength<Vt.length||r[0]!==Vt[0]||r[1]!==Vt[1]||r[2]!==Vt[2]||r[3]!==Vt[3]||r[4]!==Vt[4]||r[5]!==Vt[5]||r[6]!==Vt[6]||r[7]!==Vt[7]||r[8]!==Vt[8]||r[9]!==Vt[9]||r[10]!==Vt[10]||r[11]!==Vt[11];return!t}var L5={etc1:{basisFormat:0,compressed:!0,format:Ea.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:Ea.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:Ea.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:Ea.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:Ea.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:Ea.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function Ov(e,r){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,Q3.default)(wv.default.mark(function e(r,t){var n,a,i,s,o,u;return wv.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t.basis.containerFormat!=="auto"){l.next=11;break}if(!X3(r)){l.next=6;break}return l.next=4,Ev(t);case 4:return n=l.sent,l.abrupt("return",K3(n.KTX2File,r,t));case 6:return l.next=8,Mv(t);case 8:return a=l.sent,i=a.BasisFile,l.abrupt("return",Sv(i,r,t));case 11:l.t0=t.basis.module,l.next=l.t0==="encoder"?14:(l.t0==="transcoder",22);break;case 14:return l.next=16,Ev(t);case 16:s=l.sent,l.t1=t.basis.containerFormat,l.next=l.t1==="ktx2"?20:(l.t1==="basis",21);break;case 20:return l.abrupt("return",K3(s.KTX2File,r,t));case 21:return l.abrupt("return",Sv(s.BasisFile,r,t));case 22:return l.next=24,Mv(t);case 24:return o=l.sent,u=o.BasisFile,l.abrupt("return",Sv(u,r,t));case 27:case"end":return l.stop()}},e)})),Cv.apply(this,arguments)}function Sv(e,r,t){var n=new e(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");for(var a=n.getNumImages(),i=[],s=0;s<a;s++){for(var o=n.getNumLevels(s),u=[],f=0;f<o;f++)u.push(F5(n,s,f,t));i.push(u)}return i}finally{n.close(),n.delete()}}function F5(e,r,t,n){var a=e.getImageWidth(r,t),i=e.getImageHeight(r,t),s=e.getHasAlpha(),o=$3(n,s),u=o.compressed,f=o.format,l=o.basisFormat,c=e.getImageTranscodedSizeInBytes(r,t,l),h=new Uint8Array(c);if(!e.transcodeImage(h,r,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:a,height:i,data:h,compressed:u,format:f,hasAlpha:s}}function K3(e,r,t){var n=new e(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");for(var a=n.getLevels(),i=[],s=0;s<a;s++){i.push(k5(n,s,t));break}return[i]}finally{n.close(),n.delete()}}function k5(e,r,t){var n=e.getImageLevelInfo(r,0,0),a=n.alphaFlag,i=n.height,s=n.width,o=$3(t,a),u=o.compressed,f=o.format,l=o.basisFormat,c=e.getImageTranscodedSizeInBytes(r,0,0,l),h=new Uint8Array(c);if(!e.transcodeImage(h,r,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:i,data:h,compressed:u,levelSize:c,hasAlpha:a,format:f}}function $3(e,r){var t=e&&e.basis&&e.basis.format;return t==="auto"&&(t=ul()),(0,Y3.default)(t)==="object"&&(t=r?t.alpha:t.noAlpha),t=t.toLowerCase(),L5[t]}function ul(){var e=G3();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}function Z3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function eO(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Z3(Object(t),!0).forEach(function(n){(0,tO.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z3(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rO={name:"Basis",id:gt?"basis":"basis-nodejs",module:"textures",version:F3,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},Bv=eO(eO({},rO),{},{parse:Ov});function it(e,r){if(!e)throw new Error(r||"assert failed: gltf")}function Pv(e,r){var t=e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:");if(t)return e;var n=r.baseUri||r.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(e));return n.substr(0,n.lastIndexOf("/")+1)+e}function nO(e,r,t){var n=e.bufferViews[t];it(n);var a=n.buffer,i=r[a];it(i);var s=(n.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,s,n.byteLength)}var DO=m(Y()),pg=m(K());var Uv={};$t(Uv,{decode:()=>aj,name:()=>nj});var Nv=m(Y()),ao=m(K());var uO=m(De()),fO=m(J()),lO=m(z()),cO=m(q());var aO=["SCALAR","VEC2","VEC3","VEC4"],D5=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],N5=new Map(D5),G5={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U5={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},j5={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function fl(e){var r=aO[e-1];return r||aO[0]}function ll(e){var r=N5.get(e.constructor);if(!r)throw new Error("Illegal typed array");return r}function Oi(e,r){var t=j5[e.componentType],n=G5[e.type],a=U5[e.componentType],i=e.count*n,s=e.count*n*a;return it(s>=0&&s<=r.byteLength),{ArrayType:t,length:i,byteLength:s}}function iO(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=H5(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function H5(e,r){if(e){if(typeof e=="string")return sO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sO(e,r)}}function sO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function oO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function V5(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?oO(Object(t),!0).forEach(function(n){(0,fO.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oO(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var z5={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},ke=function(){function e(r){(0,lO.default)(this,e),b(this,"gltf",void 0),b(this,"sourceBuffers",void 0),b(this,"byteLength",void 0),this.gltf=r||{json:V5({},z5),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}return(0,cO.default)(e,[{key:"json",get:function(){return this.gltf.json}},{key:"getApplicationData",value:function(t){var n=this.json[t];return n}},{key:"getExtraData",value:function(t){var n=this.json.extras||{};return n[t]}},{key:"getExtension",value:function(t){var n=this.getUsedExtensions().find(function(i){return i===t}),a=this.json.extensions||{};return n?a[t]||!0:null}},{key:"getRequiredExtension",value:function(t){var n=this.getRequiredExtensions().find(function(a){return a===t});return n?this.getExtension(t):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getRemovedExtensions",value:function(){return this.json.extensionsRemoved||[]}},{key:"getObjectExtension",value:function(t,n){var a=t.extensions||{};return a[n]}},{key:"getScene",value:function(t){return this.getObject("scenes",t)}},{key:"getNode",value:function(t){return this.getObject("nodes",t)}},{key:"getSkin",value:function(t){return this.getObject("skins",t)}},{key:"getMesh",value:function(t){return this.getObject("meshes",t)}},{key:"getMaterial",value:function(t){return this.getObject("materials",t)}},{key:"getAccessor",value:function(t){return this.getObject("accessors",t)}},{key:"getTexture",value:function(t){return this.getObject("textures",t)}},{key:"getSampler",value:function(t){return this.getObject("samplers",t)}},{key:"getImage",value:function(t){return this.getObject("images",t)}},{key:"getBufferView",value:function(t){return this.getObject("bufferViews",t)}},{key:"getBuffer",value:function(t){return this.getObject("buffers",t)}},{key:"getObject",value:function(t,n){if((0,uO.default)(n)==="object")return n;var a=this.json[t]&&this.json[t][n];if(!a)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(n,"]"));return a}},{key:"getTypedArrayForBufferView",value:function(t){t=this.getBufferView(t);var n=t.buffer,a=this.gltf.buffers[n];it(a);var i=(t.byteOffset||0)+a.byteOffset;return new Uint8Array(a.arrayBuffer,i,t.byteLength)}},{key:"getTypedArrayForAccessor",value:function(t){t=this.getAccessor(t);var n=this.getBufferView(t.bufferView),a=this.getBuffer(n.buffer),i=a.data,s=Oi(t,n),o=s.ArrayType,u=s.length,f=n.byteOffset+t.byteOffset;return new o(i,f,u)}},{key:"getTypedArrayForImageData",value:function(t){t=this.getAccessor(t);var n=this.getBufferView(t.bufferView),a=this.getBuffer(n.buffer),i=a.data,s=n.byteOffset||0;return new Uint8Array(i,s,n.byteLength)}},{key:"addApplicationData",value:function(t,n){return this.json[t]=n,this}},{key:"addExtraData",value:function(t,n){return this.json.extras=this.json.extras||{},this.json.extras[t]=n,this}},{key:"addObjectExtension",value:function(t,n,a){return t.extensions=t.extensions||{},t.extensions[n]=a,this.registerUsedExtension(n),this}},{key:"setObjectExtension",value:function(t,n,a){var i=t.extensions||{};i[n]=a}},{key:"removeObjectExtension",value:function(t,n){var a=t.extensions||{},i=a[n];return delete a[n],i}},{key:"addExtension",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return it(n),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=n,this.registerUsedExtension(t),n}},{key:"addRequiredExtension",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return it(n),this.addExtension(t,n),this.registerRequiredExtension(t),n}},{key:"registerUsedExtension",value:function(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(n){return n===t})||this.json.extensionsUsed.push(t)}},{key:"registerRequiredExtension",value:function(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(n){return n===t})||this.json.extensionsRequired.push(t)}},{key:"removeExtension",value:function(t){if(this.getExtension(t)){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);var n=this.json.extensionsRemoved;n.includes(t)||n.push(t)}}},{key:"setDefaultScene",value:function(t){this.json.scene=t}},{key:"addScene",value:function(t){var n=t.nodeIndices;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}},{key:"addNode",value:function(t){var n=t.meshIndex,a=t.matrix;this.json.nodes=this.json.nodes||[];var i={mesh:n};return a&&(i.matrix=a),this.json.nodes.push(i),this.json.nodes.length-1}},{key:"addMesh",value:function(t){var n=t.attributes,a=t.indices,i=t.material,s=t.mode,o=s===void 0?4:s,u=this._addAttributes(n),f={primitives:[{attributes:u,mode:o}]};if(a){var l=this._addIndices(a);f.primitives[0].indices=l}return Number.isFinite(i)&&(f.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(f),this.json.meshes.length-1}},{key:"addPointCloud",value:function(t){var n=this._addAttributes(t),a={primitives:[{attributes:n,mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}},{key:"addImage",value:function(t,n){var a=qn(t),i=n||a?.mimeType,s=this.addBufferView(t),o={bufferView:s,mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}},{key:"addBufferView",value:function(t){var n=t.byteLength;it(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);var a={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=ln(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(a),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(t,n){var a={bufferView:t,type:fl(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(a),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:3},a=this.addBufferView(t),i={min:n.min,max:n.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(t,n.size));var s={size:n.size,componentType:ll(t),count:Math.round(t.length/n.size),min:i.min,max:i.max};return this.addAccessor(a,Object.assign(s,n))}},{key:"addTexture",value:function(t){var n=t.imageIndex,a={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(a),this.json.textures.length-1}},{key:"addMaterial",value:function(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}},{key:"createBinaryChunk",value:function(){var t,n;this.gltf.buffers=[];var a=this.byteLength,i=new ArrayBuffer(a),s=new Uint8Array(i),o=0,u=iO(this.sourceBuffers||[]),f;try{for(u.s();!(f=u.n()).done;){var l=f.value;o=Nc(l,s,o)}}catch(c){u.e(c)}finally{u.f()}(t=this.json)!==null&&t!==void 0&&(n=t.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=a:this.json.buffers=[{byteLength:a}],this.gltf.binary=i,this.sourceBuffers=[i]}},{key:"_removeStringFromArray",value:function(t,n){for(var a=!0;a;){var i=t.indexOf(n);i>-1?t.splice(i,1):a=!1}}},{key:"_addAttributes",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={};for(var a in t){var i=t[a],s=this._getGltfAttributeName(a),o=this.addBinaryBuffer(i.value,i);n[s]=o}return n}},{key:"_addIndices",value:function(t){return this.addBinaryBuffer(t,{size:1})}},{key:"_getGltfAttributeName",value:function(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}},{key:"_getAccessorMinMax",value:function(t,n){var a={min:null,max:null};if(t.length<n)return a;a.min=[],a.max=[];var i=t.subarray(0,n),s=iO(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value;a.min.push(u),a.max.push(u)}}catch(c){s.e(c)}finally{s.f()}for(var f=n;f<t.length;f+=n)for(var l=0;l<n;l++)a.min[0+l]=Math.min(a.min[0+l],t[f+l]),a.max[0+l]=Math.max(a.max[0+l],t[f+l]);return a}}]),e}();var cl=m(Y()),hO=m(De()),Sa=m(K()),xve=(typeof WebAssembly>"u"?"undefined":(0,hO.default)(WebAssembly))!=="object",W5="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",q5="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",J5=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),X5=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),K5={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Y5={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function dO(e,r,t,n,a){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,cl.default)(Sa.default.mark(function e(r,t,n,a,i){var s,o,u=arguments;return Sa.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=u.length>5&&u[5]!==void 0?u[5]:"NONE",l.next=3,Q5();case 3:o=l.sent,ej(o,o.exports[Y5[i]],r,t,n,a,o.exports[K5[s||"NONE"]]);case 5:case"end":return l.stop()}},e)})),Rv.apply(this,arguments)}var Iv;function Q5(){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,cl.default)(Sa.default.mark(function e(){return Sa.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Iv||(Iv=$5()),t.abrupt("return",Iv);case 2:case"end":return t.stop()}},e)})),Lv.apply(this,arguments)}function $5(){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,cl.default)(Sa.default.mark(function e(){var r,t;return Sa.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=W5,WebAssembly.validate(J5)&&(r=q5,console.log("Warning: meshopt_decoder is using experimental SIMD support")),a.next=4,WebAssembly.instantiate(Z5(r),{});case 4:return t=a.sent,a.next=7,t.instance.exports.__wasm_call_ctors();case 7:return a.abrupt("return",t.instance);case 8:case"end":return a.stop()}},e)})),Fv.apply(this,arguments)}function Z5(e){for(var r=new Uint8Array(e.length),t=0;t<e.length;++t){var n=e.charCodeAt(t);r[t]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}for(var a=0,i=0;i<e.length;++i)r[a++]=r[i]<60?X5[r[i]]:(r[i]-60)*64+r[++i];return r.buffer.slice(0,a)}function ej(e,r,t,n,a,i,s){var o=e.exports.sbrk,u=n+3&-4,f=o(u*a),l=o(i.length),c=new Uint8Array(e.exports.memory.buffer);c.set(i,l);var h=r(f,n,a,l,i.length);if(h===0&&s&&s(f,u,a),t.set(c.subarray(f,f+n*a)),o(f-o(0)),h!==0)throw new Error("Malformed buffer data: ".concat(h))}function tj(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=rj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function rj(e,r){if(e){if(typeof e=="string")return pO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pO(e,r)}}function pO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Gv="EXT_meshopt_compression",nj=Gv;function aj(e,r){return kv.apply(this,arguments)}function kv(){return kv=(0,Nv.default)(ao.default.mark(function e(r,t){var n,a,i,s,o,u;return ao.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=new ke(r),t!=null&&(n=t.gltf)!==null&&n!==void 0&&n.decompressMeshes){l.next=3;break}return l.abrupt("return");case 3:i=[],s=tj(r.json.bufferViews||[]);try{for(s.s();!(o=s.n()).done;)u=o.value,i.push(ij(a,u))}catch(c){s.e(c)}finally{s.f()}return l.next=8,Promise.all(i);case 8:a.removeExtension(Gv);case 9:case"end":return l.stop()}},e)})),kv.apply(this,arguments)}function ij(e,r){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,Nv.default)(ao.default.mark(function e(r,t){var n,a,i,s,o,u,f,l,c,h,d,p,v,g;return ao.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(n=r.getObjectExtension(t,Gv),!n){_.next=9;break}return a=n.byteOffset,i=a===void 0?0:a,s=n.byteLength,o=s===void 0?0:s,u=n.byteStride,f=n.count,l=n.mode,c=n.filter,h=c===void 0?"NONE":c,d=n.buffer,p=r.gltf.buffers[d],v=new Uint8Array(p.arrayBuffer,p.byteOffset+i,o),g=new Uint8Array(r.gltf.buffers[t.buffer].arrayBuffer,t.byteOffset,t.byteLength),_.next=8,dO(g,f,u,v,l,h);case 8:return _.abrupt("return",g);case 9:return _.abrupt("return",null);case 10:case"end":return _.stop()}},e)})),Dv.apply(this,arguments)}var jv={};$t(jv,{name:()=>uj,preprocess:()=>fj});function sj(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=oj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function oj(e,r){if(e){if(typeof e=="string")return mO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mO(e,r)}}function mO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Bi="EXT_texture_webp",uj=Bi;function fj(e,r){var t=new ke(e);if(!hh("image/webp")){if(t.getRequiredExtensions().includes(Bi))throw new Error("gltf: Required extension ".concat(Bi," not supported by browser"));return}var n=t.json,a=sj(n.textures||[]),i;try{for(a.s();!(i=a.n()).done;){var s=i.value,o=t.getObjectExtension(s,Bi);o&&(s.source=o.source),t.removeObjectExtension(s,Bi)}}catch(u){a.e(u)}finally{a.f()}t.removeExtension(Bi)}var Hv={};$t(Hv,{name:()=>hj,preprocess:()=>dj});function lj(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=cj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function cj(e,r){if(e){if(typeof e=="string")return vO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vO(e,r)}}function vO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var hl="KHR_texture_basisu",hj=hl;function dj(e,r){var t=new ke(e),n=t.json,a=lj(n.textures||[]),i;try{for(a.s();!(i=a.n()).done;){var s=i.value,o=t.getObjectExtension(s,hl);o&&(s.source=o.source),t.removeObjectExtension(s,hl)}}catch(u){a.e(u)}finally{a.f()}t.removeExtension(hl)}var Kv={};$t(Kv,{decode:()=>Aj,encode:()=>xj,name:()=>bj,preprocess:()=>_j});var _O=m(ve()),qv=m(J()),Jv=m(Y()),wa=m(K());function gO(e){var r={};for(var t in e){var n=e[t];if(t!=="indices"){var a=Vv(n);r[t]=a}}return r}function Vv(e){var r=pj(e),t=r.buffer,n=r.size,a=r.count,i={value:t,size:n,byteOffset:0,count:a,type:fl(n),componentType:ll(t)};return i}function pj(e){var r=e,t=1,n=0;return e&&e.value&&(r=e.value,t=e.size||1),r&&(ArrayBuffer.isView(r)||(r=mj(r,Float32Array)),n=r.length/t),{buffer:r,size:t,count:n}}function mj(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e?Array.isArray(e)?new r(e):t&&!(e instanceof r)?new r(e):e:null}function yO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function vj(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?yO(Object(t),!0).forEach(function(n){(0,qv.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yO(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var gj=wa.default.mark(Xv);function io(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=yj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function yj(e,r){if(e){if(typeof e=="string")return bO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bO(e,r)}}function bO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Ca="KHR_draco_mesh_compression",bj=Ca;function _j(e,r,t){var n=new ke(e),a=io(Xv(n)),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;n.getObjectExtension(s,Ca)}}catch(o){a.e(o)}finally{a.f()}}function Aj(e,r,t){return zv.apply(this,arguments)}function zv(){return zv=(0,Jv.default)(wa.default.mark(function e(r,t,n){var a,i,s,o,u,f;return wa.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t!=null&&(a=t.gltf)!==null&&a!==void 0&&a.decompressMeshes){c.next=2;break}return c.abrupt("return");case 2:i=new ke(r),s=[],o=io(Xv(i));try{for(o.s();!(u=o.n()).done;)f=u.value,i.getObjectExtension(f,Ca)&&s.push(Tj(i,f,t,n))}catch(h){o.e(h)}finally{o.f()}return c.next=8,Promise.all(s);case 8:i.removeExtension(Ca);case 9:case"end":return c.stop()}},e)})),zv.apply(this,arguments)}function xj(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new ke(e),n=io(t.json.meshes||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;Mj(i,r),t.addRequiredExtension(Ca)}}catch(s){n.e(s)}finally{n.f()}}function Tj(e,r,t,n){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,Jv.default)(wa.default.mark(function e(r,t,n,a){var i,s,o,u,f,l,c,h,d,p,v,g,y,_;return wa.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(i=r.getObjectExtension(t,Ca),i){x.next=3;break}return x.abrupt("return");case 3:return s=r.getTypedArrayForBufferView(i.bufferView),o=zn(s.buffer,s.byteOffset),u=a.parse,f=vj({},n),delete f["3d-tiles"],x.next=10,u(o,nl,f,a);case 10:for(l=x.sent,c=gO(l.attributes),h=0,d=Object.entries(c);h<d.length;h++)p=(0,_O.default)(d[h],2),v=p[0],g=p[1],v in t.attributes&&(y=t.attributes[v],_=r.getAccessor(y),_!=null&&_.min&&_!==null&&_!==void 0&&_.max&&(g.min=_.min,g.max=_.max));t.attributes=c,l.indices&&(t.indices=Vv(l.indices)),Ej(t);case 16:case"end":return x.stop()}},e)})),Wv.apply(this,arguments)}function Mj(e,r){var t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!a.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");var s=a.DracoWriter.encodeSync({attributes:e}),o=i==null||(t=i.parseSync)===null||t===void 0?void 0:t.call(i,{attributes:e}),u=a._addFauxAttributes(o.attributes),f=a.addBufferView(s),l={primitives:[{attributes:u,mode:n,extensions:(0,qv.default)({},Ca,{bufferView:f,attributes:u})}]};return l}function Ej(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function Xv(e){var r,t,n,a,i,s;return wa.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=io(e.json.meshes||[]),u.prev=1,r.s();case 3:if((t=r.n()).done){u.next=24;break}n=t.value,a=io(n.primitives),u.prev=6,a.s();case 8:if((i=a.n()).done){u.next=14;break}return s=i.value,u.next=12,s;case 12:u.next=8;break;case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),a.e(u.t0);case 19:return u.prev=19,a.f(),u.finish(19);case 22:u.next=3;break;case 24:u.next=29;break;case 26:u.prev=26,u.t1=u.catch(1),r.e(u.t1);case 29:return u.prev=29,r.f(),u.finish(29);case 32:case"end":return u.stop()}},gj,null,[[1,26,29,32],[6,16,19,22]])}var Zv={};$t(Zv,{decode:()=>Bj,name:()=>wj});var EO=m(ve()),SO=m(Y()),Yv=m(K());var AO={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xO={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};function TO(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Sj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function Sj(e,r){if(e){if(typeof e=="string")return MO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MO(e,r)}}function MO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var $v="KHR_texture_transform",wj=$v,dl=new O,Cj=new Te,Oj=new Te;function Bj(e,r){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,SO.default)(Yv.default.mark(function e(r,t){var n,a,i,s;return Yv.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n=new ke(r),a=n.getExtension($v),a){u.next=4;break}return u.abrupt("return");case 4:for(i=r.json.materials||[],s=0;s<i.length;s++)Pj(s,r);case 6:case"end":return u.stop()}},e)})),Qv.apply(this,arguments)}function Pj(e,r){var t,n,a,i=[],s=(t=r.json.materials)===null||t===void 0?void 0:t[e],o=s==null||(n=s.pbrMetallicRoughness)===null||n===void 0?void 0:n.baseColorTexture;o&&so(r,e,o,i);var u=s?.emissiveTexture;u&&so(r,e,u,i);var f=s?.normalTexture;f&&so(r,e,f,i);var l=s?.occlusionTexture;l&&so(r,e,l,i);var c=s==null||(a=s.pbrMetallicRoughness)===null||a===void 0?void 0:a.metallicRoughnessTexture;c&&so(r,e,c,i)}function so(e,r,t,n){var a=Ij(t,n);if(a){var i=e.json.meshes||[],s=TO(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,f=TO(u.primitives),l;try{for(f.s();!(l=f.n()).done;){var c=l.value,h=c.material;Number.isFinite(h)&&r===h&&Rj(e,c,a)}}catch(d){f.e(d)}finally{f.f()}}}catch(d){s.e(d)}finally{s.f()}}}function Ij(e,r){var t,n=(t=e.extensions)===null||t===void 0?void 0:t[$v],a=e.texCoord,i=a===void 0?0:a,s=n.texCoord,o=s===void 0?i:s,u=r.findIndex(function(l){var c=(0,EO.default)(l,2),h=c[0],d=c[1];return h===i&&d===o})!==-1;if(!u){var f=kj(n);return i!==o&&(e.texCoord=o),r.push([i,o]),{originalTexCoord:i,texCoord:o,matrix:f}}return null}function Rj(e,r,t){var n=t.originalTexCoord,a=t.texCoord,i=t.matrix,s=r.attributes["TEXCOORD_".concat(n)];if(Number.isFinite(s)){var o,u=(o=e.json.accessors)===null||o===void 0?void 0:o[s];if(u&&u.bufferView){var f,l=(f=e.json.bufferViews)===null||f===void 0?void 0:f[u.bufferView];if(l){for(var c=e.buffers[l.buffer],h=c.arrayBuffer,d=c.byteOffset,p=(d||0)+(u.byteOffset||0)+(l.byteOffset||0),v=Oi(u,l),g=v.ArrayType,y=v.length,_=xO[u.componentType],T=AO[u.type],x=l.byteStride||_*T,E=new Float32Array(y),C=0;C<u.count;C++){var L=new g(h,p+C*x,2);dl.set(L[0],L[1],1),dl.transformByMatrix3(i),E.set([dl[0],dl[1]],C*T)}n===a?Lj(u,l,e.buffers,E):Fj(a,u,r,e,E)}}}}function Lj(e,r,t,n){e.componentType=5126,t.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),r.buffer=t.length-1,r.byteLength=n.buffer.byteLength,r.byteOffset=0,delete r.byteStride}function Fj(e,r,t,n,a){n.buffers.push({arrayBuffer:a.buffer,byteOffset:0,byteLength:a.buffer.byteLength});var i=n.json.bufferViews;if(i){i.push({buffer:n.buffers.length-1,byteLength:a.buffer.byteLength,byteOffset:0});var s=n.json.accessors;s&&(s.push({bufferView:i?.length-1,byteOffset:0,componentType:5126,count:r.count,type:"VEC2"}),t.attributes["TEXCOORD_".concat(e)]=s.length-1)}}function kj(e){var r=e.offset,t=r===void 0?[0,0]:r,n=e.rotation,a=n===void 0?0:n,i=e.scale,s=i===void 0?[1,1]:i,o=new Te().set(1,0,0,0,1,0,t[0],t[1],1),u=Cj.set(Math.cos(a),Math.sin(a),0,-Math.sin(a),Math.cos(a),0,0,0,1),f=Oj.set(s[0],0,0,0,s[1],0,0,0,1);return o.multiplyRight(u).multiplyRight(f)}var ng={};$t(ng,{decode:()=>Gj,encode:()=>Uj,name:()=>Nj});var rg=m(Y()),oo=m(K());function CO(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Dj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function Dj(e,r){if(e){if(typeof e=="string")return wO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wO(e,r)}}function wO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Oa="KHR_lights_punctual",Nj=Oa;function Gj(e){return eg.apply(this,arguments)}function eg(){return eg=(0,rg.default)(oo.default.mark(function e(r){var t,n,a,i,s,o,u;return oo.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=new ke(r),n=t.json,a=t.getExtension(Oa),a&&(t.json.lights=a.lights,t.removeExtension(Oa)),i=CO(n.nodes||[]);try{for(i.s();!(s=i.n()).done;)o=s.value,u=t.getObjectExtension(o,Oa),u&&(o.light=u.light),t.removeObjectExtension(o,Oa)}catch(c){i.e(c)}finally{i.f()}case 6:case"end":return l.stop()}},e)})),eg.apply(this,arguments)}function Uj(e){return tg.apply(this,arguments)}function tg(){return tg=(0,rg.default)(oo.default.mark(function e(r){var t,n,a,i,s,o,u;return oo.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=new ke(r),n=t.json,n.lights&&(a=t.addExtension(Oa),it(!a.lights),a.lights=n.lights,delete n.lights),t.json.lights){i=CO(t.json.lights);try{for(i.s();!(s=i.n()).done;)o=s.value,u=o.node,t.addObjectExtension(u,Oa,o)}catch(c){i.e(c)}finally{i.f()}delete t.json.lights}case 4:case"end":return l.stop()}},e)})),tg.apply(this,arguments)}var sg={};$t(sg,{decode:()=>Vj,encode:()=>zj,name:()=>Hj});var BO=m(Y()),ag=m(K());function PO(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=jj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function jj(e,r){if(e){if(typeof e=="string")return OO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return OO(e,r)}}function OO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var uo="KHR_materials_unlit",Hj=uo;function Vj(e){return ig.apply(this,arguments)}function ig(){return ig=(0,BO.default)(ag.default.mark(function e(r){var t,n,a,i,s,o;return ag.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:t=new ke(r),n=t.json,a=PO(n.materials||[]);try{for(a.s();!(i=a.n()).done;)s=i.value,o=s.extensions&&s.extensions.KHR_materials_unlit,o&&(s.unlit=!0),t.removeObjectExtension(s,uo)}catch(l){a.e(l)}finally{a.f()}t.removeExtension(uo);case 5:case"end":return f.stop()}},e)})),ig.apply(this,arguments)}function zj(e){var r=new ke(e),t=r.json;if(r.materials){var n=PO(t.materials||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.unlit&&(delete i.unlit,r.addObjectExtension(i,uo,{}),r.addExtension(uo))}}catch(s){n.e(s)}finally{n.f()}}}var lg={};$t(lg,{decode:()=>Xj,encode:()=>Kj,name:()=>Jj});var RO=m(De()),fg=m(Y()),lo=m(K());function Wj(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=qj(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function qj(e,r){if(e){if(typeof e=="string")return IO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return IO(e,r)}}function IO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var fo="KHR_techniques_webgl",Jj=fo;function Xj(e){return og.apply(this,arguments)}function og(){return og=(0,fg.default)(lo.default.mark(function e(r){var t,n,a,i,s,o,u,f;return lo.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=new ke(r),n=t.json,a=t.getExtension(fo),a){i=Yj(a,t),s=Wj(n.materials||[]);try{for(s.s();!(o=s.n()).done;)u=o.value,f=t.getObjectExtension(u,fo),f&&(u.technique=Object.assign({},f,i[f.technique]),u.technique.values=Qj(u.technique,t)),t.removeObjectExtension(u,fo)}catch(h){s.e(h)}finally{s.f()}t.removeExtension(fo)}case 4:case"end":return c.stop()}},e)})),og.apply(this,arguments)}function Kj(e,r){return ug.apply(this,arguments)}function ug(){return ug=(0,fg.default)(lo.default.mark(function e(r,t){return lo.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},e)})),ug.apply(this,arguments)}function Yj(e,r){var t=e.programs,n=t===void 0?[]:t,a=e.shaders,i=a===void 0?[]:a,s=e.techniques,o=s===void 0?[]:s,u=new TextDecoder;return i.forEach(function(f){if(Number.isFinite(f.bufferView))f.code=u.decode(r.getTypedArrayForBufferView(f.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(function(f){f.fragmentShader=i[f.fragmentShader],f.vertexShader=i[f.vertexShader]}),o.forEach(function(f){f.program=n[f.program]}),o}function Qj(e,r){var t=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach(function(n){e.uniforms[n].value&&!(n in t)&&(t[n]=e.uniforms[n].value)}),Object.keys(t).forEach(function(n){(0,RO.default)(t[n])==="object"&&t[n].index!==void 0&&(t[n].texture=r.getTexture(t[n].index))}),t}var dg={};$t(dg,{decode:()=>Zj,name:()=>$j});var LO=m(Y()),cg=m(K());var FO="EXT_feature_metadata",$j=FO;function Zj(e){return hg.apply(this,arguments)}function hg(){return hg=(0,LO.default)(cg.default.mark(function e(r){var t;return cg.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=new ke(r),eH(t);case 2:case"end":return a.stop()}},e)})),hg.apply(this,arguments)}function eH(e){var r,t=e.getExtension(FO),n=t==null||(r=t.schema)===null||r===void 0?void 0:r.classes,a=t?.featureTables,i=t?.featureTextures;if(i&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),n&&a)for(var s in n){var o=n[s],u=nH(a,s);u&&tH(e,u,o)}}function tH(e,r,t){for(var n in t.properties){var a,i=t.properties[n],s=r==null||(a=r.properties)===null||a===void 0?void 0:a[n],o=r.count;if(s){var u=rH(e,i,o,s);s.data=u}}}function rH(e,r,t,n){var a=n.bufferView,i=e.getTypedArrayForBufferView(a);switch(r.type){case"STRING":{var s=n.stringOffsetBufferView,o=e.getTypedArrayForBufferView(s);i=aH(i,o,t);break}default:}return i}function nH(e,r){for(var t in e){var n=e[t];if(n.class===r)return n}return null}function aH(e,r,t){for(var n=[],a=new TextDecoder("utf8"),i=0,s=4,o=0;o<t;o++){var u=r[(o+1)*s]-r[o*s],f=e.subarray(i,u+i),l=a.decode(f);n.push(l),i+=u}return n}function NO(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=iH(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function iH(e,r){if(e){if(typeof e=="string")return kO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kO(e,r)}}function kO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var GO=[Uv,jv,Hv,Kv,ng,sg,lg,Zv,dg];function UO(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,n=GO.filter(function(u){return HO(u.name,r)}),a=NO(n),i;try{for(a.s();!(i=a.n()).done;){var s=i.value,o;(o=s.preprocess)===null||o===void 0||o.call(s,e,r,t)}}catch(u){a.e(u)}finally{a.f()}}function jO(e){return mg.apply(this,arguments)}function mg(){return mg=(0,DO.default)(pg.default.mark(function e(r){var t,n,a,i,s,o,u,f=arguments;return pg.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=f.length>1&&f[1]!==void 0?f[1]:{},n=f.length>2?f[2]:void 0,a=GO.filter(function(h){return HO(h.name,t)}),i=NO(a),c.prev=4,i.s();case 6:if((s=i.n()).done){c.next=12;break}return o=s.value,c.next=10,(u=o.decode)===null||u===void 0?void 0:u.call(o,r,t,n);case 10:c.next=6;break;case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(4),i.e(c.t0);case 17:return c.prev=17,i.f(),c.finish(17);case 20:case"end":return c.stop()}},e,null,[[4,14,17,20]])})),mg.apply(this,arguments)}function HO(e,r){var t,n=(r==null||(t=r.gltf)===null||t===void 0?void 0:t.excludeExtensions)||{},a=e in n&&!n[e];return!a}var JO=m(z()),XO=m(q());function sH(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=oH(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function oH(e,r){if(e){if(typeof e=="string")return VO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VO(e,r)}}function VO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var vg="KHR_binary_glTF";function zO(e){var r=new ke(e),t=r.json,n=sH(t.images||[]),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,s=r.getObjectExtension(i,vg);s&&Object.assign(i,s),r.removeObjectExtension(i,vg)}}catch(o){n.e(o)}finally{n.f()}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,r.removeExtension(vg)}function Ln(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=fH(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function fH(e,r){if(e){if(typeof e=="string")return WO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WO(e,r)}}function WO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var qO={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},lH={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},cH=function(){function e(){(0,JO.default)(this,e),b(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),b(this,"json",void 0)}return(0,XO.default)(e,[{key:"normalize",value:function(t,n){this.json=t.json;var a=t.json;switch(a.asset&&a.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(a.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(a),this._convertTopLevelObjectsToArrays(a),zO(t),this._convertObjectIdsToArrayIndices(a),this._updateObjects(a),this._updateMaterial(a)}},{key:"_addAsset",value:function(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(t){for(var n in qO)this._convertTopLevelObjectToArray(t,n)}},{key:"_convertTopLevelObjectToArray",value:function(t,n){var a=t[n];if(!(!a||Array.isArray(a))){t[n]=[];for(var i in a){var s=a[i];s.id=s.id||i;var o=t[n].length;t[n].push(s),this.idToIndexMap[n][i]=o}}}},{key:"_convertObjectIdsToArrayIndices",value:function(t){for(var n in qO)this._convertIdsToIndices(t,n);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));var a=Ln(t.textures),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;this._convertTextureIds(s)}}catch(g){a.e(g)}finally{a.f()}var o=Ln(t.meshes),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;this._convertMeshIds(f)}}catch(g){o.e(g)}finally{o.f()}var l=Ln(t.nodes),c;try{for(l.s();!(c=l.n()).done;){var h=c.value;this._convertNodeIds(h)}}catch(g){l.e(g)}finally{l.f()}var d=Ln(t.scenes),p;try{for(d.s();!(p=d.n()).done;){var v=p.value;this._convertSceneIds(v)}}catch(g){d.e(g)}finally{d.f()}}},{key:"_convertTextureIds",value:function(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}},{key:"_convertMeshIds",value:function(t){var n=Ln(t.primitives),a;try{for(n.s();!(a=n.n()).done;){var i=a.value,s=i.attributes,o=i.indices,u=i.material;for(var f in s)s[f]=this._convertIdToIndex(s[f],"accessor");o&&(i.indices=this._convertIdToIndex(o,"accessor")),u&&(i.material=this._convertIdToIndex(u,"material"))}}catch(l){n.e(l)}finally{n.f()}}},{key:"_convertNodeIds",value:function(t){var n=this;t.children&&(t.children=t.children.map(function(a){return n._convertIdToIndex(a,"node")})),t.meshes&&(t.meshes=t.meshes.map(function(a){return n._convertIdToIndex(a,"mesh")}))}},{key:"_convertSceneIds",value:function(t){var n=this;t.nodes&&(t.nodes=t.nodes.map(function(a){return n._convertIdToIndex(a,"node")}))}},{key:"_convertIdsToIndices",value:function(t,n){t[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),t[n]=[]);var a=Ln(t[n]),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;for(var o in s){var u=s[o],f=this._convertIdToIndex(u,o);s[o]=f}}}catch(l){a.e(l)}finally{a.f()}}},{key:"_convertIdToIndex",value:function(t,n){var a=lH[n];if(a in this.idToIndexMap){var i=this.idToIndexMap[a][t];if(!Number.isFinite(i))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(t));return i}return t}},{key:"_updateObjects",value:function(t){var n=Ln(this.json.buffers),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;delete i.type}}catch(s){n.e(s)}finally{n.f()}}},{key:"_updateMaterial",value:function(t){var n=Ln(t.materials),a;try{var i=function(){var l=a.value;l.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};var c=((s=l.values)===null||s===void 0?void 0:s.tex)||((o=l.values)===null||o===void 0?void 0:o.texture2d_0)||((u=l.values)===null||u===void 0?void 0:u.diffuseTex),h=t.textures.findIndex(function(d){return d.id===c});h!==-1&&(l.pbrMetallicRoughness.baseColorTexture={index:h})};for(n.s();!(a=n.n()).done;){var s,o,u;i()}}catch(f){n.e(f)}finally{n.f()}}}]),e}();function KO(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new cH().normalize(e,r)}var QO=m(De()),$O=m(z()),ZO=m(q()),Ii=m(J());var Pi;function YO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function rn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?YO(Object(t),!0).forEach(function(n){(0,Ii.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):YO(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var hH={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dH={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Qt={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},pH={magFilter:Qt.TEXTURE_MAG_FILTER,minFilter:Qt.TEXTURE_MIN_FILTER,wrapS:Qt.TEXTURE_WRAP_S,wrapT:Qt.TEXTURE_WRAP_T},mH=(Pi={},(0,Ii.default)(Pi,Qt.TEXTURE_MAG_FILTER,Qt.LINEAR),(0,Ii.default)(Pi,Qt.TEXTURE_MIN_FILTER,Qt.NEAREST_MIPMAP_LINEAR),(0,Ii.default)(Pi,Qt.TEXTURE_WRAP_S,Qt.REPEAT),(0,Ii.default)(Pi,Qt.TEXTURE_WRAP_T,Qt.REPEAT),Pi);function vH(e){return dH[e]}function gH(e){return hH[e]}var yH=function(){function e(){(0,$O.default)(this,e),b(this,"baseUri",""),b(this,"json",{}),b(this,"buffers",[]),b(this,"images",[])}return(0,ZO.default)(e,[{key:"postProcess",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.json,i=t.buffers,s=i===void 0?[]:i,o=t.images,u=o===void 0?[]:o,f=t.baseUri,l=f===void 0?"":f;return it(a),this.baseUri=l,this.json=a,this.buffers=s,this.images=u,this._resolveTree(this.json,n),this.json}},{key:"_resolveTree",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.bufferViews&&(t.bufferViews=t.bufferViews.map(function(i,s){return n._resolveBufferView(i,s)})),t.images&&(t.images=t.images.map(function(i,s){return n._resolveImage(i,s)})),t.samplers&&(t.samplers=t.samplers.map(function(i,s){return n._resolveSampler(i,s)})),t.textures&&(t.textures=t.textures.map(function(i,s){return n._resolveTexture(i,s)})),t.accessors&&(t.accessors=t.accessors.map(function(i,s){return n._resolveAccessor(i,s)})),t.materials&&(t.materials=t.materials.map(function(i,s){return n._resolveMaterial(i,s)})),t.meshes&&(t.meshes=t.meshes.map(function(i,s){return n._resolveMesh(i,s)})),t.nodes&&(t.nodes=t.nodes.map(function(i,s){return n._resolveNode(i,s)})),t.skins&&(t.skins=t.skins.map(function(i,s){return n._resolveSkin(i,s)})),t.scenes&&(t.scenes=t.scenes.map(function(i,s){return n._resolveScene(i,s)})),t.scene!==void 0&&(t.scene=t.scenes[this.json.scene])}},{key:"getScene",value:function(t){return this._get("scenes",t)}},{key:"getNode",value:function(t){return this._get("nodes",t)}},{key:"getSkin",value:function(t){return this._get("skins",t)}},{key:"getMesh",value:function(t){return this._get("meshes",t)}},{key:"getMaterial",value:function(t){return this._get("materials",t)}},{key:"getAccessor",value:function(t){return this._get("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this._get("textures",t)}},{key:"getSampler",value:function(t){return this._get("samplers",t)}},{key:"getImage",value:function(t){return this._get("images",t)}},{key:"getBufferView",value:function(t){return this._get("bufferViews",t)}},{key:"getBuffer",value:function(t){return this._get("buffers",t)}},{key:"_get",value:function(t,n){if((0,QO.default)(n)==="object")return n;var a=this.json[t]&&this.json[t][n];return a||console.warn("glTF file error: Could not find ".concat(t,"[").concat(n,"]")),a}},{key:"_resolveScene",value:function(t,n){var a=this;return t.id=t.id||"scene-".concat(n),t.nodes=(t.nodes||[]).map(function(i){return a.getNode(i)}),t}},{key:"_resolveNode",value:function(t,n){var a=this;return t.id=t.id||"node-".concat(n),t.children&&(t.children=t.children.map(function(i){return a.getNode(i)})),t.mesh!==void 0?t.mesh=this.getMesh(t.mesh):t.meshes!==void 0&&t.meshes.length&&(t.mesh=t.meshes.reduce(function(i,s){var o=a.getMesh(s);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),t.camera!==void 0&&(t.camera=this.getCamera(t.camera)),t.skin!==void 0&&(t.skin=this.getSkin(t.skin)),t}},{key:"_resolveSkin",value:function(t,n){return t.id=t.id||"skin-".concat(n),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}},{key:"_resolveMesh",value:function(t,n){var a=this;return t.id=t.id||"mesh-".concat(n),t.primitives&&(t.primitives=t.primitives.map(function(i){i=rn({},i);var s=i.attributes;i.attributes={};for(var o in s)i.attributes[o]=a.getAccessor(s[o]);return i.indices!==void 0&&(i.indices=a.getAccessor(i.indices)),i.material!==void 0&&(i.material=a.getMaterial(i.material)),i})),t}},{key:"_resolveMaterial",value:function(t,n){if(t.id=t.id||"material-".concat(n),t.normalTexture&&(t.normalTexture=rn({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=rn({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=rn({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.emissiveFactor||(t.emissiveFactor=t.emmisiveTexture?[1,1,1]:[0,0,0]),t.pbrMetallicRoughness){t.pbrMetallicRoughness=rn({},t.pbrMetallicRoughness);var a=t.pbrMetallicRoughness;a.baseColorTexture&&(a.baseColorTexture=rn({},a.baseColorTexture),a.baseColorTexture.texture=this.getTexture(a.baseColorTexture.index)),a.metallicRoughnessTexture&&(a.metallicRoughnessTexture=rn({},a.metallicRoughnessTexture),a.metallicRoughnessTexture.texture=this.getTexture(a.metallicRoughnessTexture.index))}return t}},{key:"_resolveAccessor",value:function(t,n){if(t.id=t.id||"accessor-".concat(n),t.bufferView!==void 0&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=vH(t.componentType),t.components=gH(t.type),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){var a=t.bufferView.buffer,i=Oi(t,t.bufferView),s=i.ArrayType,o=i.byteLength,u=(t.bufferView.byteOffset||0)+(t.byteOffset||0)+a.byteOffset,f=a.arrayBuffer.slice(u,u+o);t.bufferView.byteStride&&(f=this._getValueFromInterleavedBuffer(a,u,t.bufferView.byteStride,t.bytesPerElement,t.count)),t.value=new s(f)}return t}},{key:"_getValueFromInterleavedBuffer",value:function(t,n,a,i,s){for(var o=new Uint8Array(s*i),u=0;u<s;u++){var f=n+u*a;o.set(new Uint8Array(t.arrayBuffer.slice(f,f+i)),u*i)}return o.buffer}},{key:"_resolveTexture",value:function(t,n){return t.id=t.id||"texture-".concat(n),t.sampler="sampler"in t?this.getSampler(t.sampler):mH,t.source=this.getImage(t.source),t}},{key:"_resolveSampler",value:function(t,n){t.id=t.id||"sampler-".concat(n),t.parameters={};for(var a in t){var i=this._enumSamplerParameter(a);i!==void 0&&(t.parameters[i]=t[a])}return t}},{key:"_enumSamplerParameter",value:function(t){return pH[t]}},{key:"_resolveImage",value:function(t,n){t.id=t.id||"image-".concat(n),t.bufferView!==void 0&&(t.bufferView=this.getBufferView(t.bufferView));var a=this.images[n];return a&&(t.image=a),t}},{key:"_resolveBufferView",value:function(t,n){var a=t.buffer,i=rn(rn({id:"bufferView-".concat(n)},t),{},{buffer:this.buffers[a]}),s=this.buffers[a].arrayBuffer,o=this.buffers[a].byteOffset||0;return"byteOffset"in t&&(o+=t.byteOffset),i.data=new Uint8Array(s,o,t.byteLength),i}},{key:"_resolveCamera",value:function(t,n){return t.id=t.id||"camera-".concat(n),t.perspective,t.orthographic,t}}]),e}();function eB(e,r){return new yH().postProcess(e,r)}var tB=1735152710,bg=12,pl=8,bH=1313821514,_H=5130562,AH=0,xH=1,TH=0,Ri=!0;function MH(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return"".concat(String.fromCharCode(e.getUint8(r+0))).concat(String.fromCharCode(e.getUint8(r+1))).concat(String.fromCharCode(e.getUint8(r+2))).concat(String.fromCharCode(e.getUint8(r+3)))}function rB(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=new DataView(e),a=t.magic,i=a===void 0?tB:a,s=n.getUint32(r,!1);return s===i||s===tB}function _g(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=new DataView(r),i=MH(a,t+0),s=a.getUint32(t+4,Ri),o=a.getUint32(t+8,Ri);switch(Object.assign(e,{header:{byteOffset:t,byteLength:o,hasBinChunk:!1},type:i,version:s,json:{},binChunks:[]}),t+=bg,e.version){case 1:return EH(e,a,t);case 2:return SH(e,a,t,n={});default:throw new Error("Invalid GLB version ".concat(e.version,". Only supports v1 and v2."))}}function EH(e,r,t){ne(e.header.byteLength>bg+pl);var n=r.getUint32(t+0,Ri),a=r.getUint32(t+4,Ri);return t+=pl,ne(a===TH),gg(e,r,t,n),t+=n,t+=yg(e,r,t,e.header.byteLength),t}function SH(e,r,t,n){return ne(e.header.byteLength>bg+pl),wH(e,r,t,n),t+e.header.byteLength}function wH(e,r,t,n){for(;t+8<=e.header.byteLength;){var a=r.getUint32(t+0,Ri),i=r.getUint32(t+4,Ri);switch(t+=pl,i){case bH:gg(e,r,t,a);break;case _H:yg(e,r,t,a);break;case AH:n.strict||gg(e,r,t,a);break;case xH:n.strict||yg(e,r,t,a);break;default:break}t+=ln(a,4)}return t}function gg(e,r,t,n){var a=new Uint8Array(r.buffer,t,n),i=new TextDecoder("utf8"),s=i.decode(a);return e.json=JSON.parse(s),ln(n,4)}function yg(e,r,t,n){return e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:t,byteLength:n,arrayBuffer:r.buffer}),ln(n,4)}function aB(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=CH(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function CH(e,r){if(e){if(typeof e=="string")return nB(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nB(e,r)}}function nB(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function iB(e,r){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,co.default)(nn.default.mark(function e(r,t){var n,a,i,s,o,u,f,l,c,h,d=arguments;return nn.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=d.length>2&&d[2]!==void 0?d[2]:0,u=d.length>3?d[3]:void 0,f=d.length>4?d[4]:void 0,OH(r,t,o,u),KO(r,{normalize:u==null||(n=u.gltf)===null||n===void 0?void 0:n.normalize}),UO(r,u,f),l=[],!(u!=null&&(a=u.gltf)!==null&&a!==void 0&&a.loadBuffers&&r.json.buffers)){v.next=10;break}return v.next=10,BH(r,u,f);case 10:return u!=null&&(i=u.gltf)!==null&&i!==void 0&&i.loadImages&&(c=PH(r,u,f),l.push(c)),h=jO(r,u,f),l.push(h),v.next=15,Promise.all(l);case 15:return v.abrupt("return",u!=null&&(s=u.gltf)!==null&&s!==void 0&&s.postProcess?eB(r,u):r);case 16:case"end":return v.stop()}},e)})),Ag.apply(this,arguments)}function OH(e,r,t,n){if(n.uri&&(e.baseUri=n.uri),r instanceof ArrayBuffer&&!rB(r,t,n)){var a=new TextDecoder;r=a.decode(r)}if(typeof r=="string")e.json=Fc(r);else if(r instanceof ArrayBuffer){var i={};t=_g(i,r,t,n.glb),it(i.type==="glTF","Invalid GLB magic string ".concat(i.type)),e._glb=i,e.json=i.json}else it(!1,"GLTF: must be ArrayBuffer or string");var s=e.json.buffers||[];if(e.buffers=new Array(s.length).fill(null),e._glb&&e._glb.header.hasBinChunk){var o=e._glb.binChunks;e.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}var u=e.json.images||[];e.images=new Array(u.length).fill({})}function BH(e,r,t){return xg.apply(this,arguments)}function xg(){return xg=(0,co.default)(nn.default.mark(function e(r,t,n){var a,i,s,o,u,f,l,c,h;return nn.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:a=r.json.buffers||[],i=0;case 2:if(!(i<a.length)){p.next=22;break}if(s=a[i],!s.uri){p.next=18;break}return f=n.fetch,it(f),l=Pv(s.uri,t),p.next=10,n==null||(o=n.fetch)===null||o===void 0?void 0:o.call(n,l);case 10:return c=p.sent,p.next=13,c==null||(u=c.arrayBuffer)===null||u===void 0?void 0:u.call(c);case 13:h=p.sent,r.buffers[i]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete s.uri,p.next=19;break;case 18:r.buffers[i]===null&&(r.buffers[i]={arrayBuffer:new ArrayBuffer(s.byteLength),byteOffset:0,byteLength:s.byteLength});case 19:++i,p.next=2;break;case 22:case"end":return p.stop()}},e)})),xg.apply(this,arguments)}function PH(e,r,t){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,co.default)(nn.default.mark(function e(r,t,n){var a,i,s,o,u,f;return nn.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=IH(r),i=r.json.images||[],s=[],o=aB(a);try{for(o.s();!(u=o.n()).done;)f=u.value,s.push(RH(r,i[f],f,t,n))}catch(h){o.e(h)}finally{o.f()}return c.next=7,Promise.all(s);case 7:return c.abrupt("return",c.sent);case 8:case"end":return c.stop()}},e)})),Tg.apply(this,arguments)}function IH(e){var r=new Set,t=e.json.textures||[],n=aB(t),a;try{for(n.s();!(a=n.n()).done;){var i=a.value;i.source!==void 0&&r.add(i.source)}}catch(s){n.e(s)}finally{n.f()}return Array.from(r).sort()}function RH(e,r,t,n,a){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,co.default)(nn.default.mark(function e(r,t,n,a,i){var s,o,u,f,l,c,h;return nn.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(s=i.fetch,o=i.parse,!(t.uri&&!t.hasOwnProperty("bufferView"))){p.next=10;break}return f=Pv(t.uri,a),p.next=5,s(f);case 5:return l=p.sent,p.next=8,l.arrayBuffer();case 8:u=p.sent,t.bufferView={data:u};case 10:return Number.isFinite(t.bufferView)&&(c=nO(r.json,r.buffers,t.bufferView),u=zn(c.buffer,c.byteOffset,c.byteLength)),it(u,"glTF image has no data"),p.next=14,o(u,[Rr,Bv],{mimeType:t.mimeType,basis:a.basis||{format:ul()}},i);case 14:h=p.sent,h&&h[0]&&(h={compressed:!0,mipmaps:!1,width:h[0].width,height:h[0].height,data:h[0]}),r.images=r.images||[],r.images[n]=h;case 18:case"end":return p.stop()}},e)})),Mg.apply(this,arguments)}function sB(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ml(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?sB(Object(t),!0).forEach(function(n){(0,oB.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Ba={name:"glTF",id:"gltf",module:"gltf",version:L3,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:LH,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function LH(e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,uB.default)(Eg.default.mark(function e(r){var t,n,a,i,s,o,u=arguments;return Eg.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=u.length>1&&u[1]!==void 0?u[1]:{},n=u.length>2?u[2]:void 0,t=ml(ml({},Ba.options),t),t.gltf=ml(ml({},Ba.options.gltf),t.gltf),a=t,i=a.byteOffset,s=i===void 0?0:i,o={},l.next=8,iB(o,r,s,t,n);case 8:return l.abrupt("return",l.sent);case 9:case"end":return l.stop()}},e)})),Sg.apply(this,arguments)}var vl={URI:0,EMBEDDED:1};function gl(e,r,t,n){e.rotateYtoZ=!0;var a=e.byteOffset+e.byteLength-t;if(a===0)throw new Error("glTF byte length must be greater than 0.");return e.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",e.gltfArrayBuffer=zn(r,t,a),e.gltfByteOffset=0,e.gltfByteLength=a,t%4===0||console.warn("".concat(e.type,": embedded glb is not aligned to a 4-byte boundary.")),e.byteOffset+e.byteLength}function yl(e,r,t,n){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,fB.default)(wg.default.mark(function e(r,t,n,a){var i,s,o;return wg.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(i=n["3d-tiles"]||{},FH(r,t,n),!i.loadGLTF){f.next=16;break}if(s=a.parse,o=a.fetch,!r.gltfUrl){f.next=9;break}return f.next=7,o(r.gltfUrl,n);case 7:r.gltfArrayBuffer=f.sent,r.gltfByteOffset=0;case 9:if(!r.gltfArrayBuffer){f.next=16;break}return f.next=12,s(r.gltfArrayBuffer,Ba,n,a);case 12:r.gltf=f.sent,delete r.gltfArrayBuffer,delete r.gltfByteOffset,delete r.gltfByteLength;case 16:case"end":return f.stop()}},e)})),Cg.apply(this,arguments)}function FH(e,r,t){switch(r){case vl.URI:var n=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),a=new TextDecoder,i=a.decode(n);e.gltfUrl=i.replace(/[\s\0]+$/,""),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;break;case vl.EMBEDDED:break;default:throw new Error("b3dm: Illegal glTF format field")}}function cB(e,r,t,n,a){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,lB.default)(Og.default.mark(function e(r,t,n,a,i){var s,o;return Og.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n=kH(r,t,n,a,i),f.next=3,yl(r,vl.EMBEDDED,a,i);case 3:return o=r==null||(s=r.gltf)===null||s===void 0?void 0:s.extensions,o&&o.CESIUM_RTC&&(r.rtcCenter=o.CESIUM_RTC.center),f.abrupt("return",n);case 6:case"end":return f.stop()}},e)})),Bg.apply(this,arguments)}function kH(e,r,t,n,a){t=Rn(e,r,t),t=wi(e,r,t),t=Ci(e,r,t,n),t=gl(e,r,t,n);var i=new Mi(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=i.getGlobalProperty("RTC_CENTER",5126,3),t}var hB=m(Y()),Pg=m(K());function dB(e,r,t,n,a){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,hB.default)(Pg.default.mark(function e(r,t,n,a,i){return Pg.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=DH(r,t,n,a,i),o.next=3,yl(r,r.gltfFormat,a,i);case 3:return o.abrupt("return",n);case 4:case"end":return o.stop()}},e)})),Ig.apply(this,arguments)}function DH(e,r,t,n,a){if(t=Rn(e,r,t),e.version!==1)throw new Error("Instanced 3D Model version ".concat(e.version," is not supported"));t=wi(e,r,t);var i=new DataView(r);if(e.gltfFormat=i.getUint32(t,!0),t+=4,t=Ci(e,r,t,n),t=gl(e,r,t,n),e.featureTableJsonByteLength===0)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var s=new Mi(e.featureTableJson,e.featureTableBinary),o=s.getGlobalProperty("INSTANCES_LENGTH");if(s.featuresLength=o,!Number.isFinite(o))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=s.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=s.getGlobalProperty("RTC_CENTER",5126,3);var u=new il(e.batchTableJson,e.batchTableBinary,o);return NH(e,s,u,o),t}function NH(e,r,t,n){for(var a={instances:new Array(n),batchTable:e._batchTable,cull:!1,url:void 0,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,forwardAxis:[1,0,0]},i=a.instances,s=new O,o=new O,u=new O,f=new O,l=new Te,c=new gn,h=new O,d={},p=new ae,v=[],g=[],y=new O,_=new O,T=0;T<n;T++){var x=void 0;if(r.hasProperty("POSITION"))x=r.getProperty("POSITION",5126,3,T,s);else if(r.hasProperty("POSITION_QUANTIZED")){x=r.getProperty("POSITION_QUANTIZED",5123,3,T,s);var E=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",5126,3,y);if(!E)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var C=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",5126,3,_);if(!C)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var L=65535,w=0;w<3;w++)x[w]=x[w]/L*C[w]+E[w]}if(!x)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");s.copy(x),d.translation=s,e.normalUp=r.getProperty("NORMAL_UP",5126,3,T,v),e.normalRight=r.getProperty("NORMAL_RIGHT",5126,3,T,g);var S=!1;if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=r.getProperty("NORMAL_UP_OCT32P",5123,2,v),e.octNormalRight=r.getProperty("NORMAL_RIGHT_OCT32P",5123,2,g),e.octNormalUp)throw e.octNormalRight?new Error("i3dm: oct-encoded orientation not implemented"):new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");e.eastNorthUp?(we.WGS84.eastNorthUpToFixedFrame(s,p),p.getRotationMatrix3(l)):l.identity()}S&&(f.copy(o).cross(u).normalize(),l.setColumn(0,o),l.setColumn(1,u),l.setColumn(2,f)),c.fromMatrix3(l),d.rotation=c,h.set(1,1,1);var A=r.getProperty("SCALE",5126,1,T);Number.isFinite(A)&&h.multiplyByScalar(A);var I=r.getProperty("SCALE_NON_UNIFORM",5126,3,T,v);I&&h.scale(I),d.scale=h;var F=r.getProperty("BATCH_ID",5123,1,T);F===void 0&&(F=T);var D=new ae().fromQuaternion(d.rotation);p.identity(),p.translate(d.translation),p.multiplyRight(D),p.scale(d.scale);var N=p.clone();i[T]={modelMatrix:N,batchId:F}}e.instances=i}var pB=m(Y()),Rg=m(K());function mB(e,r,t,n,a,i){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,pB.default)(Rg.default.mark(function e(r,t,n,a,i,s){var o,u;return Rg.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=Rn(r,t,n),o=new DataView(t),r.tilesLength=o.getUint32(n,!0),n+=4,r.tiles=[];case 5:if(!(r.tiles.length<r.tilesLength&&r.byteLength-n>12)){l.next=13;break}return u={},r.tiles.push(u),l.next=10,s(t,n,a,i,u);case 10:n=l.sent,l.next=5;break;case 13:return l.abrupt("return",n);case 14:case"end":return l.stop()}},e)})),Lg.apply(this,arguments)}var vB=m(Y()),Fg=m(K());function gB(e,r,t,n){return kg.apply(this,arguments)}function kg(){return kg=(0,vB.default)(Fg.default.mark(function e(r,t,n,a){var i;return Fg.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r.rotateYtoZ=!0,r.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",i=a.parse,o.next=5,i(t,Ba,n,a);case 5:r.gltf=o.sent;case 6:case"end":return o.stop()}},e)})),kg.apply(this,arguments)}function Gg(e){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,yB.default)(Dg.default.mark(function e(r){var t,n,a,i,s=arguments;return Dg.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&s[1]!==void 0?s[1]:0,n=s.length>2?s[2]:void 0,a=s.length>3?s[3]:void 0,i=s.length>4&&s[4]!==void 0?s[4]:{},i.byteOffset=t,i.type=sC(r,t),u.t0=i.type,u.next=u.t0===Aa.COMPOSITE?9:u.t0===Aa.BATCHED_3D_MODEL?12:u.t0===Aa.GLTF?15:u.t0===Aa.INSTANCED_3D_MODEL?18:u.t0===Aa.POINT_CLOUD?21:24;break;case 9:return u.next=11,mB(i,r,t,n,a,Gg);case 11:return u.abrupt("return",u.sent);case 12:return u.next=14,cB(i,r,t,n,a);case 14:return u.abrupt("return",u.sent);case 15:return u.next=17,gB(i,r,n,a);case 17:return u.abrupt("return",u.sent);case 18:return u.next=20,dB(i,r,t,n,a);case 20:return u.abrupt("return",u.sent);case 21:return u.next=23,R3(i,r,t,n,a);case 23:return u.abrupt("return",u.sent);case 24:throw new Error("3DTileLoader: unknown type ".concat(i.type));case 25:case"end":return u.stop()}},e)})),Ng.apply(this,arguments)}var Al=m(Y()),Ia=m(K());var Vg=m(Y()),ho=m(K()),GH=1952609651,UH=1;function zg(e,r,t){return jg.apply(this,arguments)}function jg(){return jg=(0,Vg.default)(ho.default.mark(function e(r,t,n){var a,i,s,o,u,f,l,c,h;return ho.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(a=new Uint32Array(r.slice(0,4)),a[0]===GH){p.next=3;break}throw new Error("Wrong subtree file magic number");case 3:if(i=new Uint32Array(r.slice(4,8)),i[0]===UH){p.next=6;break}throw new Error("Wrong subtree file verson, must be 1");case 6:if(s=bB(r.slice(8,16)),o=new Uint8Array(r,24,s),u=new TextDecoder("utf8"),f=u.decode(o),l=JSON.parse(f),c=bB(r.slice(16,24)),h=new ArrayBuffer(0),c&&(h=r.slice(24+s)),!("bufferView"in l.tileAvailability)){p.next=18;break}return p.next=17,Ug(l,"tileAvailability",h,n);case 17:l.tileAvailability.explicitBitstream=p.sent;case 18:if(!("bufferView"in l.contentAvailability)){p.next=22;break}return p.next=21,Ug(l,"contentAvailability",h,n);case 21:l.contentAvailability.explicitBitstream=p.sent;case 22:if(!("bufferView"in l.childSubtreeAvailability)){p.next=26;break}return p.next=25,Ug(l,"childSubtreeAvailability",h,n);case 25:l.childSubtreeAvailability.explicitBitstream=p.sent;case 26:return p.abrupt("return",l);case 27:case"end":return p.stop()}},e)})),jg.apply(this,arguments)}function jH(e,r){var t=r.startsWith("http");if(t){var n=new URL(e,r);return decodeURI(n.toString())}var a="http://".concat(r),i=new URL(e,a);return"/".concat(i.host).concat(i.pathname)}function Ug(e,r,t,n){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,Vg.default)(ho.default.mark(function e(r,t,n,a){var i,s,o,u,f,l;return ho.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(i=r[t].bufferView,s=r.bufferViews[i],o=r.buffers[s.buffer],!(!(a!=null&&a.url)||!a.fetch)){h.next=5;break}throw new Error("Url is not provided");case 5:if(a.fetch){h.next=7;break}throw new Error("fetch is not provided");case 7:if(!o.uri){h.next=16;break}return u=jH(o.uri,a?.url),h.next=11,a.fetch(u);case 11:return f=h.sent,h.next=14,f.arrayBuffer();case 14:return l=h.sent,h.abrupt("return",new Uint8Array(l,s.byteOffset,s.byteLength));case 16:return h.abrupt("return",new Uint8Array(n,s.byteOffset,s.byteLength));case 17:case"end":return h.stop()}},e)})),Hg.apply(this,arguments)}function bB(e){var r=new DataView(e),t=r.getUint32(0,!0),n=r.getUint32(4,!0);return t+Math.pow(2,32)*n}var bl={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:zf,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:zg,options:{}};var _B=m(ve()),AB=m(Y()),qg=m(K());var HH=4,VH=8,zH={QUADTREE:HH,OCTREE:VH};function Xg(e){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,AB.default)(qg.default.mark(function e(r){var t,n,a,i,s,o,u,f,l,c,h,d,p,v,g,y,_,T,x,E,C,L,w,S,A,I,F,D,N,B,P,R,V,G,W,$,oe,He,Re,mt,Ke,on,zt,Na;return qg.default.wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(t=r.options,n=r.parentData,a=n===void 0?{mortonIndex:0,x:0,y:0,z:0}:n,i=r.childIndex,s=i===void 0?0:i,o=r.globalData,u=o===void 0?{level:0,mortonIndex:0,x:0,y:0,z:0}:o,f=r.subtree,l=r.level,c=l===void 0?0:l,h=t.subdivisionScheme,d=t.subtreeLevels,p=t.maximumLevel,v=t.contentUrlTemplate,g=t.subtreesUriTemplate,y=t.basePath,_={children:[],lodMetricValue:0,contentUrl:""},T=zH[h],x=s&1,E=s>>1&1,C=s>>2&1,L=(Math.pow(T,c)-1)/(T-1),w=Pa(a.mortonIndex,s),S=L+w,A=Pa(a.x,x),I=Pa(a.y,E),F=Pa(a.z,C),D=!1,c+1>d&&(D=Wg(f.childSubtreeAvailability,w)),N=Pa(u.x,A),B=Pa(u.y,I),P=Pa(u.z,F),R=c+u.level,!D){kt.next=38;break}return V="".concat(y,"/").concat(g),G=_l(V,R,N,B,P),kt.next=25,hr(G,bl);case 25:W=kt.sent,f=W,u.mortonIndex=w,u.x=A,u.y=I,u.z=F,u.level=c,w=0,S=0,A=0,I=0,F=0,c=0;case 38:if($=Wg(f.tileAvailability,S),!(!$||c>p)){kt.next=41;break}return kt.abrupt("return",_);case 41:oe=Wg(f.contentAvailability,S),oe&&(_.contentUrl=_l(v,R,N,B,P)),He=c+1,Re={mortonIndex:w,x:A,y:I,z:F},mt=0;case 46:if(!(mt<T)){kt.next=54;break}return kt.next=49,Xg({subtree:f,options:t,parentData:Re,childIndex:mt,level:He,globalData:u});case 49:Ke=kt.sent,(Ke.contentUrl||Ke.children.length)&&(on=R+1,zt={childTileX:A,childTileY:I,childTileZ:F},Na=WH(Ke,on,zt,t),_.children.push(Na));case 51:mt++,kt.next=46;break;case 54:return kt.abrupt("return",_);case 55:case"end":return kt.stop()}},e)})),Jg.apply(this,arguments)}function Wg(e,r){return"constant"in e?Boolean(e.constant):e.explicitBitstream?XH(r,e.explicitBitstream):!1}function WH(e,r,t,n){var a=n.basePath,i=n.refine,s=n.getRefine,o=n.lodMetricType,u=n.getTileType,f=n.rootLodMetricValue,l=n.rootBoundingVolume,c=e.contentUrl&&e.contentUrl.replace("".concat(a,"/"),""),h=f/Math.pow(2,r),d=qH(r,l,t);return{children:e.children,contentUrl:e.contentUrl,content:{uri:c},id:e.contentUrl,refine:s(i),type:u(e),lodMetricType:o,lodMetricValue:h,geometricError:h,transform:e.transform,boundingVolume:d}}function qH(e,r,t){if(r.region){var n=t.childTileX,a=t.childTileY,i=t.childTileZ,s=(0,_B.default)(r.region,6),o=s[0],u=s[1],f=s[2],l=s[3],c=s[4],h=s[5],d=Math.pow(2,e),p=(f-o)/d,v=(l-u)/d,g=(h-c)/d,y=o+p*n,_=o+p*(n+1),T=u+v*a,x=u+v*(a+1),E=c+g*i,C=c+g*(i+1);return{region:[y,T,_,x,E,C]}}return console.warn("Unsupported bounding volume type: ",r),null}function Pa(e,r){return parseInt(e.toString(2)+r.toString(2),2)}function _l(e,r,t,n,a){var i=JH({level:r,x:t,y:n,z:a});return e.replace(/{level}|{x}|{y}|{z}/gi,function(s){return i[s]})}function JH(e){var r={};for(var t in e)r["{".concat(t,"}")]=e[t];return r}function XH(e,r){var t=Math.floor(e/8),n=e%8,a=r[t]>>n&1;return a===1}function KH(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=YH(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function YH(e,r){if(e){if(typeof e=="string")return xB(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xB(e,r)}}function xB(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Zg(e){if(!e.contentUrl)return $r.EMPTY;var r=e.contentUrl,t=r.split(".").pop();switch(t){case"pnts":return $r.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return $r.SCENEGRAPH;default:return t}}function e0(e){switch(e){case"REPLACE":case"replace":return It.REPLACE;case"ADD":case"add":return It.ADD;default:return e}}function Kg(e,r){var t=/^[a-z][0-9a-z+.-]*:/i;if(t.test(r)){var n=new URL(e,"".concat(r,"/"));return decodeURI(n.toString())}else if(e.startsWith("/"))return e;return"".concat(r,"/").concat(e)}function TB(e,r){if(!e)return null;if(e.content){var t=e.content.uri||e.content.url;e.contentUrl=Kg(t,r.basePath)}return e.id=e.contentUrl,e.lodMetricType=ya.GEOMETRIC_ERROR,e.lodMetricValue=e.geometricError,e.transformMatrix=e.transform,e.type=Zg(e),e.refine=e0(e.refine),e}function SB(e,r){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,Al.default)(Ia.default.mark(function e(r,t){var n,a,i,s,o,u,f,l,c,h;return Ia.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(n=r.basePath,i=EB(r?.root),!(i&&r.root)){p.next=8;break}return p.next=5,MB(r.root,r,i,t);case 5:a=p.sent,p.next=9;break;case 8:a=TB(r.root,r);case 9:s=[],s.push(a);case 11:if(!(s.length>0)){p.next=40;break}o=s.pop()||{},u=o.children||[],f=KH(u),p.prev=15,f.s();case 17:if((l=f.n()).done){p.next=30;break}if(c=l.value,h=EB(c),!h){p.next=26;break}return p.next=23,MB(c,r,h,t);case 23:c=p.sent,p.next=27;break;case 26:TB(c,{basePath:n});case 27:s.push(c);case 28:p.next=17;break;case 30:p.next=35;break;case 32:p.prev=32,p.t0=p.catch(15),f.e(p.t0);case 35:return p.prev=35,f.f(),p.finish(35);case 38:p.next=11;break;case 40:return p.abrupt("return",a);case 41:case"end":return p.stop()}},e,null,[[15,32,35,38]])})),Yg.apply(this,arguments)}function MB(e,r,t,n){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,Al.default)(Ia.default.mark(function e(r,t,n,a){var i,s,o,u,f,l,c,h,d,p,v,g,y,_;return Ia.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return s=t.basePath,o=n.subdivisionScheme,u=n.maximumLevel,f=n.subtreeLevels,l=n.subtrees.uri,c=_l(l,0,0,0,0),h=Kg(c,s),x.next=6,hr(h,bl,a);case 6:return d=x.sent,p=Kg(r.content.uri,s),v=t==null||(i=t.root)===null||i===void 0?void 0:i.refine,g=r.geometricError,y=r.boundingVolume,_={contentUrlTemplate:p,subtreesUriTemplate:l,subdivisionScheme:o,subtreeLevels:f,maximumLevel:u,refine:v,basePath:s,lodMetricType:ya.GEOMETRIC_ERROR,rootLodMetricValue:g,rootBoundingVolume:y,getTileType:Zg,getRefine:e0},x.next=14,QH(r,d,_);case 14:return x.abrupt("return",x.sent);case 15:case"end":return x.stop()}},e)})),Qg.apply(this,arguments)}function QH(e,r,t){return $g.apply(this,arguments)}function $g(){return $g=(0,Al.default)(Ia.default.mark(function e(r,t,n){var a,i,s;return Ia.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(r){u.next=2;break}return u.abrupt("return",null);case 2:return r.lodMetricType=ya.GEOMETRIC_ERROR,r.lodMetricValue=r.geometricError,r.transformMatrix=r.transform,u.next=7,Xg({subtree:t,options:n});case 7:return a=u.sent,i=a.children,s=a.contentUrl,s&&(r.contentUrl=s,r.content={uri:s.replace("".concat(n.basePath,"/"),"")}),r.refine=e0(r.refine),r.type=Zg(r),r.children=i,r.id=r.contentUrl,u.abrupt("return",r);case 16:case"end":return u.stop()}},e)})),$g.apply(this,arguments)}function EB(e){var r;return(e==null||(r=e.extensions)===null||r===void 0?void 0:r["3DTILES_implicit_tiling"])||e?.implicitTiling}var Tl={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:zf,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:tV,options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};function $H(e){return cn.dirname(e.url)}function ZH(e,r,t){return t0.apply(this,arguments)}function t0(){return t0=(0,xl.default)(Ra.default.mark(function e(r,t,n){var a,i;return Ra.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a={content:{featureIds:null}},i=0,o.next=4,Gg(r,i,t,n,a.content);case 4:return o.abrupt("return",a.content);case 5:case"end":return o.stop()}},e)})),t0.apply(this,arguments)}function eV(e,r,t){return r0.apply(this,arguments)}function r0(){return r0=(0,xl.default)(Ra.default.mark(function e(r,t,n){var a,i;return Ra.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=JSON.parse(new TextDecoder().decode(r)),i.loader=t.loader||Tl,i.url=n.url,i.basePath=$H(i),o.next=6,SB(i,t);case 6:return i.root=o.sent,i.type=pt.TILES3D,i.lodMetricType=ya.GEOMETRIC_ERROR,i.lodMetricValue=((a=i.root)===null||a===void 0?void 0:a.lodMetricValue)||0,o.abrupt("return",i);case 11:case"end":return o.stop()}},e)})),r0.apply(this,arguments)}function tV(e,r,t){return n0.apply(this,arguments)}function n0(){return n0=(0,xl.default)(Ra.default.mark(function e(r,t,n){var a,i;return Ra.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a=t["3d-tiles"]||{},a.isTileset==="auto"?i=n.url&&n.url.indexOf(".json")!==-1:i=a.isTileset,!i){o.next=8;break}return o.next=5,eV(r,t,n);case 5:r=o.sent,o.next=11;break;case 8:return o.next=10,ZH(r,t,n);case 10:r=o.sent;case 11:return o.abrupt("return",r);case 12:case"end":return o.stop()}},e)})),n0.apply(this,arguments)}function wB(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Li(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wB(Object(t),!0).forEach(function(n){(0,po.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function rV(e){var r=nV();return function(){var n=(0,a0.default)(e),a;if(r){var i=(0,a0.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,LB.default)(this,a)}}function nV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var CB=[0],aV={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:"",loader:Tl,onTilesetLoad:{type:"function",value:function(r){}},onTileLoad:{type:"function",value:function(r){}},onTileUnload:{type:"function",value:function(r){}},onTileError:{type:"function",value:function(r,t,n){}},_getMeshColor:{type:"function",value:function(r){return[255,255,255]}}},Ml=function(e){(0,RB.default)(t,e);var r=rV(t);function t(){var n;(0,BB.default)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r.call.apply(r,[this].concat(i)),(0,po.default)((0,IB.default)(n),"state",void 0),n}return(0,PB.default)(t,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&Fn.log.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}},{key:"isLoaded",get:function(){var a=this.state.tileset3d;return a!==null&&a.isLoaded()}},{key:"shouldUpdateState",value:function(a){var i=a.changeFlags;return i.somethingChanged}},{key:"updateState",value:function(a){var i=a.props,s=a.oldProps,o=a.changeFlags;if(i.data&&i.data!==s.data&&this._loadTileset(i.data),o.viewportChanged){var u=this.state.activeViewports,f=Object.keys(u).length;f&&(this._updateTileset(u),this.state.lastUpdatedViewports=u,this.state.activeViewports={})}if(o.propsChanged){var l=this.state.layerMap;for(var c in l)l[c].needsUpdate=!0}}},{key:"activateViewport",value:function(a){var i=this.state,s=i.activeViewports,o=i.lastUpdatedViewports;this.internalState.viewport=a,s[a.id]=a;var u=o?.[a.id];(!u||!a.equals(u))&&(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}},{key:"getPickingInfo",value:function(a){var i=a.info,s=a.sourceLayer,o=s&&s.props.tile;return i.picked&&(i.object=o),i.sourceTile=o,i}},{key:"filterSubLayer",value:function(a){var i=a.layer,s=a.viewport,o=i.props,u=o.tile,f=s.id;return u.selected&&u.viewportIds.includes(f)}},{key:"_updateAutoHighlight",value:function(a){var i=a.sourceTile,s=this.state.layerMap[i?.id];s&&s.layer&&s.layer.updateAutoHighlight(a)}},{key:"_loadTileset",value:function(){var n=(0,OB.default)(i0.default.mark(function i(s){var o,u,f,l,c,h,d;return i0.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=this.props.loadOptions,u=o===void 0?{}:o,f=this.props.loader||this.props.loaders,Array.isArray(f)&&(f=f[0]),l={loadOptions:Li({},u)},!f.preload){v.next=10;break}return v.next=7,f.preload(s,u);case 7:c=v.sent,c.headers&&(l.loadOptions.fetch=Li(Li({},l.loadOptions.fetch),{},{headers:c.headers})),Object.assign(l,c);case 10:return v.next=12,hr(s,f,l.loadOptions);case 12:h=v.sent,d=new qm(h,Li({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileError:this.props.onTileError},l)),this.setState({tileset3d:d,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(d);case 17:case"end":return v.stop()}},i,this)}));function a(i){return n.apply(this,arguments)}return a}()},{key:"_onTileLoad",value:function(a){var i=this.state.lastUpdatedViewports;this.props.onTileLoad(a),this._updateTileset(i),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(a){delete this.state.layerMap[a.id],this.props.onTileUnload(a)}},{key:"_updateTileset",value:function(a){var i=this;if(a){var s=this.state.tileset3d,o=this.context.timeline,u=Object.keys(a).length;!o||!u||!s||s.selectTiles(Object.values(a)).then(function(f){var l=i.state.frameNumber!==f;l&&i.setState({frameNumber:f})})}}},{key:"_getSubLayer",value:function(a,i){if(!a.content)return null;switch(a.type){case $r.POINTCLOUD:return this._makePointCloudLayer(a,i);case $r.SCENEGRAPH:return this._make3DModelLayer(a);case $r.MESH:return this._makeSimpleMeshLayer(a,i);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(a.content.type))}}},{key:"_makePointCloudLayer",value:function(a,i){var s=a.content,o=s.attributes,u=s.pointCount,f=s.constantRGBA,l=s.cartographicOrigin,c=s.modelMatrix,h=o.positions,d=o.normals,p=o.colors;if(!h)return null;var v=i&&i.props.data||{header:{vertexCount:u},attributes:{POSITION:h,NORMAL:d,COLOR_0:p}},g=this.props,y=g.pointSize,_=g.getPointColor,T=this.getSubLayerClass("pointcloud",kB.PointCloudLayer);return new T({pointSize:y},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(a.id),tile:a,data:v,coordinateSystem:Fn.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:l,modelMatrix:c,getColor:f||_,_offset:0})}},{key:"_make3DModelLayer",value:function(a){var i=a.content,s=i.gltf,o=i.instances,u=i.cartographicOrigin,f=i.modelMatrix,l=this.getSubLayerClass("scenegraph",DB.ScenegraphLayer);return new l({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(a.id),tile:a,data:o||CB,scenegraph:s,coordinateSystem:Fn.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:u,modelMatrix:f,getTransformMatrix:function(h){return h.modelMatrix},getPosition:[0,0,0],_offset:0})}},{key:"_makeSimpleMeshLayer",value:function(a,i){var s=a.content,o=s.attributes,u=s.indices,f=s.modelMatrix,l=s.cartographicOrigin,c=s.coordinateSystem,h=c===void 0?Fn.COORDINATE_SYSTEM.METER_OFFSETS:c,d=s.material,p=s.featureIds,v=this.props._getMeshColor,g=i&&i.props.mesh||new FB.Geometry({drawMode:4,attributes:iV(o),indices:u}),y=this.getSubLayerClass("mesh",Tf);return new y(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(a.id),tile:a,mesh:g,data:CB,getColor:v(a),pbrMaterial:d,modelMatrix:f,coordinateOrigin:l,coordinateSystem:h,featureIds:p,_offset:0})}},{key:"renderLayers",value:function(){var a=this,i=this.state,s=i.tileset3d,o=i.layerMap;return s?s.tiles.map(function(u){var f=o[u.id]=o[u.id]||{tile:u},l=f.layer;return u.selected&&(l?f.needsUpdate&&(l=a._getSubLayer(u,l),f.needsUpdate=!1):l=a._getSubLayer(u)),f.layer=l,l}).filter(Boolean):null}}]),t}(Fn.CompositeLayer);(0,po.default)(Ml,"defaultProps",aV);(0,po.default)(Ml,"layerName","Tile3DLayer");function iV(e){var r={};return r.positions=Li(Li({},e.positions),{},{value:new Float32Array(e.positions.value)}),e.normals&&(r.normals=e.normals),e.texCoords&&(r.texCoords=e.texCoords),e.colors&&(r.colors=e.colors),e.uvRegions&&(r.uvRegions=e.uvRegions),r}var d0=m(wt()),nP=m(ve()),aP=m(z()),iP=m(q()),sP=m(vt()),oP=m(Ce()),uP=m(Oe()),p0=m(Me()),yo=m(J()),Il=m(er()),m0=m(Zu()),fP=m(er());var $B=m(Y()),ZB=m(J()),h0=m(K());var UB=m(ve());var GB=m(ve());function sV(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=oV(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function oV(e,r){if(e){if(typeof e=="string")return NB(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return NB(e,r)}}function NB(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var uV=new Map([["centerX",Float64Array.BYTES_PER_ELEMENT],["centerY",Float64Array.BYTES_PER_ELEMENT],["centerZ",Float64Array.BYTES_PER_ELEMENT],["minHeight",Float32Array.BYTES_PER_ELEMENT],["maxHeight",Float32Array.BYTES_PER_ELEMENT],["boundingSphereCenterX",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterY",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterZ",Float64Array.BYTES_PER_ELEMENT],["boundingSphereRadius",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointX",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointY",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointZ",Float64Array.BYTES_PER_ELEMENT]]);function s0(e){return e>>1^-(e&1)}function fV(e){var r=0,t={},n=sV(uV),a;try{for(n.s();!(a=n.n()).done;){var i=(0,GB.default)(a.value,2),s=i[0],o=i[1],u=o===8?e.getFloat64:e.getFloat32;t[s]=u.call(e,r,!0),r+=o}}catch(f){n.e(f)}finally{n.f()}return{header:t,headerEndPosition:r}}function lV(e,r){var t=r,n=3,a=e.getUint32(t,!0),i=new Uint16Array(a*n);t+=Uint32Array.BYTES_PER_ELEMENT;for(var s=Uint16Array.BYTES_PER_ELEMENT,o=a*s,u=t,f=u+o,l=f+o,c=0,h=0,d=0,p=0;p<a;p++)c+=s0(e.getUint16(u+s*p,!0)),h+=s0(e.getUint16(f+s*p,!0)),d+=s0(e.getUint16(l+s*p,!0)),i[p]=c,i[p+a]=h,i[p+a*2]=d;return t+=o*3,{vertexData:i,vertexDataEndPosition:t}}function mo(e,r,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i;if(n===2?i=new Uint16Array(e,r,t):i=new Uint32Array(e,r,t),!a)return i;for(var s=0,o=0;o<i.length;++o){var u=i[o];i[o]=s-u,u===0&&++s}return i}function cV(e,r,t){var n=t,a=3,i=r.length/a,s=i>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;n%s!==0&&(n+=s-n%s);var o=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=o*3,f=mo(e.buffer,n,u,s);return n+=u*s,{triangleIndicesEndPosition:n,triangleIndices:f}}function hV(e,r,t){var n=t,a=3,i=r.length/a,s=i>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,o=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=mo(e.buffer,n,o,s,!1);n+=o*s;var f=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var l=mo(e.buffer,n,f,s,!1);n+=f*s;var c=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var h=mo(e.buffer,n,c,s,!1);n+=c*s;var d=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var p=mo(e.buffer,n,d,s,!1);return n+=d*s,{edgeIndicesEndPosition:n,westIndices:u,southIndices:l,eastIndices:h,northIndices:p}}function dV(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function pV(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function mV(e,r){var t={};if(e.byteLength<=r)return{extensions:t,extensionsEndPosition:r};for(var n=r;n<e.byteLength;){var a=e.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT;var i=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var s=new DataView(e.buffer,n,i);switch(a){case 1:{t.vertexNormals=dV(s);break}case 2:{t.waterMask=pV(s);break}default:}n+=i}return{extensions:t,extensionsEndPosition:n}}var La={header:0,vertices:1,triangleIndices:2,edgeIndices:3,extensions:4},vV={maxDecodingStep:La.extensions};function o0(e,r){var t=Object.assign({},vV,r),n=new DataView(e),a=fV(n),i=a.header,s=a.headerEndPosition;if(t.maxDecodingStep<La.vertices)return{header:i};var o=lV(n,s),u=o.vertexData,f=o.vertexDataEndPosition;if(t.maxDecodingStep<La.triangleIndices)return{header:i,vertexData:u};var l=cV(n,u,f),c=l.triangleIndices,h=l.triangleIndicesEndPosition;if(t.maxDecodingStep<La.edgeIndices)return{header:i,vertexData:u,triangleIndices:c};var d=hV(n,u,h),p=d.westIndices,v=d.southIndices,g=d.eastIndices,y=d.northIndices,_=d.edgeIndicesEndPosition;if(t.maxDecodingStep<La.extensions)return{header:i,vertexData:u,triangleIndices:c,westIndices:p,northIndices:y,eastIndices:g,southIndices:v};var T=mV(n,_),x=T.extensions;return{header:i,vertexData:u,triangleIndices:c,westIndices:p,northIndices:y,eastIndices:g,southIndices:v,extensions:x}}var vo=m(wt());function El(e,r,t,n){for(var a=n?yV(n,e.POSITION.value):gV(r),i=new e.POSITION.value.constructor(a.length*6),s=new e.TEXCOORD_0.value.constructor(a.length*4),o=new r.constructor(a.length*6),u=0;u<a.length;u++){var f=a[u];bV({edge:f,edgeIndex:u,attributes:e,skirtHeight:t,newPosition:i,newTexcoord0:s,newTriangles:o})}e.POSITION.value=Xi(e.POSITION.value,i),e.TEXCOORD_0.value=Xi(e.TEXCOORD_0.value,s);var l=r instanceof Array?r.concat(o):Xi(r,o);return{attributes:e,triangles:l}}function gV(e){for(var r=[],t=0;t<e.length;t+=3)r.push([e[t],e[t+1]]),r.push([e[t+1],e[t+2]]),r.push([e[t+2],e[t]]);r.sort(function(o,u){return Math.min.apply(Math,(0,vo.default)(o))-Math.min.apply(Math,(0,vo.default)(u))||Math.max.apply(Math,(0,vo.default)(o))-Math.max.apply(Math,(0,vo.default)(u))});for(var n=[],a=0;a<r.length;){var i,s;r[a][0]===((i=r[a+1])===null||i===void 0?void 0:i[1])&&r[a][1]===((s=r[a+1])===null||s===void 0?void 0:s[0])?a+=2:(n.push(r[a]),a++)}return n}function yV(e,r){e.westIndices.sort(function(s,o){return r[3*s+1]-r[3*o+1]}),e.eastIndices.sort(function(s,o){return r[3*o+1]-r[3*s+1]}),e.southIndices.sort(function(s,o){return r[3*o]-r[3*s]}),e.northIndices.sort(function(s,o){return r[3*s]-r[3*o]});var t=[];for(var n in e)for(var a=e[n],i=0;i<a.length-1;i++)t.push([a[i],a[i+1]]);return t}function bV(e){var r=e.edge,t=e.edgeIndex,n=e.attributes,a=e.skirtHeight,i=e.newPosition,s=e.newTexcoord0,o=e.newTriangles,u=n.POSITION.value.length,f=t*2,l=t*2+1;i.set(n.POSITION.value.subarray(r[0]*3,r[0]*3+3),f*3),i[f*3+2]=i[f*3+2]-a,i.set(n.POSITION.value.subarray(r[1]*3,r[1]*3+3),l*3),i[l*3+2]=i[l*3+2]-a,s.set(n.TEXCOORD_0.value.subarray(r[0]*2,r[0]*2+2),f*2),s.set(n.TEXCOORD_0.value.subarray(r[1]*2,r[1]*2+2),l*2);var c=t*2*3;o[c]=r[0],o[c+1]=u/3+l,o[c+2]=r[1],o[c+3]=u/3+l,o[c+4]=r[0],o[c+5]=u/3+f}function _V(e,r,t){for(var n=r.minHeight,a=r.maxHeight,i=t||[0,0,1,1],s=(0,UB.default)(i,4),o=s[0],u=s[1],f=s[2],l=s[3],c=f-o,h=l-u,d=a-n,p=e.length/3,v=new Float32Array(p*3),g=new Float32Array(p*2),y=0;y<p;y++){var _=e[y]/32767,T=e[y+p]/32767,x=e[y+p*2]/32767;v[3*y+0]=_*c+o,v[3*y+1]=T*h+u,v[3*y+2]=x*d+n,g[2*y+0]=_,g[2*y+1]=T}return{POSITION:{value:v,size:3},TEXCOORD_0:{value:g,size:2}}}function AV(e,r){if(!e)return null;var t=r.bounds,n=o0(e,La.triangleIndices),a=n.header,i=n.vertexData,s=n.triangleIndices,o=n.westIndices,u=n.northIndices,f=n.eastIndices,l=n.southIndices,c=s,h=_V(i,a,t),d=xa(h);if(r.skirtHeight){var p=El(h,c,r.skirtHeight,{westIndices:o,northIndices:u,eastIndices:f,southIndices:l}),v=p.attributes,g=p.triangles;h=v,c=g}return{loaderData:{header:{}},header:{vertexCount:c.length,boundingBox:d},mode:4,indices:{value:c,size:1},attributes:h}}function Sl(e,r){return AV(e,r["quantized-mesh"])}var JB=m(J()),XB=m(Y()),KB=m(ve()),f0=m(K());var go=class{constructor(r=257){this.gridSize=r;let t=r-1;if(t&t-1)throw new Error(`Expected grid size to be 2^n+1, got ${r}.`);this.numTriangles=t*t*2-2,this.numParentTriangles=this.numTriangles-t*t,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(this.numTriangles*4);for(let n=0;n<this.numTriangles;n++){let a=n+2,i=0,s=0,o=0,u=0,f=0,l=0;for(a&1?o=u=f=t:i=s=l=t;(a>>=1)>1;){let h=i+o>>1,d=s+u>>1;a&1?(o=i,u=s,i=f,s=l):(i=o,s=u,o=f,u=l),f=h,l=d}let c=n*4;this.coords[c+0]=i,this.coords[c+1]=s,this.coords[c+2]=o,this.coords[c+3]=u}}createTile(r){return new u0(r,this)}},u0=class{constructor(r,t){let n=t.gridSize;if(r.length!==n*n)throw new Error(`Expected terrain data of length ${n*n} (${n} x ${n}), got ${r.length}.`);this.terrain=r,this.martini=t,this.errors=new Float32Array(r.length),this.update()}update(){let{numTriangles:r,numParentTriangles:t,coords:n,gridSize:a}=this.martini,{terrain:i,errors:s}=this;for(let o=r-1;o>=0;o--){let u=o*4,f=n[u+0],l=n[u+1],c=n[u+2],h=n[u+3],d=f+c>>1,p=l+h>>1,v=d+p-l,g=p+f-d,y=(i[l*a+f]+i[h*a+c])/2,_=p*a+d,T=Math.abs(y-i[_]);if(s[_]=Math.max(s[_],T),o<t){let x=(l+g>>1)*a+(f+v>>1),E=(h+g>>1)*a+(c+v>>1);s[_]=Math.max(s[_],s[x],s[E])}}}getMesh(r=0){let{gridSize:t,indices:n}=this.martini,{errors:a}=this,i=0,s=0,o=t-1;n.fill(0);function u(d,p,v,g,y,_){let T=d+v>>1,x=p+g>>1;Math.abs(d-y)+Math.abs(p-_)>1&&a[x*t+T]>r?(u(y,_,d,p,T,x),u(v,g,y,_,T,x)):(n[p*t+d]=n[p*t+d]||++i,n[g*t+v]=n[g*t+v]||++i,n[_*t+y]=n[_*t+y]||++i,s++)}u(0,0,o,o,o,0),u(o,o,0,0,0,o);let f=new Uint16Array(i*2),l=new Uint32Array(s*3),c=0;function h(d,p,v,g,y,_){let T=d+v>>1,x=p+g>>1;if(Math.abs(d-y)+Math.abs(p-_)>1&&a[x*t+T]>r)h(y,_,d,p,T,x),h(v,g,y,_,T,x);else{let E=n[p*t+d]-1,C=n[g*t+v]-1,L=n[_*t+y]-1;f[2*E]=d,f[2*E+1]=p,f[2*C]=v,f[2*C+1]=g,f[2*L]=y,f[2*L+1]=_,l[c++]=E,l[c++]=C,l[c++]=L}}return h(0,0,o,o,o,0),h(o,o,0,0,0,o),{vertices:f,triangles:l}}};var jB=m(z()),HB=m(q()),VB=function(){function e(r,t){(0,jB.default)(this,e);var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;this.data=r,this.width=t,this.height=n,this.coords=[],this.triangles=[],this._halfedges=[],this._candidates=[],this._queueIndices=[],this._queue=[],this._errors=[],this._rms=[],this._pending=[],this._pendingLen=0,this._rmsSum=0;var a=t-1,i=n-1,s=this._addPoint(0,0),o=this._addPoint(a,0),u=this._addPoint(0,i),f=this._addPoint(a,i),l=this._addTriangle(f,s,u,-1,-1,-1);this._addTriangle(s,f,o,l,-1,-1),this._flush()}return(0,HB.default)(e,[{key:"run",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.getMaxError()>t;)this.refine()}},{key:"refine",value:function(){this._step(),this._flush()}},{key:"getMaxError",value:function(){return this._errors[0]}},{key:"getRMSD",value:function(){return this._rmsSum>0?Math.sqrt(this._rmsSum/(this.width*this.height)):0}},{key:"heightAt",value:function(t,n){return this.data[this.width*n+t]}},{key:"_flush",value:function(){for(var t=this.coords,n=0;n<this._pendingLen;n++){var a=this._pending[n],i=2*this.triangles[a*3+0],s=2*this.triangles[a*3+1],o=2*this.triangles[a*3+2];this._findCandidate(t[i],t[i+1],t[s],t[s+1],t[o],t[o+1],a)}this._pendingLen=0}},{key:"_findCandidate",value:function(t,n,a,i,s,o,u){for(var f=Math.min(t,a,s),l=Math.min(n,i,o),c=Math.max(t,a,s),h=Math.max(n,i,o),d=Fa(a,i,s,o,f,l),p=Fa(s,o,t,n,f,l),v=Fa(t,n,a,i,f,l),g=i-n,y=t-a,_=o-i,T=a-s,x=n-o,E=s-t,C=Fa(t,n,a,i,s,o),L=this.heightAt(t,n)/C,w=this.heightAt(a,i)/C,S=this.heightAt(s,o)/C,A=0,I=0,F=0,D=0,N=l;N<=h;N++){var B=0;d<0&&_!==0&&(B=Math.max(B,Math.floor(-d/_))),p<0&&x!==0&&(B=Math.max(B,Math.floor(-p/x))),v<0&&g!==0&&(B=Math.max(B,Math.floor(-v/g)));for(var P=d+_*B,R=p+x*B,V=v+g*B,G=!1,W=f+B;W<=c;W++){if(P>=0&&R>=0&&V>=0){G=!0;var $=L*P+w*R+S*V,oe=Math.abs($-this.heightAt(W,N));D+=oe*oe,oe>A&&(A=oe,I=W,F=N)}else if(G)break;P+=_,R+=x,V+=g}d+=T,p+=E,v+=y}(I===t&&F===n||I===a&&F===i||I===s&&F===o)&&(A=0),this._candidates[2*u]=I,this._candidates[2*u+1]=F,this._rms[u]=D,this._queuePush(u,A,D)}},{key:"_step",value:function(){var t=this._queuePop(),n=t*3+0,a=t*3+1,i=t*3+2,s=this.triangles[n],o=this.triangles[a],u=this.triangles[i],f=this.coords[2*s],l=this.coords[2*s+1],c=this.coords[2*o],h=this.coords[2*o+1],d=this.coords[2*u],p=this.coords[2*u+1],v=this._candidates[2*t],g=this._candidates[2*t+1],y=this._addPoint(v,g);if(Fa(f,l,c,h,v,g)===0)this._handleCollinear(y,n);else if(Fa(c,h,d,p,v,g)===0)this._handleCollinear(y,a);else if(Fa(d,p,f,l,v,g)===0)this._handleCollinear(y,i);else{var _=this._halfedges[n],T=this._halfedges[a],x=this._halfedges[i],E=this._addTriangle(s,o,y,_,-1,-1,n),C=this._addTriangle(o,u,y,T,-1,E+1),L=this._addTriangle(u,s,y,x,E+2,C+1);this._legalize(E),this._legalize(C),this._legalize(L)}}},{key:"_addPoint",value:function(t,n){var a=this.coords.length>>1;return this.coords.push(t,n),a}},{key:"_addTriangle",value:function(t,n,a,i,s,o){var u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this.triangles.length,f=u/3;return this.triangles[u+0]=t,this.triangles[u+1]=n,this.triangles[u+2]=a,this._halfedges[u+0]=i,this._halfedges[u+1]=s,this._halfedges[u+2]=o,i>=0&&(this._halfedges[i]=u+0),s>=0&&(this._halfedges[s]=u+1),o>=0&&(this._halfedges[o]=u+2),this._candidates[2*f+0]=0,this._candidates[2*f+1]=0,this._queueIndices[f]=-1,this._rms[f]=0,this._pending[this._pendingLen++]=f,u}},{key:"_legalize",value:function(t){var n=this._halfedges[t];if(!(n<0)){var a=t-t%3,i=n-n%3,s=a+(t+1)%3,o=a+(t+2)%3,u=i+(n+2)%3,f=i+(n+1)%3,l=this.triangles[o],c=this.triangles[t],h=this.triangles[s],d=this.triangles[u],p=this.coords;if(xV(p[2*l],p[2*l+1],p[2*c],p[2*c+1],p[2*h],p[2*h+1],p[2*d],p[2*d+1])){var v=this._halfedges[s],g=this._halfedges[o],y=this._halfedges[u],_=this._halfedges[f];this._queueRemove(a/3),this._queueRemove(i/3);var T=this._addTriangle(l,d,h,-1,y,v,a),x=this._addTriangle(d,l,c,T,g,_,i);this._legalize(T+1),this._legalize(x+2)}}}},{key:"_handleCollinear",value:function(t,n){var a=n-n%3,i=a+(n+1)%3,s=a+(n+2)%3,o=this.triangles[s],u=this.triangles[n],f=this.triangles[i],l=this._halfedges[i],c=this._halfedges[s],h=this._halfedges[n];if(h<0){var d=this._addTriangle(t,o,u,-1,c,-1,a),p=this._addTriangle(o,t,f,d,-1,l);this._legalize(d+1),this._legalize(p+2);return}var v=h-h%3,g=v+(h+2)%3,y=v+(h+1)%3,_=this.triangles[g],T=this._halfedges[g],x=this._halfedges[y];this._queueRemove(v/3);var E=this._addTriangle(o,u,t,c,-1,-1,a),C=this._addTriangle(u,_,t,x,-1,E+1,v),L=this._addTriangle(_,f,t,T,-1,C+1),w=this._addTriangle(f,o,t,l,E+2,L+1);this._legalize(E),this._legalize(C),this._legalize(L),this._legalize(w)}},{key:"_queuePush",value:function(t,n,a){var i=this._queue.length;this._queueIndices[t]=i,this._queue.push(t),this._errors.push(n),this._rmsSum+=a,this._queueUp(i)}},{key:"_queuePop",value:function(){var t=this._queue.length-1;return this._queueSwap(0,t),this._queueDown(0,t),this._queuePopBack()}},{key:"_queuePopBack",value:function(){var t=this._queue.pop();return this._errors.pop(),this._rmsSum-=this._rms[t],this._queueIndices[t]=-1,t}},{key:"_queueRemove",value:function(t){var n=this._queueIndices[t];if(n<0){var a=this._pending.indexOf(t);if(a!==-1)this._pending[a]=this._pending[--this._pendingLen];else throw new Error("Broken triangulation (something went wrong).");return}var i=this._queue.length-1;i!==n&&(this._queueSwap(n,i),this._queueDown(n,i)||this._queueUp(n)),this._queuePopBack()}},{key:"_queueLess",value:function(t,n){return this._errors[t]>this._errors[n]}},{key:"_queueSwap",value:function(t,n){var a=this._queue[t],i=this._queue[n];this._queue[t]=i,this._queue[n]=a,this._queueIndices[a]=n,this._queueIndices[i]=t;var s=this._errors[t];this._errors[t]=this._errors[n],this._errors[n]=s}},{key:"_queueUp",value:function(t){for(var n=t;;){var a=n-1>>1;if(a===n||!this._queueLess(n,a))break;this._queueSwap(a,n),n=a}}},{key:"_queueDown",value:function(t,n){for(var a=t;;){var i=2*a+1;if(i>=n||i<0)break;var s=i+1,o=i;if(s<n&&this._queueLess(s,i)&&(o=s),!this._queueLess(o,a))break;this._queueSwap(a,o),a=o}return a>t}}]),e}();function Fa(e,r,t,n,a,i){return(t-a)*(r-i)-(n-i)*(e-a)}function xV(e,r,t,n,a,i,s,o){var u=e-s,f=r-o,l=t-s,c=n-o,h=a-s,d=i-o,p=u*u+f*f,v=l*l+c*c,g=h*h+d*d;return u*(c*g-v*d)-f*(l*g-v*h)+p*(l*d-c*h)<0}function zB(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function wl(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?zB(Object(t),!0).forEach(function(n){(0,JB.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Cl(e,r,t,n,a){for(var i=n.rScaler,s=n.bScaler,o=n.gScaler,u=n.offset,f=new Float32Array((r+1)*(t+1)),l=0,c=0;c<t;c++)for(var h=0;h<r;h++,l++){var d=l*4,p=e[d+0],v=e[d+1],g=e[d+2];f[l+c]=p*i+v*o+g*s+u}if(a==="martini"){for(var y=(r+1)*r,_=0;_<r;_++,y++)f[y]=f[y-r-1];for(var T=t,x=0;x<t+1;x++,T+=t+1)f[T]=f[T-1]}return f}function TV(e,r,t,n,a){for(var i=t+1,s=e.length/2,o=new Float32Array(s*3),u=new Float32Array(s*2),f=a||[0,0,t,n],l=(0,KB.default)(f,4),c=l[0],h=l[1],d=l[2],p=l[3],v=(d-c)/t,g=(p-h)/n,y=0;y<s;y++){var _=e[y*2],T=e[y*2+1],x=T*i+_;o[3*y+0]=_*v+c,o[3*y+1]=-T*g+p,o[3*y+2]=r[x],u[2*y+0]=_/t,u[2*y+1]=T/n}return{POSITION:{value:o,size:3},TEXCOORD_0:{value:u,size:2}}}function MV(e,r){if(e===null)return null;var t=r.meshMaxError,n=r.bounds,a=r.elevationDecoder,i=e.data,s=e.width,o=e.height,u,f;switch(r.tesselator){case"martini":u=Cl(i,s,o,a,r.tesselator),f=WB(t,s,u);break;case"delatin":u=Cl(i,s,o,a,r.tesselator),f=qB(t,s,o,u);break;default:s===o&&!(o&s-1)?(u=Cl(i,s,o,a,"martini"),f=WB(t,s,u)):(u=Cl(i,s,o,a,"delatin"),f=qB(t,s,o,u));break}var l=f,c=l.vertices,h=f,d=h.triangles,p=TV(c,u,s,o,n),v=xa(p);if(r.skirtHeight){var g=El(p,d,r.skirtHeight),y=g.attributes,_=g.triangles;p=y,d=_}return{loaderData:{header:{}},header:{vertexCount:d.length,boundingBox:v},mode:4,indices:{value:Uint32Array.from(d),size:1},attributes:p}}function WB(e,r,t){var n=r+1,a=new go(n),i=a.createTile(t),s=i.getMesh(e),o=s.vertices,u=s.triangles;return{vertices:o,triangles:u}}function qB(e,r,t,n){var a=new VB(n,r+1,t+1);a.run(e);var i=a.coords,s=a.triangles,o=i;return{vertices:o,triangles:s}}function c0(e,r,t){return l0.apply(this,arguments)}function l0(){return l0=(0,XB.default)(f0.default.mark(function e(r,t,n){var a,i;return f0.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=wl(wl({},t),{},{mimeType:"application/x.image",image:wl(wl({},t.image),{},{type:"data"})}),o.next=3,n.parse(r,a);case 3:return i=o.sent,o.abrupt("return",MV(i,t.terrain));case 5:case"end":return o.stop()}},e)})),l0.apply(this,arguments)}var Ol="3.3.1";var Bl={name:"Terrain",id:"terrain",module:"terrain",version:Ol,worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}};var YB={name:"Quantized Mesh",id:"quantized-mesh",module:"terrain",version:Ol,worker:!0,extensions:["terrain"],mimeTypes:["application/vnd.quantized-mesh"],options:{"quantized-mesh":{bounds:[0,0,1,1],skirtHeight:null}}};function QB(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Pl(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?QB(Object(t),!0).forEach(function(n){(0,ZB.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):QB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var G0e=Pl(Pl({},Bl),{},{parse:c0});var U0e=Pl(Pl({},YB),{},{parseSync:Sl,parse:function(){var e=(0,$B.default)(h0.default.mark(function t(n,a){return h0.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Sl(n,a));case 1:case"end":return s.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}()});function EV(e){var r=SV();return function(){var n=(0,p0.default)(e),a;if(r){var i=(0,p0.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,uP.default)(this,a)}}function SV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function eP(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function kn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?eP(Object(t),!0).forEach(function(n){(0,yo.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tP=[1],wV=kn(kn({},Wr.defaultProps),{},{elevationData:An,texture:kn(kn({},An),{},{optional:!0}),meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:"",wireframe:!1,material:!0,loaders:[Bl]});function rP(e){return Array.isArray(e)?e.join(";"):e||""}var Rl=function(e){(0,oP.default)(t,e);var r=EV(t);function t(){var n;(0,aP.default)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r.call.apply(r,[this].concat(i)),(0,yo.default)((0,sP.default)(n),"state",void 0),n}return(0,iP.default)(t,[{key:"updateState",value:function(a){var i=a.props,s=a.oldProps,o=i.elevationData!==s.elevationData;if(o){var u=i.elevationData,f=u&&(Array.isArray(u)||u.includes("{x}")&&u.includes("{y}"));this.setState({isTiled:f})}var l=o||i.meshMaxError!==s.meshMaxError||i.elevationDecoder!==s.elevationDecoder||i.bounds!==s.bounds;if(!this.state.isTiled&&l){var c=this.loadTerrain(i);this.setState({terrain:c})}i.workerUrl&&Il.log.removed("workerUrl","loadOptions.terrain.workerUrl")()}},{key:"loadTerrain",value:function(a){var i,s=a.elevationData,o=a.bounds,u=a.elevationDecoder,f=a.meshMaxError,l=a.signal;if(!s)return null;var c=this.getLoadOptions();c=kn(kn({},c),{},{terrain:kn(kn({skirtHeight:this.state.isTiled?f*2:0},(i=c)===null||i===void 0?void 0:i.terrain),{},{bounds:o,meshMaxError:f,elevationDecoder:u})});var h=this.props.fetch;return h(s,{propName:"elevationData",layer:this,loadOptions:c,signal:l})}},{key:"getTiledTerrainData",value:function(a){var i=this.props,s=i.elevationData,o=i.fetch,u=i.texture,f=i.elevationDecoder,l=i.meshMaxError,c=this.context.viewport,h=Tr(s,a),d=u&&Tr(u,a),p=a.signal,v=[0,0],g=[0,0];if(c.isGeospatial){var y=a.bbox;v=c.projectFlat([y.west,y.south]),g=c.projectFlat([y.east,y.north])}else{var _=a.bbox;v=[_.left,_.bottom],g=[_.right,_.top]}var T=[v[0],v[1],g[0],g[1]],x=this.loadTerrain({elevationData:h,bounds:T,elevationDecoder:f,meshMaxError:l,signal:p}),E=d?o(d,{propName:"texture",layer:this,loaders:[],signal:p}).catch(function(C){return null}):Promise.resolve(null);return Promise.all([x,E])}},{key:"renderSubLayers",value:function(a){var i=this.getSubLayerClass("mesh",m0.SimpleMeshLayer),s=this.props,o=s.color,u=s.wireframe,f=s.material,l=a.data;if(!l)return null;var c=(0,nP.default)(l,2),h=c[0],d=c[1];return new i(a,{data:tP,mesh:h,texture:d,_instanced:!1,coordinateSystem:fP.COORDINATE_SYSTEM.CARTESIAN,getPosition:function(v){return[0,0,0]},getColor:o,wireframe:u,material:f})}},{key:"onViewportLoad",value:function(a){if(a){var i=this.state.zRange,s=a.map(function(f){return f.content}).filter(Boolean).map(function(f){var l=f[0].header.boundingBox;return l.map(function(c){return c[2]})});if(s.length!==0){var o=Math.min.apply(Math,(0,d0.default)(s.map(function(f){return f[0]}))),u=Math.max.apply(Math,(0,d0.default)(s.map(function(f){return f[1]})));(!i||o<i[0]||u>i[1])&&this.setState({zRange:[o,u]})}}}},{key:"renderLayers",value:function(){var a=this.props,i=a.color,s=a.material,o=a.elevationData,u=a.texture,f=a.wireframe,l=a.meshMaxError,c=a.elevationDecoder,h=a.tileSize,d=a.maxZoom,p=a.minZoom,v=a.extent,g=a.maxRequests,y=a.onTileLoad,_=a.onTileUnload,T=a.onTileError,x=a.maxCacheSize,E=a.maxCacheByteSize,C=a.refinementStrategy;if(this.state.isTiled)return new Wr(this.getSubLayerProps({id:"tiles"}),{getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:rP(o),texture:rP(u),meshMaxError:l,elevationDecoder:c}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:h,maxZoom:d,minZoom:p,extent:v,maxRequests:g,onTileLoad:y,onTileUnload:_,onTileError:T,maxCacheSize:x,maxCacheByteSize:E,refinementStrategy:C});var L=this.getSubLayerClass("mesh",m0.SimpleMeshLayer);return new L(this.getSubLayerProps({id:"mesh"}),{data:tP,mesh:this.state.terrain,texture:u,_instanced:!1,getPosition:function(S){return[0,0,0]},getColor:i,material:s,wireframe:f})}}]),t}(Il.CompositeLayer);(0,yo.default)(Rl,"defaultProps",wV);(0,yo.default)(Rl,"layerName","TerrainLayer");var RI=m(wt()),LI=m(Y()),FI=m(z()),kI=m(q()),Nn=m(fi()),DI=m(Ce()),NI=m(Oe()),Br=m(Me()),Wl=m(J()),U0=m(K()),ql=m(er()),j0=m(Zt()),GI=m(cP());var gI=m(Y()),yI=m(J()),L0=m(K());var pI=m(ve());var SP=m(J());var mP=m(z()),vP=m(q());function v0(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=hP(e,t);return n!==r?(CV(e,t),!0):!1}function hP(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Math.sign(an(e,r))}function an(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.start,n=t===void 0?0:t,a=r.end,i=a===void 0?e.length:a,s=r.size||2,o=0,u=n,f=i-s;u<i;u+=s)o+=(e[u]-e[f])*(e[u+1]+e[f+1]),f=u;return o/2}function g0(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.start,a=n===void 0?0:n,i=t.end,s=i===void 0?e.length:i,o=t.size,u=o===void 0?2:o,f=t.isClosed,l=(s-a)/u,c=0;c<l-1;++c)r(e[a+c*u],e[a+c*u+1],e[a+(c+1)*u],e[a+(c+1)*u+1],c,c+1);var h=a+(l-1)*u,d=f||nt(e[a],e[h])&&nt(e[a+1],e[h+1]);d||r(e[h],e[h+1],e[a],e[a+1],l-1,0)}function CV(e,r){for(var t=r.start,n=t===void 0?0:t,a=r.end,i=a===void 0?e.length:a,s=r.size,o=s===void 0?2:s,u=(i-n)/o,f=Math.floor(u/2),l=0;l<f;++l)for(var c=n+l*o,h=n+(u-1-l)*o,d=0;d<o;++d){var p=e[c+d];e[c+d]=e[h+d],e[h+d]=p}}function dP(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=OV(e,t);return n!==r?(e.reverse(),!0):!1}function OV(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Math.sign(y0(e,r))}function y0(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.start,n=t===void 0?0:t,a=r.end,i=a===void 0?e.length:a,s=0,o=n,u=i-1;o<i;++o)s+=(e[o][0]-e[u][0])*(e[o][1]+e[u][1]),u=o;return s/2}function pP(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.start,a=n===void 0?0:n,i=t.end,s=i===void 0?e.length:i,o=t.isClosed,u=a;u<s-1;++u)r(e[u],e[u+1],u,u+1);var f=o||nt(e[s-1],e[0]);f||r(e[s-1],e[0],s-1,0)}var gP=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,mP.default)(this,e),b(this,"points",void 0),b(this,"isFlatArray",void 0),b(this,"options",void 0),this.points=r,this.isFlatArray=!_t(r[0]),this.options={start:t.start||0,end:t.end||r.length,size:t.size||2,isClosed:t.isClosed},Object.freeze(this)}return(0,vP.default)(e,[{key:"getSignedArea",value:function(){return this.isFlatArray?an(this.points,this.options):y0(this.points,this.options)}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(t){this.isFlatArray?g0(this.points,function(n,a,i,s,o,u){t([n,a],[i,s],o,u)},this.options):pP(this.points,t,this.options)}},{key:"modifyWindingDirection",value:function(t){return this.isFlatArray?v0(this.points,t,this.options):dP(this.points,t,this.options)}}]),e}();function A0(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,n=arguments.length>3?arguments[3]:void 0,a=r&&r.length,i=a?r[0]*t:e.length,s=bP(e,0,i,t,!0,n&&n[0]),o=[];if(!s||s.next===s.prev)return o;var u,f,l,c,h,d,p;if(a&&(s=LV(e,r,s,t,n)),e.length>80*t){c=f=e[0],h=l=e[1];for(var v=t;v<i;v+=t)d=e[v],p=e[v+1],d<c&&(c=d),p<h&&(h=p),d>f&&(f=d),p>l&&(l=p);u=Math.max(f-c,l-h),u=u!==0?1/u:0}return bo(s,o,t,c,h,u),o}function bP(e,r,t,n,a,i){var s,o;if(i===void 0&&(i=an(e,{start:r,end:t,size:n})),a===i<0)for(s=r;s<t;s+=n)o=yP(s,e[s],e[s+1],o);else for(s=t-n;s>=r;s-=n)o=yP(s,e[s],e[s+1],o);return o&&kl(o,o.next)&&(Ao(o),o=o.next),o}function Dn(e,r){if(!e)return e;r||(r=e);var t=e,n;do if(n=!1,!t.steiner&&(kl(t,t.next)||je(t.prev,t,t.next)===0)){if(Ao(t),t=r=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==r);return r}function bo(e,r,t,n,a,i,s){if(e){!s&&i&&GV(e,n,a,i);for(var o=e,u,f;e.prev!==e.next;){if(u=e.prev,f=e.next,i?PV(e,n,a,i):BV(e)){r.push(u.i/t),r.push(e.i/t),r.push(f.i/t),Ao(e),e=f.next,o=f.next;continue}if(e=f,e===o){s?s===1?(e=IV(Dn(e),r,t),bo(e,r,t,n,a,i,2)):s===2&&RV(e,r,t,n,a,i):bo(Dn(e),r,t,n,a,i,1);break}}}}function BV(e){var r=e.prev,t=e,n=e.next;if(je(r,t,n)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(Fi(r.x,r.y,t.x,t.y,n.x,n.y,a.x,a.y)&&je(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function PV(e,r,t,n){var a=e.prev,i=e,s=e.next;if(je(a,i,s)>=0)return!1;for(var o=a.x<i.x?a.x<s.x?a.x:s.x:i.x<s.x?i.x:s.x,u=a.y<i.y?a.y<s.y?a.y:s.y:i.y<s.y?i.y:s.y,f=a.x>i.x?a.x>s.x?a.x:s.x:i.x>s.x?i.x:s.x,l=a.y>i.y?a.y>s.y?a.y:s.y:i.y>s.y?i.y:s.y,c=b0(o,u,r,t,n),h=b0(f,l,r,t,n),d=e.prevZ,p=e.nextZ;d&&d.z>=c&&p&&p.z<=h;){if(d!==e.prev&&d!==e.next&&Fi(a.x,a.y,i.x,i.y,s.x,s.y,d.x,d.y)&&je(d.prev,d,d.next)>=0||(d=d.prevZ,p!==e.prev&&p!==e.next&&Fi(a.x,a.y,i.x,i.y,s.x,s.y,p.x,p.y)&&je(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=c;){if(d!==e.prev&&d!==e.next&&Fi(a.x,a.y,i.x,i.y,s.x,s.y,d.x,d.y)&&je(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&Fi(a.x,a.y,i.x,i.y,s.x,s.y,p.x,p.y)&&je(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function IV(e,r,t){var n=e;do{var a=n.prev,i=n.next.next;!kl(a,i)&&_P(a,n,n.next,i)&&_o(a,i)&&_o(i,a)&&(r.push(a.i/t),r.push(n.i/t),r.push(i.i/t),Ao(n),Ao(n.next),n=e=i),n=n.next}while(n!==e);return Dn(n)}function RV(e,r,t,n,a,i){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&HV(s,o)){var u=AP(s,o);s=Dn(s,s.next),u=Dn(u,u.next),bo(s,r,t,n,a,i),bo(u,r,t,n,a,i);return}o=o.next}s=s.next}while(s!==e)}function LV(e,r,t,n,a){var i=[],s,o,u,f,l;for(s=0,o=r.length;s<o;s++)u=r[s]*n,f=s<o-1?r[s+1]*n:e.length,l=bP(e,u,f,n,!1,a&&a[s+1]),l===l.next&&(l.steiner=!0),i.push(jV(l));for(i.sort(FV),s=0;s<i.length;s++)kV(i[s],t),t=Dn(t,t.next);return t}function FV(e,r){return e.x-r.x}function kV(e,r){if(r=DV(e,r),r){var t=AP(r,e);Dn(r,r.next),Dn(t,t.next)}}function DV(e,r){var t=r,n=e.x,a=e.y,i=-1/0,s;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){var o=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=n&&o>i){if(i=o,o===n){if(a===t.y)return t;if(a===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==r);if(!s)return null;if(n===i)return s;var u=s,f=s.x,l=s.y,c=1/0,h;t=s;do n>=t.x&&t.x>=f&&n!==t.x&&Fi(a<l?n:i,a,f,l,a<l?i:n,a,t.x,t.y)&&(h=Math.abs(a-t.y)/(n-t.x),_o(t,e)&&(h<c||h===c&&(t.x>s.x||t.x===s.x&&NV(s,t)))&&(s=t,c=h)),t=t.next;while(t!==u);return s}function NV(e,r){return je(e.prev,e,r.prev)<0&&je(r.next,e,e.next)<0}function GV(e,r,t,n){var a=e;do a.z===null&&(a.z=b0(a.x,a.y,r,t,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,UV(a)}function UV(e){var r,t,n=1,a,i,s,o,u,f;do{for(i=e,e=null,f=null,a=0;i;){for(a++,o=i,s=0,t=0;t<n&&(s++,o=o.nextZ,!!o);t++);for(u=n;s>0||u>0&&o;)s!==0&&(u===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,s--):(r=o,o=o.nextZ,u--),f?f.nextZ=r:e=r,r.prevZ=f,f=r;i=o}f.nextZ=null,n*=2}while(a>1);return e}function b0(e,r,t,n,a){return e=32767*(e-t)*a,r=32767*(r-n)*a,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e|r<<1}function jV(e){var r=e,t=e;do(r.x<t.x||r.x===t.x&&r.y<t.y)&&(t=r),r=r.next;while(r!==e);return t}function Fi(e,r,t,n,a,i,s,o){return(a-s)*(r-o)-(e-s)*(i-o)>=0&&(e-s)*(n-o)-(t-s)*(r-o)>=0&&(t-s)*(i-o)-(a-s)*(n-o)>=0}function HV(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!VV(e,r)&&(_o(e,r)&&_o(r,e)&&zV(e,r)&&(je(e.prev,e,r.prev)||je(e,r.prev,r))||kl(e,r)&&je(e.prev,e,e.next)>0&&je(r.prev,r,r.next)>0)}function je(e,r,t){return(r.y-e.y)*(t.x-r.x)-(r.x-e.x)*(t.y-r.y)}function kl(e,r){return e.x===r.x&&e.y===r.y}function _P(e,r,t,n){var a=Fl(je(e,r,t)),i=Fl(je(e,r,n)),s=Fl(je(t,n,e)),o=Fl(je(t,n,r));return!!(a!==i&&s!==o||a===0&&Ll(e,t,r)||i===0&&Ll(e,n,r)||s===0&&Ll(t,e,n)||o===0&&Ll(t,r,n))}function Ll(e,r,t){return r.x<=Math.max(e.x,t.x)&&r.x>=Math.min(e.x,t.x)&&r.y<=Math.max(e.y,t.y)&&r.y>=Math.min(e.y,t.y)}function Fl(e){return e>0?1:e<0?-1:0}function VV(e,r){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==r.i&&t.next.i!==r.i&&_P(t,t.next,e,r))return!0;t=t.next}while(t!==e);return!1}function _o(e,r){return je(e.prev,e,e.next)<0?je(e,r,e.next)>=0&&je(e,e.prev,r)>=0:je(e,r,e.prev)<0||je(e,e.next,r)<0}function zV(e,r){var t=e,n=!1,a=(e.x+r.x)/2,i=(e.y+r.y)/2;do t.y>i!=t.next.y>i&&t.next.y!==t.y&&a<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==e);return n}function AP(e,r){var t=new _0(e.i,e.x,e.y),n=new _0(r.i,r.x,r.y),a=e.next,i=r.prev;return e.next=r,r.prev=e,t.next=a,a.prev=t,n.next=t,t.prev=n,i.next=n,n.prev=i,n}function yP(e,r,t,n){var a=new _0(e,r,t);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function Ao(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _0(e,r,t){this.i=e,this.x=r,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M0(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=XV(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function XV(e,r){if(e){if(typeof e=="string")return MP(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MP(e,r)}}function MP(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function EP(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ka(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?EP(Object(t),!0).forEach(function(n){(0,SP.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):EP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function E0(e,r,t){var n=KV(e),a=Object.keys(n).filter(function(i){return n[i]!==Array});return YV(e,ka({propArrayTypes:n},r),{numericPropKeys:t&&t.numericPropKeys||a,PositionDataType:t?t.PositionDataType:Float32Array})}function KV(e){var r={},t=M0(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(a.properties)for(var i in a.properties){var s=a.properties[i];r[i]=rz(s,r[i])}}}catch(o){t.e(o)}finally{t.f()}return r}function YV(e,r,t){for(var n=r.pointPositionsCount,a=r.pointFeaturesCount,i=r.linePositionsCount,s=r.linePathsCount,o=r.lineFeaturesCount,u=r.polygonPositionsCount,f=r.polygonObjectsCount,l=r.polygonRingsCount,c=r.polygonFeaturesCount,h=r.propArrayTypes,d=r.coordLength,p=t.numericPropKeys,v=p===void 0?[]:p,g=t.PositionDataType,y=g===void 0?Float32Array:g,_=e[0]&&("id"in e[0]),T=e.length>65535?Uint32Array:Uint16Array,x={type:"Point",positions:new y(n*d),globalFeatureIds:new T(n),featureIds:a>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[],fields:[]},E={type:"LineString",pathIndices:i>65535?new Uint32Array(s+1):new Uint16Array(s+1),positions:new y(i*d),globalFeatureIds:new T(i),featureIds:o>65535?new Uint32Array(i):new Uint16Array(i),numericProps:{},properties:[],fields:[]},C={type:"Polygon",polygonIndices:u>65535?new Uint32Array(f+1):new Uint16Array(f+1),primitivePolygonIndices:u>65535?new Uint32Array(l+1):new Uint16Array(l+1),positions:new y(u*d),triangles:[],globalFeatureIds:new T(u),featureIds:c>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[],fields:[]},L=0,w=[x,E,C];L<w.length;L++){var S=w[L],A=M0(v),I;try{for(A.s();!(I=A.n()).done;){var F=I.value,D=h[F];S.numericProps[F]=new D(S.positions.length/d)}}catch(W){A.e(W)}finally{A.f()}}E.pathIndices[s]=i,C.polygonIndices[f]=u,C.primitivePolygonIndices[l]=u;var N={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0},B=M0(e),P;try{for(B.s();!(P=B.n()).done;){var R=P.value,V=R.geometry,G=R.properties||{};switch(V.type){case"Point":QV(V,x,N,d,G),x.properties.push(T0(G,v)),_&&x.fields.push({id:R.id}),N.pointFeature++;break;case"LineString":$V(V,E,N,d,G),E.properties.push(T0(G,v)),_&&E.fields.push({id:R.id}),N.lineFeature++;break;case"Polygon":ZV(V,C,N,d,G),C.properties.push(T0(G,v)),_&&C.fields.push({id:R.id}),N.polygonFeature++;break;default:throw new Error("Invalid geometry type")}N.feature++}}catch(W){B.e(W)}finally{B.f()}return tz(x,E,C,d)}function QV(e,r,t,n,a){r.positions.set(e.data,t.pointPosition*n);var i=e.data.length/n;S0(r,a,t.pointPosition,i),r.globalFeatureIds.fill(t.feature,t.pointPosition,t.pointPosition+i),r.featureIds.fill(t.pointFeature,t.pointPosition,t.pointPosition+i),t.pointPosition+=i}function $V(e,r,t,n,a){r.positions.set(e.data,t.linePosition*n);var i=e.data.length/n;S0(r,a,t.linePosition,i),r.globalFeatureIds.fill(t.feature,t.linePosition,t.linePosition+i),r.featureIds.fill(t.lineFeature,t.linePosition,t.linePosition+i);for(var s=0,o=e.indices.length;s<o;++s){var u=e.indices[s],f=s===o-1?e.data.length:e.indices[s+1];r.pathIndices[t.linePath++]=t.linePosition,t.linePosition+=(f-u)/n}}function ZV(e,r,t,n,a){r.positions.set(e.data,t.polygonPosition*n);var i=e.data.length/n;S0(r,a,t.polygonPosition,i),r.globalFeatureIds.fill(t.feature,t.polygonPosition,t.polygonPosition+i),r.featureIds.fill(t.polygonFeature,t.polygonPosition,t.polygonPosition+i);for(var s=0,o=e.indices.length;s<o;++s){var u=t.polygonPosition;r.polygonIndices[t.polygonObject++]=u;for(var f=e.areas[s],l=e.indices[s],c=e.indices[s+1],h=0,d=l.length;h<d;++h){var p=l[h],v=h===d-1?c===void 0?e.data.length:c[0]:l[h+1];r.primitivePolygonIndices[t.polygonRing++]=t.polygonPosition,t.polygonPosition+=(v-p)/n}var g=t.polygonPosition;ez(r,f,l,{startPosition:u,endPosition:g,coordLength:n})}}function ez(e,r,t,n){for(var a=n.startPosition,i=n.endPosition,s=n.coordLength,o=a*s,u=i*s,f=e.positions.subarray(o,u),l=t[0],c=t.slice(1).map(function(v){return(v-l)/s}),h=A0(f,c,s,r),d=0,p=h.length;d<p;++d)e.triangles.push(a+h[d])}function x0(e,r){var t={};for(var n in e)t[n]={value:e[n],size:r};return t}function tz(e,r,t,n){return{points:ka(ka({},e),{},{positions:{value:e.positions,size:n},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:x0(e.numericProps,1)}),lines:ka(ka({},r),{},{positions:{value:r.positions,size:n},pathIndices:{value:r.pathIndices,size:1},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:x0(r.numericProps,1)}),polygons:ka(ka({},t),{},{positions:{value:t.positions,size:n},polygonIndices:{value:t.polygonIndices,size:1},primitivePolygonIndices:{value:t.primitivePolygonIndices,size:1},triangles:{value:new Uint32Array(t.triangles),size:1},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:x0(t.numericProps,1)})}}function S0(e,r,t,n){for(var a in e.numericProps)if(a in r){var i=r[a];e.numericProps[a].fill(i,t,t+n)}}function T0(e,r){var t={};for(var n in e)r.includes(n)||(t[n]=e[n]);return t}function rz(e,r){return r===Array||!Number.isFinite(e)?Array:r===Float64Array||Math.fround(e)!==e?Float64Array:Float32Array}var OP=m(J());function wP(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function nz(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wP(Object(t),!0).forEach(function(n){(0,OP.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function BP(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=az(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function az(e,r){if(e){if(typeof e=="string")return CP(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CP(e,r)}}function CP(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Gl(e,r){var t=r?.globalFeatureId;return t!==void 0?iz(e,t):sz(e,r?.type)}function iz(e,r){var t=IP(e),n=BP(t),a;try{for(n.s();!(a=n.n()).done;){for(var i=a.value,s=0,o=i.featureIds.value[0],u=0;u<i.featureIds.value.length;u++){var f=i.featureIds.value[u];if(f!==o){if(r===i.globalFeatureIds.value[s])return Dl(i,s,u);s=u,o=f}}if(r===i.globalFeatureIds.value[s])return Dl(i,s,i.featureIds.value.length)}}catch(l){n.e(l)}finally{n.f()}throw new Error("featureId:".concat(r," not found"))}function sz(e,r){var t=IP(e,r);return oz(t)}function PP(e,r,t){switch(e.type){case"Point":return cz(e,r,t);case"LineString":return lz(e,r,t);case"Polygon":return RP(e,r,t);default:var n=e;throw new Error("Unsupported geometry type: ".concat(n?.type))}}function IP(e,r){var t=Boolean(e.points||e.lines||e.polygons);if(!t)return e.type=r||hz(e),[e];var n=[];return e.points&&(e.points.type="Point",n.push(e.points)),e.lines&&(e.lines.type="LineString",n.push(e.lines)),e.polygons&&(e.polygons.type="Polygon",n.push(e.polygons)),n}function oz(e){var r=[],t=BP(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(a.featureIds.value.length!==0){for(var i=0,s=a.featureIds.value[0],o=0;o<a.featureIds.value.length;o++){var u=a.featureIds.value[o];u!==s&&(r.push(Dl(a,i,o)),i=o,s=u)}r.push(Dl(a,i,a.featureIds.value.length))}}}catch(f){t.e(f)}finally{t.f()}return r}function Dl(e,r,t){var n=PP(e,r,t),a=fz(e,r,t),i=uz(e,r,t);return nz({type:"Feature",geometry:n,properties:a},i)}function uz(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0;return e.fields&&e.fields[e.featureIds.value[r]]}function fz(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0,n=Object.assign({},e.properties[e.featureIds.value[r]]);for(var a in e.numericProps)n[a]=e.numericProps[a].value[r];return n}function RP(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1/0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,n=e.positions,a=e.polygonIndices.value.filter(function(y){return y>=r&&y<=t}),i=e.primitivePolygonIndices.value.filter(function(y){return y>=r&&y<=t}),s=a.length>2;if(!s){for(var o=[],u=0;u<i.length-1;u++){var f=i[u],l=i[u+1],c=Nl(n,f,l);o.push(c)}return{type:"Polygon",coordinates:o}}for(var h=[],d=0;d<a.length-1;d++){var p=a[d],v=a[d+1],g=RP(e,p,v).coordinates;h.push(g)}return{type:"MultiPolygon",coordinates:h}}function lz(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1/0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,n=e.positions,a=e.pathIndices.value.filter(function(l){return l>=r&&l<=t}),i=a.length>2;if(!i){var s=Nl(n,a[0],a[1]);return{type:"LineString",coordinates:s}}for(var o=[],u=0;u<a.length-1;u++){var f=Nl(n,a[u],a[u+1]);o.push(f)}return{type:"MultiLineString",coordinates:o}}function cz(e,r,t){var n=e.positions,a=Nl(n,r,t),i=a.length>1;return i?{type:"MultiPoint",coordinates:a}:{type:"Point",coordinates:a[0]}}function Nl(e,r,t){r=r||0,t=t||e.value.length/e.size;for(var n=[],a=r;a<t;a++){for(var i=Array(),s=a*e.size;s<(a+1)*e.size;s++)i.push(Number(e.value[s]));n.push(i)}return n}function hz(e){return e.pathIndices?"LineString":e.polygonIndices?"Polygon":"Point"}var R0=m(UP());var KP=m(z());var qP=m(z()),JP=m(q());var VP=m(z()),zP=m(q());function jP(e){var r=e.length;if(r<=1)return[e];for(var t=[],n,a,i=0;i<r;i++){var s=Bz(e[i]);s!==0&&(a===void 0&&(a=s<0),a===s<0?(n&&t.push(n),n=[e[i]]):n&&n.push(e[i]))}return n&&t.push(n),t}function Bz(e){for(var r=0,t=0,n=e.length-1,a,i;t<e.length;n=t++)a=e[t],i=e[n],r+=(i[0]-a[0])*(a[1]+i[1]);return r}function HP(e,r,t){r&&t&&(e===1?r.id=t.readVarint():e===2?Pz(t,r):e===3?r.type=t.readVarint():e===4&&(r._geometry=t.pos))}function Pz(e,r){for(var t=e.readVarint()+e.pos;e.pos<t;){var n=r._keys[e.readVarint()],a=r._values[e.readVarint()];r.properties[n]=a}}var WP=function(){function e(r,t,n,a,i){(0,VP.default)(this,e),b(this,"properties",void 0),b(this,"extent",void 0),b(this,"type",void 0),b(this,"id",void 0),b(this,"_pbf",void 0),b(this,"_geometry",void 0),b(this,"_keys",void 0),b(this,"_values",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=r,this._geometry=-1,this._keys=a,this._values=i,r.readFields(HP,this,t)}return(0,zP.default)(e,[{key:"loadGeometry",value:function(){var t=this._pbf;t.pos=this._geometry;for(var n=t.readVarint()+t.pos,a=1,i=0,s=0,o=0,u=[],f;t.pos<n;){if(i<=0){var l=t.readVarint();a=l&7,i=l>>3}if(i--,a===1||a===2)s+=t.readSVarint(),o+=t.readSVarint(),a===1&&(f&&u.push(f),f=[]),f&&f.push([s,o]);else if(a===7)f&&f.push(f[0].slice());else throw new Error("unknown command ".concat(a))}return f&&u.push(f),u}},{key:"bbox",value:function(){var t=this._pbf;t.pos=this._geometry;for(var n=t.readVarint()+t.pos,a=1,i=0,s=0,o=0,u=1/0,f=-1/0,l=1/0,c=-1/0;t.pos<n;){if(i<=0){var h=t.readVarint();a=h&7,i=h>>3}if(i--,a===1||a===2)s+=t.readSVarint(),o+=t.readSVarint(),s<u&&(u=s),s>f&&(f=s),o<l&&(l=o),o>c&&(c=o);else if(a!==7)throw new Error("unknown command ".concat(a))}return[u,l,f,c]}},{key:"_toGeoJSON",value:function(t){var n=this.loadGeometry(),a=e.types[this.type],i,s;switch(this.type){case 1:var o=[];for(i=0;i<n.length;i++)o[i]=n[i][0];n=o,t(n,this);break;case 2:for(i=0;i<n.length;i++)t(n[i],this);break;case 3:for(n=jP(n),i=0;i<n.length;i++)for(s=0;s<n[i].length;s++)t(n[i][s],this);break}n.length===1?n=n[0]:a="Multi".concat(a);var u={type:"Feature",geometry:{type:a,coordinates:n},properties:this.properties};return this.id!==null&&(u.id=this.id),u}},{key:"toGeoJSON",value:function(t){if(typeof t=="function")return this._toGeoJSON(t);var n=t.x,a=t.y,i=t.z,s=this.extent*Math.pow(2,i),o=this.extent*n,u=this.extent*a;function f(l){for(var c=0;c<l.length;c++){var h=l[c];h[0]=(h[0]+o)*360/s-180;var d=180-(h[1]+u)*360/s;h[1]=360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}}return this._toGeoJSON(f)}}],[{key:"types",get:function(){return["Unknown","Point","LineString","Polygon"]}}]),e}();var XP=function(){function e(r,t){(0,qP.default)(this,e),b(this,"version",void 0),b(this,"name",void 0),b(this,"extent",void 0),b(this,"length",void 0),b(this,"_pbf",void 0),b(this,"_keys",void 0),b(this,"_values",void 0),b(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Iz,this,t),this.length=this._features.length}return(0,JP.default)(e,[{key:"feature",value:function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var n=this._pbf.readVarint()+this._pbf.pos;return new WP(this._pbf,n,this.extent,this._keys,this._values)}}]),e}();function Iz(e,r,t){r&&t&&(e===15?r.version=t.readVarint():e===1?r.name=t.readString():e===5?r.extent=t.readVarint():e===2?r._features.push(t.pos):e===3?r._keys.push(t.readString()):e===4&&r._values.push(Rz(t)))}function Rz(e){for(var r=null,t=e.readVarint()+e.pos;e.pos<t;){var n=e.readVarint()>>3;r=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null}return r}var YP=function e(r,t){(0,KP.default)(this,e),b(this,"layers",void 0),this.layers=r.readFields(Lz,{},t)};function Lz(e,r,t){if(e===3&&t){var n=new XP(t,t.readVarint()+t.pos);n.length&&r&&(r[n.name]=n)}}var cI=m(z());var uI=m(z()),fI=m(q());var aI=m(J()),iI=m(z()),sI=m(q());function QP(e){var r=e.indices.length,t="Polygon";if(r<=1)return{type:t,data:e.data,areas:[[an(e.data)]],indices:[e.indices]};for(var n=[],a=[],i=[],s=[],o,u=0,f,l=0,c;l<r;l++){c=e.indices[l]-u,f=e.indices[l+1]-u||e.data.length;var h=e.data.slice(c,f),d=an(h);if(d===0){var p=e.data.slice(0,c),v=e.data.slice(f);e.data=p.concat(v),u+=f-c;continue}o===void 0&&(o=d<0),o===d<0?(s.length&&(n.push(i),a.push(s)),s=[c],i=[d]):(i.push(d),s.push(c))}return i&&n.push(i),s.length&&a.push(s),{type:t,areas:n,indices:a,data:e.data}}function $P(e,r,t,n){for(var a=0,i=e.length;a<i;a+=2){e[a]=(e[a]+r)*360/n-180;var s=180-(e[a+1]+t)*360/n;e[a+1]=360/Math.PI*Math.atan(Math.exp(s*Math.PI/180))-90}}function ZP(e,r,t){r&&t&&(e===1?r.id=t.readVarint():e===2?Fz(t,r):e===3?r.type=t.readVarint():e===4&&(r._geometry=t.pos))}function Fz(e,r){for(var t=e.readVarint()+e.pos;e.pos<t;){var n=r._keys[e.readVarint()],a=r._values[e.readVarint()];r.properties[n]=a}}function kz(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Dz(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function Dz(e,r){if(e){if(typeof e=="string")return eI(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return eI(e,r)}}function eI(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function tI(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function rI(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?tI(Object(t),!0).forEach(function(n){(0,aI.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nI,Da,O0,Hl,B0,P0,xo;var oI=function(){function e(r,t,n,a,i,s){(0,iI.default)(this,e),b(this,"properties",void 0),b(this,"extent",void 0),b(this,"type",void 0),b(this,"id",void 0),b(this,"_pbf",void 0),b(this,"_geometry",void 0),b(this,"_keys",void 0),b(this,"_values",void 0),b(this,"_geometryInfo",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=r,this._geometry=-1,this._keys=a,this._values=i,this._geometryInfo=s,r.readFields(ZP,this,t)}return(0,sI.default)(e,[{key:"loadGeometry",value:function(){var t=this._pbf;t.pos=this._geometry,nI=t.readVarint()+t.pos,Da=1,Hl=0,B0=0,P0=0,xo=0;for(var n=[],a=[];t.pos<nI;)if(Hl<=0&&(O0=t.readVarint(),Da=O0&7,Hl=O0>>3),Hl--,Da===1||Da===2)B0+=t.readSVarint(),P0+=t.readSVarint(),Da===1&&n.push(xo),a.push(B0,P0),xo+=2;else if(Da===7){if(xo>0){var i=n[n.length-1];a.push(a[i],a[i+1]),xo+=2}}else throw new Error("unknown command ".concat(Da));return{data:a,indices:n}}},{key:"_toBinaryCoordinates",value:function(t){var n=this.loadGeometry(),a;t(n.data,this);var i=2;switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=n.indices.length,a=rI({type:"Point"},n);break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=n.indices.length,this._geometryInfo.linePositionsCount+=n.data.length/i,a=rI({type:"LineString"},n);break;case 3:a=QP(n),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=a.indices.length;var s=kz(a.indices),o;try{for(s.s();!(o=s.n()).done;){var u=o.value;this._geometryInfo.polygonRingsCount+=u.length}}catch(l){s.e(l)}finally{s.f()}this._geometryInfo.polygonPositionsCount+=a.data.length/i;break;default:throw new Error("Invalid geometry type: ".concat(this.type))}var f={type:"Feature",geometry:a,properties:this.properties};return this.id!==null&&(f.id=this.id),f}},{key:"toBinaryCoordinates",value:function(t){if(typeof t=="function")return this._toBinaryCoordinates(t);var n=t.x,a=t.y,i=t.z,s=this.extent*Math.pow(2,i),o=this.extent*n,u=this.extent*a;return this._toBinaryCoordinates(function(f){return $P(f,o,u,s)})}}]),e}();var lI=function(){function e(r,t){(0,uI.default)(this,e),b(this,"version",void 0),b(this,"name",void 0),b(this,"extent",void 0),b(this,"length",void 0),b(this,"_pbf",void 0),b(this,"_keys",void 0),b(this,"_values",void 0),b(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Nz,this,t),this.length=this._features.length}return(0,fI.default)(e,[{key:"feature",value:function(t,n){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var a=this._pbf.readVarint()+this._pbf.pos;return new oI(this._pbf,a,this.extent,this._keys,this._values,n)}}]),e}();function Nz(e,r,t){r&&t&&(e===15?r.version=t.readVarint():e===1?r.name=t.readString():e===5?r.extent=t.readVarint():e===2?r._features.push(t.pos):e===3?r._keys.push(t.readString()):e===4&&r._values.push(Gz(t)))}function Gz(e){for(var r=null,t=e.readVarint()+e.pos;e.pos<t;){var n=e.readVarint()>>3;r=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null}return r}var hI=function e(r,t){(0,cI.default)(this,e),b(this,"layers",void 0),this.layers=r.readFields(Uz,{},t)};function Uz(e,r,t){if(e===3&&t){var n=new lI(t,t.readVarint()+t.pos);n.length&&r&&(r[n.name]=n)}}function Vl(e,r){var t,n,a=Hz(r),i=(r==null||(t=r.gis)===null||t===void 0?void 0:t.format)||(r==null||(n=r.mvt)===null||n===void 0?void 0:n.shape);switch(i){case"columnar-table":return{shape:"columnar-table",data:I0(e,a)};case"geojson-row-table":{var s={shape:"geojson-row-table",data:dI(e,a)};return s}case"geojson":return dI(e,a);case"binary-geometry":return I0(e,a);case"binary":return I0(e,a);default:throw new Error(i)}}function I0(e,r){var t=jz(e,r),n=(0,pI.default)(t,2),a=n[0],i=n[1],s=E0(a,i);return s.byteLength=e.byteLength,s}function jz(e,r){var t=[],n={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(e.byteLength<=0)return[t,n];var a=new hI(new R0.default(e)),i=r&&Array.isArray(r.layers)?r.layers:Object.keys(a.layers);return i.forEach(function(s){var o=a.layers[s];if(o)for(var u=0;u<o.length;u++){var f=o.feature(u,n),l=zz(f,r,s);t.push(l)}}),[t,n]}function dI(e,r){if(e.byteLength<=0)return[];var t=[],n=new YP(new R0.default(e)),a=Array.isArray(r.layers)?r.layers:Object.keys(n.layers);return a.forEach(function(i){var s=n.layers[i];if(s)for(var o=0;o<s.length;o++){var u=s.feature(o),f=Vz(u,r,i);t.push(f)}}),t}function Hz(e){var r;if(!(e!=null&&e.mvt))throw new Error("mvt options required");var t=((r=e.mvt)===null||r===void 0?void 0:r.coordinates)==="wgs84",n=e.mvt.tileIndex,a=n&&Number.isFinite(n.x)&&Number.isFinite(n.y)&&Number.isFinite(n.z);if(t&&!a)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property");return e.mvt}function Vz(e,r,t){var n=e.toGeoJSON(r.coordinates==="wgs84"?r.tileIndex:Wz);return r.layerProperty&&(n.properties[r.layerProperty]=t),n}function zz(e,r,t){var n=e.toBinaryCoordinates(r.coordinates==="wgs84"?r.tileIndex:qz);return r.layerProperty&&n.properties&&(n.properties[r.layerProperty]=t),n}function Wz(e,r){for(var t=r.extent,n=0;n<e.length;n++){var a=e[n];a[0]/=t,a[1]/=t}}function qz(e,r){for(var t=r.extent,n=0,a=e.length;n<a;++n)e[n]/=t}function mI(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function vI(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mI(Object(t),!0).forEach(function(n){(0,yI.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Jz="3.3.1",Xz={mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}},zl={name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:Jz,extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:Xz},Kz=vI(vI({},zl),{},{parse:function(){var e=(0,gI.default)(L0.default.mark(function t(n,a){return L0.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Vl(n,a));case 1:case"end":return s.stop()}},t)}));function r(t,n){return e.apply(this,arguments)}return r}(),parseSync:Vl,binary:!0});var AI=m(J()),F0=m(ve());function bI(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function _I(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?bI(Object(t),!0).forEach(function(n){(0,AI.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Yz={Point:xI,MultiPoint:Qz,LineString:TI,MultiLineString:$z,Polygon:MI,MultiPolygon:Zz};function xI(e,r,t){var n=(0,F0.default)(e,2),a=n[0],i=n[1],s=(0,F0.default)(r,2),o=s[0],u=s[1],f=mn(o[0],u[0],a),l=mn(o[1],u[1],i);return t.unprojectFlat([f,l])}function k0(e,r,t){return e.map(function(n){return xI(n,r,t)})}function Qz(e,r,t){return k0(e,r,t)}function TI(e,r,t){return k0(e,r,t)}function $z(e,r,t){return e.map(function(n){return TI(n,r,t)})}function MI(e,r,t){return e.map(function(n){return k0(n,r,t)})}function Zz(e,r,t){return e.map(function(n){return MI(n,r,t)})}function EI(e,r,t){var n=t.projectFlat([r.west,r.north]),a=t.projectFlat([r.east,r.south]),i=[n,a];return _I(_I({},e),{},{coordinates:Yz[e.type](e.coordinates,i,t)})}function e7(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=t7(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function t7(e,r){if(e){if(typeof e=="string")return SI(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return SI(e,r)}}function SI(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var r7=["points","lines","polygons"];function D0(e,r,t,n){var a=e7(r7),i;try{for(a.s();!(i=a.n()).done;){var s=i.value,o=e[s]&&n7(e[s],r,t,n);if(o>=0)return o}}catch(u){a.e(u)}finally{a.f()}return-1}function n7(e,r,t,n){var a=e.featureIds.value;if(!a.length)return-1;var i=0,s=a[a.length-1]+1;if(n){var o=a7(e,n);if(o)i=o[0],s=o[1]+1;else return-1}var u=-1;if(r in e.numericProps){var f=e.numericProps[r].value.findIndex(function(l,c){return l===t&&a[c]>=i&&a[c]<s});return f>=0?e.globalFeatureIds.value[f]:-1}else r?u=wI(e.properties,function(l){return l[r]===t},i,s):e.fields&&(u=wI(e.fields,function(l){return l.id===t},i,s));return u>=0?i7(e,u):-1}function a7(e,r){if(!e.__layers){for(var t={},n=e.properties,a=0;a<n.length;a++){var i=n[a],s=i.layerName;s&&(t[s]?t[s][1]=a:t[s]=[a,a])}e.__layers=t}return e.__layers[r]}function i7(e,r){if(!e.__ids){for(var t=[],n=e.featureIds.value,a=e.globalFeatureIds.value,i=0;i<n.length;i++)t[n[i]]=a[i];e.__ids=t}return e.__ids[r]}function wI(e,r,t,n){for(var a=t;a<n;a++)if(r(e[a],a))return a;return-1}function s7(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=o7(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(f){throw f},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,o;return{s:function(){t=t.call(e)},n:function(){var f=t.next();return i=f.done,f},e:function(f){s=!0,o=f},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}}}function o7(e,r){if(e){if(typeof e=="string")return CI(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CI(e,r)}}function CI(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function u7(e){var r=f7();return function(){var n=(0,Br.default)(e),a;if(r){var i=(0,Br.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,NI.default)(this,a)}}function f7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function OI(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Gn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?OI(Object(t),!0).forEach(function(n){(0,Wl.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N0=512,l7=Gn(Gn({},j0.GeoJsonLayer.defaultProps),{},{data:An,onDataLoad:{type:"function",value:null,optional:!0,compare:!1},uniqueIdProperty:"",highlightedFeatureId:null,loaders:[zl],binary:!0}),Jl=function(e){(0,DI.default)(t,e);var r=u7(t);function t(){return(0,FI.default)(this,t),r.apply(this,arguments)}return(0,kI.default)(t,[{key:"initializeState",value:function(){(0,Nn.default)((0,Br.default)(t.prototype),"initializeState",this).call(this);var a=this.context.viewport.resolution!==void 0?!1:this.props.binary;this.setState({binary:a,data:null,tileJSON:null})}},{key:"isLoaded",get:function(){return this.state&&this.state.data&&this.state.tileset&&(0,Nn.default)((0,Br.default)(t.prototype),"isLoaded",this)}},{key:"updateState",value:function(a){var i,s=a.props,o=a.oldProps,u=a.context,f=a.changeFlags;f.dataChanged&&this._updateTileData(),(i=this.state)!==null&&i!==void 0&&i.data&&((0,Nn.default)((0,Br.default)(t.prototype),"updateState",this).call(this,{props:s,oldProps:o,context:u,changeFlags:f}),this._setWGS84PropertyForTiles());var l=s.highlightColor;l!==o.highlightColor&&Array.isArray(l)&&this.setState({highlightColor:l})}},{key:"_updateTileData",value:function(){var n=(0,LI.default)(U0.default.mark(function i(){var s,o,u,f,l;return U0.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=this.props.data,o=null,!(typeof s=="string"&&!Qd(s))){h.next=18;break}return u=this.props,f=u.onDataLoad,l=u.fetch,this.setState({data:null,tileJSON:null}),h.prev=5,h.next=8,l(s,{propName:"data",layer:this,loaders:[]});case 8:o=h.sent,h.next=15;break;case 11:h.prev=11,h.t0=h.catch(5),this.raiseError(h.t0,"loading TileJSON"),s=null;case 15:f&&f(o,{propName:"data",layer:this}),h.next=19;break;case 18:s.tilejson&&(o=s);case 19:o&&(s=o.tiles),this.setState({data:s,tileJSON:o});case 21:case"end":return h.stop()}},i,this,[[5,11]])}));function a(){return n.apply(this,arguments)}return a}()},{key:"_getTilesetOptions",value:function(){var a=(0,Nn.default)((0,Br.default)(t.prototype),"_getTilesetOptions",this).call(this),i=this.state.tileJSON,s=this.props,o=s.minZoom,u=s.maxZoom;return i&&(Number.isFinite(i.minzoom)&&i.minzoom>o&&(a.minZoom=i.minzoom),Number.isFinite(i.maxzoom)&&(!Number.isFinite(u)||i.maxzoom<u)&&(a.maxZoom=i.maxzoom)),a}},{key:"renderLayers",value:function(){var a;return(a=this.state)!==null&&a!==void 0&&a.data?(0,Nn.default)((0,Br.default)(t.prototype),"renderLayers",this).call(this):null}},{key:"getTileData",value:function(a){var i,s=this.state,o=s.data,u=s.binary,f=a.index,l=a.signal,c=Tr(o,a);if(!c)return Promise.reject("Invalid URL");var h=this.getLoadOptions(),d=this.props.fetch;return h=Gn(Gn({},h),{},{mimeType:"application/x-protobuf",mvt:Gn(Gn({},(i=h)===null||i===void 0?void 0:i.mvt),{},{coordinates:this.context.viewport.resolution?"wgs84":"local",tileIndex:f}),gis:u?{format:"binary"}:{}}),d(c,{propName:"data",layer:this,loadOptions:h,signal:l})}},{key:"renderSubLayers",value:function(a){var i=a.tile.index,s=i.x,o=i.y,u=i.z,f=Math.pow(2,u),l=N0/f,c=-l,h=N0*s/f,d=N0*(1-o/f),p=new ae().scale([l,c,1]);a.autoHighlight=!1,this.context.viewport.resolution||(a.modelMatrix=p,a.coordinateOrigin=[h,d,0],a.coordinateSystem=ql.COORDINATE_SYSTEM.CARTESIAN,a.extensions=[].concat((0,RI.default)(a.extensions||[]),[new GI.ClipExtension]));var v=(0,Nn.default)((0,Br.default)(t.prototype),"renderSubLayers",this).call(this,a);return this.state.binary&&!(v instanceof j0.GeoJsonLayer)&&ql.log.warn("renderSubLayers() must return GeoJsonLayer when using binary:true")(),v}},{key:"_updateAutoHighlight",value:function(a){var i=this.props.uniqueIdProperty,s=this.state,o=s.hoveredFeatureId,u=s.hoveredFeatureLayerName,f=a.object,l,c;f&&(l=G0(f,i),c=BI(f));var h=this.props.highlightColor;typeof h=="function"&&(h=h(a)),(o!==l||u!==c)&&this.setState({highlightColor:h,hoveredFeatureId:l,hoveredFeatureLayerName:c})}},{key:"getPickingInfo",value:function(a){var i=(0,Nn.default)((0,Br.default)(t.prototype),"getPickingInfo",this).call(this,a),s=Boolean(this.context.viewport.resolution);if(this.state.binary&&i.index!==-1){var o=a.sourceLayer.props.data;i.object=Gl(o,{globalFeatureId:i.index})}return i.object&&!s&&(i.object=II(i.object,i.tile.bbox,this.context.viewport)),i}},{key:"getSubLayerPropsByTile",value:function(a){return{highlightedObjectIndex:this.getHighlightedObjectIndex(a),highlightColor:this.state.highlightColor}}},{key:"getHighlightedObjectIndex",value:function(a){var i=this.state,s=i.hoveredFeatureId,o=i.hoveredFeatureLayerName,u=i.binary,f=this.props,l=f.uniqueIdProperty,c=f.highlightedFeatureId,h=a.content,d=PI(c),p=PI(s)||d;if(!p)return-1;var v=d?c:s;return Array.isArray(h)?h.findIndex(function(g){var y=G0(g,l)===v,_=d||BI(g)===o;return y&&_}):h&&u?D0(h,l,v,d?"":o):-1}},{key:"_pickObjects",value:function(a){var i=this.context,s=i.deck,o=i.viewport,u=o.width,f=o.height,l=o.x,c=o.y,h=[this.id];return s.pickObjects({x:l,y:c,width:u,height:f,layerIds:h,maxObjects:a})}},{key:"getRenderedFeatures",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this._pickObjects(a),s=new Set,o=[],u=s7(i),f;try{for(u.s();!(f=u.n()).done;){var l=f.value,c=G0(l.object,this.props.uniqueIdProperty);c===void 0?o.push(l.object):s.has(c)||(s.add(c),o.push(l.object))}}catch(h){u.e(h)}finally{u.f()}return o}},{key:"_setWGS84PropertyForTiles",value:function(){var a=this,i="dataInWGS84",s=this.state.tileset;s.selectedTiles.forEach(function(o){o.hasOwnProperty(i)||Object.defineProperty(o,i,{get:function(){if(!o.content)return null;if(a.state.binary&&Array.isArray(o.content)&&!o.content.length)return[];var f=o.bbox;if(o._contentWGS84===void 0&&$d(f)){var l=a.state.binary?Gl(o.content):o.content;o._contentWGS84=l.map(function(c){return II(c,f,a.context.viewport)})}return o._contentWGS84}})})}}]),t}(Wr);(0,Wl.default)(Jl,"layerName","MVTLayer");(0,Wl.default)(Jl,"defaultProps",l7);function G0(e,r){if(e.properties&&r)return e.properties[r];if("id"in e)return e.id}function BI(e){var r;return((r=e.properties)===null||r===void 0?void 0:r.layerName)||null}function PI(e){return e!=null&&e!==""}function II(e,r,t){var n=Gn(Gn({},e),{},{geometry:{type:e.geometry.type}});return Object.defineProperty(n.geometry,"coordinates",{get:function(){var i=EI(e.geometry,r,t);return i.coordinates}}),n}var zI=m(z()),WI=m(q()),qI=m(Ce()),JI=m(Oe()),H0=m(Me()),V0=m(J());var jI=m(ve()),UI="0123456789bcdefghjkmnpqrstuvwxyz",HI={};for(To=0;To<UI.length;To++)HI[UI.charAt(To)]=To;var To,c7=-90,h7=90,d7=-180,p7=180;function m7(e){for(var r=!0,t=h7,n=c7,a=p7,i=d7,s,o=0,u=0,f=e.length;u<f;u++){var l=e[u].toLowerCase();o=HI[l];for(var c=4;c>=0;c--){var h=o>>c&1;r?(s=(a+i)/2,h===1?i=s:a=s):(s=(t+n)/2,h===1?n=s:t=s),r=!r}}return[n,i,t,a]}function VI(e){var r=m7(e),t=(0,jI.default)(r,4),n=t[0],a=t[1],i=t[2],s=t[3];return[s,i,s,n,a,n,a,i,s,i]}function v7(e){var r=g7();return function(){var n=(0,H0.default)(e),a;if(r){var i=(0,H0.default)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return(0,JI.default)(this,a)}}function g7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y7={getGeohash:{type:"accessor",value:function(r){return r.geohash}}},Xl=function(e){(0,qI.default)(t,e);var r=v7(t);function t(){return(0,zI.default)(this,t),r.apply(this,arguments)}return(0,WI.default)(t,[{key:"indexToBounds",value:function(){var a=this.props,i=a.data,s=a.getGeohash;return{data:i,_normalize:!1,positionFormat:"XY",getPolygon:function(u,f){return VI(s(u,f))}}}}]),t}(Jt);(0,V0.default)(Xl,"layerName","GeohashLayer");(0,V0.default)(Xl,"defaultProps",y7);return ZI(Mo);})();
